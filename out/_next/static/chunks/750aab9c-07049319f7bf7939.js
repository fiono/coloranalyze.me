(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{2535:function(e){/*!
 * surveyjs - Survey JavaScript library v1.9.114
 * Copyright (c) 2015-2023 Devsoft Baltic OÃœ  - http://surveyjs.io/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */e.exports=function(e){var t={};function __nested_webpack_require_749__(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,__nested_webpack_require_749__),n.l=!0,n.exports}return __nested_webpack_require_749__.m=e,__nested_webpack_require_749__.c=t,__nested_webpack_require_749__.d=function(e,t,o){__nested_webpack_require_749__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},__nested_webpack_require_749__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__nested_webpack_require_749__.t=function(e,t){if(1&t&&(e=__nested_webpack_require_749__(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(__nested_webpack_require_749__.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__nested_webpack_require_749__.d(o,n,(function(t){return e[t]}).bind(null,n));return o},__nested_webpack_require_749__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __nested_webpack_require_749__.d(t,"a",t),t},__nested_webpack_require_749__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_749__.p="",__nested_webpack_require_749__(__nested_webpack_require_749__.s="./src/entries/core.ts")}({"./node_modules/signature_pad/dist/signature_pad.js":function(e,t,o){"use strict";o.r(t),o.d(t,"default",function(){return SignaturePad});/*!
 * Signature Pad v4.1.6 | https://github.com/szimek/signature_pad
 * (c) 2023 Szymon Nowak | Released under the MIT license
 */let Point=class Point{constructor(e,t,o,n){if(isNaN(e)||isNaN(t))throw Error(`Point is invalid: (${e}, ${t})`);this.x=+e,this.y=+t,this.pressure=o||0,this.time=n||Date.now()}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}equals(e){return this.x===e.x&&this.y===e.y&&this.pressure===e.pressure&&this.time===e.time}velocityFrom(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}};let Bezier=class Bezier{constructor(e,t,o,n,r,i){this.startPoint=e,this.control2=t,this.control1=o,this.endPoint=n,this.startWidth=r,this.endWidth=i}static fromPoints(e,t){let o=this.calculateControlPoints(e[0],e[1],e[2]).c2,n=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new Bezier(e[1],o,n,e[2],t.start,t.end)}static calculateControlPoints(e,t,o){let n=e.x-t.x,r=e.y-t.y,i=t.x-o.x,s=t.y-o.y,a={x:(e.x+t.x)/2,y:(e.y+t.y)/2},l={x:(t.x+o.x)/2,y:(t.y+o.y)/2},u=Math.sqrt(n*n+r*r),c=Math.sqrt(i*i+s*s),p=a.x-l.x,d=a.y-l.y,h=c/(u+c),g={x:l.x+p*h,y:l.y+d*h},f=t.x-g.x,y=t.y-g.y;return{c1:new Point(a.x+f,a.y+y),c2:new Point(l.x+f,l.y+y)}}length(){let e,t;let o=0;for(let n=0;n<=10;n+=1){let r=n/10,i=this.point(r,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),s=this.point(r,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(n>0){let n=i-e,r=s-t;o+=Math.sqrt(n*n+r*r)}e=i,t=s}return o}point(e,t,o,n,r){return t*(1-e)*(1-e)*(1-e)+3*o*(1-e)*(1-e)*e+3*n*(1-e)*e*e+r*e*e*e}};let SignatureEventTarget=class SignatureEventTarget{constructor(){try{this._et=new EventTarget}catch(e){this._et=document}}addEventListener(e,t,o){this._et.addEventListener(e,t,o)}dispatchEvent(e){return this._et.dispatchEvent(e)}removeEventListener(e,t,o){this._et.removeEventListener(e,t,o)}};function throttle(e,t=250){let o,n,r,i=0,s=null,later=()=>{i=Date.now(),s=null,o=e.apply(n,r),s||(n=null,r=[])};return function(...a){let l=Date.now(),u=t-(l-i);return n=this,r=a,u<=0||u>t?(s&&(clearTimeout(s),s=null),i=l,o=e.apply(n,r),s||(n=null,r=[])):s||(s=window.setTimeout(later,u)),o}}let SignaturePad=class SignaturePad extends SignatureEventTarget{constructor(e,t={}){super(),this.canvas=e,this._drawningStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=e=>{1===e.buttons&&(this._drawningStroke=!0,this._strokeBegin(e))},this._handleMouseMove=e=>{this._drawningStroke&&this._strokeMoveUpdate(e)},this._handleMouseUp=e=>{1===e.buttons&&this._drawningStroke&&(this._drawningStroke=!1,this._strokeEnd(e))},this._handleTouchStart=e=>{if(e.cancelable&&e.preventDefault(),1===e.targetTouches.length){let t=e.changedTouches[0];this._strokeBegin(t)}},this._handleTouchMove=e=>{e.cancelable&&e.preventDefault();let t=e.targetTouches[0];this._strokeMoveUpdate(t)},this._handleTouchEnd=e=>{let t=e.target===this.canvas;if(t){e.cancelable&&e.preventDefault();let t=e.changedTouches[0];this._strokeEnd(t)}},this._handlePointerStart=e=>{this._drawningStroke=!0,e.preventDefault(),this._strokeBegin(e)},this._handlePointerMove=e=>{this._drawningStroke&&(e.preventDefault(),this._strokeMoveUpdate(e))},this._handlePointerEnd=e=>{this._drawningStroke&&(e.preventDefault(),this._drawningStroke=!1,this._strokeEnd(e))},this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.dotSize=t.dotSize||0,this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=t.compositeOperation||"source-over",this._strokeMoveUpdate=this.throttle?throttle(SignaturePad.prototype._strokeUpdate,this.throttle):SignaturePad.prototype._strokeUpdate,this._ctx=e.getContext("2d"),this.clear(),this.on()}clear(){let{_ctx:e,canvas:t}=this;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(e,t={}){return new Promise((o,n)=>{let r=new Image,i=t.ratio||window.devicePixelRatio||1,s=t.width||this.canvas.width/i,a=t.height||this.canvas.height/i,l=t.xOffset||0,u=t.yOffset||0;this._reset(this._getPointGroupOptions()),r.onload=()=>{this._ctx.drawImage(r,l,u,s,a),o()},r.onerror=e=>{n(e)},r.crossOrigin="anonymous",r.src=e,this._isEmpty=!1})}toDataURL(e="image/png",t){return"image/svg+xml"===e?("object"!=typeof t&&(t=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(t))}`):("number"!=typeof t&&(t=void 0),this.canvas.toDataURL(e,t))}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";let e=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!e?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(e,{clear:t=!0}={}){t&&this.clear(),this._fromData(e,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(e)}toData(){return this._data}_getPointGroupOptions(e){return{penColor:e&&"penColor"in e?e.penColor:this.penColor,dotSize:e&&"dotSize"in e?e.dotSize:this.dotSize,minWidth:e&&"minWidth"in e?e.minWidth:this.minWidth,maxWidth:e&&"maxWidth"in e?e.maxWidth:this.maxWidth,velocityFilterWeight:e&&"velocityFilterWeight"in e?e.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:e&&"compositeOperation"in e?e.compositeOperation:this.compositeOperation}}_strokeBegin(e){this.dispatchEvent(new CustomEvent("beginStroke",{detail:e}));let t=this._getPointGroupOptions(),o=Object.assign(Object.assign({},t),{points:[]});this._data.push(o),this._reset(t),this._strokeUpdate(e)}_strokeUpdate(e){if(0===this._data.length){this._strokeBegin(e);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:e}));let t=e.clientX,o=e.clientY,n=void 0!==e.pressure?e.pressure:void 0!==e.force?e.force:0,r=this._createPoint(t,o,n),i=this._data[this._data.length-1],s=i.points,a=s.length>0&&s[s.length-1],l=!!a&&r.distanceTo(a)<=this.minDistance,u=this._getPointGroupOptions(i);if(!a||!(a&&l)){let e=this._addPoint(r,u);a?e&&this._drawCurve(e,u):this._drawDot(r,u),s.push({time:r.time,x:r.x,y:r.y,pressure:r.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:e}))}_strokeEnd(e){this._strokeUpdate(e),this.dispatchEvent(new CustomEvent("endStroke",{detail:e}))}_handlePointerEvents(){this._drawningStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawningStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(e){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(e.minWidth+e.maxWidth)/2,this._ctx.fillStyle=e.penColor,this._ctx.globalCompositeOperation=e.compositeOperation}_createPoint(e,t,o){let n=this.canvas.getBoundingClientRect();return new Point(e-n.left,t-n.top,o,new Date().getTime())}_addPoint(e,t){let{_lastPoints:o}=this;if(o.push(e),o.length>2){3===o.length&&o.unshift(o[0]);let e=this._calculateCurveWidths(o[1],o[2],t),n=Bezier.fromPoints(o,e);return o.shift(),n}return null}_calculateCurveWidths(e,t,o){let n=o.velocityFilterWeight*t.velocityFrom(e)+(1-o.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(n,o),i={end:r,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=r,i}_strokeWidth(e,t){return Math.max(t.maxWidth/(e+1),t.minWidth)}_drawCurveSegment(e,t,o){let n=this._ctx;n.moveTo(e,t),n.arc(e,t,o,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(e,t){let o=this._ctx,n=e.endWidth-e.startWidth,r=2*Math.ceil(e.length());o.beginPath(),o.fillStyle=t.penColor;for(let o=0;o<r;o+=1){let i=o/r,s=i*i,a=s*i,l=1-i,u=l*l,c=u*l,p=c*e.startPoint.x;p+=3*u*i*e.control1.x+3*l*s*e.control2.x+a*e.endPoint.x;let d=c*e.startPoint.y;d+=3*u*i*e.control1.y+3*l*s*e.control2.y+a*e.endPoint.y;let h=Math.min(e.startWidth+a*n,t.maxWidth);this._drawCurveSegment(p,d,h)}o.closePath(),o.fill()}_drawDot(e,t){let o=this._ctx,n=t.dotSize>0?t.dotSize:(t.minWidth+t.maxWidth)/2;o.beginPath(),this._drawCurveSegment(e.x,e.y,n),o.closePath(),o.fillStyle=t.penColor,o.fill()}_fromData(e,t,o){for(let n of e){let{points:e}=n,r=this._getPointGroupOptions(n);if(e.length>1)for(let o=0;o<e.length;o+=1){let n=e[o],i=new Point(n.x,n.y,n.pressure,n.time);0===o&&this._reset(r);let s=this._addPoint(i,r);s&&t(s,r)}else this._reset(r),o(e[0],r)}}toSVG({includeBackgroundColor:e=!1}={}){let t=this._data,o=Math.max(window.devicePixelRatio||1,1),n=this.canvas.width/o,r=this.canvas.height/o,i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),i.setAttribute("viewBox",`0 0 ${n} ${r}`),i.setAttribute("width",n.toString()),i.setAttribute("height",r.toString()),e&&this.backgroundColor){let e=document.createElement("rect");e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("fill",this.backgroundColor),i.appendChild(e)}return this._fromData(t,(e,{penColor:t})=>{let o=document.createElement("path");if(!isNaN(e.control1.x)&&!isNaN(e.control1.y)&&!isNaN(e.control2.x)&&!isNaN(e.control2.y)){let n=`M ${e.startPoint.x.toFixed(3)},${e.startPoint.y.toFixed(3)} C ${e.control1.x.toFixed(3)},${e.control1.y.toFixed(3)} ${e.control2.x.toFixed(3)},${e.control2.y.toFixed(3)} ${e.endPoint.x.toFixed(3)},${e.endPoint.y.toFixed(3)}`;o.setAttribute("d",n),o.setAttribute("stroke-width",(2.25*e.endWidth).toFixed(3)),o.setAttribute("stroke",t),o.setAttribute("fill","none"),o.setAttribute("stroke-linecap","round"),i.appendChild(o)}},(e,{penColor:t,dotSize:o,minWidth:n,maxWidth:r})=>{let s=document.createElement("circle");s.setAttribute("r",(o>0?o:(n+r)/2).toString()),s.setAttribute("cx",e.x.toString()),s.setAttribute("cy",e.y.toString()),s.setAttribute("fill",t),i.appendChild(s)}),i.outerHTML}}},"./src/actions/action.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"createDropdownActionModel",function(){return createDropdownActionModel}),o.d(t,"createDropdownActionModelAdvanced",function(){return createDropdownActionModelAdvanced}),o.d(t,"getActionDropdownButtonTarget",function(){return getActionDropdownButtonTarget}),o.d(t,"BaseAction",function(){return d}),o.d(t,"Action",function(){return h}),o.d(t,"ActionDropdownViewModel",function(){return g});var n,r=o(/*! ../base */"./src/base.ts"),i=o(/*! ../surveyStrings */"./src/surveyStrings.ts"),s=o(/*! ../jsonobject */"./src/jsonobject.ts"),a=o(/*! ../list */"./src/list.ts"),l=o(/*! ../popup */"./src/popup.ts"),u=o(/*! ../utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),c=o(/*! ./container */"./src/actions/container.ts"),p=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};function createDropdownActionModel(e,t,o){return createDropdownActionModelAdvanced(e,t,t,o)}function createDropdownActionModelAdvanced(e,t,o,n){var r=new a.ListModel(t.items,function(e){s.hasTitle&&(s.title=e.title),t.onSelectionChanged(e),i.toggleVisibility()},t.allowSelection,t.selectedItem,t.onFilterStringChangedCallback);r.locOwner=n;var i=new l.PopupModel("sv-list",{model:r},null==o?void 0:o.verticalPosition,null==o?void 0:o.horizontalPosition,null==o?void 0:o.showPointer,null==o?void 0:o.isModal,null==o?void 0:o.onCancel,null==o?void 0:o.onApply,null==o?void 0:o.onHide,null==o?void 0:o.onShow,null==o?void 0:o.cssClass,null==o?void 0:o.title,function(){r.dispose()});i.displayMode=null==o?void 0:o.displayMode;var s=new h(Object.assign({},e,{component:"sv-action-bar-item-dropdown",popupModel:i,action:function(t,o){e.action&&e.action(),i.isFocusedContent=!o||r.showFilter,i.toggleVisibility(),r.scrollToSelectedItem()}}));return s.data=r,s}function getActionDropdownButtonTarget(e){return null==e?void 0:e.previousElementSibling}var d=function(e){function BaseAction(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconSize=24,t}return p(BaseAction,e),Object.defineProperty(BaseAction.prototype,"visible",{get:function(){return this.getVisible()},set:function(e){this.setVisible(e)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseAction.prototype,"enabled",{get:function(){return this.getEnabled()},set:function(e){this.setEnabled(e)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseAction.prototype,"component",{get:function(){return this.getComponent()},set:function(e){this.setComponent(e)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseAction.prototype,"locTitle",{get:function(){return this.getLocTitle()},set:function(e){this.setLocTitle(e)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseAction.prototype,"title",{get:function(){return this.getTitle()},set:function(e){this.setTitle(e)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseAction.prototype,"cssClasses",{get:function(){return this.cssClassesValue||c.defaultActionBarCss},set:function(e){this.cssClassesValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(BaseAction.prototype,"isVisible",{get:function(){return this.visible&&"popup"!==this.mode&&"removed"!==this.mode},enumerable:!1,configurable:!0}),Object.defineProperty(BaseAction.prototype,"disabled",{get:function(){return void 0!==this.enabled&&!this.enabled},enumerable:!1,configurable:!0}),Object.defineProperty(BaseAction.prototype,"canShrink",{get:function(){return!!this.iconName},enumerable:!1,configurable:!0}),Object.defineProperty(BaseAction.prototype,"hasTitle",{get:function(){return("small"!=this.mode&&(this.showTitle||void 0===this.showTitle)||!this.iconName)&&!!this.title},enumerable:!1,configurable:!0}),BaseAction.prototype.getActionBarItemTitleCss=function(){return new u.CssClassBuilder().append(this.cssClasses.itemTitle).append(this.cssClasses.itemTitleWithIcon,!!this.iconName).toString()},BaseAction.prototype.getActionBarItemCss=function(){return new u.CssClassBuilder().append(this.cssClasses.item).append(this.cssClasses.itemWithTitle,this.hasTitle).append(this.cssClasses.itemAsIcon,!this.hasTitle).append(this.cssClasses.itemActive,!!this.active).append(this.cssClasses.itemPressed,!!this.pressed).append(this.innerCss).toString()},BaseAction.prototype.getActionRootCss=function(){return new u.CssClassBuilder().append("sv-action").append(this.css).append("sv-action--space",this.needSpace).append("sv-action--hidden",!this.isVisible).toString()},BaseAction.prototype.getTooltip=function(){return this.tooltip||this.title},BaseAction.prototype.getIsTrusted=function(e){return e.originalEvent?e.originalEvent.isTrusted:e.isTrusted},__decorate([Object(s.property)()],BaseAction.prototype,"tooltip",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"showTitle",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"innerCss",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"active",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"pressed",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"data",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"popupModel",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"needSeparator",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"template",void 0),__decorate([Object(s.property)({defaultValue:"large"})],BaseAction.prototype,"mode",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"visibleIndex",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"disableTabStop",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"disableShrink",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"disableHide",void 0),__decorate([Object(s.property)({defaultValue:!1})],BaseAction.prototype,"needSpace",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"ariaChecked",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"ariaExpanded",void 0),__decorate([Object(s.property)({defaultValue:"button"})],BaseAction.prototype,"ariaRole",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"iconName",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"iconSize",void 0),__decorate([Object(s.property)()],BaseAction.prototype,"css",void 0),BaseAction}(r.Base),h=function(e){function Action(t){var o=e.call(this)||this;if(o.innerItem=t,o.locTitleChanged=function(){var e=o.locTitle.renderedHtml;o.setPropertyValue("_title",e||void 0)},o.locTitle=t?t.locTitle:null,t)for(var n in t)"locTitle"!==n&&(o[n]=t[n]);return o.locTitleName&&o.locTitleChanged(),o.registerFunctionOnPropertyValueChanged("_title",function(){o.raiseUpdate(!0)}),o.locStrChangedInPopupModel(),o}return p(Action,e),Action.prototype.raiseUpdate=function(e){void 0===e&&(e=!1),this.updateCallback&&this.updateCallback(e)},Action.prototype.createLocTitle=function(){return this.createLocalizableString("title",this,!0)},Action.prototype.getLocTitle=function(){return this.locTitleValue},Action.prototype.setLocTitle=function(e){e||this.locTitleValue||(e=this.createLocTitle()),this.locTitleValue&&this.locTitleValue.onStringChanged.remove(this.locTitleChanged),this.locTitleValue=e,this.locTitleValue.onStringChanged.add(this.locTitleChanged),this.locTitleChanged()},Action.prototype.getTitle=function(){return this._title},Action.prototype.setTitle=function(e){this._title=e},Object.defineProperty(Action.prototype,"locTitleName",{get:function(){return this.locTitle.localizationName},set:function(e){this.locTitle.localizationName=e},enumerable:!1,configurable:!0}),Action.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.locTooltipChanged(),this.locStrChangedInPopupModel()},Action.prototype.locStrChangedInPopupModel=function(){if(this.popupModel&&this.popupModel.contentComponentData&&this.popupModel.contentComponentData.model){var e=this.popupModel.contentComponentData.model;Array.isArray(e.actions)&&e.actions.forEach(function(e){e.locStrsChanged&&e.locStrsChanged()})}},Action.prototype.locTooltipChanged=function(){this.locTooltipName&&(this.tooltip=i.surveyLocalization.getString(this.locTooltipName,this.locTitle.locale))},Action.prototype.getLocale=function(){return this.owner?this.owner.getLocale():""},Action.prototype.getMarkdownHtml=function(e,t){return this.owner?this.owner.getMarkdownHtml(e,t):void 0},Action.prototype.getProcessedText=function(e){return this.owner?this.owner.getProcessedText(e):e},Action.prototype.getRenderer=function(e){return this.owner?this.owner.getRenderer(e):null},Action.prototype.getRendererContext=function(e){return this.owner?this.owner.getRendererContext(e):e},Action.prototype.setVisible=function(e){this._visible=e},Action.prototype.getVisible=function(){return this._visible},Action.prototype.setEnabled=function(e){this._enabled=e},Action.prototype.getEnabled=function(){return this._enabled},Action.prototype.setComponent=function(e){this._component=e},Action.prototype.getComponent=function(){return this._component},Action.prototype.dispose=function(){this.action=void 0,e.prototype.dispose.call(this),this.popupModel&&this.popupModel.dispose(),this.locTitleValue&&(this.locTitleValue.onStringChanged.remove(this.locTitleChanged),this.locTitleChanged=void 0)},__decorate([Object(s.property)()],Action.prototype,"id",void 0),__decorate([Object(s.property)({defaultValue:!0,onSet:function(e,t){t.raiseUpdate()}})],Action.prototype,"_visible",void 0),__decorate([Object(s.property)({onSet:function(e,t){t.locTooltipChanged()}})],Action.prototype,"locTooltipName",void 0),__decorate([Object(s.property)()],Action.prototype,"_enabled",void 0),__decorate([Object(s.property)()],Action.prototype,"action",void 0),__decorate([Object(s.property)()],Action.prototype,"_component",void 0),__decorate([Object(s.property)()],Action.prototype,"items",void 0),__decorate([Object(s.property)({onSet:function(e,t){t.locTitleValue.text!==e&&(t.locTitleValue.text=e)}})],Action.prototype,"_title",void 0),Action}(d),g=function(){function ActionDropdownViewModel(e){this.item=e,this.funcKey="sv-dropdown-action",this.setupPopupCallbacks()}return ActionDropdownViewModel.prototype.setupPopupCallbacks=function(){var e=this,t=this.popupModel=this.item.popupModel;t&&t.registerPropertyChangedHandlers(["isVisible"],function(){t.isVisible?e.item.pressed=!0:e.item.pressed=!1},this.funcKey)},ActionDropdownViewModel.prototype.removePopupCallbacks=function(){this.popupModel&&this.popupModel.unregisterPropertyChangedHandlers(["isVisible"],this.funcKey)},ActionDropdownViewModel.prototype.dispose=function(){this.removePopupCallbacks()},ActionDropdownViewModel}()},"./src/actions/adaptive-container.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"AdaptiveActionContainer",function(){return u});var n,r=o(/*! ../utils/responsivity-manager */"./src/utils/responsivity-manager.ts"),i=o(/*! ./action */"./src/actions/action.ts"),s=o(/*! ./container */"./src/actions/container.ts"),a=o(/*! ../surveyStrings */"./src/surveyStrings.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),u=function(e){function AdaptiveActionContainer(){var t=e.call(this)||this;return t.minVisibleItemsCount=0,t.isResponsivenessDisabled=!1,t.dotsItem=Object(i.createDropdownActionModelAdvanced)({id:"dotsItem-id"+AdaptiveActionContainer.ContainerID++,css:"sv-dots",innerCss:"sv-dots__item",iconName:"icon-more",visible:!1,tooltip:a.surveyLocalization.getString("more")},{items:[],onSelectionChanged:function(e){t.hiddenItemSelected(e)},allowSelection:!1}),t}return l(AdaptiveActionContainer,e),AdaptiveActionContainer.prototype.hideItemsGreaterN=function(e){var t=this.getActionsToHide();e=Math.max(e,this.minVisibleItemsCount-(this.visibleActions.length-t.length));var o=[];t.forEach(function(t){e<=0&&(t.removePriority?t.mode="removed":(t.mode="popup",o.push(t.innerItem))),e--}),this.hiddenItemsListModel.setItems(o)},AdaptiveActionContainer.prototype.getActionsToHide=function(){return this.visibleActions.filter(function(e){return!e.disableHide}).sort(function(e,t){return e.removePriority||0-t.removePriority||0})},AdaptiveActionContainer.prototype.getVisibleItemsCount=function(e){this.visibleActions.filter(function(e){return e.disableHide}).forEach(function(t){return e-=t.minDimension});for(var t=this.getActionsToHide().map(function(e){return e.minDimension}),o=0,n=0;n<t.length&&!((o+=t[n])>e);n++);return n},AdaptiveActionContainer.prototype.updateItemMode=function(e,t){for(var o=this.visibleActions,n=o.length-1;n>=0;n--)t>e&&!o[n].disableShrink?(t-=o[n].maxDimension-o[n].minDimension,o[n].mode="small"):o[n].mode="large";if(t>e){var r=this.visibleActions.filter(function(e){return e.removePriority});r.sort(function(e,t){return e.removePriority-t.removePriority});for(var n=0;n<r.length;n++)t>e&&(t-=o[n].disableShrink?r[n].maxDimension:r[n].minDimension,r[n].mode="removed")}},Object.defineProperty(AdaptiveActionContainer.prototype,"hiddenItemsListModel",{get:function(){return this.dotsItem.data},enumerable:!1,configurable:!0}),AdaptiveActionContainer.prototype.hiddenItemSelected=function(e){e&&"function"==typeof e.action&&e.action()},AdaptiveActionContainer.prototype.onSet=function(){var t=this;this.actions.forEach(function(e){return e.updateCallback=function(e){return t.raiseUpdate(e)}}),e.prototype.onSet.call(this)},AdaptiveActionContainer.prototype.onPush=function(t){var o=this;t.updateCallback=function(e){return o.raiseUpdate(e)},e.prototype.onPush.call(this,t)},AdaptiveActionContainer.prototype.getRenderedActions=function(){return 1===this.actions.length&&this.actions[0].iconName?this.actions:this.actions.concat([this.dotsItem])},AdaptiveActionContainer.prototype.raiseUpdate=function(t){this.isResponsivenessDisabled||e.prototype.raiseUpdate.call(this,t)},AdaptiveActionContainer.prototype.fit=function(e,t){if(!(e<=0)){this.dotsItem.visible=!1;var o=0,n=0;this.visibleActions.forEach(function(e){o+=e.minDimension,n+=e.maxDimension}),e>=n?this.setActionsMode("large"):e<o?(this.setActionsMode("small"),this.hideItemsGreaterN(this.getVisibleItemsCount(e-t)),this.dotsItem.visible=!!this.hiddenItemsListModel.actions.length):this.updateItemMode(e,n)}},AdaptiveActionContainer.prototype.initResponsivityManager=function(e){this.responsivityManager=new r.ResponsivityManager(e,this,":scope > .sv-action:not(.sv-dots) > .sv-action__content")},AdaptiveActionContainer.prototype.resetResponsivityManager=function(){this.responsivityManager&&(this.responsivityManager.dispose(),this.responsivityManager=void 0)},AdaptiveActionContainer.prototype.setActionsMode=function(e){this.actions.forEach(function(t){"small"==e&&t.disableShrink||(t.mode=e)})},AdaptiveActionContainer.prototype.dispose=function(){e.prototype.dispose.call(this),this.dotsItem.data.dispose(),this.dotsItem.dispose(),this.resetResponsivityManager()},AdaptiveActionContainer.ContainerID=1,AdaptiveActionContainer}(s.ActionContainer)},"./src/actions/container.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"defaultActionBarCss",function(){return c}),o.d(t,"ActionContainer",function(){return p});var n,r=o(/*! ../jsonobject */"./src/jsonobject.ts"),i=o(/*! ../base */"./src/base.ts"),s=o(/*! ./action */"./src/actions/action.ts"),a=o(/*! ../utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),l=o(/*! ../utils/utils */"./src/utils/utils.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},c={root:"sv-action-bar",defaultSizeMode:"sv-action-bar--default-size-mode",smallSizeMode:"sv-action-bar--small-size-mode",item:"sv-action-bar-item",itemWithTitle:"",itemAsIcon:"sv-action-bar-item--icon",itemActive:"sv-action-bar-item--active",itemPressed:"sv-action-bar-item--pressed",itemIcon:"sv-action-bar-item__icon",itemTitle:"sv-action-bar-item__title",itemTitleWithIcon:"sv-action-bar-item__title--with-icon"},p=function(e){function ActionContainer(){var t=null!==e&&e.apply(this,arguments)||this;return t.sizeMode="default",t}return u(ActionContainer,e),ActionContainer.prototype.getMarkdownHtml=function(e,t){return this.locOwner?this.locOwner.getMarkdownHtml(e,t):void 0},ActionContainer.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},ActionContainer.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},ActionContainer.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},ActionContainer.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},ActionContainer.prototype.getRenderedActions=function(){return this.actions},ActionContainer.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.actions.forEach(function(e){e.locTitle&&e.locTitle.strChanged(),e.locStrsChanged()})},ActionContainer.prototype.raiseUpdate=function(e){this.isEmpty=!this.actions.some(function(e){return e.visible}),this.updateCallback&&this.updateCallback(e)},ActionContainer.prototype.onSet=function(){var e=this;this.actions.forEach(function(t){e.setActionCssClasses(t)}),this.raiseUpdate(!0)},ActionContainer.prototype.onPush=function(e){this.setActionCssClasses(e),e.owner=this,this.raiseUpdate(!0)},ActionContainer.prototype.onRemove=function(e){e.owner=null,this.raiseUpdate(!0)},ActionContainer.prototype.setActionCssClasses=function(e){e.cssClasses=this.cssClasses},Object.defineProperty(ActionContainer.prototype,"hasActions",{get:function(){return(this.actions||[]).length>0},enumerable:!1,configurable:!0}),Object.defineProperty(ActionContainer.prototype,"renderedActions",{get:function(){return this.getRenderedActions()},enumerable:!1,configurable:!0}),Object.defineProperty(ActionContainer.prototype,"visibleActions",{get:function(){return this.actions.filter(function(e){return!1!==e.visible})},enumerable:!1,configurable:!0}),ActionContainer.prototype.getRootCss=function(){var e="small"===this.sizeMode?this.cssClasses.smallSizeMode:this.cssClasses.defaultSizeMode;return new a.CssClassBuilder().append(this.cssClasses.root+(e?" "+e:"")+(this.containerCss?" "+this.containerCss:"")).append(this.cssClasses.root+"--empty",this.isEmpty).toString()},ActionContainer.prototype.getDefaultCssClasses=function(){return c},Object.defineProperty(ActionContainer.prototype,"cssClasses",{get:function(){return this.cssClassesValue||(this.cssClassesValue=this.getDefaultCssClasses()),this.cssClassesValue},set:function(e){var t=this;this.cssClassesValue={},this.copyCssClasses(this.cssClassesValue,this.getDefaultCssClasses()),Object(l.mergeValues)(e,this.cssClasses),this.actions.forEach(function(e){t.setActionCssClasses(e)})},enumerable:!1,configurable:!0}),ActionContainer.prototype.createAction=function(e){return e instanceof s.BaseAction?e:new s.Action(e)},ActionContainer.prototype.addAction=function(e,t){void 0===t&&(t=!0);var o=this.createAction(e);return this.actions.push(o),this.sortItems(),o},ActionContainer.prototype.sortItems=function(){this.actions=[].concat(this.actions.filter(function(e){return void 0===e.visibleIndex||e.visibleIndex>=0})).sort(function(e,t){return e.visibleIndex-t.visibleIndex})},ActionContainer.prototype.setItems=function(e,t){var o=this;void 0===t&&(t=!0),this.actions=e.map(function(e){return o.createAction(e)}),t&&this.sortItems()},ActionContainer.prototype.initResponsivityManager=function(e){},ActionContainer.prototype.resetResponsivityManager=function(){},ActionContainer.prototype.getActionById=function(e){for(var t=0;t<this.actions.length;t++)if(this.actions[t].id===e)return this.actions[t];return null},ActionContainer.prototype.dispose=function(){e.prototype.dispose.call(this),this.actions.forEach(function(e){return e.dispose()}),this.actions.length=0},__decorate([Object(r.propertyArray)({onSet:function(e,t){t.onSet()},onPush:function(e,t,o){o.onPush(e)},onRemove:function(e,t,o){o.onRemove(e)}})],ActionContainer.prototype,"actions",void 0),__decorate([Object(r.property)({})],ActionContainer.prototype,"containerCss",void 0),__decorate([Object(r.property)({defaultValue:!1})],ActionContainer.prototype,"isEmpty",void 0),ActionContainer}(i.Base)},"./src/base.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"Bindings",function(){return d}),o.d(t,"Dependencies",function(){return h}),o.d(t,"ComputedUpdater",function(){return g}),o.d(t,"Base",function(){return f}),o.d(t,"ArrayChanges",function(){return ArrayChanges}),o.d(t,"Event",function(){return y}),o.d(t,"EventBase",function(){return m});var n,r=o(/*! ./localizablestring */"./src/localizablestring.ts"),i=o(/*! ./helpers */"./src/helpers.ts"),s=o(/*! ./jsonobject */"./src/jsonobject.ts"),a=o(/*! ./settings */"./src/settings.ts"),l=o(/*! ./conditions */"./src/conditions.ts"),u=o(/*! ./surveyStrings */"./src/surveyStrings.ts"),c=o(/*! ./console-warnings */"./src/console-warnings.ts"),p=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__spreadArray=function(e,t){for(var o=0,n=t.length,r=e.length;o<n;o++,r++)e[r]=t[o];return e},d=function(){function Bindings(e){this.obj=e,this.properties=null,this.values=null}return Bindings.prototype.getType=function(){return"bindings"},Bindings.prototype.getNames=function(){var e=[];this.fillProperties();for(var t=0;t<this.properties.length;t++)this.properties[t].isVisible("",this.obj)&&e.push(this.properties[t].name);return e},Bindings.prototype.getProperties=function(){var e=[];this.fillProperties();for(var t=0;t<this.properties.length;t++)e.push(this.properties[t]);return e},Bindings.prototype.setBinding=function(e,t){this.values||(this.values={});var o=this.getJson();o!==t&&(t?this.values[e]=t:(delete this.values[e],0==Object.keys(this.values).length&&(this.values=null)),this.onChangedJSON(o))},Bindings.prototype.clearBinding=function(e){this.setBinding(e,"")},Bindings.prototype.isEmpty=function(){if(!this.values)return!0;for(var e in this.values)return!1;return!0},Bindings.prototype.getValueNameByPropertyName=function(e){if(this.values)return this.values[e]},Bindings.prototype.getPropertiesByValueName=function(e){if(!this.values)return[];var t=[];for(var o in this.values)this.values[o]==e&&t.push(o);return t},Bindings.prototype.getJson=function(){if(!this.isEmpty()){var e={};for(var t in this.values)e[t]=this.values[t];return e}},Bindings.prototype.setJson=function(e){var t=this.getJson();if(this.values=null,e)for(var o in this.values={},e)this.values[o]=e[o];this.onChangedJSON(t)},Bindings.prototype.fillProperties=function(){if(null===this.properties){this.properties=[];for(var e=s.Serializer.getPropertiesByObj(this.obj),t=0;t<e.length;t++)e[t].isBindable&&this.properties.push(e[t])}},Bindings.prototype.onChangedJSON=function(e){this.obj&&this.obj.onBindingChanged(e,this.getJson())},Bindings}(),h=function(){function Dependencies(e,t,o){this.currentDependency=e,this.target=t,this.property=o,this.dependencies=[],this.id=""+ ++Dependencies.DependenciesCount}return Dependencies.prototype.addDependency=function(e,t){(this.target!==e||this.property!==t)&&(this.dependencies.some(function(o){return o.obj===e&&o.prop===t})||(this.dependencies.push({obj:e,prop:t,id:this.id}),e.registerPropertyChangedHandlers([t],this.currentDependency,this.id)))},Dependencies.prototype.dispose=function(){this.dependencies.forEach(function(e){e.obj.unregisterPropertyChangedHandlers([e.prop],e.id)})},Dependencies.DependenciesCount=0,Dependencies}(),g=function(){function ComputedUpdater(e){this._updater=e,this.dependencies=void 0,this.type=ComputedUpdater.ComputedUpdaterType}return Object.defineProperty(ComputedUpdater.prototype,"updater",{get:function(){return this._updater},enumerable:!1,configurable:!0}),ComputedUpdater.prototype.setDependencies=function(e){this.clearDependencies(),this.dependencies=e},ComputedUpdater.prototype.getDependencies=function(){return this.dependencies},ComputedUpdater.prototype.clearDependencies=function(){this.dependencies&&(this.dependencies.dispose(),this.dependencies=void 0)},ComputedUpdater.prototype.dispose=function(){this.clearDependencies()},ComputedUpdater.ComputedUpdaterType="__dependency_computed",ComputedUpdater}(),f=function(){function Base(){this.dependencies={},this.propertyHash=Base.createPropertiesHash(),this.eventList=[],this.isLoadingFromJsonValue=!1,this.loadingOwner=null,this.onPropertyChanged=this.addEvent(),this.onItemValuePropertyChanged=this.addEvent(),this.isCreating=!0,this.bindingsValue=new d(this),s.CustomPropertiesCollection.createProperties(this),this.onBaseCreating(),this.isCreating=!1}return Base.finishCollectDependencies=function(){var e=Base.currentDependencis;return Base.currentDependencis=void 0,e},Base.startCollectDependencies=function(e,t,o){if(void 0!==Base.currentDependencis)throw Error("Attempt to collect nested dependencies. Nested dependencies are not supported.");Base.currentDependencis=new h(e,t,o)},Base.collectDependency=function(e,t){void 0!==Base.currentDependencis&&Base.currentDependencis.addDependency(e,t)},Object.defineProperty(Base,"commentSuffix",{get:function(){return a.settings.commentSuffix},set:function(e){a.settings.commentSuffix=e},enumerable:!1,configurable:!0}),Object.defineProperty(Base,"commentPrefix",{get:function(){return Base.commentSuffix},set:function(e){Base.commentSuffix=e},enumerable:!1,configurable:!0}),Base.prototype.isValueEmpty=function(e,t){return void 0===t&&(t=!0),t&&(e=this.trimValue(e)),i.Helpers.isValueEmpty(e)},Base.prototype.trimValue=function(e){return e&&("string"==typeof e||e instanceof String)?e.trim():e},Base.prototype.isPropertyEmpty=function(e){return""!==e&&this.isValueEmpty(e)},Base.createPropertiesHash=function(){return{}},Base.prototype.dispose=function(){for(var e=this,t=0;t<this.eventList.length;t++)this.eventList[t].clear();this.onPropertyValueChangedCallback=void 0,this.isDisposedValue=!0,Object.keys(this.dependencies).forEach(function(t){return e.dependencies[t].dispose()})},Object.defineProperty(Base.prototype,"isDisposed",{get:function(){return!0===this.isDisposedValue},enumerable:!1,configurable:!0}),Base.prototype.addEvent=function(){var e=new m;return this.eventList.push(e),e},Base.prototype.onBaseCreating=function(){},Base.prototype.getType=function(){return"base"},Base.prototype.isDescendantOf=function(e){return s.Serializer.isDescendantOf(this.getType(),e)},Base.prototype.getSurvey=function(e){return void 0===e&&(e=!1),null},Object.defineProperty(Base.prototype,"isDesignMode",{get:function(){var e=this.getSurvey();return!!e&&e.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(Base.prototype,"inSurvey",{get:function(){return!!this.getSurvey(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Base.prototype,"bindings",{get:function(){return this.bindingsValue},enumerable:!1,configurable:!0}),Base.prototype.checkBindings=function(e,t){},Base.prototype.updateBindings=function(e,t){var o=this.bindings.getValueNameByPropertyName(e);o&&this.updateBindingValue(o,t)},Base.prototype.updateBindingValue=function(e,t){},Base.prototype.getTemplate=function(){return this.getType()},Object.defineProperty(Base.prototype,"isLoadingFromJson",{get:function(){return this.isLoadingFromJsonValue||this.getIsLoadingFromJson()},enumerable:!1,configurable:!0}),Base.prototype.getIsLoadingFromJson=function(){return!!this.loadingOwner&&!!this.loadingOwner.isLoadingFromJson||this.isLoadingFromJsonValue},Base.prototype.startLoadingFromJson=function(e){this.isLoadingFromJsonValue=!0,this.jsonObj=e},Base.prototype.endLoadingFromJson=function(){this.isLoadingFromJsonValue=!1},Base.prototype.toJSON=function(){return new s.JsonObject().toJsonObject(this)},Base.prototype.fromJSON=function(e){new s.JsonObject().toObject(e,this),this.onSurveyLoad()},Base.prototype.onSurveyLoad=function(){},Base.prototype.clone=function(){var e=s.Serializer.createClass(this.getType());return e.fromJSON(this.toJSON()),e},Base.prototype.getPropertyByName=function(e){var t=this.getType();return this.classMetaData&&this.classMetaData.name===t||(this.classMetaData=s.Serializer.findClass(t)),this.classMetaData?this.classMetaData.findProperty(e):null},Base.prototype.isPropertyVisible=function(e){var t=this.getPropertyByName(e);return!!t&&t.isVisible("",this)},Base.createProgressInfo=function(){return{questionCount:0,answeredQuestionCount:0,requiredQuestionCount:0,requiredAnsweredQuestionCount:0}},Base.prototype.getProgressInfo=function(){return Base.createProgressInfo()},Base.prototype.localeChanged=function(){},Base.prototype.locStrsChanged=function(){if(this.arraysInfo)for(var e in this.arraysInfo){var t=this.arraysInfo[e];if(t&&t.isItemValues){var o=this.getPropertyValue(e);o&&Base.itemValueLocStrChanged&&Base.itemValueLocStrChanged(o)}}if(this.localizableStrings)for(var e in this.localizableStrings){var t=this.getLocalizableString(e);t&&t.strChanged()}},Base.prototype.getPropertyValue=function(e,t){void 0===t&&(t=null);var o=this.getPropertyValueWithoutDefault(e);if(this.isPropertyEmpty(o)){var n=this.localizableStrings?this.localizableStrings[e]:void 0;if(n)return n.text;if(null!=t)return t;var r=this.getDefaultPropertyValue(e);if(void 0!==r)return r}return o},Base.prototype.getDefaultPropertyValue=function(e){var t=this.getPropertyByName(e);if(t&&(!t.isCustom||!this.isCreating)){var o=t.defaultValue;if(!this.isPropertyEmpty(o)&&!Array.isArray(o))return o;var n=this.localizableStrings?this.localizableStrings[e]:void 0;if(n&&n.localizationName)return this.getLocalizationString(n.localizationName);if("boolean"==t.type||"switch"==t.type)return!1;if(t.isCustom&&t.onGetValue)return t.onGetValue(this)}},Base.prototype.hasDefaultPropertyValue=function(e){return void 0!==this.getDefaultPropertyValue(e)},Base.prototype.resetPropertyValue=function(e){var t=this.localizableStrings?this.localizableStrings[e]:void 0;t?t.clearLocale():this.setPropertyValue(e,void 0)},Base.prototype.getPropertyValueWithoutDefault=function(e){return this.getPropertyValueCore(this.propertyHash,e)},Base.prototype.getPropertyValueCore=function(e,t){return(this.isLoadingFromJson||Base.collectDependency(this,t),this.getPropertyValueCoreHandler)?this.getPropertyValueCoreHandler(e,t):e[t]},Base.prototype.geValueFromHash=function(){return this.propertyHash.value},Base.prototype.setPropertyValueCore=function(e,t,o){this.setPropertyValueCoreHandler?this.isDisposedValue?c.ConsoleWarnings.disposedObjectChangedProperty(t,this.getType()):this.setPropertyValueCoreHandler(e,t,o):e[t]=o},Object.defineProperty(Base.prototype,"isEditingSurveyElement",{get:function(){var e=this.getSurvey();return!!e&&e.isEditingSurveyElement},enumerable:!1,configurable:!0}),Base.prototype.iteratePropertiesHash=function(e){var t=this,o=[];for(var n in this.propertyHash)"value"===n&&this.isEditingSurveyElement&&Array.isArray(this.value)||o.push(n);o.forEach(function(o){return e(t.propertyHash,o)})},Base.prototype.setPropertyValue=function(e,t){if(!this.isLoadingFromJson){var o=this.getPropertyByName(e);o&&(t=o.settingValue(this,t))}var n=this.getPropertyValue(e);n&&Array.isArray(n)&&this.arraysInfo&&(!t||Array.isArray(t))?this.isTwoValueEquals(n,t)||this.setArrayPropertyDirectly(e,t):(this.setPropertyValueDirectly(e,t),this.isDisposedValue||this.isTwoValueEquals(n,t)||this.propertyValueChanged(e,n,t))},Base.prototype.setArrayPropertyDirectly=function(e,t,o){void 0===o&&(o=!0);var n=this.arraysInfo[e];this.setArray(e,this.getPropertyValue(e),t,!!n&&n.isItemValues,n?o&&n.onPush:null)},Base.prototype.setPropertyValueDirectly=function(e,t){this.setPropertyValueCore(this.propertyHash,e,t)},Base.prototype.clearPropertyValue=function(e){this.setPropertyValueCore(this.propertyHash,e,null),delete this.propertyHash[e]},Base.prototype.onPropertyValueChangedCallback=function(e,t,o,n,r){},Base.prototype.itemValuePropertyChanged=function(e,t,o,n){this.onItemValuePropertyChanged.fire(this,{obj:e,name:t,oldValue:o,newValue:n,propertyName:e.ownerPropertyName})},Base.prototype.onPropertyValueChanged=function(e,t,o){},Base.prototype.propertyValueChanged=function(e,t,o,n,r){if(!this.isLoadingFromJson&&(this.updateBindings(e,o),this.onPropertyValueChanged(e,t,o),this.onPropertyChanged.fire(this,{name:e,oldValue:t,newValue:o}),this.doPropertyValueChangedCallback(e,t,o,n,this),this.checkConditionPropertyChanged(e),this.onPropChangeFunctions))for(var i=0;i<this.onPropChangeFunctions.length;i++)this.onPropChangeFunctions[i].name==e&&this.onPropChangeFunctions[i].func(o)},Base.prototype.onBindingChanged=function(e,t){this.isLoadingFromJson||this.doPropertyValueChangedCallback("bindings",e,t)},Object.defineProperty(Base.prototype,"isInternal",{get:function(){return!1},enumerable:!1,configurable:!0}),Base.prototype.doPropertyValueChangedCallback=function(e,t,o,n,r){if(!this.isInternal){r||(r=this);var i=this.getSurvey();i||(i=this),i.onPropertyValueChangedCallback&&i.onPropertyValueChangedCallback(e,t,o,r,n),i!==this&&this.onPropertyValueChangedCallback&&this.onPropertyValueChangedCallback(e,t,o,r,n)}},Base.prototype.addExpressionProperty=function(e,t,o){this.expressionInfo||(this.expressionInfo={}),this.expressionInfo[e]={onExecute:t,canRun:o}},Base.prototype.getDataFilteredValues=function(){return{}},Base.prototype.getDataFilteredProperties=function(){return{}},Base.prototype.runConditionCore=function(e,t){if(this.expressionInfo)for(var o in this.expressionInfo)this.runConditionItemCore(o,e,t)},Base.prototype.canRunConditions=function(){return!this.isDesignMode},Base.prototype.checkConditionPropertyChanged=function(e){this.expressionInfo&&this.expressionInfo[e]&&this.canRunConditions()&&this.runConditionItemCore(e,this.getDataFilteredValues(),this.getDataFilteredProperties())},Base.prototype.runConditionItemCore=function(e,t,o){var n=this,r=this.expressionInfo[e],i=this.getPropertyValue(e);i&&(!r.canRun||r.canRun(this))&&(r.runner||(r.runner=this.createExpressionRunner(i),r.runner.onRunComplete=function(e){r.onExecute(n,e)}),r.runner.expression=i,r.runner.run(t,o))},Base.prototype.doBeforeAsynRun=function(e){this.asynExpressionHash||(this.asynExpressionHash=[]);var t=!this.isAsyncExpressionRunning;this.asynExpressionHash[e]=!0,t&&this.onAsyncRunningChanged()},Base.prototype.doAfterAsynRun=function(e){this.asynExpressionHash&&(delete this.asynExpressionHash[e],this.isAsyncExpressionRunning||this.onAsyncRunningChanged())},Base.prototype.onAsyncRunningChanged=function(){},Object.defineProperty(Base.prototype,"isAsyncExpressionRunning",{get:function(){return!!this.asynExpressionHash&&Object.keys(this.asynExpressionHash).length>0},enumerable:!1,configurable:!0}),Base.prototype.createExpressionRunner=function(e){var t=this,o=new l.ExpressionRunner(e);return o.onBeforeAsyncRun=function(e){t.doBeforeAsynRun(e)},o.onAfterAsyncRun=function(e){t.doAfterAsynRun(e)},o},Base.prototype.registerPropertyChangedHandlers=function(e,t,o){void 0===o&&(o=null);for(var n=0;n<e.length;n++)this.registerFunctionOnPropertyValueChanged(e[n],t,o)},Base.prototype.unregisterPropertyChangedHandlers=function(e,t){void 0===t&&(t=null);for(var o=0;o<e.length;o++)this.unRegisterFunctionOnPropertyValueChanged(e[o],t)},Base.prototype.registerFunctionOnPropertyValueChanged=function(e,t,o){if(void 0===o&&(o=null),this.onPropChangeFunctions||(this.onPropChangeFunctions=[]),o)for(var n=0;n<this.onPropChangeFunctions.length;n++){var r=this.onPropChangeFunctions[n];if(r.name==e&&r.key==o){r.func=t;return}}this.onPropChangeFunctions.push({name:e,func:t,key:o})},Base.prototype.registerFunctionOnPropertiesValueChanged=function(e,t,o){void 0===o&&(o=null),this.registerPropertyChangedHandlers(e,t,o)},Base.prototype.unRegisterFunctionOnPropertyValueChanged=function(e,t){if(void 0===t&&(t=null),this.onPropChangeFunctions)for(var o=0;o<this.onPropChangeFunctions.length;o++){var n=this.onPropChangeFunctions[o];if(n.name==e&&n.key==t){this.onPropChangeFunctions.splice(o,1);return}}},Base.prototype.unRegisterFunctionOnPropertiesValueChanged=function(e,t){void 0===t&&(t=null),this.unregisterPropertyChangedHandlers(e,t)},Base.prototype.createCustomLocalizableObj=function(e){this.getLocalizableString(e)||this.createLocalizableString(e,this,!1,!0)},Base.prototype.getLocale=function(){var e=this.getSurvey();return e?e.getLocale():""},Base.prototype.getLocalizationString=function(e){return u.surveyLocalization.getString(e,this.getLocale())},Base.prototype.getLocalizationFormatString=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this.getLocalizationString(e);return n&&n.format?n.format.apply(n,t):""},Base.prototype.createLocalizableString=function(e,t,o,n){var i=this;void 0===o&&(o=!1),void 0===n&&(n=!1);var s=new r.LocalizableString(t,o,e);n&&(s.localizationName=!0===n?e:n),s.onStrChanged=function(t,o){i.propertyValueChanged(e,t,o)},this.localizableStrings||(this.localizableStrings={}),this.localizableStrings[e]=s;var a=this.getPropertyByName(e);return s.disableLocalization=a&&!1===a.isLocalizable,s},Base.prototype.getLocalizableString=function(e){return this.localizableStrings?this.localizableStrings[e]:null},Base.prototype.getLocalizableStringText=function(e,t){void 0===t&&(t=""),Base.collectDependency(this,e);var o=this.getLocalizableString(e);return o?o.text||t:""},Base.prototype.setLocalizableStringText=function(e,t){var o=this.getLocalizableString(e);o&&o.text!=t&&(o.text=t)},Base.prototype.addUsedLocales=function(e){if(this.localizableStrings)for(var t in this.localizableStrings){var o=this.getLocalizableString(t);o&&this.AddLocStringToUsedLocales(o,e)}if(this.arraysInfo)for(var t in this.arraysInfo){var n=this.getPropertyValue(t);if(n&&n.length)for(var r=0;r<n.length;r++){var o=n[r];o&&o.addUsedLocales&&o.addUsedLocales(e)}}},Base.prototype.searchText=function(e,t){var o=[];this.getSearchableLocalizedStrings(o);for(var n=0;n<o.length;n++)o[n].setFindText(e)&&t.push({element:this,str:o[n]})},Base.prototype.getSearchableLocalizedStrings=function(e){if(this.localizableStrings){var t=[];this.getSearchableLocKeys(t);for(var o=0;o<t.length;o++){var n=this.getLocalizableString(t[o]);n&&e.push(n)}}if(this.arraysInfo){var r=[];this.getSearchableItemValueKeys(r);for(var o=0;o<r.length;o++){var i=this.getPropertyValue(r[o]);if(i)for(var s=0;s<i.length;s++)e.push(i[s].locText)}}},Base.prototype.getSearchableLocKeys=function(e){},Base.prototype.getSearchableItemValueKeys=function(e){},Base.prototype.AddLocStringToUsedLocales=function(e,t){for(var o=e.getLocales(),n=0;n<o.length;n++)0>t.indexOf(o[n])&&t.push(o[n])},Base.prototype.createItemValues=function(e){var t=this,o=this.createNewArray(e,function(o){if(o.locOwner=t,o.ownerPropertyName=e,"function"==typeof o.getSurvey){var n=o.getSurvey();n&&"function"==typeof n.makeReactive&&n.makeReactive(o)}});return this.arraysInfo[e].isItemValues=!0,o},Base.prototype.notifyArrayChanged=function(e,t){e.onArrayChanged&&e.onArrayChanged(t)},Base.prototype.createNewArrayCore=function(e){var t=null;return this.createArrayCoreHandler&&(t=this.createArrayCoreHandler(this.propertyHash,e)),t||(t=[],this.setPropertyValueCore(this.propertyHash,e,t)),t},Base.prototype.ensureArray=function(e,t,o){if(void 0===t&&(t=null),void 0===o&&(o=null),!this.arraysInfo||!this.arraysInfo[e])return this.createNewArray(e,t,o)},Base.prototype.createNewArray=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n=this.createNewArrayCore(e);this.arraysInfo||(this.arraysInfo={}),this.arraysInfo[e]={onPush:t,isItemValues:!1};var r=this;return n.push=function(o){var i=Object.getPrototypeOf(n).push.call(n,o);if(!r.isDisposedValue){t&&t(o,n.length-1);var s=new ArrayChanges(n.length-1,0,[o],[]);r.propertyValueChanged(e,n,n,s),r.notifyArrayChanged(n,s)}return i},n.shift=function(){var t=Object.getPrototypeOf(n).shift.call(n);if(!r.isDisposedValue&&t){o&&o(t);var i=new ArrayChanges(n.length-1,1,[],[]);r.propertyValueChanged(e,n,n,i),r.notifyArrayChanged(n,i)}return t},n.unshift=function(o){var i=Object.getPrototypeOf(n).unshift.call(n,o);if(!r.isDisposedValue){t&&t(o,n.length-1);var s=new ArrayChanges(0,0,[o],[]);r.propertyValueChanged(e,n,n,s),r.notifyArrayChanged(n,s)}return i},n.pop=function(){var t=Object.getPrototypeOf(n).pop.call(n);if(!r.isDisposedValue){o&&o(t);var i=new ArrayChanges(n.length-1,1,[],[]);r.propertyValueChanged(e,n,n,i),r.notifyArrayChanged(n,i)}return t},n.splice=function(i,s){for(var a,l=[],u=2;u<arguments.length;u++)l[u-2]=arguments[u];i||(i=0),s||(s=0);var c=(a=Object.getPrototypeOf(n).splice).call.apply(a,__spreadArray([n,i,s],l));if(l||(l=[]),!r.isDisposedValue){if(o&&c)for(var p=0;p<c.length;p++)o(c[p]);if(t)for(var p=0;p<l.length;p++)t(l[p],i+p);var d=new ArrayChanges(i,s,l,c);r.propertyValueChanged(e,n,n,d),r.notifyArrayChanged(n,d)}return c},n},Base.prototype.getItemValueType=function(){},Base.prototype.setArray=function(e,t,o,n,r){var i=[].concat(t);if(Object.getPrototypeOf(t).splice.call(t,0,t.length),o)for(var s=0;s<o.length;s++){var a=o[s];n&&Base.createItemValue&&(a=Base.createItemValue(a,this.getItemValueType())),Object.getPrototypeOf(t).push.call(t,a),r&&r(t[s])}var l=new ArrayChanges(0,i.length,t,i);this.propertyValueChanged(e,i,t,l),this.notifyArrayChanged(t,l)},Base.prototype.isTwoValueEquals=function(e,t,o,n){return void 0===o&&(o=!1),void 0===n&&(n=!1),i.Helpers.isTwoValueEquals(e,t,!1,!o,n)},Base.copyObject=function(e,t){for(var o in t){var n=t[o];"object"==typeof n&&(n={},this.copyObject(n,t[o])),e[o]=n}},Base.prototype.copyCssClasses=function(e,t){t&&("string"==typeof t||t instanceof String?e.root=t:Base.copyObject(e,t))},Base.prototype.getValueInLowCase=function(e){return e&&"string"==typeof e?e.toLowerCase():e},Base.prototype.getElementsInDesign=function(e){return void 0===e&&(e=!1),[]},Base.currentDependencis=void 0,Base}(),ArrayChanges=function(e,t,o,n){this.index=e,this.deleteCount=t,this.itemsToAdd=o,this.deletedItems=n},y=function(){function Event(){}return Object.defineProperty(Event.prototype,"isEmpty",{get:function(){return 0===this.length},enumerable:!1,configurable:!0}),Object.defineProperty(Event.prototype,"length",{get:function(){return this.callbacks?this.callbacks.length:0},enumerable:!1,configurable:!0}),Event.prototype.fireByCreatingOptions=function(e,t){if(this.callbacks){for(var o=0;o<this.callbacks.length;o++)if(this.callbacks[o](e,t()),!this.callbacks)return}},Event.prototype.fire=function(e,t){if(this.callbacks){for(var o=0;o<this.callbacks.length;o++)if(this.callbacks[o](e,t),!this.callbacks)return}},Event.prototype.clear=function(){this.callbacks=void 0},Event.prototype.add=function(e){this.hasFunc(e)||(this.callbacks||(this.callbacks=[]),this.callbacks.push(e),this.fireCallbackChanged())},Event.prototype.remove=function(e){if(this.hasFunc(e)){var t=this.callbacks.indexOf(e,0);this.callbacks.splice(t,1),this.fireCallbackChanged()}},Event.prototype.hasFunc=function(e){return null!=this.callbacks&&this.callbacks.indexOf(e,0)>-1},Event.prototype.fireCallbackChanged=function(){this.onCallbacksChanged&&this.onCallbacksChanged()},Event}(),m=function(e){function EventBase(){return null!==e&&e.apply(this,arguments)||this}return p(EventBase,e),EventBase}(y)},"./src/calculatedValue.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"CalculatedValue",function(){return u});var n,r=o(/*! ./helpers */"./src/helpers.ts"),i=o(/*! ./base */"./src/base.ts"),s=o(/*! ./conditions */"./src/conditions.ts"),a=o(/*! ./jsonobject */"./src/jsonobject.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),u=function(e){function CalculatedValue(t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n=e.call(this)||this;return n.expressionIsRunning=!1,n.isCalculated=!1,t&&(n.name=t),o&&(n.expression=o),n}return l(CalculatedValue,e),CalculatedValue.prototype.setOwner=function(e){this.data=e,this.rerunExpression()},CalculatedValue.prototype.getType=function(){return"calculatedvalue"},CalculatedValue.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.data&&this.data.getSurvey?this.data.getSurvey():null},Object.defineProperty(CalculatedValue.prototype,"owner",{get:function(){return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(CalculatedValue.prototype,"name",{get:function(){return this.getPropertyValue("name")||""},set:function(e){this.setPropertyValue("name",e)},enumerable:!1,configurable:!0}),Object.defineProperty(CalculatedValue.prototype,"includeIntoResult",{get:function(){return this.getPropertyValue("includeIntoResult")},set:function(e){this.setPropertyValue("includeIntoResult",e)},enumerable:!1,configurable:!0}),Object.defineProperty(CalculatedValue.prototype,"expression",{get:function(){return this.getPropertyValue("expression")||""},set:function(e){this.setPropertyValue("expression",e),this.rerunExpression()},enumerable:!1,configurable:!0}),CalculatedValue.prototype.locCalculation=function(){this.expressionIsRunning=!0},CalculatedValue.prototype.unlocCalculation=function(){this.expressionIsRunning=!1},CalculatedValue.prototype.resetCalculation=function(){this.isCalculated=!1},CalculatedValue.prototype.doCalculation=function(e,t,o){this.isCalculated||(this.runExpressionCore(e,t,o),this.isCalculated=!0)},CalculatedValue.prototype.runExpression=function(e,t){this.runExpressionCore(null,e,t)},Object.defineProperty(CalculatedValue.prototype,"value",{get:function(){if(this.data)return this.data.getVariable(this.name)},enumerable:!1,configurable:!0}),CalculatedValue.prototype.setValue=function(e){this.data&&this.data.setVariable(this.name,e)},Object.defineProperty(CalculatedValue.prototype,"canRunExpression",{get:function(){return!!this.data&&!this.isLoadingFromJson&&!!this.expression&&!this.expressionIsRunning&&!!this.name},enumerable:!1,configurable:!0}),CalculatedValue.prototype.rerunExpression=function(){this.canRunExpression&&this.runExpression(this.data.getFilteredValues(),this.data.getFilteredProperties())},CalculatedValue.prototype.runExpressionCore=function(e,t,o){this.canRunExpression&&(this.ensureExpression(t),this.locCalculation(),e&&this.runDependentExpressions(e,t,o),this.expressionRunner.run(t,o))},CalculatedValue.prototype.runDependentExpressions=function(e,t,o){var n=this.expressionRunner.getVariables();if(n)for(var r=0;r<e.length;r++){var i=e[r];i===this||0>n.indexOf(i.name)||(i.doCalculation(e,t,o),t[i.name]=i.value)}},CalculatedValue.prototype.ensureExpression=function(e){var t=this;this.expressionRunner||(this.expressionRunner=new s.ExpressionRunner(this.expression),this.expressionRunner.onRunComplete=function(e){r.Helpers.isTwoValueEquals(e,t.value,!1,!0,!1)||t.setValue(e),t.unlocCalculation()})},CalculatedValue}(i.Base);a.Serializer.addClass("calculatedvalue",[{name:"!name",isUnique:!0},"expression:expression","includeIntoResult:boolean"],function(){return new u},"base")},"./src/choicesRestful.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"ChoicesRestful",function(){return p}),o.d(t,"ChoicesRestfull",function(){return d});var n,r=o(/*! ./base */"./src/base.ts"),i=o(/*! ./itemvalue */"./src/itemvalue.ts"),s=o(/*! ./jsonobject */"./src/jsonobject.ts"),a=o(/*! ./error */"./src/error.ts"),l=o(/*! ./settings */"./src/settings.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),c=function(){function XmlParser(){this.parser=new DOMParser}return XmlParser.prototype.assignValue=function(e,t,o){Array.isArray(e[t])?e[t].push(o):void 0!==e[t]?e[t]=[e[t]].concat(o):"object"==typeof o&&1===Object.keys(o).length&&Object.keys(o)[0]===t?e[t]=o[t]:e[t]=o},XmlParser.prototype.xml2Json=function(e,t){if(e.children&&e.children.length>0)for(var o=0;o<e.children.length;o++){var n=e.children[o],r={};this.xml2Json(n,r),this.assignValue(t,n.nodeName,r)}else this.assignValue(t,e.nodeName,e.textContent)},XmlParser.prototype.parseXmlString=function(e){var t=this.parser.parseFromString(e,"text/xml"),o={};return this.xml2Json(t,o),o},XmlParser}(),p=function(e){function ChoicesRestful(){var t=e.call(this)||this;return t.lastObjHash="",t.isRunningValue=!1,t.processedUrl="",t.processedPath="",t.isUsingCacheFromUrl=void 0,t.error=null,t.createItemValue=function(e){return new i.ItemValue(e)},t}return u(ChoicesRestful,e),Object.defineProperty(ChoicesRestful,"EncodeParameters",{get:function(){return l.settings.web.encodeUrlParams},set:function(e){l.settings.web.encodeUrlParams=e},enumerable:!1,configurable:!0}),ChoicesRestful.clearCache=function(){ChoicesRestful.itemsResult={},ChoicesRestful.sendingSameRequests={}},ChoicesRestful.addSameRequest=function(e){if(!e.isUsingCache)return!1;var t=e.objHash,o=ChoicesRestful.sendingSameRequests[t];return o?(o.push(e),e.isRunningValue=!0,!0):(ChoicesRestful.sendingSameRequests[e.objHash]=[],!1)},ChoicesRestful.unregisterSameRequests=function(e,t){if(e.isUsingCache){var o=ChoicesRestful.sendingSameRequests[e.objHash];if(delete ChoicesRestful.sendingSameRequests[e.objHash],o)for(var n=0;n<o.length;n++)o[n].isRunningValue=!1,o[n].getResultCallback&&o[n].getResultCallback(t)}},ChoicesRestful.getCachedItemsResult=function(e){var t=e.objHash,o=ChoicesRestful.itemsResult[t];return!!o&&(e.getResultCallback&&e.getResultCallback(o),!0)},ChoicesRestful.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.owner?this.owner.survey:null},ChoicesRestful.prototype.run=function(e){if(void 0===e&&(e=null),this.url&&this.getResultCallback){if(this.processedText(e),!this.processedUrl){this.doEmptyResultCallback({}),this.lastObjHash=this.objHash;return}this.lastObjHash!==this.objHash&&(this.lastObjHash=this.objHash,this.error=null,!this.useChangedItemsResults()&&(ChoicesRestful.addSameRequest(this)||this.sendRequest()))}},Object.defineProperty(ChoicesRestful.prototype,"isUsingCache",{get:function(){return!0===this.isUsingCacheFromUrl||!1!==this.isUsingCacheFromUrl&&l.settings.web.cacheLoadedChoices},enumerable:!1,configurable:!0}),Object.defineProperty(ChoicesRestful.prototype,"isRunning",{get:function(){return this.getIsRunning()},enumerable:!1,configurable:!0}),ChoicesRestful.prototype.getIsRunning=function(){return this.isRunningValue},Object.defineProperty(ChoicesRestful.prototype,"isWaitingForParameters",{get:function(){return this.url&&!this.processedUrl},enumerable:!1,configurable:!0}),ChoicesRestful.prototype.useChangedItemsResults=function(){return ChoicesRestful.getCachedItemsResult(this)},ChoicesRestful.prototype.doEmptyResultCallback=function(e){var t=[];this.updateResultCallback&&(t=this.updateResultCallback(t,e)),this.getResultCallback(t)},ChoicesRestful.prototype.processedText=function(e){var t=this.url;if(t&&(t=t.replace(ChoicesRestful.cacheText,"").replace(ChoicesRestful.noCacheText,"")),e){var o=e.processTextEx(t,!1,l.settings.web.encodeUrlParams),n=e.processTextEx(this.path,!1,l.settings.web.encodeUrlParams);o.hasAllValuesOnLastRun&&n.hasAllValuesOnLastRun?(this.processedUrl=o.text,this.processedPath=n.text):(this.processedUrl="",this.processedPath="")}else this.processedUrl=t,this.processedPath=this.path;this.onProcessedUrlCallback&&this.onProcessedUrlCallback(this.processedUrl,this.processedPath)},ChoicesRestful.prototype.parseResponse=function(e){var t;if(e&&"function"==typeof e.indexOf&&0===e.indexOf("<"))t=new c().parseXmlString(e);else try{t=JSON.parse(e)}catch(o){t=(e||"").split("\n").map(function(e){return e.trim(" ")}).filter(function(e){return!!e})}return t},ChoicesRestful.prototype.sendRequest=function(){var e=new XMLHttpRequest;e.open("GET",this.processedUrl),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var t=this,o=this.objHash;e.onload=function(){t.beforeLoadRequest(),200===e.status?t.onLoad(t.parseResponse(e.response),o):t.onError(e.statusText,e.responseText)};var n={request:e};ChoicesRestful.onBeforeSendRequest&&ChoicesRestful.onBeforeSendRequest(this,n),this.beforeSendRequest(),n.request.send()},ChoicesRestful.prototype.getType=function(){return"choicesByUrl"},Object.defineProperty(ChoicesRestful.prototype,"isEmpty",{get:function(){return!this.url&&!this.path},enumerable:!1,configurable:!0}),ChoicesRestful.prototype.getCustomPropertiesNames=function(){for(var e=this.getCustomProperties(),t=[],o=0;o<e.length;o++)t.push(this.getCustomPropertyName(e[o].name));return t},ChoicesRestful.prototype.getCustomPropertyName=function(e){return e+"Name"},ChoicesRestful.prototype.getCustomProperties=function(){for(var e=s.Serializer.getProperties(this.itemValueType),t=[],o=0;o<e.length;o++)"value"!==e[o].name&&"text"!==e[o].name&&"visibleIf"!==e[o].name&&"enableIf"!==e[o].name&&t.push(e[o]);return t},ChoicesRestful.prototype.setData=function(e){this.clear(),e.url&&(this.url=e.url),e.path&&(this.path=e.path),e.valueName&&(this.valueName=e.valueName),e.titleName&&(this.titleName=e.titleName),e.imageLinkName&&(this.imageLinkName=e.imageLinkName),void 0!==e.allowEmptyResponse&&(this.allowEmptyResponse=e.allowEmptyResponse),void 0!==e.attachOriginalItems&&(this.attachOriginalItems=e.attachOriginalItems);for(var t=this.getCustomPropertiesNames(),o=0;o<t.length;o++)e[t[o]]&&(this[t[o]]=e[t[o]])},ChoicesRestful.prototype.getData=function(){if(this.isEmpty)return null;var e={};this.url&&(e.url=this.url),this.path&&(e.path=this.path),this.valueName&&(e.valueName=this.valueName),this.titleName&&(e.titleName=this.titleName),this.imageLinkName&&(e.imageLinkName=this.imageLinkName),this.allowEmptyResponse&&(e.allowEmptyResponse=this.allowEmptyResponse),this.attachOriginalItems&&(e.attachOriginalItems=this.attachOriginalItems);for(var t=this.getCustomPropertiesNames(),o=0;o<t.length;o++)this[t[o]]&&(e[t[o]]=this[t[o]]);return e},Object.defineProperty(ChoicesRestful.prototype,"url",{get:function(){return this.getPropertyValue("url","")},set:function(e){this.setPropertyValue("url",e),this.isUsingCacheFromUrl=void 0,e&&(e.indexOf(ChoicesRestful.cacheText)>-1?this.isUsingCacheFromUrl=!0:e.indexOf(ChoicesRestful.noCacheText)>-1&&(this.isUsingCacheFromUrl=!1))},enumerable:!1,configurable:!0}),Object.defineProperty(ChoicesRestful.prototype,"path",{get:function(){return this.getPropertyValue("path")||""},set:function(e){this.setPropertyValue("path",e)},enumerable:!1,configurable:!0}),Object.defineProperty(ChoicesRestful.prototype,"valueName",{get:function(){return this.getPropertyValue("valueName","")},set:function(e){this.setPropertyValue("valueName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(ChoicesRestful.prototype,"titleName",{get:function(){return this.getPropertyValue("titleName","")},set:function(e){this.setPropertyValue("titleName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(ChoicesRestful.prototype,"imageLinkName",{get:function(){return this.getPropertyValue("imageLinkName","")},set:function(e){this.setPropertyValue("imageLinkName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(ChoicesRestful.prototype,"allowEmptyResponse",{get:function(){return this.getPropertyValue("allowEmptyResponse")},set:function(e){this.setPropertyValue("allowEmptyResponse",e)},enumerable:!1,configurable:!0}),Object.defineProperty(ChoicesRestful.prototype,"attachOriginalItems",{get:function(){return this.getPropertyValue("attachOriginalItems")},set:function(e){this.setPropertyValue("attachOriginalItems",e)},enumerable:!1,configurable:!0}),Object.defineProperty(ChoicesRestful.prototype,"itemValueType",{get:function(){if(!this.owner)return"itemvalue";var e=s.Serializer.findProperty(this.owner.getType(),"choices");return e&&"itemvalue[]"!=e.type?e.type:"itemvalue"},enumerable:!1,configurable:!0}),ChoicesRestful.prototype.clear=function(){this.url=void 0,this.path=void 0,this.valueName=void 0,this.titleName=void 0,this.imageLinkName=void 0;for(var e=this.getCustomPropertiesNames(),t=0;t<e.length;t++)this[e[t]]&&(this[e[t]]="")},ChoicesRestful.prototype.beforeSendRequest=function(){this.isRunningValue=!0,this.beforeSendRequestCallback&&this.beforeSendRequestCallback()},ChoicesRestful.prototype.beforeLoadRequest=function(){this.isRunningValue=!1},ChoicesRestful.prototype.onLoad=function(e,t){void 0===t&&(t=null),t||(t=this.objHash);var o=[],n=this.getResultAfterPath(e);if(n&&n.length)for(var r=0;r<n.length;r++){var i=n[r];if(i){var s=this.getItemValueCallback?this.getItemValueCallback(i):this.getValue(i),l=this.createItemValue(s);this.setTitle(l,i),this.setCustomProperties(l,i),this.attachOriginalItems&&(l.originalItem=i);var u=this.getImageLink(i);u&&(l.imageLink=u),o.push(l)}}else this.allowEmptyResponse||(this.error=new a.WebRequestEmptyError(null,this.owner));this.updateResultCallback&&(o=this.updateResultCallback(o,e)),this.isUsingCache&&(ChoicesRestful.itemsResult[t]=o),this.callResultCallback(o,t),ChoicesRestful.unregisterSameRequests(this,o)},ChoicesRestful.prototype.callResultCallback=function(e,t){t==this.objHash&&this.getResultCallback(e)},ChoicesRestful.prototype.setCustomProperties=function(e,t){for(var o=this.getCustomProperties(),n=0;n<o.length;n++){var r=o[n],i=this.getValueCore(t,this.getPropertyBinding(r.name));this.isValueEmpty(i)||(e[r.name]=i)}},ChoicesRestful.prototype.getPropertyBinding=function(e){return this[this.getCustomPropertyName(e)]?this[this.getCustomPropertyName(e)]:this[e]?this[e]:e},ChoicesRestful.prototype.onError=function(e,t){this.error=new a.WebRequestError(e,t,this.owner),this.doEmptyResultCallback(t),ChoicesRestful.unregisterSameRequests(this,[])},ChoicesRestful.prototype.getResultAfterPath=function(e){if(!e||!this.processedPath)return e;for(var t=this.getPathes(),o=0;o<t.length;o++)if(!(e=e[t[o]]))return null;return e},ChoicesRestful.prototype.getPathes=function(){var e=[];return 0==(e=this.processedPath.indexOf(";")>-1?this.path.split(";"):this.processedPath.split(",")).length&&e.push(this.processedPath),e},ChoicesRestful.prototype.getValue=function(e){return e?this.valueName?this.getValueCore(e,this.valueName):e instanceof Object?Object.keys(e).length<1?null:e[Object.keys(e)[0]]:e:null},ChoicesRestful.prototype.setTitle=function(e,t){var o=this.titleName?this.titleName:"title",n=this.getValueCore(t,o);n&&("string"==typeof n?e.text=n:e.locText.setJson(n))},ChoicesRestful.prototype.getImageLink=function(e){var t=this.imageLinkName?this.imageLinkName:"imageLink";return this.getValueCore(e,t)},ChoicesRestful.prototype.getValueCore=function(e,t){if(!e)return null;if(0>t.indexOf("."))return e[t];for(var o=t.split("."),n=0;n<o.length;n++)if(!(e=e[o[n]]))return null;return e},Object.defineProperty(ChoicesRestful.prototype,"objHash",{get:function(){return this.processedUrl+";"+this.processedPath+";"+this.valueName+";"+this.titleName+";"+this.imageLinkName},enumerable:!1,configurable:!0}),ChoicesRestful.cacheText="{CACHE}",ChoicesRestful.noCacheText="{NOCACHE}",ChoicesRestful.itemsResult={},ChoicesRestful.sendingSameRequests={},ChoicesRestful}(r.Base),d=function(e){function ChoicesRestfull(){return null!==e&&e.apply(this,arguments)||this}return u(ChoicesRestfull,e),Object.defineProperty(ChoicesRestfull,"EncodeParameters",{get:function(){return p.EncodeParameters},set:function(e){p.EncodeParameters=e},enumerable:!1,configurable:!0}),ChoicesRestfull.clearCache=function(){p.clearCache()},Object.defineProperty(ChoicesRestfull,"onBeforeSendRequest",{get:function(){return p.onBeforeSendRequest},set:function(e){p.onBeforeSendRequest=e},enumerable:!1,configurable:!0}),ChoicesRestfull}(p);s.Serializer.addClass("choicesByUrl",["url","path","valueName","titleName",{name:"imageLinkName",visibleIf:function(e){return!!e&&!!e.owner&&"imagepicker"==e.owner.getType()}},{name:"allowEmptyResponse:boolean"},{name:"attachOriginalItems:boolean",visible:!1}],function(){return new p})},"./src/conditionProcessValue.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"ProcessValue",function(){return i});var n=o(/*! ./helpers */"./src/helpers.ts"),r="@survey",i=function(){function ProcessValue(){this.values=null,this.properties=null}return ProcessValue.prototype.getFirstName=function(e,t){if(void 0===t&&(t=null),!e)return e;var o="";if(t&&(o=this.getFirstPropertyName(e,t)))return o;for(var n=0;n<e.length;n++){var r=e[n];if("."==r||"["==r)break;o+=r}return o},ProcessValue.prototype.hasValue=function(e,t){return void 0===t&&(t=null),t||(t=this.values),this.getValueCore(e,t).hasValue},ProcessValue.prototype.getValue=function(e,t){return void 0===t&&(t=null),t||(t=this.values),this.getValueCore(e,t).value},ProcessValue.prototype.setValue=function(e,t,o){if(t){var n=this.getNonNestedObject(e,t,!0);n&&(e=n.value,t=n.text,e&&t&&(e[t]=o))}},ProcessValue.prototype.getValueInfo=function(e){if(e.path){e.value=this.getValueFromPath(e.path,this.values),e.hasValue=null!==e.value&&!n.Helpers.isValueEmpty(e.value),!e.hasValue&&e.path.length>1&&"length"==e.path[e.path.length-1]&&(e.hasValue=!0,e.value=0);return}var t=this.getValueCore(e.name,this.values);e.value=t.value,e.hasValue=t.hasValue,e.path=t.hasValue?t.path:null,e.sctrictCompare=t.sctrictCompare},ProcessValue.prototype.isAnyKeyChanged=function(e,t){for(var o=0;o<t.length;o++){var r=t[o];if(e.hasOwnProperty(r))return!0;var i=this.getFirstName(r);if(e.hasOwnProperty(i)){if(r===i)return!0;var s=e[i];if(void 0!=s){if(!s.hasOwnProperty("oldValue")||!s.hasOwnProperty("newValue"))return!0;var a={};a[i]=s.oldValue;var l=this.getValue(r,a);a[i]=s.newValue;var u=this.getValue(r,a);if(!n.Helpers.isTwoValueEquals(l,u,!1,!1,!1))return!0}}}return!1},ProcessValue.prototype.getValueFromPath=function(e,t){if(2===e.length&&e[0]===r)return this.getValueFromSurvey(e[1]);for(var o=0;t&&o<e.length;){var i=e[o];if(n.Helpers.isNumber(i)&&Array.isArray(t)&&i>=t.length)return null;t=t[i],o++}return t},ProcessValue.prototype.getValueCore=function(e,t){var o=this.getQuestionDirectly(e);if(o)return{hasValue:!0,value:o.value,path:[e],sctrictCompare:o.requireStrictCompare};var n=this.getValueFromValues(e,t);if(e&&!n.hasValue){var i=this.getValueFromSurvey(e);void 0!==i&&(n.hasValue=!0,n.value=i,n.path=[r,e])}return n},ProcessValue.prototype.getQuestionDirectly=function(e){if(this.properties&&this.properties.survey)return this.properties.survey.getQuestionByValueName(e)},ProcessValue.prototype.getValueFromSurvey=function(e){if(this.properties&&this.properties.survey)return this.properties.survey.getBuiltInVariableValue(e.toLocaleLowerCase())},ProcessValue.prototype.getValueFromValues=function(e,t){var o={hasValue:!1,value:null,path:null};if(!t&&0!==t&&!1!==t)return o;e&&e.lastIndexOf(".length")>-1&&e.lastIndexOf(".length")===e.length-7&&(o.value=0,o.hasValue=!0);var r=this.getNonNestedObject(t,e,!1);return r&&(o.path=r.path,o.value=r.text?this.getObjectValue(r.value,r.text):r.value,o.hasValue=!n.Helpers.isValueEmpty(o.value)),o},ProcessValue.prototype.getNonNestedObject=function(e,t,o){for(var r=this.getFirstPropertyName(t,e,o),i=r?[r]:null;t!=r&&e;){if("["==t[0]){var s=this.getObjInArray(e,t);if(!s)return null;e=s.value,t=s.text,i.push(s.index)}else{if(!r&&t==this.getFirstName(t))return{value:e,text:t,path:i};if(e=this.getObjectValue(e,r),n.Helpers.isValueEmpty(e)&&!o)return null;t=t.substring(r.length)}t&&"."==t[0]&&(t=t.substring(1)),(r=this.getFirstPropertyName(t,e,o))&&i.push(r)}return{value:e,text:t,path:i}},ProcessValue.prototype.getObjInArray=function(e,t){if(!Array.isArray(e))return null;for(var o=1,n="";o<t.length&&"]"!=t[o];)n+=t[o],o++;return(t=o<t.length?t.substring(o+1):"",(o=this.getIntValue(n))<0||o>=e.length)?null:{value:e[o],text:t,index:o}},ProcessValue.prototype.getFirstPropertyName=function(e,t,o){if(void 0===o&&(o=!1),!e||(t||(t={}),t.hasOwnProperty(e)))return e;var n=e.toLowerCase(),r=n[0],i=r.toUpperCase();for(var s in t){var a=s[0];if(a===i||a===r){var l=s.toLowerCase();if(l==n)return s;if(n.length<=l.length)continue;var u=n[l.length];if("."!=u&&"["!=u)continue;if(l==n.substring(0,l.length))return s}}if(o&&"["!==e[0]){var c=e.indexOf(".");return c>-1&&(t[e=e.substring(0,c)]={}),e}return""},ProcessValue.prototype.getObjectValue=function(e,t){return t?e[t]:null},ProcessValue.prototype.getIntValue=function(e){return"0"==e||(0|e)>0&&e%1==0?Number(e):-1},ProcessValue}()},"./src/conditions.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"ExpressionExecutor",function(){return l}),o.d(t,"ExpressionRunnerBase",function(){return u}),o.d(t,"ConditionRunner",function(){return c}),o.d(t,"ExpressionRunner",function(){return p});var n,r=o(/*! ./conditionProcessValue */"./src/conditionProcessValue.ts"),i=o(/*! ./console-warnings */"./src/console-warnings.ts"),s=o(/*! ./conditionsParser */"./src/conditionsParser.ts"),a=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),l=function(){function ExpressionExecutor(e){this.processValue=new r.ProcessValue,this.parser=new s.ConditionsParser,this.isAsyncValue=!1,this.hasFunctionValue=!1,this.setExpression(e)}return Object.defineProperty(ExpressionExecutor.prototype,"expression",{get:function(){return this.expressionValue},enumerable:!1,configurable:!0}),ExpressionExecutor.prototype.setExpression=function(e){this.expression!==e&&(this.expressionValue=e,this.operand=this.parser.parseExpression(e),this.hasFunctionValue=!!this.canRun()&&this.operand.hasFunction(),this.isAsyncValue=!!this.hasFunction()&&this.operand.hasAsyncFunction())},ExpressionExecutor.prototype.getVariables=function(){if(!this.operand)return[];var e=[];return this.operand.setVariables(e),e},ExpressionExecutor.prototype.hasFunction=function(){return this.hasFunctionValue},Object.defineProperty(ExpressionExecutor.prototype,"isAsync",{get:function(){return this.isAsyncValue},enumerable:!1,configurable:!0}),ExpressionExecutor.prototype.canRun=function(){return!!this.operand},ExpressionExecutor.prototype.run=function(e,t){var o=this;if(void 0===t&&(t=null),!this.operand)return this.expression&&i.ConsoleWarnings.warn("Invalid expression: "+this.expression),null;if(this.processValue.values=e,this.processValue.properties=t,!this.isAsync)return this.runValues();this.asyncFuncList=[],this.operand.addToAsyncList(this.asyncFuncList);for(var n=0;n<this.asyncFuncList.length;n++)this.asyncFuncList[n].onAsyncReady=function(){o.doAsyncFunctionReady()};for(var n=0;n<this.asyncFuncList.length;n++)this.asyncFuncList[n].evaluateAsync(this.processValue);return!1},ExpressionExecutor.prototype.doAsyncFunctionReady=function(){for(var e=0;e<this.asyncFuncList.length;e++)if(!this.asyncFuncList[e].isReady)return;this.runValues()},ExpressionExecutor.prototype.runValues=function(){var e=this.operand.evaluate(this.processValue);return this.onComplete&&this.onComplete(e),e},ExpressionExecutor.createExpressionExecutor=function(e){return new ExpressionExecutor(e)},ExpressionExecutor}(),u=function(){function ExpressionRunnerBase(e){this._id=ExpressionRunnerBase.IdCounter++,this.expression=e}return Object.defineProperty(ExpressionRunnerBase.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(ExpressionRunnerBase.prototype,"expression",{get:function(){return this.expressionExecutor?this.expressionExecutor.expression:""},set:function(e){var t=this;this.expressionExecutor&&e===this.expression||(this.expressionExecutor=l.createExpressionExecutor(e),this.expressionExecutor.onComplete=function(e){t.doOnComplete(e)},this.variables=void 0,this.containsFunc=void 0)},enumerable:!1,configurable:!0}),ExpressionRunnerBase.prototype.getVariables=function(){return void 0===this.variables&&(this.variables=this.expressionExecutor.getVariables()),this.variables},ExpressionRunnerBase.prototype.hasFunction=function(){return void 0===this.containsFunc&&(this.containsFunc=this.expressionExecutor.hasFunction()),this.containsFunc},Object.defineProperty(ExpressionRunnerBase.prototype,"isAsync",{get:function(){return this.expressionExecutor.isAsync},enumerable:!1,configurable:!0}),ExpressionRunnerBase.prototype.canRun=function(){return this.expressionExecutor.canRun()},ExpressionRunnerBase.prototype.runCore=function(e,t){return void 0===t&&(t=null),this.onBeforeAsyncRun&&this.isAsync&&this.onBeforeAsyncRun(this.id),this.expressionExecutor.run(e,t)},ExpressionRunnerBase.prototype.doOnComplete=function(e){this.onAfterAsyncRun&&this.isAsync&&this.onAfterAsyncRun(this.id)},ExpressionRunnerBase.IdCounter=1,ExpressionRunnerBase}(),c=function(e){function ConditionRunner(){return null!==e&&e.apply(this,arguments)||this}return a(ConditionRunner,e),ConditionRunner.prototype.run=function(e,t){return void 0===t&&(t=null),!0==this.runCore(e,t)},ConditionRunner.prototype.doOnComplete=function(t){this.onRunComplete&&this.onRunComplete(!0==t),e.prototype.doOnComplete.call(this,t)},ConditionRunner}(u),p=function(e){function ExpressionRunner(){return null!==e&&e.apply(this,arguments)||this}return a(ExpressionRunner,e),ExpressionRunner.prototype.run=function(e,t){return void 0===t&&(t=null),this.runCore(e,t)},ExpressionRunner.prototype.doOnComplete=function(t){this.onRunComplete&&this.onRunComplete(t),e.prototype.doOnComplete.call(this,t)},ExpressionRunner}(u)},"./src/conditionsParser.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"ConditionsParserError",function(){return ConditionsParserError}),o.d(t,"ConditionsParser",function(){return r});var n=o(/*! ./expressions/expressionParser */"./src/expressions/expressionParser.ts"),ConditionsParserError=function(e,t){this.at=e,this.code=t},r=function(){function ConditionsParser(){}return ConditionsParser.prototype.patchExpression=function(e){return e.replace(/=>/g,">=").replace(/=</g,"<=").replace(/<>/g,"!=").replace(/equals/g,"equal ").replace(/notequals/g,"notequal ")},ConditionsParser.prototype.createCondition=function(e){return this.parseExpression(e)},ConditionsParser.prototype.parseExpression=function(e){try{var t=ConditionsParser.parserCache[e];return void 0!==t||(t=Object(n.parse)(this.patchExpression(e))).hasAsyncFunction()||(ConditionsParser.parserCache[e]=t),t}catch(e){e instanceof n.SyntaxError&&(this.conditionError=new ConditionsParserError(e.location.start.offset,e.message))}},Object.defineProperty(ConditionsParser.prototype,"error",{get:function(){return this.conditionError},enumerable:!1,configurable:!0}),ConditionsParser.parserCache={},ConditionsParser}()},"./src/console-warnings.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"ConsoleWarnings",function(){return n});var n=function(){function ConsoleWarnings(){}return ConsoleWarnings.disposedObjectChangedProperty=function(e,t){ConsoleWarnings.warn('An attempt to set a property "'+e+'" of a disposed object "'+t+'"')},ConsoleWarnings.inCorrectQuestionValue=function(e,t){var o=JSON.stringify(t,null,3);ConsoleWarnings.warn("An attempt to assign an incorrect value"+o+' to the following question: "'+e+'"')},ConsoleWarnings.warn=function(e){console.warn(e)},ConsoleWarnings}()},"./src/defaultCss/cssmodern.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"modernCss",function(){return r});var n=o(/*! ./defaultV2Css */"./src/defaultCss/defaultV2Css.ts"),r={root:"sv-root-modern",timerRoot:"sv-body__timer",container:"sv-container-modern",header:"sv-title sv-container-modern__title",headerClose:"sv-container-modern__close",bodyContainer:"sv-components-row",body:"sv-components-column sv-components-column--expandable sv-body",bodyEmpty:"sv-body sv-body--empty",footer:"sv-footer sv-body__footer sv-clearfix",title:"",description:"",logo:"sv-logo",logoImage:"sv-logo__image",headerText:"sv-header__text",navigationButton:"sv-btn sv-btn--navigation",completedPage:"sv-completedpage",navigation:{complete:"sv-footer__complete-btn",prev:"sv-footer__prev-btn",next:"sv-footer__next-btn",start:"sv-footer__start-btn",preview:"sv-footer__preview-btn",edit:"sv-footer__edit-btn"},panel:{title:"sv-title sv-panel__title",titleExpandable:"sv-panel__title--expandable",titleExpanded:"sv-panel__title--expanded",titleCollapsed:"sv-panel__title--collapsed",titleOnError:"sv-panel__title--error",description:"sv-description sv-panel__description",container:"sv-panel sv-row__panel",content:"sv-panel__content",icon:"sv-panel__icon",iconExpanded:"sv-panel__icon--expanded",footer:"sv-panel__footer",requiredText:"sv-panel__required-text",number:"sv-question__num"},paneldynamic:{root:"sv-paneldynamic",navigation:"sv-paneldynamic__navigation",title:"sv-title sv-question__title",button:"sv-btn",buttonRemove:"sv-paneldynamic__remove-btn",buttonRemoveRight:"sv-paneldynamic__remove-btn--right",buttonAdd:"sv-paneldynamic__add-btn",progressTop:"sv-paneldynamic__progress sv-paneldynamic__progress--top",progressBottom:"sv-paneldynamic__progress sv-paneldynamic__progress--bottom",buttonPrev:"sv-paneldynamic__prev-btn",buttonNext:"sv-paneldynamic__next-btn",buttonPrevDisabled:"sv-paneldynamic__prev-btn--disabled",buttonNextDisabled:"sv-paneldynamic__next-btn--disabled",progressContainer:"sv-paneldynamic__progress-container",progress:"sv-progress",progressBar:"sv-progress__bar",progressText:"sv-paneldynamic__progress-text",separator:"sv-paneldynamic__separator",panelWrapper:"sv-paneldynamic__panel-wrapper",panelWrapperInRow:"sv-paneldynamic__panel-wrapper--in-row",progressBtnIcon:"icon-progressbutton",footer:""},progress:"sv-progress sv-body__progress",progressBar:"sv-progress__bar",progressText:"sv-progress__text",progressTextInBar:"sv-hidden",progressButtonsContainerCenter:"sv_progress-buttons__container-center",progressButtonsContainer:"sv_progress-buttons__container",progressButtonsImageButtonLeft:"sv_progress-buttons__image-button-left",progressButtonsImageButtonRight:"sv_progress-buttons__image-button-right",progressButtonsImageButtonHidden:"sv_progress-buttons__image-button--hidden",progressButtonsListContainer:"sv_progress-buttons__list-container",progressButtonsList:"sv_progress-buttons__list",progressButtonsListElementPassed:"sv_progress-buttons__list-element--passed",progressButtonsListElementCurrent:"sv_progress-buttons__list-element--current",progressButtonsListElementNonClickable:"sv_progress-buttons__list-element--nonclickable",progressButtonsPageTitle:"sv_progress-buttons__page-title",progressButtonsPageDescription:"sv_progress-buttons__page-description",page:{root:"sv-page sv-body__page",title:"sv-title sv-page__title",description:"sv-description sv-page__description"},pageTitle:"sv-title sv-page__title",pageDescription:"sv-description sv-page__description",row:"sv-row sv-clearfix",question:{mainRoot:"sv-question sv-row__question",flowRoot:"sv-question sv-row__question sv-row__question--flow",asCell:"sv-table__cell",header:"sv-question__header",headerLeft:"sv-question__header--location--left",headerTop:"sv-question__header--location--top",headerBottom:"sv-question__header--location--bottom",content:"sv-question__content",contentLeft:"sv-question__content--left",titleLeftRoot:"",answered:"sv-question--answered",titleOnAnswer:"sv-question__title--answer",titleOnError:"sv-question__title--error",title:"sv-title sv-question__title",titleExpandable:"sv-question__title--expandable",titleExpanded:"sv-question__title--expanded",titleCollapsed:"sv-question__title--collapsed",icon:"sv-question__icon",iconExpanded:"sv-question__icon--expanded",requiredText:"sv-question__required-text",number:"sv-question__num",description:"sv-description sv-question__description",descriptionUnderInput:"sv-description sv-question__description",comment:"sv-comment",required:"sv-question--required",titleRequired:"sv-question__title--required",indent:20,footer:"sv-question__footer",formGroup:"sv-question__form-group",hasError:"",disabled:"sv-question--disabled"},image:{root:"sv-image",image:"sv_image_image"},error:{root:"sv-question__erbox",icon:"",item:"",locationTop:"sv-question__erbox--location--top",locationBottom:"sv-question__erbox--location--bottom"},checkbox:{root:"sv-selectbase",item:"sv-item sv-checkbox sv-selectbase__item",itemSelectAll:"sv-checkbox--selectall",itemNone:"sv-checkbox--none",itemDisabled:"sv-item--disabled sv-checkbox--disabled",itemChecked:"sv-checkbox--checked",itemHover:"sv-checkbox--allowhover",itemInline:"sv-selectbase__item--inline",label:"sv-selectbase__label",labelChecked:"",itemControl:"sv-visuallyhidden sv-item__control",itemDecorator:"sv-item__svg sv-checkbox__svg",itemSvgIconId:"#icon-moderncheck",controlLabel:"sv-item__control-label",materialDecorator:"sv-item__decorator sv-selectbase__decorator sv-checkbox__decorator",other:"sv-comment sv-question__other",column:"sv-selectbase__column"},ranking:{root:"sv-ranking",rootMobileMod:"sv-ranking--mobile",rootDragMod:"sv-ranking--drag",rootDisabled:"sv-ranking--disabled",rootDragHandleAreaIcon:"sv-ranking--drag-handle-area-icon",rootSelectToRankMod:"sv-ranking--select-to-rank",rootSelectToRankAlignVertical:"sv-ranking--select-to-rank-vertical",rootSelectToRankAlignHorizontal:"sv-ranking--select-to-rank-horizontal",item:"sv-ranking-item",itemContent:"sv-ranking-item__content",itemIndex:"sv-ranking-item__index",itemIndexEmptyMode:"sv-ranking-item__index--empty",controlLabel:"sv-ranking-item__text",itemGhostNode:"sv-ranking-item__ghost",itemIconContainer:"sv-ranking-item__icon-container",itemIcon:"sv-ranking-item__icon",itemIconHoverMod:"sv-ranking-item__icon--hover",itemIconFocusMod:"sv-ranking-item__icon--focus",itemGhostMod:"sv-ranking-item--ghost",itemDragMod:"sv-ranking-item--drag",container:"sv-ranking__container",containerEmptyMode:"sv-ranking__container--empty",containerFromMode:"sv-ranking__container--from",containerToMode:"sv-ranking__container--to",containerPlaceholder:"sv-ranking__container-placeholder",containersDivider:"sv-ranking__containers-divider"},radiogroup:{root:"sv-selectbase",item:"sv-item sv-radio sv-selectbase__item",itemInline:"sv-selectbase__item--inline",label:"sv-selectbase__label",labelChecked:"",itemDisabled:"sv-item--disabled sv-radio--disabled",itemChecked:"sv-radio--checked",itemHover:"sv-radio--allowhover",itemControl:"sv-visuallyhidden sv-item__control",itemDecorator:"sv-item__svg sv-radio__svg",itemSvgIconId:"#icon-modernradio",controlLabel:"sv-item__control-label",materialDecorator:"sv-item__decorator sv-selectbase__decorator sv-radio__decorator",other:"sv-comment sv-question__other",clearButton:"sv-btn sv-selectbase__clear-btn",column:"sv-selectbase__column"},buttongroup:{root:"sv-button-group",item:"sv-button-group__item",itemIcon:"sv-button-group__item-icon",itemDecorator:"sv-button-group__item-decorator",itemCaption:"sv-button-group__item-caption",itemSelected:"sv-button-group__item--selected",itemHover:"sv-button-group__item--hover",itemDisabled:"sv-button-group__item--disabled",itemControl:"sv-visuallyhidden"},boolean:{root:"sv_qbln",rootRadio:"sv_qbln",small:"sv-row__question--small",item:"sv-boolean sv-item",control:"sv-visuallyhidden",itemChecked:"sv-boolean--checked",itemIndeterminate:"sv-boolean--indeterminate",itemDisabled:"sv-item--disabled sv-boolean--disabled",switch:"sv-boolean__switch",slider:"sv-boolean__slider",label:"sv-boolean__label",disabledLabel:"sv-boolean__label--disabled",sliderGhost:"sv-boolean__thumb-ghost",rootCheckbox:"sv_qbln",checkboxItem:"sv-boolean sv-item",checkboxItemChecked:"sv-boolean--checked",controlCheckbox:"sv-visuallyhidden",checkboxControlLabel:"sv-boolean__label",checkboxItemIndeterminate:"sv-boolean--indeterminate",checkboxItemDisabled:"sv-item--disabled sv-boolean--disabled",checkboxMaterialDecorator:"sv-item__decorator sv-boolean__decorator ",checkboxItemDecorator:"sv-item__svg  sv-boolean__svg",indeterminatePath:"sv-boolean__indeterminate-path",svgIconCheckedId:"#icon-modernbooleancheckchecked",svgIconUncheckedId:"#icon-modernbooleancheckunchecked",svgIconIndId:"#icon-modernbooleancheckind"},text:{root:"sv-text",small:"sv-row__question--small",remainingCharacterCounter:"sv-remaining-character-counter",onError:"sv-text--error"},multipletext:{root:"sv-multipletext",item:"sv-multipletext__item",itemLabel:"sv-multipletext__item-label",itemTitle:"sv-multipletext__item-title",row:"sv-multipletext__row",cell:"sv-multipletext__cell"},dropdown:{root:"",popup:"sv-dropdown-popup",small:"sv-row__question--small",control:"sv-dropdown",selectWrapper:"",other:"sv-comment sv-question__other",onError:"sv-dropdown--error",cleanButton:"sv-dropdown_clean-button",cleanButtonSvg:"sv-dropdown_clean-button-svg",cleanButtonIconId:"icon-clear_16x16",filterStringInput:"sv-dropdown__filter-string-input",controlValue:"sv-dropdown__value",controlInputFieldComponent:"sv_dropdown_control__input-field-component",hintPrefix:"sv-dropdown__hint-prefix",hintSuffix:"sv-dropdown__hint-suffix"},tagbox:{root:"",popup:"sv-dropdown-popup",small:"sv-row__question--small",selectWrapper:"sv_select_wrapper sv-tagbox_wrapper",other:"sv-input sv-comment sv-selectbase__other",cleanButton:"sv-tagbox_clean-button sv-dropdown_clean-button",cleanButtonSvg:"sv-tagbox_clean-button-svg sv-dropdown_clean-button-svg",cleanButtonIconId:"icon-clear_16x16",cleanItemButton:"sv-tagbox__item_clean-button",cleanItemButtonSvg:"sv-tagbox__item_clean-button-svg",cleanItemButtonIconId:"icon-clear_16x16",control:"sv-input sv-tagbox sv-dropdown",controlValue:"sv-tagbox__value sv-dropdown__value",controlEmpty:"sv-dropdown--empty sv-tagbox--empty",placeholderInput:"sv-tagbox__placeholder",filterStringInput:"sv-tagbox__filter-string-input sv-dropdown__filter-string-input"},imagepicker:{root:"sv-selectbase sv-imagepicker",column:"sv-selectbase__column",item:"sv-imagepicker__item",itemInline:"sv-imagepicker__item--inline",itemChecked:"sv-imagepicker__item--checked",itemDisabled:"sv-imagepicker__item--disabled",itemHover:"sv-imagepicker__item--allowhover",label:"sv-imagepicker__label",itemControl:"sv-imagepicker__control sv-visuallyhidden",image:"sv-imagepicker__image",itemText:"sv-imagepicker__text",clearButton:"sv-btn",other:"sv-comment sv-question__other"},matrix:{tableWrapper:"sv-matrix",root:"sv-table sv-matrix-root",rowError:"sv-matrix__row--error",cell:"sv-table__cell sv-matrix__cell",headerCell:"sv-table__cell sv-table__cell--header",label:"sv-item sv-radio sv-matrix__label",itemValue:"sv-visuallyhidden sv-item__control sv-radio__control",itemChecked:"sv-radio--checked",itemDisabled:"sv-item--disabled sv-radio--disabled",itemHover:"sv-radio--allowhover",materialDecorator:"sv-item__decorator sv-radio__decorator",itemDecorator:"sv-item__svg sv-radio__svg",cellText:"sv-matrix__text",cellTextSelected:"sv-matrix__text--checked",cellTextDisabled:"sv-matrix__text--disabled",cellResponsiveTitle:"sv-hidden",itemSvgIconId:"#icon-modernradio"},matrixdropdown:{root:"sv-table sv-matrixdropdown",cell:"sv-table__cell",headerCell:"sv-table__cell sv-table__cell--header",row:"sv-table__row",rowAdditional:"sv-table__row--additional",detailRow:"sv-table__row--detail",detailRowText:"sv-table__cell--detail-rowtext",detailCell:"sv-table__cell--detail",choiceCell:"sv-table__cell--choice",detailButton:"sv-table__cell--detail-button",detailButtonExpanded:"sv-table__cell--detail-button--expanded",detailIcon:"sv-detail-panel__icon",detailIconExpanded:"sv-detail-panel__icon--expanded",detailPanelCell:"sv-table__cell--detail-panel",actionsCell:"sv-table__cell sv-table__cell--actions"},matrixdynamic:{root:"sv-table sv-matrixdynamic",cell:"sv-table__cell",headerCell:"sv-table__cell sv-table__cell--header",button:"sv-btn",buttonAdd:"sv-matrixdynamic__add-btn",buttonRemove:"sv-matrixdynamic__remove-btn",iconAdd:"",iconRemove:"",iconDrag:"sv-matrixdynamic__drag-icon",row:"sv-table__row",detailRow:"sv-table__row--detail",detailCell:"sv-table__cell--detail",choiceCell:"sv-table__cell--choice",detailButton:"sv-table__cell--detail-button",detailButtonExpanded:"sv-table__cell--detail-button--expanded",detailIcon:"sv-detail-panel__icon",detailIconExpanded:"sv-detail-panel__icon--expanded",detailPanelCell:"sv-table__cell--detail-panel",actionsCell:"sv-table__cell sv-table__cell--actions",emptyRowsSection:"sv-table__empty--rows--section",emptyRowsText:"sv-table__empty--rows--text",emptyRowsButton:"",ghostRow:"sv-matrix-row--drag-drop-ghost-mod"},rating:{root:"sv-rating",item:"sv-rating__item",selected:"sv-rating__item--selected",minText:"sv-rating__min-text",itemText:"sv-rating__item-text",maxText:"sv-rating__max-text",itemDisabled:"sv-rating--disabled",filterStringInput:"sv-dropdown__filter-string-input",control:"sv-dropdown",cleanButton:"sv-dropdown_clean-button",cleanButtonSvg:"sv-dropdown_clean-button-svg",cleanButtonIconId:"icon-clear_16x16",controlValue:"sv-dropdown__value",controlInputFieldComponent:"sv_dropdown_control__input-field-component",itemSmiley:"sv-rating__item-smiley",itemStar:"sv-rating__item-star",itemSmileySelected:"sv-rating__item-smiley--selected",itemStarSelected:"sv-rating__item-star--selected"},comment:{root:"sv-comment",small:"sv-row__question--small",remainingCharacterCounter:"sv-remaining-character-counter"},expression:"",file:{root:"sv-file",other:"sv-comment sv-question__other",placeholderInput:"sv-visuallyhidden",preview:"sv-file__preview",fileSignBottom:"sv-file__sign",fileDecorator:"sv-file__decorator",fileInput:"sv-visuallyhidden",noFileChosen:"sv-description sv-file__no-file-chosen",chooseFile:"sv-btn sv-file__choose-btn",controlDisabled:"sv-file__choose-btn--disabled",removeButton:"sv-hidden",removeButtonBottom:"sv-btn sv-file__clean-btn",removeFile:"sv-hidden",removeFileSvg:"sv-file__remove-svg",removeFileSvgIconId:"icon-removefile",wrapper:"sv-file__wrapper",dragAreaPlaceholder:"sv-hidden",fileList:""},signaturepad:{root:"sv-signaturepad sjs_sp_container",small:"sv-row__question--small",controls:"sjs_sp_controls",placeholder:"sjs_sp_placeholder",canvas:"sjs_sp_canvas",backgroundImage:"sjs_sp__background-image",clearButton:"sjs_sp_clear"},saveData:{root:"sv-save-data_root",info:"sv-save-data_info",error:"sv-save-data_error",success:"sv-save-data_success",button:"sv-save-data_button",shown:"sv-save-data_root--shown"},window:{root:"sv_window",body:"sv_window_content",header:{root:"sv_window_title",title:"",button:"",buttonExpanded:"",buttonCollapsed:""}},variables:{mobileWidth:"--sv-mobile-width",themeMark:"--sv-modern-mark"}};n.surveyCss.modern=r},"./src/defaultCss/cssstandard.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"defaultStandardCss",function(){return r});var n=o(/*! ./defaultV2Css */"./src/defaultCss/defaultV2Css.ts"),r={root:"sv_main sv_default_css",container:"sv_container",header:"sv_header",bodyContainer:"sv-components-row",body:"sv-components-column sv-components-column--expandable sv_body",bodyEmpty:"sv_body sv_body_empty",footer:"sv_nav",title:"",description:"",logo:"sv_logo",logoImage:"sv_logo__image",headerText:"sv_header__text",navigationButton:"sv_nav_btn",completedPage:"sv_completed_page",navigation:{complete:"sv_complete_btn",prev:"sv_prev_btn",next:"sv_next_btn",start:"sv_start_btn",preview:"sv_preview_btn",edit:"sv_edit_btn"},progress:"sv_progress",progressBar:"sv_progress_bar",progressTextInBar:"sv-hidden",progressButtonsContainerCenter:"sv_progress-buttons__container-center",progressButtonsContainer:"sv_progress-buttons__container",progressButtonsImageButtonLeft:"sv_progress-buttons__image-button-left",progressButtonsImageButtonRight:"sv_progress-buttons__image-button-right",progressButtonsImageButtonHidden:"sv_progress-buttons__image-button--hidden",progressButtonsListContainer:"sv_progress-buttons__list-container",progressButtonsList:"sv_progress-buttons__list",progressButtonsListElementPassed:"sv_progress-buttons__list-element--passed",progressButtonsListElementCurrent:"sv_progress-buttons__list-element--current",progressButtonsListElementNonClickable:"sv_progress-buttons__list-element--nonclickable",progressButtonsPageTitle:"sv_progress-buttons__page-title",progressButtonsPageDescription:"sv_progress-buttons__page-description",page:{root:"sv_p_root",title:"sv_page_title",description:""},pageTitle:"sv_page_title",pageDescription:"",row:"sv_row",question:{mainRoot:"sv_q sv_qstn",flowRoot:"sv_q_flow sv_qstn",header:"",headerLeft:"title-left",content:"",contentLeft:"content-left",titleLeftRoot:"sv_qstn_left",requiredText:"sv_q_required_text",title:"sv_q_title",titleExpandable:"sv_q_title_expandable",titleExpanded:"sv_q_title_expanded",titleCollapsed:"sv_q_title_collapsed",number:"sv_q_num",description:"sv_q_description",comment:"",required:"",titleRequired:"",hasError:"",indent:20,footer:"sv_q_footer",formGroup:"form-group",asCell:"sv_matrix_cell",icon:"sv_question_icon",iconExpanded:"sv_expanded",disabled:"sv_q--disabled"},panel:{title:"sv_p_title",titleExpandable:"sv_p_title_expandable",titleExpanded:"sv_p_title_expanded",titleCollapsed:"sv_p_title_collapsed",titleOnError:"",icon:"sv_panel_icon",iconExpanded:"sv_expanded",description:"sv_p_description",container:"sv_p_container",footer:"sv_p_footer",number:"sv_q_num",requiredText:"sv_q_required_text"},error:{root:"sv_q_erbox",icon:"",item:"",locationTop:"sv_qstn_error_top",locationBottom:"sv_qstn_error_bottom"},boolean:{root:"sv_qcbc sv_qbln",rootRadio:"sv_qcbc sv_qbln",item:"sv-boolean",control:"sv-visuallyhidden",itemChecked:"sv-boolean--checked checked",itemIndeterminate:"sv-boolean--indeterminate",itemDisabled:"sv-boolean--disabled",switch:"sv-boolean__switch",slider:"sv-boolean__slider",label:"sv-boolean__label ",disabledLabel:"sv-boolean__label--disabled",sliderGhost:"sv-boolean__thumb-ghost",rootCheckbox:"sv_qcbc sv_qbln",checkboxItem:"sv-boolean",checkboxItemChecked:"sv-boolean--checked",controlCheckbox:"sv-visuallyvisible",checkboxControlLabel:"sv-boolean__label",checkboxItemIndeterminate:"sv-boolean--indeterminate",checkboxItemDisabled:"sv-item--disabled sv-boolean--disabled",checkboxMaterialDecorator:"sv-item__decorator sv-boolean__decorator",checkboxItemDecorator:"sv-item__svg sv-boolean__svg"},checkbox:{root:"sv_qcbc sv_qcbx",item:"sv_q_checkbox",itemSelectAll:"sv_q_checkbox_selectall",itemNone:"sv_q_checkbox_none",itemChecked:"checked",itemInline:"sv_q_checkbox_inline",label:"sv_q_checkbox_label",labelChecked:"",itemControl:"sv_q_checkbox_control_item",itemDecorator:"sv-hidden",controlLabel:"sv_q_checkbox_control_label",other:"sv_q_other sv_q_checkbox_other",column:"sv_q_select_column"},ranking:{root:"sv-ranking",rootMobileMod:"sv-ranking--mobile",rootDragMod:"sv-ranking--drag",rootDisabled:"sv-ranking--disabled",rootDragHandleAreaIcon:"sv-ranking--drag-handle-area-icon",rootSelectToRankMod:"sv-ranking--select-to-rank",rootSelectToRankAlignVertical:"sv-ranking--select-to-rank-vertical",rootSelectToRankAlignHorizontal:"sv-ranking--select-to-rank-horizontal",item:"sv-ranking-item",itemContent:"sv-ranking-item__content",itemIndex:"sv-ranking-item__index",itemIndexEmptyMode:"sv-ranking-item__index--empty",controlLabel:"sv-ranking-item__text",itemGhostNode:"sv-ranking-item__ghost",itemIconContainer:"sv-ranking-item__icon-container",itemIcon:"sv-ranking-item__icon",itemIconHoverMod:"sv-ranking-item__icon--hover",itemIconFocusMod:"sv-ranking-item__icon--focus",itemGhostMod:"sv-ranking-item--ghost",itemDragMod:"sv-ranking-item--drag",container:"sv-ranking__container",containerEmptyMode:"sv-ranking__container--empty",containerFromMode:"sv-ranking__container--from",containerToMode:"sv-ranking__container--to",containerPlaceholder:"sv-ranking__container-placeholder",containersDivider:"sv-ranking__containers-divider"},comment:{remainingCharacterCounter:"sv-remaining-character-counter"},dropdown:{root:"",popup:"sv-dropdown-popup",control:"sv_q_dropdown_control",controlInputFieldComponent:"sv_q_dropdown_control__input-field-component",selectWrapper:"sv_select_wrapper",other:"sv_q_dd_other",cleanButton:"sv_q_dropdown_clean-button",cleanButtonSvg:"sv_q_dropdown_clean-button-svg",cleanButtonIconId:"icon-clear_16x16",controlValue:"sv_q_dropdown__value",filterStringInput:"sv_q_dropdown__filter-string-input",hintPrefix:"sv_q_dropdown__hint-prefix",hintSuffix:"sv_q_dropdown__hint-suffix"},html:{root:""},image:{root:"sv_q_image",image:"sv_image_image",noImage:"sv-image__no-image",noImageSvgIconId:"icon-no-image"},matrix:{root:"sv_q_matrix",label:"sv_q_m_label",itemChecked:"checked",itemDecorator:"sv-hidden",cell:"sv_q_m_cell",cellText:"sv_q_m_cell_text",cellTextSelected:"sv_q_m_cell_selected",cellLabel:"sv_q_m_cell_label",cellResponsiveTitle:"sv-hidden"},matrixdropdown:{root:"sv_q_matrix_dropdown",cell:"sv_matrix_cell",headerCell:"sv_matrix_cell_header",row:"sv_matrix_row",rowAdditional:"sv-matrix__row--additional",detailRow:"sv_matrix_detail_row",detailRowText:"sv_matrix_cell_detail_rowtext",detailCell:"sv_matrix_cell_detail",choiceCell:"sv-table__cell--choice",detailButton:"sv_matrix_cell_detail_button",detailButtonExpanded:"sv_matrix_cell_detail_button_expanded",detailIcon:"sv_detail_panel_icon",detailIconExpanded:"sv_detail_expanded",detailPanelCell:"sv_matrix_cell_detail_panel",actionsCell:"sv_matrix_cell sv_matrix_cell_actions"},matrixdynamic:{root:"sv_q_matrix_dynamic",button:"sv_matrix_dynamic_button",buttonAdd:"",buttonRemove:"",iconAdd:"",iconRemove:"",iconDrag:"sv-matrixdynamic__drag-icon",cell:"sv_matrix_cell",headerCell:"sv_matrix_cell_header",row:"sv_matrix_row",detailRow:"sv_matrix_detail_row",detailCell:"sv_matrix_cell_detail",choiceCell:"sv-table__cell--choice",detailButton:"sv_matrix_cell_detail_button",detailButtonExpanded:"sv_matrix_cell_detail_button_expanded",detailIcon:"sv_detail_panel_icon",detailIconExpanded:"sv_detail_expanded",detailPanelCell:"sv_matrix_cell_detail_panel",actionsCell:"sv_matrix_cell sv_matrix_cell_actions",emptyRowsSection:"sv_matrix_empty_rows_section",emptyRowsText:"sv_matrix_empty_rows_text",emptyRowsButton:"",ghostRow:"sv-matrix-row--drag-drop-ghost-mod"},paneldynamic:{root:"sv_panel_dynamic",title:"sv_p_title",header:"sv-paneldynamic__header sv_header",headerTab:"sv-paneldynamic__header-tab",button:"",buttonAdd:"sv-paneldynamic__add-btn",buttonRemove:"sv_p_remove_btn",buttonRemoveRight:"sv_p_remove_btn_right",buttonPrev:"sv-paneldynamic__prev-btn",buttonPrevDisabled:"sv-paneldynamic__prev-btn--disabled",buttonNextDisabled:"sv-paneldynamic__next-btn--disabled",buttonNext:"sv-paneldynamic__next-btn",progressContainer:"sv-paneldynamic__progress-container",progress:"sv-progress",progressBar:"sv-progress__bar",progressText:"sv-paneldynamic__progress-text",panelWrapper:"sv_p_wrapper",panelWrapperInRow:"sv_p_wrapper_in_row",footer:"",progressBtnIcon:"icon-progressbutton"},multipletext:{root:"sv_q_mt",itemTitle:"sv_q_mt_title",item:"sv_q_mt_item",row:"sv_q_mt_row",itemLabel:"sv_q_mt_label",itemValue:"sv_q_mt_item_value sv_q_text_root"},radiogroup:{root:"sv_qcbc",item:"sv_q_radiogroup",itemChecked:"checked",itemInline:"sv_q_radiogroup_inline",itemDecorator:"sv-hidden",label:"sv_q_radiogroup_label",labelChecked:"",itemControl:"sv_q_radiogroup_control_item",controlLabel:"",other:"sv_q_other sv_q_radiogroup_other",clearButton:"sv_q_radiogroup_clear",column:"sv_q_select_column"},buttongroup:{root:"sv-button-group",item:"sv-button-group__item",itemIcon:"sv-button-group__item-icon",itemDecorator:"sv-button-group__item-decorator",itemCaption:"sv-button-group__item-caption",itemHover:"sv-button-group__item--hover",itemSelected:"sv-button-group__item--selected",itemDisabled:"sv-button-group__item--disabled",itemControl:"sv-visuallyhidden"},imagepicker:{root:"sv_imgsel",item:"sv_q_imgsel",itemChecked:"checked",label:"sv_q_imgsel_label",itemControl:"sv_q_imgsel_control_item",image:"sv_q_imgsel_image",itemInline:"sv_q_imagepicker_inline",itemText:"sv_q_imgsel_text",clearButton:"sv_q_radiogroup_clear",column:"sv_q_select_column",itemNoImage:"sv_q_imgsel__no-image",itemNoImageSvgIcon:"sv_q_imgsel__no-image-svg",itemNoImageSvgIconId:"icon-no-image"},rating:{root:"sv_q_rating",item:"sv_q_rating_item",itemFixedSize:"sv_q_rating_item_fixed",selected:"active",minText:"sv_q_rating_min_text",itemText:"sv_q_rating_item_text",maxText:"sv_q_rating_max_text",itemStar:"sv_q_rating__item-star",itemStarSelected:"sv_q_rating__item-star--selected",itemSmiley:"sv_q_rating__item-smiley",itemSmileySelected:"sv_q_rating__item-smiley--selected"},text:{root:"sv_q_text_root",remainingCharacterCounter:"sv-remaining-character-counter"},expression:"",file:{root:"sv_q_file",placeholderInput:"sv-visuallyhidden",preview:"sv_q_file_preview",removeButton:"sv_q_file_remove_button",fileInput:"sv-visuallyhidden",removeFile:"sv_q_file_remove",fileDecorator:"sv-file__decorator",fileSign:"sv_q_file_sign",chooseFile:"sv_q_file_choose_button",noFileChosen:"sv_q_file_placeholder",dragAreaPlaceholder:"sv-hidden",fileList:""},signaturepad:{root:"sv_q_signaturepad sjs_sp_container",controls:"sjs_sp_controls",placeholder:"sjs_sp_placeholder",canvas:"sjs_sp_canvas",backgroundImage:"sjs_sp__background-image",clearButton:"sjs_sp_clear"},saveData:{root:"sv-save-data_root",info:"sv-save-data_info",error:"sv-save-data_error",success:"sv-save-data_success",button:"sv-save-data_button",shown:"sv-save-data_root--shown"},window:{root:"sv_window",body:"sv_window_content",header:{root:"sv_window_title",title:"",button:"",buttonExpanded:"",buttonCollapsed:""}},variables:{mobileWidth:"--sv-mobile-width",themeMark:"--sv-default-mark"},tagbox:{root:"",popup:"sv-dropdown-popup",small:"sv_q_row__question--small",selectWrapper:"sv_select_wrapper sv_q_tagbox_wrapper",other:"sv_q_input sv_q_comment sv_q_selectbase__other",cleanButton:"sv_q_tagbox_clean-button sv_q_dropdown_clean-button",cleanButtonSvg:"sv_q_tagbox_clean-button-svg sv_q_dropdown_clean-button-svg",cleanButtonIconId:"icon-clear_16x16",cleanItemButton:"sv_q_tagbox-item_clean-button",cleanItemButtonSvg:"sv_q_tagbox-item_clean-button-svg",cleanItemButtonIconId:"icon-clear_16x16",control:"sv_q_input sv_q_tagbox sv_q_dropdown_control",controlValue:"sv_q_tagbox__value sv_q_dropdown__value",controlEmpty:"sv_q_dropdown--empty sv_q_tagbox--empty",placeholderInput:"sv_q_tagbox__placeholder",filterStringInput:"sv_q_tagbox__filter-string-input sv_q_dropdown__filter-string-input",hint:"sv_q_tagbox__hint",hintPrefix:"sv_q_dropdown__hint-prefix sv_q_tagbox__hint-prefix",hintSuffix:"sv_q_dropdown__hint-suffix sv_q_tagbox__hint-suffix",hintSuffixWrapper:"sv_q_tagbox__hint-suffix-wrapper"}};n.surveyCss.default=r,n.surveyCss.orange=r,n.surveyCss.darkblue=r,n.surveyCss.darkrose=r,n.surveyCss.stone=r,n.surveyCss.winter=r,n.surveyCss.winterstone=r},"./src/defaultCss/defaultV2Css.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"surveyCss",function(){return n}),o.d(t,"defaultV2Css",function(){return r}),o.d(t,"defaultV2ThemeName",function(){return i});var n={currentType:"",getCss:function(){var e=this.currentType?this[this.currentType]:r;return e||(e=r),e},getAvailableThemes:function(){return Object.keys(this).filter(function(e){return -1===["currentType","getCss","getAvailableThemes"].indexOf(e)})}},r={root:"sd-root-modern",rootMobile:"sd-root-modern--mobile",rootReadOnly:"sd-root--readonly",rootCompact:"sd-root--compact",rootFitToContainer:"sd-root-modern--full-container",rootWrapper:"sd-root-modern__wrapper",rootWrapperFixed:"sd-root-modern__wrapper--fixed",rootBackgroundImage:"sd-root_background-image",container:"sd-container-modern",header:"sd-title sd-container-modern__title",bodyContainer:"sv-components-row",body:"sv-components-column sv-components-column--expandable sd-body",bodyWithTimer:"sd-body--with-timer",clockTimerRoot:"sd-timer",clockTimerRootTop:"sd-timer--top",clockTimerRootBottom:"sd-timer--bottom",clockTimerProgress:"sd-timer__progress",clockTimerProgressAnimation:"sd-timer__progress--animation",clockTimerTextContainer:"sd-timer__text-container",clockTimerMinorText:"sd-timer__text--minor",clockTimerMajorText:"sd-timer__text--major",bodyEmpty:"sd-body sd-body--empty",bodyLoading:"sd-body--loading",footer:"sd-footer sd-body__navigation sd-clearfix",title:"sd-title",description:"sd-description",logo:"sd-logo",logoImage:"sd-logo__image",headerText:"sd-header__text",headerClose:"sd-hidden",navigationButton:"",bodyNavigationButton:"sd-btn",completedPage:"sd-completedpage",completedBeforePage:"sd-completed-before-page",timerRoot:"sd-body__timer",navigation:{complete:"sd-btn--action sd-navigation__complete-btn",prev:"sd-navigation__prev-btn",next:"sd-navigation__next-btn",start:"sd-navigation__start-btn",preview:"sd-navigation__preview-btn",edit:""},panel:{asPage:"sd-panel--as-page",number:"sd-element__num",title:"sd-title sd-element__title sd-panel__title",titleExpandable:"sd-element__title--expandable",titleNumInline:"sd-element__title--num-inline",titleExpanded:"sd-element__title--expanded",titleCollapsed:"sd-element__title--collapsed",titleDisabled:"sd-element__title--disabled",titleOnExpand:"sd-panel__title--expanded",titleOnError:"sd-panel__title--error",titleBar:"sd-action-title-bar",description:"sd-description sd-panel__description",container:"sd-element sd-element--complex sd-panel sd-row__panel",withFrame:"sd-element--with-frame",content:"sd-panel__content",icon:"sd-panel__icon",iconExpanded:"sd-panel__icon--expanded",footer:"sd-panel__footer",requiredText:"sd-panel__required-text",header:"sd-panel__header sd-element__header sd-element__header--location-top",collapsed:"sd-element--collapsed",expanded:"sd-element--expanded",nested:"sd-element--nested sd-element--nested-with-borders",invisible:"sd-element--invisible",navigationButton:"",compact:"sd-element--with-frame sd-element--compact"},paneldynamic:{mainRoot:"sd-element  sd-question sd-question--paneldynamic sd-element--complex sd-question--complex sd-row__question",empty:"sd-question--empty",root:"sd-paneldynamic",iconRemove:"sd-hidden",navigation:"sd-paneldynamic__navigation",title:"sd-title sd-element__title sd-question__title",header:"sd-paneldynamic__header sd-element__header",headerTab:"sd-paneldynamic__header-tab",button:"sd-action sd-paneldynamic__btn",buttonRemove:"sd-action--negative sd-paneldynamic__remove-btn",buttonAdd:"sd-paneldynamic__add-btn",buttonPrev:"sd-paneldynamic__prev-btn sd-action--icon sd-action",buttonPrevDisabled:"sd-action--disabled",buttonNextDisabled:"sd-action--disabled",buttonNext:"sd-paneldynamic__next-btn sd-action--icon sd-action",progressContainer:"sd-paneldynamic__progress-container",progress:"sd-progress",progressBar:"sd-progress__bar",nested:"sd-element--nested sd-element--nested-with-borders",progressText:"sd-paneldynamic__progress-text",separator:"sd-paneldynamic__separator",panelWrapper:"sd-paneldynamic__panel-wrapper",footer:"sd-paneldynamic__footer",panelFooter:"sd-paneldynamic__panel-footer",footerButtonsContainer:"sd-paneldynamic__buttons-container",panelWrapperInRow:"sd-paneldynamic__panel-wrapper--in-row",progressBtnIcon:"icon-progressbuttonv2",noEntriesPlaceholder:"sd-paneldynamic__placeholder sd-question__placeholder",compact:"sd-element--with-frame sd-element--compact",tabsRoot:"sd-tabs-toolbar",tabsLeft:"sd-tabs-toolbar--left",tabsRight:"sd-tabs-toolbar--right",tabsCenter:"sd-tabs-toolbar--center",tabs:{item:"sd-tab-item",itemPressed:"sd-tab-item--pressed",itemAsIcon:"sd-tab-item--icon",itemIcon:"sd-tab-item__icon",itemTitle:"sd-tab-item__title"}},progress:"sd-progress sd-body__progress",progressTop:"sd-body__progress--top",progressBottom:"sd-body__progress--bottom",progressBar:"sd-progress__bar",progressText:"sd-progress__text",progressButtonsContainerCenter:"sd-progress-buttons__container-center",progressButtonsContainer:"sd-progress-buttons__container",progressButtonsImageButtonLeft:"sd-progress-buttons__image-button-left",progressButtonsImageButtonRight:"sd-progress-buttons__image-button-right",progressButtonsImageButtonHidden:"sd-progress-buttons__image-button--hidden",progressButtonsListContainer:"sd-progress-buttons__list-container",progressButtonsList:"sd-progress-buttons__list",progressButtonsListElementPassed:"sd-progress-buttons__list-element--passed",progressButtonsListElementCurrent:"sd-progress-buttons__list-element--current",progressButtonsListElementNonClickable:"sd-progress-buttons__list-element--nonclickable",progressButtonsPageTitle:"sd-progress-buttons__page-title",progressButtonsPageDescription:"sd-progress-buttons__page-description",progressTextInBar:"sd-hidden",page:{root:"sd-page sd-body__page",emptyHeaderRoot:"sd-page__empty-header",title:"sd-title sd-page__title",description:"sd-description sd-page__description"},pageTitle:"sd-title sd-page__title",pageDescription:"sd-description sd-page__description",row:"sd-row sd-clearfix",rowMultiple:"sd-row--multiple",rowCompact:"sd-row--compact",pageRow:"sd-page__row",question:{mainRoot:"sd-element sd-question sd-row__question",flowRoot:"sd-element sd-question sd-row__question sd-row__question--flow",withFrame:"sd-element--with-frame",asCell:"sd-table__cell",answered:"sd-question--answered",header:"sd-question__header sd-element__header",headerLeft:"sd-question__header--location--left",headerTop:"sd-question__header--location-top sd-element__header--location-top",headerBottom:"sd-question__header--location--bottom",content:"sd-question__content",contentLeft:"sd-question__content--left",titleNumInline:"sd-element__title--num-inline",titleLeftRoot:"sd-question--left",titleTopRoot:"sd-question--title-top",descriptionUnderInputRoot:"sd-question--description-under-input",titleBottomRoot:"sd-question--title-bottom",titleOnAnswer:"sd-question__title--answer",titleEmpty:"sd-question__title--empty",titleOnError:"sd-question__title--error",title:"sd-title sd-element__title sd-question__title",titleExpandable:"sd-element__title--expandable",titleExpanded:"sd-element__title--expanded",titleCollapsed:"sd-element__title--collapsed",titleDisabled:"sd-element__title--disabled",titleBar:"sd-action-title-bar",requiredText:"sd-question__required-text",number:"sd-element__num",description:"sd-description sd-question__description",descriptionUnderInput:"sd-description sd-question__description sd-question__description--under-input",comment:"sd-input sd-comment",other:"sd-input sd-comment",required:"sd-question--required",titleRequired:"sd-question__title--required",indent:20,footer:"sd-question__footer",commentArea:"sd-question__comment-area",formGroup:"sd-question__form-group",hasError:"sd-question--error",hasErrorTop:"sd-question--error-top",hasErrorBottom:"sd-question--error-bottom",collapsed:"sd-element--collapsed",expanded:"sd-element--expanded",nested:"sd-element--nested",invisible:"sd-element--invisible",composite:"sd-element--complex",disabled:"sd-question--disabled"},image:{mainRoot:"sd-question sd-question--image",root:"sd-image",image:"sd-image__image",adaptive:"sd-image__image--adaptive",noImage:"sd-image__no-image",noImageSvgIconId:"icon-no-image",withFrame:""},html:{mainRoot:"sd-question sd-row__question sd-question--html",root:"sd-html",withFrame:""},error:{root:"sd-question__erbox",icon:"",item:"",outsideQuestion:"sd-question__erbox--outside-question",aboveQuestion:"sd-question__erbox--above-question",belowQuestion:"sd-question__erbox--below-question",locationTop:"sd-question__erbox--location--top",locationBottom:"sd-question__erbox--location--bottom"},checkbox:{root:"sd-selectbase",rootMobile:"sd-selectbase--mobile",rootRow:"sd-selectbase--row",rootMultiColumn:"sd-selectbase--multi-column",item:"sd-item sd-checkbox sd-selectbase__item",itemOnError:"sd-item--error",itemSelectAll:"sd-checkbox--selectall",itemNone:"sd-checkbox--none",itemDisabled:"sd-item--disabled sd-checkbox--disabled",itemChecked:"sd-item--checked sd-checkbox--checked",itemHover:"sd-item--allowhover sd-checkbox--allowhover",itemInline:"sd-selectbase__item--inline",label:"sd-selectbase__label",labelChecked:"",itemControl:"sd-visuallyhidden sd-item__control sd-checkbox__control",itemDecorator:"sd-item__svg sd-checkbox__svg",itemSvgIconId:"#icon-v2check",controlLabel:"sd-item__control-label",materialDecorator:"sd-item__decorator sd-checkbox__decorator",other:"sd-input sd-comment sd-selectbase__other",column:"sd-selectbase__column"},radiogroup:{root:"sd-selectbase",rootMobile:"sd-selectbase--mobile",rootRow:"sd-selectbase--row",rootMultiColumn:"sd-selectbase--multi-column",item:"sd-item sd-radio sd-selectbase__item",itemOnError:"sd-item--error",itemInline:"sd-selectbase__item--inline",label:"sd-selectbase__label",labelChecked:"",itemDisabled:"sd-item--disabled sd-radio--disabled",itemChecked:"sd-item--checked sd-radio--checked",itemHover:"sd-item--allowhover sd-radio--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-radio__control",itemDecorator:"sd-item__svg sd-radio__svg",controlLabel:"sd-item__control-label",materialDecorator:"sd-item__decorator sd-radio__decorator",other:"sd-input sd-comment sd-selectbase__other",clearButton:"",column:"sd-selectbase__column"},boolean:{mainRoot:"sd-element sd-question sd-row__question sd-question--boolean",root:"sv_qcbc sv_qbln sd-scrollable-container sd-boolean-root",rootRadio:"sv_qcbc sv_qbln sd-scrollable-container sd-scrollable-container--compact",item:"sd-boolean",itemOnError:"sd-boolean--error",control:"sd-boolean__control sd-visuallyhidden",itemChecked:"sd-boolean--checked",itemIndeterminate:"sd-boolean--indeterminate",itemDisabled:"sd-boolean--disabled",itemHover:"sd-boolean--allowhover",label:"sd-boolean__label",labelTrue:"sd-boolean__label--true",labelFalse:"sd-boolean__label--false",switch:"sd-boolean__switch",disabledLabel:"sd-checkbox__label--disabled",sliderText:"sd-boolean__thumb-text",slider:"sd-boolean__thumb",sliderGhost:"sd-boolean__thumb-ghost",radioItem:"sd-item",radioItemChecked:"sd-item--checked sd-radio--checked",radioLabel:"sd-selectbase__label",radioControlLabel:"sd-item__control-label",radioFieldset:"sd-selectbase",itemRadioDecorator:"sd-item__svg sd-radio__svg",materialRadioDecorator:"sd-item__decorator sd-radio__decorator",itemRadioControl:"sd-visuallyhidden sd-item__control sd-radio__control",rootCheckbox:"sd-selectbase",checkboxItem:"sd-item sd-selectbase__item sd-checkbox",checkboxLabel:"sd-selectbase__label",checkboxItemOnError:"sd-item--error",checkboxItemIndeterminate:"sd-checkbox--intermediate",checkboxItemChecked:"sd-item--checked sd-checkbox--checked",checkboxItemDecorator:"sd-item__svg sd-checkbox__svg",checkboxItemDisabled:"sd-item--disabled sd-checkbox--disabled",controlCheckbox:"sd-visuallyhidden sd-item__control sd-checkbox__control",checkboxMaterialDecorator:"sd-item__decorator sd-checkbox__decorator",checkboxControlLabel:"sd-item__control-label",svgIconCheckedId:"#icon-v2check"},text:{root:"sd-input sd-text",small:"sd-row__question--small",controlDisabled:"sd-input--disabled",content:"sd-text__content sd-question__content",remainingCharacterCounter:"sd-remaining-character-counter",onError:"sd-input--error"},multipletext:{root:"sd-multipletext",rootMobile:"sd-multipletext--mobile",itemLabel:"sd-multipletext__item-container sd-input",itemLabelOnError:"sd-multipletext__item-container--error",itemLabelAllowFocus:"sd-multipletext__item-container--allow-focus",itemLabelAnswered:"sd-multipletext__item-container--answered",item:"sd-multipletext__item",itemTitle:"sd-multipletext__item-title",content:"sd-multipletext__content sd-question__content",row:"sd-multipletext__row",cell:"sd-multipletext__cell",cellError:"sd-multipletext__cell--error",cellErrorTop:"sd-multipletext__cell--error-top",cellErrorBottom:"sd-multipletext__cell--error-bottom"},dropdown:{root:"sd-selectbase",popup:"sv-dropdown-popup",small:"sd-row__question--small",selectWrapper:"sv-dropdown_select-wrapper",other:"sd-input sd-comment sd-selectbase__other",onError:"sd-input--error",label:"sd-selectbase__label",item:"sd-item sd-radio sd-selectbase__item",itemDisabled:"sd-item--disabled sd-radio--disabled",itemChecked:"sd-item--checked sd-radio--checked",itemHover:"sd-item--allowhover sd-radio--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-radio__control",itemDecorator:"sd-item__svg sd-radio__svg",cleanButton:"sd-dropdown_clean-button",cleanButtonSvg:"sd-dropdown_clean-button-svg",cleanButtonIconId:"icon-clear",chevronButton:"sd-dropdown_chevron-button",chevronButtonSvg:"sd-dropdown_chevron-button-svg",chevronButtonIconId:"icon-chevron",control:"sd-input sd-dropdown",controlInputFieldComponent:"sd-dropdown__input-field-component",controlValue:"sd-dropdown__value",controlDisabled:"sd-input--disabled",controlEmpty:"sd-dropdown--empty",controlLabel:"sd-item__control-label",filterStringInput:"sd-dropdown__filter-string-input",materialDecorator:"sd-item__decorator sd-radio__decorator",hintPrefix:"sd-dropdown__hint-prefix",hintSuffix:"sd-dropdown__hint-suffix"},imagepicker:{mainRoot:"sd-element sd-question sd-row__question",root:"sd-selectbase sd-imagepicker",rootColumn:"sd-imagepicker--column",item:"sd-imagepicker__item",itemOnError:"sd-imagepicker__item--error",itemInline:"sd-imagepicker__item--inline",itemChecked:"sd-imagepicker__item--checked",itemDisabled:"sd-imagepicker__item--disabled",itemHover:"sd-imagepicker__item--allowhover",label:"sd-imagepicker__label",itemDecorator:"sd-imagepicker__item-decorator",imageContainer:"sd-imagepicker__image-container",itemControl:"sd-imagepicker__control sd-visuallyhidden",image:"sd-imagepicker__image",itemText:"sd-imagepicker__text",other:"sd-input sd-comment",itemNoImage:"sd-imagepicker__no-image",itemNoImageSvgIcon:"sd-imagepicker__no-image-svg",itemNoImageSvgIconId:"icon-no-image",column:"sd-selectbase__column sd-imagepicker__column",checkedItemDecorator:"sd-imagepicker__check-decorator",checkedItemSvgIcon:"sd-imagepicker__check-icon",checkedItemSvgIconId:"icon-v2check_24x24"},matrix:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",tableWrapper:"sd-matrix sd-table-wrapper",root:"sd-table sd-matrix__table",noHeader:"sd-table--no-header",rootVerticalAlignTop:"sd-table--align-top",rootVerticalAlignMiddle:"sd-table--align-middle",rootAlternateRows:"sd-table--alternate-rows",rowError:"sd-matrix__row--error",cell:"sd-table__cell sd-matrix__cell",row:"sd-table__row",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-matrix__cell sd-table__cell--row-text",label:"sd-item sd-radio sd-matrix__label",itemOnError:"sd-item--error",itemValue:"sd-visuallyhidden sd-item__control sd-radio__control",itemChecked:"sd-item--checked sd-radio--checked",itemDisabled:"sd-item--disabled sd-radio--disabled",itemHover:"sd-radio--allowhover",materialDecorator:"sd-item__decorator sd-radio__decorator",itemDecorator:"sd-item__svg sd-radio__svg",cellText:"sd-matrix__text",cellTextSelected:"sd-matrix__text--checked",cellTextDisabled:"sd-matrix__text--disabled",cellResponsiveTitle:"sd-matrix__responsive-title",compact:"sd-element--with-frame sd-element--compact"},matrixdropdown:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",rootScroll:"sd-question--scroll",root:"sd-table sd-matrixdropdown",noHeader:"sd-table--no-header",rootVerticalAlignTop:"sd-table--align-top",rootVerticalAlignMiddle:"sd-table--align-middle",tableWrapper:"sd-table-wrapper",rootAlternateRows:"sd-table--alternate-rows",cell:"sd-table__cell",errorsCell:"sd-table__cell--error",errorsCellTop:"sd-table__cell--error-top",errorsCellBottom:"sd-table__cell--error-bottom",itemCell:"sd-table__cell--item",row:"sd-table__row",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-table__cell--row-text",columnTitleCell:"sd-table__cell--column-title",cellRequiredText:"sd-question__required-text",detailButton:"sd-table__cell--detail-button",detailButtonExpanded:"sd-table__cell--detail-button--expanded",detailIcon:"sd-detail-panel__icon",detailIconExpanded:"sd-detail-panel__icon--expanded",detailIconId:"icon-expanddetail",detailIconExpandedId:"icon-collapsedetail",detailPanelCell:"sd-table__cell--detail-panel",actionsCell:"sd-table__cell sd-table__cell--actions",actionsCellDrag:"sd-table__cell--drag",emptyCell:"sd-table__cell--empty",verticalCell:"sd-table__cell--vertical",cellQuestionWrapper:"sd-table__question-wrapper",compact:"sd-element--with-frame sd-element--compact"},matrixdynamic:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",rootScroll:"sd-question--scroll",empty:"sd-question--empty",root:"sd-table sd-matrixdynamic",noHeader:"sd-table--no-header",tableWrapper:"sd-table-wrapper",content:"sd-matrixdynamic__content sd-question__content",cell:"sd-table__cell",row:"sd-table__row",itemCell:"sd-table__cell--item",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-table__cell--row-text",columnTitleCell:"sd-table__cell--column-title",cellRequiredText:"sd-question__required-text",button:"sd-action sd-matrixdynamic__btn",detailRow:"sd-table__row sd-table__row--detail",detailButton:"sd-table__cell--detail-button",detailButtonExpanded:"sd-table__cell--detail-button--expanded",detailIcon:"sd-detail-panel__icon",detailIconExpanded:"sd-detail-panel__icon--expanded",detailIconId:"icon-expanddetail",detailIconExpandedId:"icon-collapsedetail",detailPanelCell:"sd-table__cell--detail-panel",actionsCell:"sd-table__cell sd-table__cell--actions",actionsCellDrag:"sd-table__cell--drag",buttonAdd:"sd-matrixdynamic__add-btn",buttonRemove:"sd-action--negative sd-matrixdynamic__remove-btn",iconAdd:"sd-hidden",iconRemove:"",dragElementDecorator:"sd-drag-element__svg",iconDragElement:"#icon-v2dragelement_16x16",footer:"sd-matrixdynamic__footer",emptyRowsSection:"sd-matrixdynamic__placeholder sd-question__placeholder",iconDrag:"sv-matrixdynamic__drag-icon",ghostRow:"sv-matrix-row--drag-drop-ghost-mod",emptyCell:"sd-table__cell--empty",verticalCell:"sd-table__cell--vertical",cellQuestionWrapper:"sd-table__question-wrapper",errorsCell:"sd-table__cell--error",errorsCellTop:"sd-table__cell--error-top",errorsCellBottom:"sd-table__cell--error-bottom",compact:"sd-element--with-frame sd-element--compact"},rating:{rootDropdown:"sd-scrollable-container sd-scrollable-container--compact sd-selectbase",root:"sd-scrollable-container sd-rating",rootWrappable:"sd-scrollable-container sd-rating sd-rating--wrappable",item:"sd-rating__item",itemOnError:"sd-rating__item--error",itemHover:"sd-rating__item--allowhover",selected:"sd-rating__item--selected",itemStar:"sd-rating__item-star",itemStarOnError:"sd-rating__item-star--error",itemStarHover:"sd-rating__item-star--allowhover",itemStarSelected:"sd-rating__item-star--selected",itemStarDisabled:"sd-rating__item-star--disabled",itemStarHighlighted:"sd-rating__item-star--highlighted",itemStarUnhighlighted:"sd-rating__item-star--unhighlighted",itemStarSmall:"sd-rating__item-star--small",itemSmiley:"sd-rating__item-smiley",itemSmileyOnError:"sd-rating__item-smiley--error",itemSmileyHover:"sd-rating__item-smiley--allowhover",itemSmileySelected:"sd-rating__item-smiley--selected",itemSmileyDisabled:"sd-rating__item-smiley--disabled",itemSmileyHighlighted:"sd-rating__item-star--highlighted",itemSmileyScaleColored:"sd-rating__item-smiley--scale-colored",itemSmileyRateColored:"sd-rating__item-smiley--rate-colored",itemSmileySmall:"sd-rating__item-smiley--small",minText:"sd-rating__item-text sd-rating__min-text",itemText:"sd-rating__item-text",maxText:"sd-rating__item-text sd-rating__max-text",itemDisabled:"sd-rating__item--disabled",itemFixedSize:"sd-rating__item--fixed-size",control:"sd-input sd-dropdown",itemSmall:"sd-rating--small",selectWrapper:"sv-dropdown_select-wrapper",controlValue:"sd-dropdown__value",controlDisabled:"sd-input--disabled",controlEmpty:"sd-dropdown--empty",filterStringInput:"sd-dropdown__filter-string-input",chevronButton:"sd-dropdown_chevron-button",chevronButtonSvg:"sd-dropdown_chevron-button-svg",chevronButtonIconId:"icon-chevron",popup:"sv-dropdown-popup",onError:"sd-input--error"},comment:{root:"sd-input sd-comment",small:"sd-row__question--small",controlDisabled:"sd-input--disabled",content:"sd-comment__content sd-question__content",remainingCharacterCounter:"sd-remaining-character-counter",onError:"sd-input--error"},expression:"sd-expression",file:{root:"sd-file",rootDragging:"sd-file--dragging",rootAnswered:"sd-file--answered",other:"sd-input sd-comment",placeholderInput:"sd-visuallyhidden",preview:"sd-file__preview",fileSign:"",fileList:"sd-file__list",fileSignBottom:"sd-file__sign",dragArea:"sd-file__drag-area",dragAreaActive:"sd-file__drag-area--active",fileDecorator:"sd-file__decorator",onError:"sd-file__decorator--error",fileDecoratorDrag:"sd-file__decorator--drag",fileInput:"sd-visuallyhidden",noFileChosen:"sd-description sd-file__no-file-chosen",chooseFile:"sd-file__choose-btn",chooseFileAsText:"sd-action sd-file__choose-btn--text",chooseFileAsTextDisabled:"sd-action--disabled",chooseFileAsIcon:"sd-file__choose-btn--icon",chooseFileIconId:"icon-choosefile",disabled:"sd-file__choose-btn--disabled",removeButton:"sd-context-btn--negative",removeButtonBottom:"",removeButtonIconId:"icon-clear",removeFile:"sd-hidden",removeFileSvg:"",removeFileSvgIconId:"icon-delete",wrapper:"sd-file__wrapper",defaultImage:"sd-file__default-image",defaultImageIconId:"icon-defaultfile",leftIconId:"icon-arrowleft",rightIconId:"icon-arrowright",removeFileButton:"sd-context-btn--negative sd-file__remove-file-button",dragAreaPlaceholder:"sd-file__drag-area-placeholder",imageWrapper:"sd-file__image-wrapper",single:"sd-file--single",singleImage:"sd-file--single-image",mobile:"sd-file--mobile",videoContainer:"sd-file__video-container",contextButton:"sd-context-btn",video:"sd-file__video",actionsContainer:"sd-file__actions-container",closeCameraButton:"sd-file__close-camera-button",changeCameraButton:"sd-file__change-camera-button",takePictureButton:"sd-file__take-picture-button",loadingIndicator:"sd-file__loading-indicator"},signaturepad:{mainRoot:"sd-element sd-question sd-question--signature sd-row__question",root:"sd-signaturepad sjs_sp_container",small:"sd-row__question--small",controls:"sjs_sp_controls sd-signaturepad__controls",placeholder:"sjs_sp_placeholder",canvas:"sjs_sp_canvas sd-signaturepad__canvas",backgroundImage:"sjs_sp__background-image sd-signaturepad__background-image",clearButton:"sjs_sp_clear sd-context-btn sd-context-btn--negative sd-signaturepad__clear",clearButtonIconId:"icon-clear"},saveData:{root:"sv-save-data_root",info:"sv-save-data_info",error:"sv-save-data_error",success:"sv-save-data_success",button:"sv-save-data_button",shown:"sv-save-data_root--shown"},window:{root:"sv_window",body:"sv_window_content",header:{root:"sv_window_title",title:"",button:"sv_window_button",buttonExpanded:"",buttonCollapsed:""}},ranking:{root:"sv-ranking",rootMobileMod:"sv-ranking--mobile",rootDragMod:"sv-ranking--drag",rootDisabled:"sd-ranking--disabled",rootDesignMode:"sv-ranking--design-mode",rootDragHandleAreaIcon:"sv-ranking--drag-handle-area-icon",rootSelectToRankMod:"sv-ranking--select-to-rank",rootSelectToRankAlignVertical:"sv-ranking--select-to-rank-vertical",rootSelectToRankAlignHorizontal:"sv-ranking--select-to-rank-horizontal",item:"sv-ranking-item",itemContent:"sv-ranking-item__content sd-ranking-item__content",itemIndex:"sv-ranking-item__index sd-ranking-item__index",itemIndexEmptyMode:"sv-ranking-item__index--empty sd-ranking-item__index--empty",itemDisabled:"sv-ranking-item--disabled",controlLabel:"sv-ranking-item__text",itemGhostNode:"sv-ranking-item__ghost",itemIconContainer:"sv-ranking-item__icon-container",itemIcon:"sv-ranking-item__icon",itemIconHoverMod:"sv-ranking-item__icon--hover",itemIconFocusMod:"sv-ranking-item__icon--focus",itemGhostMod:"sv-ranking-item--ghost",itemDragMod:"sv-ranking--drag",itemOnError:"sv-ranking-item--error",container:"sv-ranking__container",containerEmptyMode:"sv-ranking__container--empty",containerFromMode:"sv-ranking__container--from",containerToMode:"sv-ranking__container--to",containerPlaceholder:"sv-ranking__container-placeholder",containersDivider:"sv-ranking__containers-divider"},buttongroup:{root:"sv-button-group",item:"sv-button-group__item",itemIcon:"sv-button-group__item-icon",itemDecorator:"sv-button-group__item-decorator",itemCaption:"sv-button-group__item-caption",itemHover:"sv-button-group__item--hover",itemSelected:"sv-button-group__item--selected",itemDisabled:"sv-button-group__item--disabled",itemControl:"sv-visuallyhidden"},list:{root:"sv-list__container sd-list",item:"sv-list__item sd-list__item",itemBody:"sv-list__item-body sd-list__item-body",itemSelected:"sv-list__item--selected sd-list__item--selected",itemFocused:"sv-list__item--focused sd-list__item--focused"},actionBar:{root:"sd-action-bar",item:"sd-action",defaultSizeMode:"",smallSizeMode:"",itemPressed:"sd-action--pressed",itemAsIcon:"sd-action--icon",itemIcon:"sd-action__icon",itemTitle:"sd-action__title"},variables:{mobileWidth:"--sd-mobile-width",themeMark:"--sv-defaultV2-mark"},tagbox:{root:"sd-selectbase",popup:"sv-dropdown-popup",small:"sd-row__question--small",selectWrapper:"sv-dropdown_select-wrapper",other:"sd-input sd-comment sd-selectbase__other",onError:"sd-input--error",label:"sd-selectbase__label",itemSvgIconId:"#icon-v2check",item:"sd-item sd-checkbox sd-selectbase__item",itemDisabled:"sd-item--disabled sd-checkbox--disabled",itemChecked:"sd-item--checked sd-checkbox--checked",itemHover:"sd-item--allowhover sd-checkbox--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-checkbox__control",itemDecorator:"sd-item__svg sd-checkbox__svg",cleanButton:"sd-tagbox_clean-button sd-dropdown_clean-button",cleanButtonSvg:"sd-tagbox_clean-button-svg sd-dropdown_clean-button-svg",cleanButtonIconId:"icon-clear",cleanItemButton:"sd-tagbox-item_clean-button",cleanItemButtonSvg:"sd-tagbox-item_clean-button-svg",cleanItemButtonIconId:"icon-clear_16x16",chevronButton:"sd-dropdown_chevron-button",chevronButtonSvg:"sd-dropdown_chevron-button-svg",chevronButtonIconId:"icon-chevron",control:"sd-input sd-tagbox sd-dropdown",controlValue:"sd-tagbox__value sd-dropdown__value",controlValueItems:"sd-tagbox__value-items",placeholderInput:"sd-tagbox__placeholder",controlDisabled:"sd-input--disabled",controlEmpty:"sd-dropdown--empty sd-tagbox--empty",controlLabel:"sd-item__control-label",filterStringInput:"sd-tagbox__filter-string-input sd-dropdown__filter-string-input",materialDecorator:"sd-item__decorator sd-checkbox__decorator",hint:"sd-tagbox__hint",hintPrefix:"sd-dropdown__hint-prefix sd-tagbox__hint-prefix",hintSuffix:"sd-dropdown__hint-suffix sd-tagbox__hint-suffix",hintSuffixWrapper:"sd-tagbox__hint-suffix-wrapper"}},i="defaultV2";n[i]=r},"./src/defaultTitle.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"DefaultTitleModel",function(){return r});var n=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),r=function(){function DefaultTitleModel(){}return DefaultTitleModel.getIconCss=function(e,t){return new n.CssClassBuilder().append(e.icon).append(e.iconExpanded,!t).toString()},DefaultTitleModel}()},"./src/drag-drop-helper-v1.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"DragDropInfo",function(){return DragDropInfo});var DragDropInfo=function(e,t,o){void 0===o&&(o=-1),this.source=e,this.target=t,this.nestedPanelDepth=o}},"./src/drag-drop-page-helper-v1.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"DragDropPageHelperV1",function(){return i});var n=o(/*! ./drag-drop-helper-v1 */"./src/drag-drop-helper-v1.ts"),r=o(/*! ./settings */"./src/settings.ts"),i=function(){function DragDropPageHelperV1(e){this.page=e}return DragDropPageHelperV1.prototype.getDragDropInfo=function(){return this.dragDropInfo},DragDropPageHelperV1.prototype.dragDropStart=function(e,t,o){void 0===o&&(o=-1),this.dragDropInfo=new n.DragDropInfo(e,t,o)},DragDropPageHelperV1.prototype.dragDropMoveTo=function(e,t,o){if(void 0===t&&(t=!1),void 0===o&&(o=!1),!this.dragDropInfo||(this.dragDropInfo.destination=e,this.dragDropInfo.isBottom=t,this.dragDropInfo.isEdge=o,this.correctDragDropInfo(this.dragDropInfo),!this.dragDropCanDropTagert()))return!1;if(!this.dragDropCanDropSource()||!this.dragDropAllowFromSurvey()){if(this.dragDropInfo.source){var n=this.page.dragDropFindRow(this.dragDropInfo.target);this.page.updateRowsRemoveElementFromRow(this.dragDropInfo.target,n)}return!1}return this.page.dragDropAddTarget(this.dragDropInfo),!0},DragDropPageHelperV1.prototype.correctDragDropInfo=function(e){if(e.destination){var t=e.destination.isPanel?e.destination:null;t&&!e.target.isLayoutTypeSupported(t.getChildrenLayoutType())&&(e.isEdge=!0)}},DragDropPageHelperV1.prototype.dragDropAllowFromSurvey=function(){var e=this.dragDropInfo.destination;if(!e||!this.page.survey)return!0;var t=null,o=null,n=e.isPage||!this.dragDropInfo.isEdge&&e.isPanel?e:e.parent;if(!e.isPage){var r=e.parent;if(r){var i=r.elements,s=i.indexOf(e);s>-1&&(t=e,o=e,this.dragDropInfo.isBottom?t=s<i.length-1?i[s+1]:null:o=s>0?i[s-1]:null)}}var a={allow:!0,target:this.dragDropInfo.target,source:this.dragDropInfo.source,parent:n,insertAfter:o,insertBefore:t};return this.page.survey.dragAndDropAllow(a)},DragDropPageHelperV1.prototype.dragDropFinish=function(e){if(void 0===e&&(e=!1),this.dragDropInfo){var t=this.dragDropInfo.target,o=this.dragDropInfo.source,n=this.dragDropInfo.destination,i=this.page.dragDropFindRow(t),s=this.dragDropGetElementIndex(t,i);this.page.updateRowsRemoveElementFromRow(t,i);var a=[],l=[];if(!e&&i){if(this.page.isDesignMode&&r.settings.supportCreatorV2){var u=o&&o.parent&&o.parent.dragDropFindRow(o);i.panel.elements[s]&&i.panel.elements[s].startWithNewLine&&i.elements.length>1&&i.panel.elements[s]===n&&(a.push(t),l.push(i.panel.elements[s])),t.startWithNewLine&&i.elements.length>1&&(!i.panel.elements[s]||!i.panel.elements[s].startWithNewLine)&&l.push(t),u&&u.elements[0]===o&&u.elements[1]&&a.push(u.elements[1]),i.elements.length<=1&&a.push(t),t.startWithNewLine&&i.elements.length>1&&i.elements[0]!==n&&l.push(t)}o&&o.parent&&(this.page.survey.startMovingQuestion(),i.panel==o.parent?(i.panel.dragDropMoveElement(o,t,s),s=-1):o.parent.removeElement(o)),s>-1&&i.panel.addElement(t,s),this.page.survey.stopMovingQuestion()}return a.map(function(e){e.startWithNewLine=!0}),l.map(function(e){e.startWithNewLine=!1}),this.dragDropInfo=null,e?null:t}},DragDropPageHelperV1.prototype.dragDropGetElementIndex=function(e,t){if(!t)return -1;var o=t.elements.indexOf(e);if(0==t.index)return o;var n=t.panel.rows[t.index-1],r=n.elements[n.elements.length-1];return o+t.panel.elements.indexOf(r)+1},DragDropPageHelperV1.prototype.dragDropCanDropTagert=function(){var e=this.dragDropInfo.destination;return!e||!!e.isPage||this.dragDropCanDropCore(this.dragDropInfo.target,e)},DragDropPageHelperV1.prototype.dragDropCanDropSource=function(){var e=this.dragDropInfo.source;if(!e)return!0;var t=this.dragDropInfo.destination;if(!this.dragDropCanDropCore(e,t))return!1;if(this.page.isDesignMode&&r.settings.supportCreatorV2){if(this.page.dragDropFindRow(e)!==this.page.dragDropFindRow(t)&&(!e.startWithNewLine&&t.startWithNewLine||e.startWithNewLine&&!t.startWithNewLine))return!0;var o=this.page.dragDropFindRow(t);if(o&&1==o.elements.length)return!0}return this.dragDropCanDropNotNext(e,t,this.dragDropInfo.isEdge,this.dragDropInfo.isBottom)},DragDropPageHelperV1.prototype.dragDropCanDropCore=function(e,t){return!t||!(this.dragDropIsSameElement(t,e)||e.isPanel&&(e.containsElement(t)||e.getElementByName(t.name)))},DragDropPageHelperV1.prototype.dragDropCanDropNotNext=function(e,t,o,n){if(!t||t.isPanel&&!o||void 0===e.parent||e.parent!==t.parent)return!0;var r=e.parent,i=r.elements.indexOf(e),s=r.elements.indexOf(t);return s<i&&!n&&s--,n&&s++,i<s?s-i>1:i-s>0},DragDropPageHelperV1.prototype.dragDropIsSameElement=function(e,t){return e==t||e.name==t.name},DragDropPageHelperV1}()},"./src/drag-drop-panel-helper-v1.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"DragDropPanelHelperV1",function(){return i});var n=o(/*! ./drag-drop-helper-v1 */"./src/drag-drop-helper-v1.ts"),r=o(/*! ./settings */"./src/settings.ts"),i=function(){function DragDropPanelHelperV1(e){this.panel=e}return DragDropPanelHelperV1.prototype.dragDropAddTarget=function(e){var t=this.dragDropFindRow(e.target);this.dragDropAddTargetToRow(e,t)&&this.panel.updateRowsRemoveElementFromRow(e.target,t)},DragDropPanelHelperV1.prototype.dragDropFindRow=function(e){if(!e||e.isPage)return null;for(var t=this.panel.rows,o=0;o<t.length;o++)if(t[o].elements.indexOf(e)>-1)return t[o];for(var o=0;o<this.panel.elements.length;o++){var n=this.panel.elements[o].getPanel();if(n){var r=n.dragDropFindRow(e);if(r)return r}}return null},DragDropPanelHelperV1.prototype.dragDropMoveElement=function(e,t,o){o>e.parent.elements.indexOf(e)&&o--,this.panel.removeElement(e),this.panel.addElement(t,o)},DragDropPanelHelperV1.prototype.updateRowsOnElementAdded=function(e,t,o,r){o||((o=new n.DragDropInfo(null,e)).target=e,o.isEdge=this.panel.elements.length>1,this.panel.elements.length<2?o.destination=r:(o.isBottom=t>0,0==t?o.destination=this.panel.elements[1]:o.destination=this.panel.elements[t-1])),this.dragDropAddTargetToRow(o,null)},DragDropPanelHelperV1.prototype.dragDropAddTargetToRow=function(e,t){if(!e.destination||this.dragDropAddTargetToEmptyPanel(e))return!0;var o=e.destination,n=this.dragDropFindRow(o);return!n||(e.target.startWithNewLine?this.dragDropAddTargetToNewRow(e,n,t):this.dragDropAddTargetToExistingRow(e,n,t))},DragDropPanelHelperV1.prototype.dragDropAddTargetToEmptyPanel=function(e){if(e.destination.isPage)return this.dragDropAddTargetToEmptyPanelCore(this.panel.root,e.target,e.isBottom),!0;var t=e.destination;if(t.isPanel&&!e.isEdge){if(e.target.template===t)return!1;if(e.nestedPanelDepth<0||e.nestedPanelDepth>=t.depth)return this.dragDropAddTargetToEmptyPanelCore(t,e.target,e.isBottom),!0}return!1},DragDropPanelHelperV1.prototype.dragDropAddTargetToExistingRow=function(e,t,o){var n=t.elements.indexOf(e.destination);if(0==n&&!e.isBottom){if(this.panel.isDesignMode&&r.settings.supportCreatorV2);else if(t.elements[0].startWithNewLine)return t.index>0?(e.isBottom=!0,t=t.panel.rows[t.index-1],e.destination=t.elements[t.elements.length-1],this.dragDropAddTargetToExistingRow(e,t,o)):this.dragDropAddTargetToNewRow(e,t,o)}var i=-1;o==t&&(i=t.elements.indexOf(e.target)),e.isBottom&&n++;var s=this.panel.findRowByElement(e.source);return(s!=t||s.elements.indexOf(e.source)!=n)&&n!=i&&(i>-1&&(t.elements.splice(i,1),i<n&&n--),t.elements.splice(n,0,e.target),t.updateVisible(),i<0)},DragDropPanelHelperV1.prototype.dragDropAddTargetToNewRow=function(e,t,o){var n=t.panel.createRowAndSetLazy(t.panel.rows.length);this.panel.isDesignMode&&r.settings.supportCreatorV2&&n.setIsLazyRendering(!1),n.addElement(e.target);var i=t.index;if(e.isBottom&&i++,o&&o.panel==n.panel&&o.index==i)return!1;var s=this.panel.findRowByElement(e.source);return(!s||s.panel!=n.panel||1!=s.elements.length||s.index!=i)&&(t.panel.rows.splice(i,0,n),!0)},DragDropPanelHelperV1.prototype.dragDropAddTargetToEmptyPanelCore=function(e,t,o){var n=e.createRow();n.addElement(t),0==e.elements.length||o?e.rows.push(n):e.rows.splice(0,0,n)},DragDropPanelHelperV1}()},"./src/dragdrop/choices.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"DragDropChoices",function(){return s});var n,r=o(/*! ./core */"./src/dragdrop/core.ts"),i=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),s=function(e){function DragDropChoices(){var t=null!==e&&e.apply(this,arguments)||this;return t.doDragOver=function(){"imagepicker"!==t.parentElement.getType()&&(t.domAdapter.draggedElementShortcut.querySelector(".svc-item-value-controls__button").style.cursor="grabbing")},t.doBanDropHere=function(){"imagepicker"!==t.parentElement.getType()&&(t.domAdapter.draggedElementShortcut.querySelector(".svc-item-value-controls__button").style.cursor="not-allowed")},t}return i(DragDropChoices,e),Object.defineProperty(DragDropChoices.prototype,"draggedElementType",{get:function(){return"item-value"},enumerable:!1,configurable:!0}),DragDropChoices.prototype.createDraggedElementShortcut=function(e,t,o){if("imagepicker"===this.parentElement.getType())return this.createImagePickerShortcut(this.draggedElement,e,t,o);var n=document.createElement("div");n.style.cssText=" \n          cursor: grabbing;\n          position: absolute;\n          z-index: 10000;\n          font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n        ";var r=t.closest("[data-sv-drop-target-item-value]").cloneNode(!0);r.style.cssText="\n      min-width: 100px;\n      box-shadow: var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1));\n      background-color: var(--sjs-general-backcolor, var(--background, #fff));\n      border-radius: calc(4.5 * var(--sjs-base-unit, var(--base-unit, 8px)));\n      padding-right: calc(2* var(--sjs-base-unit, var(--base-unit, 8px)));\n      margin-left: 0;\n    ",r.querySelector(".svc-item-value-controls__drag-icon").style.visibility="visible",r.querySelector(".svc-item-value-controls__remove").style.backgroundColor="transparent",r.classList.remove("svc-item-value--moveup"),r.classList.remove("svc-item-value--movedown"),this.draggedElement.isDragDropMoveDown=!1,this.draggedElement.isDragDropMoveUp=!1,n.appendChild(r);var i=t.getBoundingClientRect();return n.shortcutXOffset=o.clientX-i.x,n.shortcutYOffset=o.clientY-i.y,this.isBottom=null,n},DragDropChoices.prototype.createImagePickerShortcut=function(e,t,o,n){var r=document.createElement("div");r.style.cssText=" \n      cursor: grabbing;\n      position: absolute;\n      z-index: 10000;\n      box-shadow: var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1));\n      background-color: var(--sjs-general-backcolor, var(--background, #fff));\n      padding: calc(0.5 * var(--sjs-base-unit, var(--base-unit, 8px)));\n      border-radius: calc(0.5 * var(--sjs-base-unit, var(--base-unit, 8px)));\n    ";var i=o.closest("[data-sv-drop-target-item-value]"),s=i.querySelector(".svc-image-item-value-controls"),a=i.querySelector(".sd-imagepicker__image-container"),l=i.querySelector(e.imageLink?"img":".sd-imagepicker__no-image").cloneNode(!0);return s.style.display="none",a.style.width=l.width+"px",a.style.height=l.height+"px",l.style.objectFit="cover",l.style.borderRadius="4px",r.appendChild(l),r},DragDropChoices.prototype.getDropTargetByDataAttributeValue=function(e){return this.parentElement.choices.filter(function(t){return""+t.value==e})[0]},DragDropChoices.prototype.getVisibleChoices=function(){var e=this.parentElement;return"ranking"!==e.getType()||e.selectToRankEnabled?e.visibleChoices:e.rankingChoices},DragDropChoices.prototype.isDropTargetValid=function(e,t){var o=this.getVisibleChoices();if("imagepicker"!==this.parentElement.getType()){var n=o.indexOf(this.dropTarget),r=o.indexOf(this.draggedElement);if(r>n&&this.dropTarget.isDragDropMoveUp)return this.dropTarget.isDragDropMoveUp=!1,!1;if(r<n&&this.dropTarget.isDragDropMoveDown)return this.dropTarget.isDragDropMoveDown=!1,!1}return -1!==o.indexOf(e)},DragDropChoices.prototype.calculateIsBottom=function(e){var t=this.getVisibleChoices();return t.indexOf(this.dropTarget)-t.indexOf(this.draggedElement)>0},DragDropChoices.prototype.afterDragOver=function(t){if(!this.isDropTargetDoesntChanged(this.isBottom)&&this.dropTarget!==this.draggedElement){var o=this.getVisibleChoices(),n=o.indexOf(this.dropTarget),r=o.indexOf(this.draggedElement);o.splice(r,1),o.splice(n,0,this.draggedElement),"imagepicker"!==this.parentElement.getType()&&(r!==n&&(t.classList.remove("svc-item-value--moveup"),t.classList.remove("svc-item-value--movedown"),this.dropTarget.isDragDropMoveDown=!1,this.dropTarget.isDragDropMoveUp=!1),r>n&&(this.dropTarget.isDragDropMoveDown=!0),r<n&&(this.dropTarget.isDragDropMoveUp=!0),e.prototype.ghostPositionChanged.call(this))}},DragDropChoices.prototype.doDrop=function(){var e=this.parentElement.choices,t=this.getVisibleChoices().filter(function(t){return -1!==e.indexOf(t)}),o=e.indexOf(this.draggedElement),n=t.indexOf(this.draggedElement);return e.splice(o,1),e.splice(n,0,this.draggedElement),this.parentElement},DragDropChoices.prototype.clear=function(){this.parentElement&&this.updateVisibleChoices(this.parentElement),e.prototype.clear.call(this)},DragDropChoices.prototype.updateVisibleChoices=function(e){"ranking"===e.getType()?e.updateRankingChoices():e.updateVisibleChoices()},DragDropChoices}(r.DragDropCore)},"./src/dragdrop/core.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"DragDropCore",function(){return i});var n=o(/*! ../base */"./src/base.ts"),r=o(/*! ./dom-adapter */"./src/dragdrop/dom-adapter.ts"),i=function(){function DragDropCore(e,t,o,i){var s=this;this.surveyValue=e,this.creator=t,this._isBottom=null,this.onGhostPositionChanged=new n.EventBase,this.onDragStart=new n.EventBase,this.onDragEnd=new n.EventBase,this.onBeforeDrop=this.onDragStart,this.onAfterDrop=this.onDragEnd,this.draggedElement=null,this.dropTarget=null,this.prevDropTarget=null,this.allowDropHere=!1,this.banDropHere=function(){s.allowDropHere=!1,s.doBanDropHere(),s.dropTarget=null,s.domAdapter.draggedElementShortcut.style.cursor="not-allowed",s.isBottom=null},this.doBanDropHere=function(){},this.domAdapter=i||new r.DragDropDOMAdapter(this,o)}return Object.defineProperty(DragDropCore.prototype,"isBottom",{get:function(){return!!this._isBottom},set:function(e){this._isBottom=e,this.ghostPositionChanged()},enumerable:!1,configurable:!0}),DragDropCore.prototype.ghostPositionChanged=function(){this.onGhostPositionChanged.fire({},{})},Object.defineProperty(DragDropCore.prototype,"dropTargetDataAttributeName",{get:function(){return"[data-sv-drop-target-"+this.draggedElementType+"]"},enumerable:!1,configurable:!0}),Object.defineProperty(DragDropCore.prototype,"survey",{get:function(){return this.surveyValue||this.creator.survey},enumerable:!1,configurable:!0}),DragDropCore.prototype.startDrag=function(e,t,o,n,r){var i;void 0===r&&(r=!1),this.domAdapter.rootContainer=null===(i=this.survey)||void 0===i?void 0:i.rootElement,this.domAdapter.startDrag(e,t,o,n,r)},DragDropCore.prototype.dragInit=function(e,t,o,n){this.draggedElement=t,this.parentElement=o;var r=this.getShortcutText(this.draggedElement);this.domAdapter.draggedElementShortcut=this.createDraggedElementShortcut(r,n,e),this.onStartDrag(e)},DragDropCore.prototype.onStartDrag=function(e){},DragDropCore.prototype.isDropTargetDoesntChanged=function(e){return this.dropTarget===this.prevDropTarget&&e===this.isBottom},DragDropCore.prototype.getShortcutText=function(e){return e.shortcutText},DragDropCore.prototype.createDraggedElementShortcut=function(e,t,o){var n=document.createElement("div");return n.innerText=e,n.className=this.getDraggedElementClass(),n},DragDropCore.prototype.getDraggedElementClass=function(){return"sv-dragged-element-shortcut"},DragDropCore.prototype.doDragOver=function(){},DragDropCore.prototype.afterDragOver=function(e){},DragDropCore.prototype.findDropTargetNodeFromPoint=function(e,t){var o=this.domAdapter.draggedElementShortcut.style.display;this.domAdapter.draggedElementShortcut.style.display="none";var n=document.elementFromPoint(e,t);return(this.domAdapter.draggedElementShortcut.style.display=o||"block",n)?this.findDropTargetNodeByDragOverNode(n):null},DragDropCore.prototype.getDataAttributeValueByNode=function(e){var t=this,o="svDropTarget";return this.draggedElementType.split("-").forEach(function(e){o+=t.capitalizeFirstLetter(e)}),e.dataset[o]},DragDropCore.prototype.getDropTargetByNode=function(e,t){var o=this.getDataAttributeValueByNode(e);return this.getDropTargetByDataAttributeValue(o,e,t)},DragDropCore.prototype.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},DragDropCore.prototype.calculateVerticalMiddleOfHTMLElement=function(e){var t=e.getBoundingClientRect();return t.y+t.height/2},DragDropCore.prototype.calculateHorizontalMiddleOfHTMLElement=function(e){var t=e.getBoundingClientRect();return t.x+t.width/2},DragDropCore.prototype.calculateIsBottom=function(e,t){return!1},DragDropCore.prototype.findDropTargetNodeByDragOverNode=function(e){return e.closest(this.dropTargetDataAttributeName)},DragDropCore.prototype.dragOver=function(e){var t=this.findDropTargetNodeFromPoint(e.clientX,e.clientY);if(!t){this.banDropHere();return}this.dropTarget=this.getDropTargetByNode(t,e);var o=this.isDropTargetValid(this.dropTarget,t);if(this.doDragOver(),!o){this.banDropHere();return}var n=this.calculateIsBottom(e.clientY,t);this.allowDropHere=!0,this.isDropTargetDoesntChanged(n)||(this.isBottom=null,this.isBottom=n,this.afterDragOver(t),this.prevDropTarget=this.dropTarget)},DragDropCore.prototype.drop=function(){if(this.allowDropHere){var e=this.draggedElement.parent;this.onDragStart.fire(this,{fromElement:e,draggedElement:this.draggedElement});var t=this.doDrop();this.onDragEnd.fire(this,{fromElement:e,draggedElement:t,toElement:this.dropTarget})}},DragDropCore.prototype.clear=function(){this.dropTarget=null,this.prevDropTarget=null,this.draggedElement=null,this.isBottom=null,this.parentElement=null},DragDropCore}()},"./src/dragdrop/dom-adapter.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"DragDropDOMAdapter",function(){return s});var n=o(/*! ../utils/utils */"./src/utils/utils.ts"),r=o(/*! ../utils/devices */"./src/utils/devices.ts"),i=o(/*! ../settings */"./src/settings.ts");"undefined"!=typeof window&&window.addEventListener("touchmove",function(e){s.PreventScrolling&&e.preventDefault()},{passive:!1});var s=function(){function DragDropDOMAdapter(e,t){var o=this;void 0===t&&(t=!0),this.dd=e,this.longTap=t,this.scrollIntervalId=null,this.stopLongTapIfMoveEnough=function(e){e.preventDefault(),o.currentX=e.pageX,o.currentY=e.pageY,o.isMicroMovement||(o.returnUserSelectBack(),o.stopLongTap())},this.stopLongTap=function(e){clearTimeout(o.timeoutID),o.timeoutID=null,document.removeEventListener("pointerup",o.stopLongTap),document.removeEventListener("pointermove",o.stopLongTapIfMoveEnough)},this.handlePointerCancel=function(e){o.clear()},this.handleEscapeButton=function(e){27==e.keyCode&&o.clear()},this.onContextMenu=function(e){e.preventDefault(),e.stopPropagation()},this.dragOver=function(e){o.moveShortcutElement(e),o.draggedElementShortcut.style.cursor="grabbing",o.dd.dragOver(e)},this.clear=function(){cancelAnimationFrame(o.scrollIntervalId),document.removeEventListener("pointermove",o.dragOver),document.removeEventListener("pointercancel",o.handlePointerCancel),document.removeEventListener("keydown",o.handleEscapeButton),document.removeEventListener("pointerup",o.drop),o.draggedElementShortcut.removeEventListener("pointerup",o.drop),r.IsTouch&&o.draggedElementShortcut.removeEventListener("contextmenu",o.onContextMenu),o.draggedElementShortcut.parentElement.removeChild(o.draggedElementShortcut),o.dd.clear(),o.draggedElementShortcut=null,o.scrollIntervalId=null,r.IsTouch&&(o.savedTargetNode.style.cssText=null,o.savedTargetNode&&o.savedTargetNode.parentElement.removeChild(o.savedTargetNode),o.savedTargetNodeParent.appendChild(o.savedTargetNode),DragDropDOMAdapter.PreventScrolling=!1),o.savedTargetNode=null,o.savedTargetNodeParent=null,o.returnUserSelectBack()},this.drop=function(){o.dd.drop(),o.clear()},this.draggedElementShortcut=null}return Object.defineProperty(DragDropDOMAdapter.prototype,"rootElement",{get:function(){return Object(n.isShadowDOM)(i.settings.environment.root)?i.settings.environment.root.host:this.rootContainer||i.settings.environment.root.documentElement||document.body},enumerable:!1,configurable:!0}),Object.defineProperty(DragDropDOMAdapter.prototype,"isMicroMovement",{get:function(){var e=Math.abs(this.currentX-this.startX),t=Math.abs(this.currentY-this.startY);return e<5&&t<5},enumerable:!1,configurable:!0}),DragDropDOMAdapter.prototype.startLongTapProcessing=function(e,t,o,n,r){var i=this;void 0===r&&(r=!1),this.startX=e.pageX,this.startY=e.pageY,document.body.style.setProperty("touch-action","none","important"),this.timeoutID=setTimeout(function(){i.doStartDrag(e,t,o,n),r||(i.savedTargetNode=e.target,i.savedTargetNode.style.cssText="\n          position: absolute;\n          height: 1px!important;\n          width: 1px!important;\n          overflow: hidden;\n          clip: rect(1px 1px 1px 1px);\n          clip: rect(1px, 1px, 1px, 1px);\n        ",i.savedTargetNodeParent=i.savedTargetNode.parentElement,i.rootElement.appendChild(i.savedTargetNode)),i.stopLongTap()},this.longTap?500:0),document.addEventListener("pointerup",this.stopLongTap),document.addEventListener("pointermove",this.stopLongTapIfMoveEnough)},DragDropDOMAdapter.prototype.moveShortcutElement=function(e){var t=this.rootElement.getBoundingClientRect().x,o=this.rootElement.getBoundingClientRect().y;this.doScroll(e.clientY,e.clientX);var n=this.draggedElementShortcut.offsetHeight,r=this.draggedElementShortcut.offsetWidth,i=this.draggedElementShortcut.shortcutXOffset||r/2,s=this.draggedElementShortcut.shortcutYOffset||n/2;0!==document.querySelectorAll("[dir='rtl']").length&&(i=r/2,s=n/2);var a=document.documentElement.clientHeight,l=document.documentElement.clientWidth,u=e.pageX,c=e.pageY,p=e.clientX,d=e.clientY,h=this.getShortcutBottomCoordinate(d,n,s);if(this.getShortcutRightCoordinate(p,r,i)>=l){this.draggedElementShortcut.style.left=l-r-t+"px",this.draggedElementShortcut.style.top=d-s-o+"px";return}if(p-i<=0){this.draggedElementShortcut.style.left=u-p-t+"px",this.draggedElementShortcut.style.top=d-o-s+"px";return}if(h>=a){this.draggedElementShortcut.style.left=p-i-t+"px",this.draggedElementShortcut.style.top=a-n-o+"px";return}if(d-s<=0){this.draggedElementShortcut.style.left=p-i-t+"px",this.draggedElementShortcut.style.top=c-d-o+"px";return}this.draggedElementShortcut.style.left=p-t-i+"px",this.draggedElementShortcut.style.top=d-o-s+"px"},DragDropDOMAdapter.prototype.getShortcutBottomCoordinate=function(e,t,o){return e+t-o},DragDropDOMAdapter.prototype.getShortcutRightCoordinate=function(e,t,o){return e+t-o},DragDropDOMAdapter.prototype.doScroll=function(e,t){var o,r,i,s,a=this;cancelAnimationFrame(this.scrollIntervalId);var l=this.draggedElementShortcut.style.display;this.draggedElementShortcut.style.display="none";var u=document.elementFromPoint(t,e);this.draggedElementShortcut.style.display=l||"block";var c=Object(n.findScrollableParent)(u);"HTML"===c.tagName?(o=0,r=document.documentElement.clientHeight,i=0,s=document.documentElement.clientWidth):(o=c.getBoundingClientRect().top,r=c.getBoundingClientRect().bottom,i=c.getBoundingClientRect().left,s=c.getBoundingClientRect().right);var repeat=function(){e-o<=100?c.scrollTop-=15:r-e<=100?c.scrollTop+=15:s-t<=100?c.scrollLeft+=15:t-i<=100&&(c.scrollLeft-=15),a.scrollIntervalId=requestAnimationFrame(repeat)};this.scrollIntervalId=requestAnimationFrame(repeat)},DragDropDOMAdapter.prototype.doStartDrag=function(e,t,o,n){r.IsTouch&&(DragDropDOMAdapter.PreventScrolling=!0),3!==e.which&&(this.dd.dragInit(e,t,o,n),this.rootElement.append(this.draggedElementShortcut),this.moveShortcutElement(e),document.addEventListener("pointermove",this.dragOver),document.addEventListener("pointercancel",this.handlePointerCancel),document.addEventListener("keydown",this.handleEscapeButton),document.addEventListener("pointerup",this.drop),r.IsTouch?this.draggedElementShortcut.addEventListener("contextmenu",this.onContextMenu):this.draggedElementShortcut.addEventListener("pointerup",this.drop))},DragDropDOMAdapter.prototype.returnUserSelectBack=function(){document.body.style.setProperty("touch-action","auto"),document.body.style.setProperty("user-select","auto"),document.body.style.setProperty("-webkit-user-select","auto")},DragDropDOMAdapter.prototype.startDrag=function(e,t,o,n,i){if(void 0===i&&(i=!1),document.body.style.setProperty("user-select","none","important"),document.body.style.setProperty("-webkit-user-select","none","important"),r.IsTouch){this.startLongTapProcessing(e,t,o,n,i);return}this.doStartDrag(e,t,o,n)},DragDropDOMAdapter.PreventScrolling=!1,DragDropDOMAdapter}()},"./src/dragdrop/matrix-rows.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"DragDropMatrixRows",function(){return s});var n,r=o(/*! ./core */"./src/dragdrop/core.ts"),i=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),s=function(e){function DragDropMatrixRows(){var t=null!==e&&e.apply(this,arguments)||this;return t.fromIndex=null,t.toIndex=null,t.doDrop=function(){return t.parentElement.moveRowByIndex(t.fromIndex,t.toIndex),t.parentElement},t}return i(DragDropMatrixRows,e),Object.defineProperty(DragDropMatrixRows.prototype,"draggedElementType",{get:function(){return"matrix-row"},enumerable:!1,configurable:!0}),DragDropMatrixRows.prototype.onStartDrag=function(){this.restoreUserSelectValue=document.body.style.userSelect,document.body.style.userSelect="none"},DragDropMatrixRows.prototype.createDraggedElementShortcut=function(e,t,o){var n=this,r=document.createElement("div");if(r.style.cssText=" \n          cursor: grabbing;\n          position: absolute;\n          z-index: 10000;\n          font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n        ",t){var i=t.closest("[data-sv-drop-target-matrix-row]"),s=i.cloneNode(!0);s.style.cssText="\n        box-shadow: var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1));\n        background-color: var(--sjs-general-backcolor, var(--background, #fff));\n        display: flex;\n        flex-grow: 0;\n        flex-shrink: 0;\n        align-items: center;\n        line-height: 0;\n        width: "+i.offsetWidth+"px;\n      ",s.classList.remove("sv-matrix__drag-drop--moveup"),s.classList.remove("sv-matrix__drag-drop--movedown"),this.draggedElement.isDragDropMoveDown=!1,this.draggedElement.isDragDropMoveUp=!1,r.appendChild(s);var a=t.getBoundingClientRect();r.shortcutXOffset=o.clientX-a.x,r.shortcutYOffset=o.clientY-a.y}return this.parentElement.renderedTable.rows.forEach(function(e,t){e.row===n.draggedElement&&(e.isGhostRow=!0)}),this.fromIndex=this.parentElement.visibleRows.indexOf(this.draggedElement),r},DragDropMatrixRows.prototype.getDropTargetByDataAttributeValue=function(e){return this.parentElement.renderedTable.rows.filter(function(t){return t.row&&t.row.id===e})[0].row},DragDropMatrixRows.prototype.isDropTargetValid=function(e,t){return!0},DragDropMatrixRows.prototype.calculateIsBottom=function(e){var t=this.parentElement.renderedTable.rows.map(function(e){return e.row});return t.indexOf(this.dropTarget)-t.indexOf(this.draggedElement)>0},DragDropMatrixRows.prototype.afterDragOver=function(t){var o,n,r,i=this;if(!this.isDropTargetDoesntChanged(this.isBottom)&&this.dropTarget!==this.draggedElement){var s=this.parentElement.renderedTable.rows;s.forEach(function(e,t){e.row===i.dropTarget&&(o=t),e.row===i.draggedElement&&(r=e,n=t,r.isGhostRow=!0)}),s.splice(n,1),s.splice(o,0,r),this.toIndex=this.parentElement.visibleRows.indexOf(this.dropTarget),e.prototype.ghostPositionChanged.call(this)}},DragDropMatrixRows.prototype.clear=function(){this.parentElement.renderedTable.rows.forEach(function(e){e.isGhostRow=!1}),this.parentElement.clearOnDrop(),this.fromIndex=null,this.toIndex=null,document.body.style.userSelect=this.restoreUserSelectValue||"initial",e.prototype.clear.call(this)},DragDropMatrixRows}(r.DragDropCore)},"./src/dragdrop/ranking-choices.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"DragDropRankingChoices",function(){return l});var n,r=o(/*! ./choices */"./src/dragdrop/choices.ts"),i=o(/*! ../utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),s=o(/*! ../utils/devices */"./src/utils/devices.ts"),a=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),l=function(e){function DragDropRankingChoices(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDragOverRootNode=!1,t.doDragOver=function(){t.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item").style.cursor="grabbing"},t.doBanDropHere=function(){if(t.isDragOverRootNode){t.allowDropHere=!0;return}t.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item").style.cursor="not-allowed"},t.doDrop=function(){return t.parentElement.setValue(),t.parentElement},t}return a(DragDropRankingChoices,e),Object.defineProperty(DragDropRankingChoices.prototype,"draggedElementType",{get:function(){return"ranking-item"},enumerable:!1,configurable:!0}),DragDropRankingChoices.prototype.createDraggedElementShortcut=function(e,t,o){var n=document.createElement("div");n.className=this.shortcutClass+" sv-ranking-shortcut",n.style.cssText=" \n          cursor: grabbing;\n          position: absolute;\n          z-index: 10000;\n          border-radius: calc(12.5 * var(--sjs-base-unit, var(--base-unit, 8px)));\n          min-width: 100px;\n          max-width: 400px;\n          box-shadow: var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1));\n          background-color: var(--sjs-general-backcolor, var(--background, #fff));\n          font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n        ";var r=t.cloneNode(!0);n.appendChild(r);var i=t.getBoundingClientRect();return n.shortcutXOffset=o.clientX-i.x,n.shortcutYOffset=o.clientY-i.y,this.parentElement&&this.parentElement.useFullItemSizeForShortcut&&(n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px"),n},Object.defineProperty(DragDropRankingChoices.prototype,"shortcutClass",{get:function(){return new i.CssClassBuilder().append(this.parentElement.cssClasses.root).append(this.parentElement.cssClasses.rootMobileMod,s.IsMobile).toString()},enumerable:!1,configurable:!0}),DragDropRankingChoices.prototype.getDropTargetByDataAttributeValue=function(e){return this.parentElement.rankingChoices[e]},DragDropRankingChoices.prototype.findDropTargetNodeByDragOverNode=function(t){return this.isDragOverRootNode=this.getIsDragOverRootNode(t),e.prototype.findDropTargetNodeByDragOverNode.call(this,t)},DragDropRankingChoices.prototype.getIsDragOverRootNode=function(e){return"string"==typeof e.className&&-1!==e.className.indexOf("sv-ranking")},DragDropRankingChoices.prototype.isDropTargetValid=function(e,t){var o=this.parentElement.rankingChoices,n=o.indexOf(this.dropTarget),r=o.indexOf(this.draggedElement);return r>n&&t.classList.contains("sv-dragdrop-moveup")||r<n&&t.classList.contains("sv-dragdrop-movedown")?(this.parentElement.dropTargetNodeMove=null,!1):-1!==o.indexOf(e)},DragDropRankingChoices.prototype.calculateIsBottom=function(e){var t=this.parentElement.rankingChoices;return t.indexOf(this.dropTarget)-t.indexOf(this.draggedElement)>0},DragDropRankingChoices.prototype.afterDragOver=function(e){var t=this.parentElement.rankingChoices,o=t.indexOf(this.dropTarget),n=t.indexOf(this.draggedElement);t.splice(n,1),t.splice(o,0,this.draggedElement),this.parentElement.setPropertyValue("rankingChoices",t),this.updateDraggedElementShortcut(o+1),n!==o&&(e.classList.remove("sv-dragdrop-moveup"),e.classList.remove("sv-dragdrop-movedown"),this.parentElement.dropTargetNodeMove=null),n>o&&(this.parentElement.dropTargetNodeMove="down"),n<o&&(this.parentElement.dropTargetNodeMove="up")},DragDropRankingChoices.prototype.updateDraggedElementShortcut=function(e){this.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item__index").innerText=null!==e?e+"":""},DragDropRankingChoices.prototype.ghostPositionChanged=function(){this.parentElement.currentDropTarget=this.draggedElement,e.prototype.ghostPositionChanged.call(this)},DragDropRankingChoices.prototype.clear=function(){this.parentElement&&(this.parentElement.dropTargetNodeMove=null,this.parentElement.updateRankingChoices(!0)),e.prototype.clear.call(this)},DragDropRankingChoices}(r.DragDropChoices)},"./src/dragdrop/ranking-select-to-rank.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"DragDropRankingSelectToRank",function(){return s});var n,r=o(/*! ./ranking-choices */"./src/dragdrop/ranking-choices.ts"),i=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),s=function(e){function DragDropRankingSelectToRank(){return null!==e&&e.apply(this,arguments)||this}return i(DragDropRankingSelectToRank,e),DragDropRankingSelectToRank.prototype.findDropTargetNodeByDragOverNode=function(t){if("from-container"===t.dataset.ranking||"to-container"===t.dataset.ranking)return t;if(this.parentElement.isEmpty()){var o=t.closest("[data-ranking='to-container']"),n=t.closest("[data-ranking='from-container']");return o||n||null}return e.prototype.findDropTargetNodeByDragOverNode.call(this,t)},DragDropRankingSelectToRank.prototype.getDropTargetByDataAttributeValue=function(e){return this.parentElement.rankingChoices[e]||this.parentElement.unRankingChoices[e]},DragDropRankingSelectToRank.prototype.getDropTargetByNode=function(t,o){return"to-container"===t.dataset.ranking?"to-container":"from-container"===t.dataset.ranking||t.closest("[data-ranking='from-container']")?"from-container":e.prototype.getDropTargetByNode.call(this,t,o)},DragDropRankingSelectToRank.prototype.isDropTargetValid=function(t,o){return"to-container"===t||"from-container"===t||e.prototype.isDropTargetValid.call(this,t,o)},DragDropRankingSelectToRank.prototype.afterDragOver=function(e){var t=this.parentElement,o=t.rankingChoices,n=t.unRankingChoices;if(this.isDraggedElementUnranked&&this.isDropTargetRanked){this.doRankBetween(e,n,o,this.selectToRank);return}if(this.isDraggedElementRanked&&this.isDropTargetRanked){this.doRankBetween(e,o,o,this.reorderRankedItem);return}if(this.isDraggedElementRanked&&!this.isDropTargetRanked){this.doRankBetween(e,o,n,this.unselectFromRank);return}},DragDropRankingSelectToRank.prototype.doRankBetween=function(e,t,o,n){var r=this.parentElement,i=this.getIndixies(r,t,o),s=i.fromIndex,a=i.toIndex;n(r,s,a),this.doUIEffects(e,s,a)},DragDropRankingSelectToRank.prototype.getIndixies=function(e,t,o){var n=t.indexOf(this.draggedElement),r=o.indexOf(this.dropTarget);return -1===r&&(r=e.value.length),{fromIndex:n,toIndex:r}},DragDropRankingSelectToRank.prototype.doUIEffects=function(e,t,o){var n=this.parentElement,r="to-container"===this.dropTarget&&n.isEmpty(),i=!this.isDropTargetUnranked||r;this.updateDraggedElementShortcut(i?o+1:null),t!==o&&(e.classList.remove("sv-dragdrop-moveup"),e.classList.remove("sv-dragdrop-movedown"),n.dropTargetNodeMove=null),t>o&&(n.dropTargetNodeMove="down"),t<o&&(n.dropTargetNodeMove="up")},Object.defineProperty(DragDropRankingSelectToRank.prototype,"isDraggedElementRanked",{get:function(){return -1!==this.parentElement.rankingChoices.indexOf(this.draggedElement)},enumerable:!1,configurable:!0}),Object.defineProperty(DragDropRankingSelectToRank.prototype,"isDropTargetRanked",{get:function(){return"to-container"===this.dropTarget||-1!==this.parentElement.rankingChoices.indexOf(this.dropTarget)},enumerable:!1,configurable:!0}),Object.defineProperty(DragDropRankingSelectToRank.prototype,"isDraggedElementUnranked",{get:function(){return!this.isDraggedElementRanked},enumerable:!1,configurable:!0}),Object.defineProperty(DragDropRankingSelectToRank.prototype,"isDropTargetUnranked",{get:function(){return!this.isDropTargetRanked},enumerable:!1,configurable:!0}),DragDropRankingSelectToRank.prototype.selectToRank=function(e,t,o){var n=e.rankingChoices,r=e.unRankingChoices[t];n.splice(o,0,r),e.setPropertyValue("rankingChoices",n)},DragDropRankingSelectToRank.prototype.unselectFromRank=function(e,t,o){var n=e.rankingChoices;n.splice(t,1),e.setPropertyValue("rankingChoices",n)},DragDropRankingSelectToRank.prototype.reorderRankedItem=function(e,t,o){var n=e.rankingChoices,r=n[t];n.splice(t,1),n.splice(o,0,r),e.setPropertyValue("rankingChoices",n)},DragDropRankingSelectToRank}(r.DragDropRankingChoices)},"./src/dropdownListModel.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"DropdownListModel",function(){return g});var n,r=o(/*! ./base */"./src/base.ts"),i=o(/*! ./itemvalue */"./src/itemvalue.ts"),s=o(/*! ./jsonobject */"./src/jsonobject.ts"),a=o(/*! ./list */"./src/list.ts"),l=o(/*! ./popup */"./src/popup.ts"),u=o(/*! ./question_dropdown */"./src/question_dropdown.ts"),c=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),p=o(/*! ./utils/devices */"./src/utils/devices.ts"),d=o(/*! ./utils/utils */"./src/utils/utils.ts"),h=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},g=function(e){function DropdownListModel(t,o){var n=e.call(this)||this;return n.question=t,n.onSelectionChanged=o,n.minPageSize=25,n.loadingItemHeight=40,n._markdownMode=!1,n.selectedItemSelector=".sv-list__item--selected",n.itemSelector=".sv-list__item",n.itemsSettings={skip:0,take:0,totalCount:0,items:[]},n.isRunningLoadQuestionChoices=!1,n.popupCssClasses="sv-single-select-list",n.listModelFilterStringChanged=function(e){n.filterString!==e&&(n.filterString=e)},n.qustionPropertyChangedHandler=function(e,t){n.onPropertyChangedHandler(e,t)},t.onPropertyChanged.add(n.qustionPropertyChangedHandler),n.showInputFieldComponent=n.question.showInputFieldComponent,n.listModel=n.createListModel(),n.updateAfterListModelCreated(n.listModel),n.setSearchEnabled(n.question.searchEnabled),n.createPopup(),n.resetItemsSettings(),n}return h(DropdownListModel,e),Object.defineProperty(DropdownListModel.prototype,"focusFirstInputSelector",{get:function(){return this.getFocusFirstInputSelector()},enumerable:!1,configurable:!0}),DropdownListModel.prototype.getFocusFirstInputSelector=function(){return p.IsTouch?this.isValueEmpty(this.question.value)?this.itemSelector:this.selectedItemSelector:!this.listModel.showFilter&&this.question.value?this.selectedItemSelector:""},DropdownListModel.prototype.resetItemsSettings=function(){this.itemsSettings.skip=0,this.itemsSettings.take=Math.max(this.minPageSize,this.question.choicesLazyLoadPageSize),this.itemsSettings.totalCount=0,this.itemsSettings.items=[]},DropdownListModel.prototype.setItems=function(e,t){this.itemsSettings.items=[].concat(this.itemsSettings.items,e),this.itemsSettings.totalCount=t,this.listModel.isAllDataLoaded=this.question.choicesLazyLoadEnabled&&this.itemsSettings.items.length==this.itemsSettings.totalCount,this.question.choices=this.itemsSettings.items},DropdownListModel.prototype.updateQuestionChoices=function(e){var t=this;if(!this.isRunningLoadQuestionChoices){var o=this.itemsSettings.skip+1<this.itemsSettings.totalCount;(!this.itemsSettings.skip||o)&&(this.isRunningLoadQuestionChoices=!0,this.question.survey.loadQuestionChoices({question:this.question,filter:this.filterString,skip:this.itemsSettings.skip,take:this.itemsSettings.take,setItems:function(o,n){t.isRunningLoadQuestionChoices=!1,t.setItems(o||[],n||0),t.popupRecalculatePosition(t.itemsSettings.skip===t.itemsSettings.take),e&&e()}}),this.itemsSettings.skip+=this.itemsSettings.take)}},DropdownListModel.prototype.updatePopupFocusFirstInputSelector=function(){this._popupModel.focusFirstInputSelector=this.focusFirstInputSelector},DropdownListModel.prototype.createPopup=function(){var e=this;this._popupModel=new l.PopupModel("sv-list",{model:this.listModel},"bottom","center",!1),this._popupModel.displayMode=p.IsTouch?"overlay":"popup",this._popupModel.positionMode="fixed",this._popupModel.isFocusedContainer=!1,this._popupModel.isFocusedContent=p.IsTouch,this._popupModel.setWidthByTarget=!p.IsTouch,this.updatePopupFocusFirstInputSelector(),this.listModel.registerPropertyChangedHandlers(["showFilter"],function(){e.updatePopupFocusFirstInputSelector()}),this._popupModel.cssClass=this.popupCssClasses,this._popupModel.onVisibilityChanged.add(function(t,o){o.isVisible&&(e.listModel.renderElements=!0),o.isVisible&&e.question.choicesLazyLoadEnabled&&(e.listModel.actions=[],e.updateQuestionChoices()),o.isVisible&&e.question.onOpenedCallBack&&(e.updatePopupFocusFirstInputSelector(),e.question.onOpenedCallBack()),!o.isVisible&&(e.onHidePopup(),e.question.choicesLazyLoadEnabled&&e.resetItemsSettings()),e.question.processPopupVisiblilityChanged(e.popupModel,o.isVisible)})},DropdownListModel.prototype.setFilterStringToListModel=function(e){var t=this;if(this.listModel.filterString=e,this.listModel.resetFocusedItem(),this.question.selectedItem&&this.question.selectedItem.text.indexOf(e)>=0){this.listModel.focusedItem=this.getAvailableItems().filter(function(e){return e.id==t.question.selectedItem.value})[0],this.listModel.filterString&&this.listModel.actions.map(function(e){return e.selectedValue=!1});return}this.listModel.focusedItem&&this.listModel.isItemVisible(this.listModel.focusedItem)||this.listModel.focusFirstVisibleItem()},DropdownListModel.prototype.popupRecalculatePosition=function(e){var t=this;setTimeout(function(){t.popupModel.recalculatePosition(e)},1)},DropdownListModel.prototype.onHidePopup=function(){this.resetFilterString(),this.question.suggestedItem=null,this.listModel.refresh()},DropdownListModel.prototype.getAvailableItems=function(){return this.question.visibleChoices},DropdownListModel.prototype.createListModel=function(){var e=this,t=this.getAvailableItems(),o=this.onSelectionChanged;o||(o=function(t){e.question.value=t.id,e.question.searchEnabled&&e.applyInputString(t),e._popupModel.toggleVisibility()});var n=new a.ListModel(t,o,!1,void 0,this.question.choicesLazyLoadEnabled?this.listModelFilterStringChanged:void 0,this.listElementId);return n.renderElements=!1,n.forceShowFilter=!0,n.areSameItemsCallback=function(e,t){return e===t},n},DropdownListModel.prototype.updateAfterListModelCreated=function(e){var t=this;e.isItemSelected=function(e){return!!e.selected},e.locOwner=this.question,e.onPropertyChanged.add(function(e,o){"hasVerticalScroller"==o.name&&(t.hasScroll=o.newValue)}),e.isAllDataLoaded=!this.question.choicesLazyLoadEnabled},DropdownListModel.prototype.updateCssClasses=function(e,t){this.popupModel.cssClass=new c.CssClassBuilder().append(e).append(this.popupCssClasses).toString(),this.listModel.cssClasses=t},DropdownListModel.prototype.resetFilterString=function(){this.filterString&&(this.filterString=void 0)},DropdownListModel.prototype.clear=function(){this.inputString=null,this.hintString="",this.resetFilterString()},DropdownListModel.prototype.onSetFilterString=function(){var e=this;if(this.filterString||this.popupModel.isVisible){this.filterString&&!this.popupModel.isVisible&&(this.popupModel.isVisible=!0);var updateAfterFilterStringChanged=function(){e.setFilterStringToListModel(e.filterString),e.popupRecalculatePosition(!0)};this.question.choicesLazyLoadEnabled?(this.resetItemsSettings(),this.updateQuestionChoices(updateAfterFilterStringChanged)):updateAfterFilterStringChanged()}},Object.defineProperty(DropdownListModel.prototype,"isAllDataLoaded",{get:function(){return!!this.itemsSettings.totalCount&&this.itemsSettings.items.length==this.itemsSettings.totalCount},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"canShowSelectedItem",{get:function(){return!this.focused||this._markdownMode||!this.searchEnabled},enumerable:!1,configurable:!0}),DropdownListModel.prototype.applyInputString=function(e){(null==e?void 0:e.locText.hasHtml)||this.question.inputFieldComponentName?(this._markdownMode=!0,this.inputString="",this.hintString=""):(this.inputString=null==e?void 0:e.title,this.hintString=null==e?void 0:e.title)},DropdownListModel.prototype.fixInputCase=function(){var e=this.hintStringMiddle;e&&this.inputString!=e&&(this.inputString=e)},DropdownListModel.prototype.applyHintString=function(e){(null==e?void 0:e.locText.hasHtml)||this.question.inputFieldComponentName?(this._markdownMode=!0,this.hintString=""):this.hintString=null==e?void 0:e.title},Object.defineProperty(DropdownListModel.prototype,"inputStringRendered",{get:function(){return this.inputString||""},set:function(e){this.inputString=e,this.filterString=e,e?this.applyHintString(this.listModel.focusedItem||this.question.selectedItem):this.hintString=""},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"placeholderRendered",{get:function(){return this.hintString?"":this.question.readOnlyText},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"listElementId",{get:function(){return this.question.inputId+"_list"},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"hintStringLC",{get:function(){var e;return(null===(e=this.hintString)||void 0===e?void 0:e.toLowerCase())||""},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"inputStringLC",{get:function(){var e;return(null===(e=this.inputString)||void 0===e?void 0:e.toLowerCase())||""},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"showHintPrefix",{get:function(){return!!this.inputString&&this.hintStringLC.indexOf(this.inputStringLC)>0},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"hintStringPrefix",{get:function(){return this.inputString?this.hintString.substring(0,this.hintStringLC.indexOf(this.inputStringLC)):null},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"showHintString",{get:function(){return!!this.question.searchEnabled&&this.hintStringLC&&this.hintStringLC.indexOf(this.inputStringLC)>=0||!this.question.searchEnabled&&this.hintStringLC&&this.question.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"hintStringSuffix",{get:function(){return this.hintString.substring(this.hintStringLC.indexOf(this.inputStringLC)+this.inputStringLC.length)},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"hintStringMiddle",{get:function(){var e=this.hintStringLC.indexOf(this.inputStringLC);return -1==e?null:this.hintString.substring(e,e+this.inputStringLC.length)},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"popupModel",{get:function(){return this._popupModel},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"inputReadOnly",{get:function(){return this.question.isInputReadOnly||this.searchEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"filterStringEnabled",{get:function(){return!this.question.isInputReadOnly&&this.searchEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(DropdownListModel.prototype,"inputMode",{get:function(){return p.IsTouch?"none":"text"},enumerable:!1,configurable:!0}),DropdownListModel.prototype.setSearchEnabled=function(e){this.listModel.searchEnabled=p.IsTouch,this.listModel.showSearchClearButton=p.IsTouch,this.searchEnabled=e},DropdownListModel.prototype.updateItems=function(){this.listModel.setItems(this.getAvailableItems())},DropdownListModel.prototype.onClick=function(e){this.question.readOnly||this.question.isDesignMode||(this._popupModel.toggleVisibility(),this.focusItemOnClickAndPopup(),this.question.focus())},DropdownListModel.prototype.chevronPointerDown=function(e){this._popupModel.isVisible&&e.preventDefault()},DropdownListModel.prototype.onPropertyChangedHandler=function(e,t){"value"==t.name&&(this.showInputFieldComponent=this.question.showInputFieldComponent),"choicesLazyLoadEnabled"==t.name&&t.newValue&&this.listModel.setOnFilterStringChangedCallback(this.listModelFilterStringChanged)},DropdownListModel.prototype.focusItemOnClickAndPopup=function(){this._popupModel.isVisible&&this.question.value&&this.changeSelectionWithKeyboard(!1)},DropdownListModel.prototype.onClear=function(e){this.question.clearValue(),this._popupModel.isVisible=!1,e&&(e.preventDefault(),e.stopPropagation())},DropdownListModel.prototype.getSelectedAction=function(){return this.question.selectedItem||null},DropdownListModel.prototype.changeSelectionWithKeyboard=function(e){var t,o=this.listModel.focusedItem;!o&&this.question.selectedItem?i.ItemValue.getItemByValue(this.question.choices,this.question.value)&&(this.listModel.focusedItem=this.question.selectedItem):e?this.listModel.focusPrevVisibleItem():this.listModel.focusNextVisibleItem(),this.beforeScrollToFocusedItem(o),this.scrollToFocusedItem(),this.afterScrollToFocusedItem(),this.ariaActivedescendant=null===(t=this.listModel.focusedItem)||void 0===t?void 0:t.elementId},DropdownListModel.prototype.beforeScrollToFocusedItem=function(e){this.question.value&&e&&(e.selectedValue=!1,this.listModel.focusedItem.selectedValue=!this.listModel.filterString,this.question.suggestedItem=this.listModel.focusedItem)},DropdownListModel.prototype.afterScrollToFocusedItem=function(){var e;this.question.value&&!this.listModel.filterString&&this.question.searchEnabled?this.applyInputString(this.listModel.focusedItem||this.question.selectedItem):this.applyHintString(this.listModel.focusedItem||this.question.selectedItem),this.fixInputCase(),this.ariaActivedescendant=null===(e=this.listModel.focusedItem)||void 0===e?void 0:e.elementId},DropdownListModel.prototype.keyHandler=function(e){var t=e.which||e.keyCode;if(this.popupModel.isVisible&&38===e.keyCode?(this.changeSelectionWithKeyboard(!0),e.preventDefault(),e.stopPropagation()):40===e.keyCode&&(this.popupModel.isVisible||this.popupModel.toggleVisibility(),this.changeSelectionWithKeyboard(!1),e.preventDefault(),e.stopPropagation()),9===e.keyCode)this.popupModel.isVisible=!1;else if(this.popupModel.isVisible||13!==e.keyCode&&32!==e.keyCode){if(!this.popupModel.isVisible||13!==e.keyCode&&(32!==e.keyCode||this.question.searchEnabled&&this.inputString)){if(46===t||8===t)this.searchEnabled||this.onClear(e);else if(27===e.keyCode)this._popupModel.isVisible=!1,this.hintString="",this.onEscape();else{if(38!==e.keyCode&&40!==e.keyCode&&(32!==e.keyCode||this.question.searchEnabled)||(e.preventDefault(),e.stopPropagation()),32===e.keyCode&&this.question.searchEnabled)return;Object(d.doKey2ClickUp)(e,{processEsc:!1,disableTabStop:this.question.isInputReadOnly})}}else 13===e.keyCode&&this.question.searchEnabled&&!this.inputString&&this.question instanceof u.QuestionDropdownModel&&!this._markdownMode&&this.question.value?(this._popupModel.isVisible=!1,this.onClear(e)):(this.listModel.selectFocusedItem(),this.onFocus(e)),this.question.survey.questionEditFinishCallback(this.question,e),e.preventDefault(),e.stopPropagation()}else this.popupModel.toggleVisibility(),this.changeSelectionWithKeyboard(!1),e.preventDefault(),e.stopPropagation()},DropdownListModel.prototype.onEscape=function(){this.question.searchEnabled&&this.applyInputString(this.question.selectedItem)},DropdownListModel.prototype.onScroll=function(e){var t=e.target;t.scrollHeight-(t.scrollTop+t.offsetHeight)<=this.loadingItemHeight&&this.updateQuestionChoices()},DropdownListModel.prototype.onBlur=function(e){if(this.focused=!1,this.popupModel.isVisible&&p.IsTouch){this._popupModel.isVisible=!0;return}Object(d.doKey2ClickBlur)(e),this._popupModel.isVisible=!1,this.resetFilterString(),this.inputString=null,this.hintString="",e.stopPropagation()},DropdownListModel.prototype.onFocus=function(e){this.focused=!0,this.setInputStringFromSelectedItem(this.question.selectedItem)},DropdownListModel.prototype.setInputStringFromSelectedItem=function(e){this.focused&&(this.question.searchEnabled&&e?this.applyInputString(e):this.inputString=null)},DropdownListModel.prototype.dispose=function(){e.prototype.dispose.call(this),this.question&&this.question.onPropertyChanged.remove(this.qustionPropertyChangedHandler),this.qustionPropertyChangedHandler=void 0,this.listModel&&this.listModel.dispose(),this.popupModel&&this.popupModel.dispose()},DropdownListModel.prototype.scrollToFocusedItem=function(){this.listModel.scrollToFocusedItem()},__decorate([Object(s.property)({defaultValue:!0})],DropdownListModel.prototype,"searchEnabled",void 0),__decorate([Object(s.property)({defaultValue:"",onSet:function(e,t){t.onSetFilterString()}})],DropdownListModel.prototype,"filterString",void 0),__decorate([Object(s.property)({defaultValue:"",onSet:function(e,t){t.question.inputHasValue=!!e}})],DropdownListModel.prototype,"inputString",void 0),__decorate([Object(s.property)({})],DropdownListModel.prototype,"showInputFieldComponent",void 0),__decorate([Object(s.property)()],DropdownListModel.prototype,"ariaActivedescendant",void 0),__decorate([Object(s.property)({defaultValue:!1,onSet:function(e,t){e?t.listModel.addScrollEventListener(function(e){t.onScroll(e)}):t.listModel.removeScrollEventListener()}})],DropdownListModel.prototype,"hasScroll",void 0),__decorate([Object(s.property)({defaultValue:""})],DropdownListModel.prototype,"hintString",void 0),DropdownListModel}(r.Base)},"./src/dropdownMultiSelectListModel.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"DropdownMultiSelectListModel",function(){return p});var n,r=o(/*! ./base */"./src/base.ts"),i=o(/*! ./dropdownListModel */"./src/dropdownListModel.ts"),s=o(/*! ./jsonobject */"./src/jsonobject.ts"),a=o(/*! ./multiSelectListModel */"./src/multiSelectListModel.ts"),l=o(/*! ./settings */"./src/settings.ts"),u=o(/*! ./utils/devices */"./src/utils/devices.ts"),c=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},p=function(e){function DropdownMultiSelectListModel(t,o){var n=e.call(this,t,o)||this;return n.popupCssClasses="sv-multi-select-list",n.setHideSelectedItems(t.hideSelectedItems),n.syncFilterStringPlaceholder(),n.closeOnSelect=t.closeOnSelect,n}return c(DropdownMultiSelectListModel,e),DropdownMultiSelectListModel.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.syncFilterStringPlaceholder()},DropdownMultiSelectListModel.prototype.updateListState=function(){this.listModel.updateState(),this.syncFilterStringPlaceholder()},DropdownMultiSelectListModel.prototype.syncFilterStringPlaceholder=function(){this.getSelectedActions().length||this.question.selectedItems.length||this.listModel.focusedItem?this.filterStringPlaceholder=void 0:this.filterStringPlaceholder=this.question.placeholder},DropdownMultiSelectListModel.prototype.getSelectedActions=function(){return this.listModel.actions.filter(function(e){return e.selected})},DropdownMultiSelectListModel.prototype.getFocusFirstInputSelector=function(){return this.listModel.hideSelectedItems&&u.IsTouch&&!this.isValueEmpty(this.question.value)?this.itemSelector:e.prototype.getFocusFirstInputSelector.call(this)},DropdownMultiSelectListModel.prototype.createListModel=function(){var e=this,t=this.getAvailableItems(),o=this.onSelectionChanged;o||(o=function(t,o){e.resetFilterString(),"selectall"===t.value?e.selectAllItems():"added"===o&&t.value===l.settings.noneItemValue?e.selectNoneItem():"added"===o?e.selectItem(t.value):"removed"===o&&e.deselectItem(t.value),e.popupRecalculatePosition(!1),e.closeOnSelect&&(e.popupModel.isVisible=!1)});var n=new a.MultiSelectListModel(t,o,!1,void 0,this.question.choicesLazyLoadEnabled?this.listModelFilterStringChanged:void 0,this.listElementId);return n.forceShowFilter=!0,n},DropdownMultiSelectListModel.prototype.resetFilterString=function(){e.prototype.resetFilterString.call(this),this.inputString=null,this.hintString=""},Object.defineProperty(DropdownMultiSelectListModel.prototype,"shouldResetAfterCancel",{get:function(){return u.IsTouch&&!this.closeOnSelect},enumerable:!1,configurable:!0}),DropdownMultiSelectListModel.prototype.createPopup=function(){var t=this;e.prototype.createPopup.call(this),this.popupModel.onFooterActionsCreated.add(function(e,o){t.shouldResetAfterCancel&&o.actions.push({id:"sv-dropdown-done-button",title:t.doneButtonCaption,innerCss:"sv-popup__button--done",needSpace:!0,action:function(){t.popupModel.isVisible=!1},enabled:new r.ComputedUpdater(function(){return!t.isTwoValueEquals(t.question.renderedValue,t.previousValue)})})}),this.popupModel.onVisibilityChanged.add(function(e,o){t.shouldResetAfterCancel&&o.isVisible&&(t.previousValue=[].concat(t.question.renderedValue||[]))}),this.popupModel.onCancel=function(){t.shouldResetAfterCancel&&(t.question.renderedValue=t.previousValue,t.updateListState())}},DropdownMultiSelectListModel.prototype.selectAllItems=function(){this.question.toggleSelectAll(),this.updateListState()},DropdownMultiSelectListModel.prototype.selectNoneItem=function(){this.question.renderedValue=[l.settings.noneItemValue],this.updateListState()},DropdownMultiSelectListModel.prototype.selectItem=function(e){var t=[].concat(this.question.renderedValue||[]);t.push(e),this.question.renderedValue=t,this.updateListState()},DropdownMultiSelectListModel.prototype.deselectItem=function(e){var t=[].concat(this.question.renderedValue||[]);t.splice(t.indexOf(e),1),this.question.renderedValue=t,this.applyHintString(this.listModel.focusedItem),this.updateListState()},DropdownMultiSelectListModel.prototype.clear=function(){e.prototype.clear.call(this),this.syncFilterStringPlaceholder()},DropdownMultiSelectListModel.prototype.onClear=function(t){e.prototype.onClear.call(this,t),this.updateListState()},DropdownMultiSelectListModel.prototype.setHideSelectedItems=function(e){this.listModel.hideSelectedItems=e,this.updateListState()},DropdownMultiSelectListModel.prototype.removeLastSelectedItem=function(){this.deselectItem(this.question.renderedValue[this.question.renderedValue.length-1]),this.popupRecalculatePosition(!1)},DropdownMultiSelectListModel.prototype.inputKeyHandler=function(e){8!==e.keyCode||this.filterString||(this.removeLastSelectedItem(),e.preventDefault(),e.stopPropagation())},DropdownMultiSelectListModel.prototype.setInputStringFromSelectedItem=function(e){this.question.searchEnabled&&(this.inputString=null)},DropdownMultiSelectListModel.prototype.focusItemOnClickAndPopup=function(){},DropdownMultiSelectListModel.prototype.onEscape=function(){},DropdownMultiSelectListModel.prototype.beforeScrollToFocusedItem=function(e){},DropdownMultiSelectListModel.prototype.afterScrollToFocusedItem=function(){var e;(null===(e=this.listModel.focusedItem)||void 0===e?void 0:e.selected)?this.hintString="":this.applyHintString(this.listModel.focusedItem||this.question.selectedItem),this.syncFilterStringPlaceholder()},DropdownMultiSelectListModel.prototype.onPropertyChangedHandler=function(t,o){e.prototype.onPropertyChangedHandler.call(this,t,o),("value"===o.name||"renderedValue"===o.name)&&this.syncFilterStringPlaceholder()},__decorate([Object(s.property)({defaultValue:""})],DropdownMultiSelectListModel.prototype,"filterStringPlaceholder",void 0),__decorate([Object(s.property)({defaultValue:!0})],DropdownMultiSelectListModel.prototype,"closeOnSelect",void 0),__decorate([Object(s.property)()],DropdownMultiSelectListModel.prototype,"previousValue",void 0),__decorate([Object(s.property)({localizable:{defaultStr:"tagboxDoneButtonCaption"}})],DropdownMultiSelectListModel.prototype,"doneButtonCaption",void 0),DropdownMultiSelectListModel}(i.DropdownListModel)},"./src/dxSurveyService.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"dxSurveyService",function(){return r});var n=o(/*! ./settings */"./src/settings.ts"),r=function(){function dxSurveyService(){}return Object.defineProperty(dxSurveyService,"serviceUrl",{get:function(){return n.settings.web.surveyServiceUrl},set:function(e){n.settings.web.surveyServiceUrl=e},enumerable:!1,configurable:!0}),dxSurveyService.prototype.loadSurvey=function(e,t){var o=new XMLHttpRequest;o.open("GET",dxSurveyService.serviceUrl+"/getSurvey?surveyId="+e),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){var e=JSON.parse(o.response);t(200==o.status,e,o.response)},o.send()},dxSurveyService.prototype.getSurveyJsonAndIsCompleted=function(e,t,o){var n=new XMLHttpRequest;n.open("GET",dxSurveyService.serviceUrl+"/getSurveyAndIsCompleted?surveyId="+e+"&clientId="+t),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onload=function(){var e=JSON.parse(n.response),t=e?e.survey:null,r=e?e.isCompleted:null;o(200==n.status,t,r,n.response)},n.send()},dxSurveyService.prototype.sendResult=function(e,t,o,n,r){void 0===n&&(n=null),void 0===r&&(r=!1);var i=new XMLHttpRequest;i.open("POST",dxSurveyService.serviceUrl+"/post/"),i.setRequestHeader("Content-Type","application/json; charset=utf-8");var s={postId:e,surveyResult:JSON.stringify(t)};n&&(s.clientId=n),r&&(s.isPartialCompleted=!0);var a=JSON.stringify(s);i.onload=i.onerror=function(){o&&o(200===i.status,i.response,i)},i.send(a)},dxSurveyService.prototype.sendFile=function(e,t,o){var n=new XMLHttpRequest;n.onload=n.onerror=function(){o&&o(200==n.status,JSON.parse(n.response))},n.open("POST",dxSurveyService.serviceUrl+"/upload/",!0);var r=new FormData;r.append("file",t),r.append("postId",e),n.send(r)},dxSurveyService.prototype.getResult=function(e,t,o){var n=new XMLHttpRequest;n.open("GET",dxSurveyService.serviceUrl+"/getResult?resultId="+e+"&name="+t),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onload=function(){var e=null,t=null;if(200==n.status)for(var r in e=JSON.parse(n.response),t=[],e.QuestionResult){var i={name:r,value:e.QuestionResult[r]};t.push(i)}o(200==n.status,e,t,n.response)},n.send()},dxSurveyService.prototype.isCompleted=function(e,t,o){var n=new XMLHttpRequest;n.open("GET",dxSurveyService.serviceUrl+"/isCompleted?resultId="+e+"&clientId="+t),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onload=function(){var e=null;200==n.status&&(e=JSON.parse(n.response)),o(200==n.status,e,n.response)},n.send()},dxSurveyService}()},"./src/element-helper.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"ElementHelper",function(){return n});var n=function(){function ElementHelper(){}return ElementHelper.focusElement=function(e){e&&e.focus()},ElementHelper.visibility=function(e){var t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&(!e.parentElement||this.visibility(e.parentElement))},ElementHelper.getNextElementPreorder=function(e){var t=e.nextElementSibling?e.nextElementSibling:e.parentElement.firstElementChild;return this.visibility(t)?t:this.getNextElementPreorder(t)},ElementHelper.getNextElementPostorder=function(e){var t=e.previousElementSibling?e.previousElementSibling:e.parentElement.lastElementChild;return this.visibility(t)?t:this.getNextElementPostorder(t)},ElementHelper.hasHorizontalScroller=function(e){return!!e&&e.scrollWidth>e.offsetWidth},ElementHelper.hasVerticalScroller=function(e){return!!e&&e.scrollHeight>e.offsetHeight},ElementHelper}()},"./src/entries/chunks/model.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"Version",function(){return n}),o.d(t,"ReleaseDate",function(){return r}),o.d(t,"checkLibraryVersion",function(){return checkLibraryVersion}),o.d(t,"setLicenseKey",function(){return setLicenseKey}),o.d(t,"slk",function(){return slk}),o.d(t,"hasLicense",function(){return hasLicense});var n,r,i=o(/*! ../../settings */"./src/settings.ts");o.d(t,"settings",function(){return i.settings});var s=o(/*! ../../helpers */"./src/helpers.ts");o.d(t,"Helpers",function(){return s.Helpers});var a=o(/*! ../../validator */"./src/validator.ts");o.d(t,"AnswerCountValidator",function(){return a.AnswerCountValidator}),o.d(t,"EmailValidator",function(){return a.EmailValidator}),o.d(t,"NumericValidator",function(){return a.NumericValidator}),o.d(t,"RegexValidator",function(){return a.RegexValidator}),o.d(t,"SurveyValidator",function(){return a.SurveyValidator}),o.d(t,"TextValidator",function(){return a.TextValidator}),o.d(t,"ValidatorResult",function(){return a.ValidatorResult}),o.d(t,"ExpressionValidator",function(){return a.ExpressionValidator}),o.d(t,"ValidatorRunner",function(){return a.ValidatorRunner});var l=o(/*! ../../itemvalue */"./src/itemvalue.ts");o.d(t,"ItemValue",function(){return l.ItemValue});var u=o(/*! ../../base */"./src/base.ts");o.d(t,"Base",function(){return u.Base}),o.d(t,"Event",function(){return u.Event}),o.d(t,"EventBase",function(){return u.EventBase}),o.d(t,"ArrayChanges",function(){return u.ArrayChanges}),o.d(t,"ComputedUpdater",function(){return u.ComputedUpdater});var c=o(/*! ../../survey-error */"./src/survey-error.ts");o.d(t,"SurveyError",function(){return c.SurveyError});var p=o(/*! ../../survey-element */"./src/survey-element.ts");o.d(t,"SurveyElementCore",function(){return p.SurveyElementCore}),o.d(t,"SurveyElement",function(){return p.SurveyElement}),o.d(t,"DragTypeOverMeEnum",function(){return p.DragTypeOverMeEnum});var d=o(/*! ../../calculatedValue */"./src/calculatedValue.ts");o.d(t,"CalculatedValue",function(){return d.CalculatedValue});var h=o(/*! ../../error */"./src/error.ts");o.d(t,"CustomError",function(){return h.CustomError}),o.d(t,"AnswerRequiredError",function(){return h.AnswerRequiredError}),o.d(t,"OneAnswerRequiredError",function(){return h.OneAnswerRequiredError}),o.d(t,"RequreNumericError",function(){return h.RequreNumericError}),o.d(t,"ExceedSizeError",function(){return h.ExceedSizeError});var g=o(/*! ../../localizablestring */"./src/localizablestring.ts");o.d(t,"LocalizableString",function(){return g.LocalizableString}),o.d(t,"LocalizableStrings",function(){return g.LocalizableStrings});var f=o(/*! ../../expressionItems */"./src/expressionItems.ts");o.d(t,"HtmlConditionItem",function(){return f.HtmlConditionItem}),o.d(t,"UrlConditionItem",function(){return f.UrlConditionItem});var y=o(/*! ../../choicesRestful */"./src/choicesRestful.ts");o.d(t,"ChoicesRestful",function(){return y.ChoicesRestful}),o.d(t,"ChoicesRestfull",function(){return y.ChoicesRestfull});var m=o(/*! ../../functionsfactory */"./src/functionsfactory.ts");o.d(t,"FunctionFactory",function(){return m.FunctionFactory}),o.d(t,"registerFunction",function(){return m.registerFunction});var v=o(/*! ../../conditions */"./src/conditions.ts");o.d(t,"ConditionRunner",function(){return v.ConditionRunner}),o.d(t,"ExpressionRunner",function(){return v.ExpressionRunner}),o.d(t,"ExpressionExecutor",function(){return v.ExpressionExecutor});var b=o(/*! ../../expressions/expressions */"./src/expressions/expressions.ts");o.d(t,"Operand",function(){return b.Operand}),o.d(t,"Const",function(){return b.Const}),o.d(t,"BinaryOperand",function(){return b.BinaryOperand}),o.d(t,"Variable",function(){return b.Variable}),o.d(t,"FunctionOperand",function(){return b.FunctionOperand}),o.d(t,"ArrayOperand",function(){return b.ArrayOperand}),o.d(t,"UnaryOperand",function(){return b.UnaryOperand});var C=o(/*! ../../conditionsParser */"./src/conditionsParser.ts");o.d(t,"ConditionsParser",function(){return C.ConditionsParser});var w=o(/*! ../../conditionProcessValue */"./src/conditionProcessValue.ts");o.d(t,"ProcessValue",function(){return w.ProcessValue});var P=o(/*! ../../jsonobject */"./src/jsonobject.ts");o.d(t,"JsonError",function(){return P.JsonError}),o.d(t,"JsonIncorrectTypeError",function(){return P.JsonIncorrectTypeError}),o.d(t,"JsonMetadata",function(){return P.JsonMetadata}),o.d(t,"JsonMetadataClass",function(){return P.JsonMetadataClass}),o.d(t,"JsonMissingTypeError",function(){return P.JsonMissingTypeError}),o.d(t,"JsonMissingTypeErrorBase",function(){return P.JsonMissingTypeErrorBase}),o.d(t,"JsonObject",function(){return P.JsonObject}),o.d(t,"JsonObjectProperty",function(){return P.JsonObjectProperty}),o.d(t,"JsonRequiredPropertyError",function(){return P.JsonRequiredPropertyError}),o.d(t,"JsonUnknownPropertyError",function(){return P.JsonUnknownPropertyError}),o.d(t,"Serializer",function(){return P.Serializer}),o.d(t,"property",function(){return P.property}),o.d(t,"propertyArray",function(){return P.propertyArray});var M=o(/*! ../../question_matrixdropdownbase */"./src/question_matrixdropdownbase.ts");o.d(t,"MatrixDropdownCell",function(){return M.MatrixDropdownCell}),o.d(t,"MatrixDropdownRowModelBase",function(){return M.MatrixDropdownRowModelBase}),o.d(t,"QuestionMatrixDropdownModelBase",function(){return M.QuestionMatrixDropdownModelBase});var x=o(/*! ../../question_matrixdropdowncolumn */"./src/question_matrixdropdowncolumn.ts");o.d(t,"MatrixDropdownColumn",function(){return x.MatrixDropdownColumn}),o.d(t,"matrixDropdownColumnTypes",function(){return x.matrixDropdownColumnTypes});var V=o(/*! ../../question_matrixdropdownrendered */"./src/question_matrixdropdownrendered.ts");o.d(t,"QuestionMatrixDropdownRenderedCell",function(){return V.QuestionMatrixDropdownRenderedCell}),o.d(t,"QuestionMatrixDropdownRenderedRow",function(){return V.QuestionMatrixDropdownRenderedRow}),o.d(t,"QuestionMatrixDropdownRenderedTable",function(){return V.QuestionMatrixDropdownRenderedTable});var S=o(/*! ../../question_matrixdropdown */"./src/question_matrixdropdown.ts");o.d(t,"MatrixDropdownRowModel",function(){return S.MatrixDropdownRowModel}),o.d(t,"QuestionMatrixDropdownModel",function(){return S.QuestionMatrixDropdownModel});var O=o(/*! ../../question_matrixdynamic */"./src/question_matrixdynamic.ts");o.d(t,"MatrixDynamicRowModel",function(){return O.MatrixDynamicRowModel}),o.d(t,"QuestionMatrixDynamicModel",function(){return O.QuestionMatrixDynamicModel});var T=o(/*! ../../question_matrix */"./src/question_matrix.ts");o.d(t,"MatrixRowModel",function(){return T.MatrixRowModel}),o.d(t,"MatrixCells",function(){return T.MatrixCells}),o.d(t,"QuestionMatrixModel",function(){return T.QuestionMatrixModel});var _=o(/*! ../../martixBase */"./src/martixBase.ts");o.d(t,"QuestionMatrixBaseModel",function(){return _.QuestionMatrixBaseModel});var R=o(/*! ../../question_multipletext */"./src/question_multipletext.ts");o.d(t,"MultipleTextItemModel",function(){return R.MultipleTextItemModel}),o.d(t,"MultipleTextCell",function(){return R.MultipleTextCell}),o.d(t,"MultipleTextErrorCell",function(){return R.MultipleTextErrorCell}),o.d(t,"MutlipleTextErrorRow",function(){return R.MutlipleTextErrorRow}),o.d(t,"MutlipleTextRow",function(){return R.MutlipleTextRow}),o.d(t,"QuestionMultipleTextModel",function(){return R.QuestionMultipleTextModel}),o.d(t,"MultipleTextEditorModel",function(){return R.MultipleTextEditorModel});var I=o(/*! ../../panel */"./src/panel.ts");o.d(t,"PanelModel",function(){return I.PanelModel}),o.d(t,"PanelModelBase",function(){return I.PanelModelBase}),o.d(t,"QuestionRowModel",function(){return I.QuestionRowModel});var E=o(/*! ../../flowpanel */"./src/flowpanel.ts");o.d(t,"FlowPanelModel",function(){return E.FlowPanelModel});var D=o(/*! ../../page */"./src/page.ts");o.d(t,"PageModel",function(){return D.PageModel}),o(/*! ../../template-renderer */"./src/template-renderer.ts");var Q=o(/*! ../../defaultTitle */"./src/defaultTitle.ts");o.d(t,"DefaultTitleModel",function(){return Q.DefaultTitleModel});var B=o(/*! ../../question */"./src/question.ts");o.d(t,"Question",function(){return B.Question});var j=o(/*! ../../questionnonvalue */"./src/questionnonvalue.ts");o.d(t,"QuestionNonValue",function(){return j.QuestionNonValue});var L=o(/*! ../../question_empty */"./src/question_empty.ts");o.d(t,"QuestionEmptyModel",function(){return L.QuestionEmptyModel});var A=o(/*! ../../question_baseselect */"./src/question_baseselect.ts");o.d(t,"QuestionCheckboxBase",function(){return A.QuestionCheckboxBase}),o.d(t,"QuestionSelectBase",function(){return A.QuestionSelectBase});var k=o(/*! ../../question_checkbox */"./src/question_checkbox.ts");o.d(t,"QuestionCheckboxModel",function(){return k.QuestionCheckboxModel});var F=o(/*! ../../question_tagbox */"./src/question_tagbox.ts");o.d(t,"QuestionTagboxModel",function(){return F.QuestionTagboxModel});var N=o(/*! ../../question_ranking */"./src/question_ranking.ts");o.d(t,"QuestionRankingModel",function(){return N.QuestionRankingModel});var q=o(/*! ../../question_comment */"./src/question_comment.ts");o.d(t,"QuestionCommentModel",function(){return q.QuestionCommentModel});var H=o(/*! ../../question_dropdown */"./src/question_dropdown.ts");o.d(t,"QuestionDropdownModel",function(){return H.QuestionDropdownModel});var z=o(/*! ../../questionfactory */"./src/questionfactory.ts");o.d(t,"QuestionFactory",function(){return z.QuestionFactory}),o.d(t,"ElementFactory",function(){return z.ElementFactory});var U=o(/*! ../../question_file */"./src/question_file.ts");o.d(t,"QuestionFileModel",function(){return U.QuestionFileModel});var W=o(/*! ../../question_html */"./src/question_html.ts");o.d(t,"QuestionHtmlModel",function(){return W.QuestionHtmlModel});var J=o(/*! ../../question_radiogroup */"./src/question_radiogroup.ts");o.d(t,"QuestionRadiogroupModel",function(){return J.QuestionRadiogroupModel});var $=o(/*! ../../question_rating */"./src/question_rating.ts");o.d(t,"QuestionRatingModel",function(){return $.QuestionRatingModel}),o.d(t,"RenderedRatingItem",function(){return $.RenderedRatingItem});var G=o(/*! ../../question_expression */"./src/question_expression.ts");o.d(t,"QuestionExpressionModel",function(){return G.QuestionExpressionModel});var Z=o(/*! ../../question_textbase */"./src/question_textbase.ts");o.d(t,"QuestionTextBase",function(){return Z.QuestionTextBase}),o.d(t,"CharacterCounter",function(){return Z.CharacterCounter});var K=o(/*! ../../question_text */"./src/question_text.ts");o.d(t,"QuestionTextModel",function(){return K.QuestionTextModel});var Y=o(/*! ../../question_boolean */"./src/question_boolean.ts");o.d(t,"QuestionBooleanModel",function(){return Y.QuestionBooleanModel});var X=o(/*! ../../question_imagepicker */"./src/question_imagepicker.ts");o.d(t,"QuestionImagePickerModel",function(){return X.QuestionImagePickerModel}),o.d(t,"ImageItemValue",function(){return X.ImageItemValue});var ee=o(/*! ../../question_image */"./src/question_image.ts");o.d(t,"QuestionImageModel",function(){return ee.QuestionImageModel});var et=o(/*! ../../question_signaturepad */"./src/question_signaturepad.ts");o.d(t,"QuestionSignaturePadModel",function(){return et.QuestionSignaturePadModel});var eo=o(/*! ../../question_paneldynamic */"./src/question_paneldynamic.ts");o.d(t,"QuestionPanelDynamicModel",function(){return eo.QuestionPanelDynamicModel}),o.d(t,"QuestionPanelDynamicItem",function(){return eo.QuestionPanelDynamicItem});var en=o(/*! ../../surveytimer */"./src/surveytimer.ts");o.d(t,"SurveyTimer",function(){return en.SurveyTimer});var er=o(/*! ../../surveyTimerModel */"./src/surveyTimerModel.ts");o.d(t,"SurveyTimerModel",function(){return er.SurveyTimerModel});var ei=o(/*! ../../surveyToc */"./src/surveyToc.ts");o.d(t,"tryNavigateToPage",function(){return ei.tryNavigateToPage}),o.d(t,"tryFocusPage",function(){return ei.tryFocusPage}),o.d(t,"createTOCListModel",function(){return ei.createTOCListModel}),o.d(t,"getTocRootCss",function(){return ei.getTocRootCss}),o.d(t,"TOCModel",function(){return ei.TOCModel});var es=o(/*! ../../surveyProgress */"./src/surveyProgress.ts");o.d(t,"SurveyProgressModel",function(){return es.SurveyProgressModel});var ea=o(/*! ../../surveyProgressButtons */"./src/surveyProgressButtons.ts");o.d(t,"SurveyProgressButtonsModel",function(){return ea.SurveyProgressButtonsModel}),o(/*! ../../themes */"./src/themes.ts");var el=o(/*! ../../survey */"./src/survey.ts");o.d(t,"SurveyModel",function(){return el.SurveyModel}),o(/*! ../../survey-events-api */"./src/survey-events-api.ts");var eu=o(/*! ../../trigger */"./src/trigger.ts");o.d(t,"SurveyTrigger",function(){return eu.SurveyTrigger}),o.d(t,"SurveyTriggerComplete",function(){return eu.SurveyTriggerComplete}),o.d(t,"SurveyTriggerSetValue",function(){return eu.SurveyTriggerSetValue}),o.d(t,"SurveyTriggerVisible",function(){return eu.SurveyTriggerVisible}),o.d(t,"SurveyTriggerCopyValue",function(){return eu.SurveyTriggerCopyValue}),o.d(t,"SurveyTriggerRunExpression",function(){return eu.SurveyTriggerRunExpression}),o.d(t,"SurveyTriggerSkip",function(){return eu.SurveyTriggerSkip}),o.d(t,"Trigger",function(){return eu.Trigger});var ec=o(/*! ../../popup-survey */"./src/popup-survey.ts");o.d(t,"PopupSurveyModel",function(){return ec.PopupSurveyModel}),o.d(t,"SurveyWindowModel",function(){return ec.SurveyWindowModel});var ep=o(/*! ../../textPreProcessor */"./src/textPreProcessor.ts");o.d(t,"TextPreProcessor",function(){return ep.TextPreProcessor});var ed=o(/*! ../../notifier */"./src/notifier.ts");o.d(t,"Notifier",function(){return ed.Notifier});var eh=o(/*! ../../header */"./src/header.ts");o.d(t,"Cover",function(){return eh.Cover}),o.d(t,"CoverCell",function(){return eh.CoverCell});var eg=o(/*! ../../dxSurveyService */"./src/dxSurveyService.ts");o.d(t,"dxSurveyService",function(){return eg.dxSurveyService});var ef=o(/*! ../../localization/english */"./src/localization/english.ts");o.d(t,"englishStrings",function(){return ef.englishStrings});var ey=o(/*! ../../surveyStrings */"./src/surveyStrings.ts");o.d(t,"surveyLocalization",function(){return ey.surveyLocalization}),o.d(t,"surveyStrings",function(){return ey.surveyStrings});var em=o(/*! ../../questionCustomWidgets */"./src/questionCustomWidgets.ts");o.d(t,"QuestionCustomWidget",function(){return em.QuestionCustomWidget}),o.d(t,"CustomWidgetCollection",function(){return em.CustomWidgetCollection});var ev=o(/*! ../../question_custom */"./src/question_custom.ts");o.d(t,"QuestionCustomModel",function(){return ev.QuestionCustomModel}),o.d(t,"QuestionCompositeModel",function(){return ev.QuestionCompositeModel}),o.d(t,"ComponentQuestionJSON",function(){return ev.ComponentQuestionJSON}),o.d(t,"ComponentCollection",function(){return ev.ComponentCollection});var eb=o(/*! ../../stylesmanager */"./src/stylesmanager.ts");o.d(t,"StylesManager",function(){return eb.StylesManager});var eC=o(/*! ../../list */"./src/list.ts");o.d(t,"ListModel",function(){return eC.ListModel});var ew=o(/*! ../../multiSelectListModel */"./src/multiSelectListModel.ts");o.d(t,"MultiSelectListModel",function(){return ew.MultiSelectListModel});var eP=o(/*! ../../popup */"./src/popup.ts");o.d(t,"PopupModel",function(){return eP.PopupModel}),o.d(t,"createDialogOptions",function(){return eP.createDialogOptions});var eM=o(/*! ../../popup-view-model */"./src/popup-view-model.ts");o.d(t,"PopupBaseViewModel",function(){return eM.PopupBaseViewModel});var ex=o(/*! ../../popup-dropdown-view-model */"./src/popup-dropdown-view-model.ts");o.d(t,"PopupDropdownViewModel",function(){return ex.PopupDropdownViewModel});var eV=o(/*! ../../popup-modal-view-model */"./src/popup-modal-view-model.ts");o.d(t,"PopupModalViewModel",function(){return eV.PopupModalViewModel});var eS=o(/*! ../../popup-utils */"./src/popup-utils.ts");o.d(t,"createPopupViewModel",function(){return eS.createPopupViewModel}),o.d(t,"createPopupModalViewModel",function(){return eS.createPopupModalViewModel});var eO=o(/*! ../../dropdownListModel */"./src/dropdownListModel.ts");o.d(t,"DropdownListModel",function(){return eO.DropdownListModel});var eT=o(/*! ../../dropdownMultiSelectListModel */"./src/dropdownMultiSelectListModel.ts");o.d(t,"DropdownMultiSelectListModel",function(){return eT.DropdownMultiSelectListModel});var e_=o(/*! ../../question_buttongroup */"./src/question_buttongroup.ts");o.d(t,"QuestionButtonGroupModel",function(){return e_.QuestionButtonGroupModel}),o.d(t,"ButtonGroupItemModel",function(){return e_.ButtonGroupItemModel}),o.d(t,"ButtonGroupItemValue",function(){return e_.ButtonGroupItemValue});var eR=o(/*! ../../utils/devices */"./src/utils/devices.ts");o.d(t,"IsMobile",function(){return eR.IsMobile}),o.d(t,"IsTouch",function(){return eR.IsTouch}),o.d(t,"_setIsTouch",function(){return eR._setIsTouch});var eI=o(/*! ../../utils/utils */"./src/utils/utils.ts");o.d(t,"confirmAction",function(){return eI.confirmAction}),o.d(t,"confirmActionAsync",function(){return eI.confirmActionAsync}),o.d(t,"detectIEOrEdge",function(){return eI.detectIEOrEdge}),o.d(t,"doKey2ClickUp",function(){return eI.doKey2ClickUp}),o.d(t,"doKey2ClickDown",function(){return eI.doKey2ClickDown}),o.d(t,"doKey2ClickBlur",function(){return eI.doKey2ClickBlur}),o.d(t,"loadFileFromBase64",function(){return eI.loadFileFromBase64}),o.d(t,"increaseHeightByContent",function(){return eI.increaseHeightByContent}),o.d(t,"createSvg",function(){return eI.createSvg}),o.d(t,"sanitizeEditableContent",function(){return eI.sanitizeEditableContent});var eE=o(/*! ../../utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts");o.d(t,"CssClassBuilder",function(){return eE.CssClassBuilder});var eD=o(/*! ../../defaultCss/defaultV2Css */"./src/defaultCss/defaultV2Css.ts");o.d(t,"surveyCss",function(){return eD.surveyCss}),o.d(t,"defaultV2Css",function(){return eD.defaultV2Css}),o.d(t,"defaultV2ThemeName",function(){return eD.defaultV2ThemeName});var eQ=o(/*! ../../dragdrop/core */"./src/dragdrop/core.ts");o.d(t,"DragDropCore",function(){return eQ.DragDropCore});var eB=o(/*! ../../dragdrop/choices */"./src/dragdrop/choices.ts");o.d(t,"DragDropChoices",function(){return eB.DragDropChoices});var ej=o(/*! ../../dragdrop/ranking-select-to-rank */"./src/dragdrop/ranking-select-to-rank.ts");function checkLibraryVersion(e,t){n!=e&&console.error("survey-core has version '"+n+"' and "+t+" has version '"+e+"'. SurveyJS libraries should have the same versions to work correctly.")}function setLicenseKey(e){slk(e)}function slk(e){_slk(e,eL,r)}function hasLicense(e){return!0===eL[e.toString()]}o.d(t,"DragDropRankingSelectToRank",function(){return ej.DragDropRankingSelectToRank}),n="1.9.114",r="2023-10-25";var eL={};function _slk(e,t,o){if(e){var n=function(e){var t,o,n,r={},i=0,s=0,a="",l=String.fromCharCode,u=e.length;for(t=0;t<64;t++)r["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)]=t;for(o=0;o<u;o++)for(i=(i<<6)+r[e.charAt(o)],s+=6;s>=8;)((n=i>>>(s-=8)&255)||o<u-2)&&(a+=l(n));return a}(e);if(n){var r=n.indexOf(";");r<0||(n=n.substring(r+1)).split(",").forEach(function(e){var n=e.indexOf("=");n>0&&(t[e.substring(0,n)]=new Date(o)<=new Date(e.substring(n+1)))})}}}},"./src/entries/core-wo-model.ts":function(e,t,o){"use strict";o.r(t);var n=o(/*! ./chunks/model */"./src/entries/chunks/model.ts");o.d(t,"Version",function(){return n.Version}),o.d(t,"ReleaseDate",function(){return n.ReleaseDate}),o.d(t,"checkLibraryVersion",function(){return n.checkLibraryVersion}),o.d(t,"setLicenseKey",function(){return n.setLicenseKey}),o.d(t,"slk",function(){return n.slk}),o.d(t,"hasLicense",function(){return n.hasLicense}),o.d(t,"settings",function(){return n.settings}),o.d(t,"Helpers",function(){return n.Helpers}),o.d(t,"AnswerCountValidator",function(){return n.AnswerCountValidator}),o.d(t,"EmailValidator",function(){return n.EmailValidator}),o.d(t,"NumericValidator",function(){return n.NumericValidator}),o.d(t,"RegexValidator",function(){return n.RegexValidator}),o.d(t,"SurveyValidator",function(){return n.SurveyValidator}),o.d(t,"TextValidator",function(){return n.TextValidator}),o.d(t,"ValidatorResult",function(){return n.ValidatorResult}),o.d(t,"ExpressionValidator",function(){return n.ExpressionValidator}),o.d(t,"ValidatorRunner",function(){return n.ValidatorRunner}),o.d(t,"ItemValue",function(){return n.ItemValue}),o.d(t,"Base",function(){return n.Base}),o.d(t,"Event",function(){return n.Event}),o.d(t,"EventBase",function(){return n.EventBase}),o.d(t,"ArrayChanges",function(){return n.ArrayChanges}),o.d(t,"ComputedUpdater",function(){return n.ComputedUpdater}),o.d(t,"SurveyError",function(){return n.SurveyError}),o.d(t,"SurveyElementCore",function(){return n.SurveyElementCore}),o.d(t,"SurveyElement",function(){return n.SurveyElement}),o.d(t,"DragTypeOverMeEnum",function(){return n.DragTypeOverMeEnum}),o.d(t,"CalculatedValue",function(){return n.CalculatedValue}),o.d(t,"CustomError",function(){return n.CustomError}),o.d(t,"AnswerRequiredError",function(){return n.AnswerRequiredError}),o.d(t,"OneAnswerRequiredError",function(){return n.OneAnswerRequiredError}),o.d(t,"RequreNumericError",function(){return n.RequreNumericError}),o.d(t,"ExceedSizeError",function(){return n.ExceedSizeError}),o.d(t,"LocalizableString",function(){return n.LocalizableString}),o.d(t,"LocalizableStrings",function(){return n.LocalizableStrings}),o.d(t,"HtmlConditionItem",function(){return n.HtmlConditionItem}),o.d(t,"UrlConditionItem",function(){return n.UrlConditionItem}),o.d(t,"ChoicesRestful",function(){return n.ChoicesRestful}),o.d(t,"ChoicesRestfull",function(){return n.ChoicesRestfull}),o.d(t,"FunctionFactory",function(){return n.FunctionFactory}),o.d(t,"registerFunction",function(){return n.registerFunction}),o.d(t,"ConditionRunner",function(){return n.ConditionRunner}),o.d(t,"ExpressionRunner",function(){return n.ExpressionRunner}),o.d(t,"ExpressionExecutor",function(){return n.ExpressionExecutor}),o.d(t,"Operand",function(){return n.Operand}),o.d(t,"Const",function(){return n.Const}),o.d(t,"BinaryOperand",function(){return n.BinaryOperand}),o.d(t,"Variable",function(){return n.Variable}),o.d(t,"FunctionOperand",function(){return n.FunctionOperand}),o.d(t,"ArrayOperand",function(){return n.ArrayOperand}),o.d(t,"UnaryOperand",function(){return n.UnaryOperand}),o.d(t,"ConditionsParser",function(){return n.ConditionsParser}),o.d(t,"ProcessValue",function(){return n.ProcessValue}),o.d(t,"JsonError",function(){return n.JsonError}),o.d(t,"JsonIncorrectTypeError",function(){return n.JsonIncorrectTypeError}),o.d(t,"JsonMetadata",function(){return n.JsonMetadata}),o.d(t,"JsonMetadataClass",function(){return n.JsonMetadataClass}),o.d(t,"JsonMissingTypeError",function(){return n.JsonMissingTypeError}),o.d(t,"JsonMissingTypeErrorBase",function(){return n.JsonMissingTypeErrorBase}),o.d(t,"JsonObject",function(){return n.JsonObject}),o.d(t,"JsonObjectProperty",function(){return n.JsonObjectProperty}),o.d(t,"JsonRequiredPropertyError",function(){return n.JsonRequiredPropertyError}),o.d(t,"JsonUnknownPropertyError",function(){return n.JsonUnknownPropertyError}),o.d(t,"Serializer",function(){return n.Serializer}),o.d(t,"property",function(){return n.property}),o.d(t,"propertyArray",function(){return n.propertyArray}),o.d(t,"MatrixDropdownCell",function(){return n.MatrixDropdownCell}),o.d(t,"MatrixDropdownRowModelBase",function(){return n.MatrixDropdownRowModelBase}),o.d(t,"QuestionMatrixDropdownModelBase",function(){return n.QuestionMatrixDropdownModelBase}),o.d(t,"MatrixDropdownColumn",function(){return n.MatrixDropdownColumn}),o.d(t,"matrixDropdownColumnTypes",function(){return n.matrixDropdownColumnTypes}),o.d(t,"QuestionMatrixDropdownRenderedCell",function(){return n.QuestionMatrixDropdownRenderedCell}),o.d(t,"QuestionMatrixDropdownRenderedRow",function(){return n.QuestionMatrixDropdownRenderedRow}),o.d(t,"QuestionMatrixDropdownRenderedTable",function(){return n.QuestionMatrixDropdownRenderedTable}),o.d(t,"MatrixDropdownRowModel",function(){return n.MatrixDropdownRowModel}),o.d(t,"QuestionMatrixDropdownModel",function(){return n.QuestionMatrixDropdownModel}),o.d(t,"MatrixDynamicRowModel",function(){return n.MatrixDynamicRowModel}),o.d(t,"QuestionMatrixDynamicModel",function(){return n.QuestionMatrixDynamicModel}),o.d(t,"MatrixRowModel",function(){return n.MatrixRowModel}),o.d(t,"MatrixCells",function(){return n.MatrixCells}),o.d(t,"QuestionMatrixModel",function(){return n.QuestionMatrixModel}),o.d(t,"QuestionMatrixBaseModel",function(){return n.QuestionMatrixBaseModel}),o.d(t,"MultipleTextItemModel",function(){return n.MultipleTextItemModel}),o.d(t,"MultipleTextCell",function(){return n.MultipleTextCell}),o.d(t,"MultipleTextErrorCell",function(){return n.MultipleTextErrorCell}),o.d(t,"MutlipleTextErrorRow",function(){return n.MutlipleTextErrorRow}),o.d(t,"MutlipleTextRow",function(){return n.MutlipleTextRow}),o.d(t,"QuestionMultipleTextModel",function(){return n.QuestionMultipleTextModel}),o.d(t,"MultipleTextEditorModel",function(){return n.MultipleTextEditorModel}),o.d(t,"PanelModel",function(){return n.PanelModel}),o.d(t,"PanelModelBase",function(){return n.PanelModelBase}),o.d(t,"QuestionRowModel",function(){return n.QuestionRowModel}),o.d(t,"FlowPanelModel",function(){return n.FlowPanelModel}),o.d(t,"PageModel",function(){return n.PageModel}),o.d(t,"DefaultTitleModel",function(){return n.DefaultTitleModel}),o.d(t,"Question",function(){return n.Question}),o.d(t,"QuestionNonValue",function(){return n.QuestionNonValue}),o.d(t,"QuestionEmptyModel",function(){return n.QuestionEmptyModel}),o.d(t,"QuestionCheckboxBase",function(){return n.QuestionCheckboxBase}),o.d(t,"QuestionSelectBase",function(){return n.QuestionSelectBase}),o.d(t,"QuestionCheckboxModel",function(){return n.QuestionCheckboxModel}),o.d(t,"QuestionTagboxModel",function(){return n.QuestionTagboxModel}),o.d(t,"QuestionRankingModel",function(){return n.QuestionRankingModel}),o.d(t,"QuestionCommentModel",function(){return n.QuestionCommentModel}),o.d(t,"QuestionDropdownModel",function(){return n.QuestionDropdownModel}),o.d(t,"QuestionFactory",function(){return n.QuestionFactory}),o.d(t,"ElementFactory",function(){return n.ElementFactory}),o.d(t,"QuestionFileModel",function(){return n.QuestionFileModel}),o.d(t,"QuestionHtmlModel",function(){return n.QuestionHtmlModel}),o.d(t,"QuestionRadiogroupModel",function(){return n.QuestionRadiogroupModel}),o.d(t,"QuestionRatingModel",function(){return n.QuestionRatingModel}),o.d(t,"RenderedRatingItem",function(){return n.RenderedRatingItem}),o.d(t,"QuestionExpressionModel",function(){return n.QuestionExpressionModel}),o.d(t,"QuestionTextBase",function(){return n.QuestionTextBase}),o.d(t,"CharacterCounter",function(){return n.CharacterCounter}),o.d(t,"QuestionTextModel",function(){return n.QuestionTextModel}),o.d(t,"QuestionBooleanModel",function(){return n.QuestionBooleanModel}),o.d(t,"QuestionImagePickerModel",function(){return n.QuestionImagePickerModel}),o.d(t,"ImageItemValue",function(){return n.ImageItemValue}),o.d(t,"QuestionImageModel",function(){return n.QuestionImageModel}),o.d(t,"QuestionSignaturePadModel",function(){return n.QuestionSignaturePadModel}),o.d(t,"QuestionPanelDynamicModel",function(){return n.QuestionPanelDynamicModel}),o.d(t,"QuestionPanelDynamicItem",function(){return n.QuestionPanelDynamicItem}),o.d(t,"SurveyTimer",function(){return n.SurveyTimer}),o.d(t,"SurveyTimerModel",function(){return n.SurveyTimerModel}),o.d(t,"tryNavigateToPage",function(){return n.tryNavigateToPage}),o.d(t,"tryFocusPage",function(){return n.tryFocusPage}),o.d(t,"createTOCListModel",function(){return n.createTOCListModel}),o.d(t,"getTocRootCss",function(){return n.getTocRootCss}),o.d(t,"TOCModel",function(){return n.TOCModel}),o.d(t,"SurveyProgressModel",function(){return n.SurveyProgressModel}),o.d(t,"SurveyProgressButtonsModel",function(){return n.SurveyProgressButtonsModel}),o.d(t,"SurveyModel",function(){return n.SurveyModel}),o.d(t,"SurveyTrigger",function(){return n.SurveyTrigger}),o.d(t,"SurveyTriggerComplete",function(){return n.SurveyTriggerComplete}),o.d(t,"SurveyTriggerSetValue",function(){return n.SurveyTriggerSetValue}),o.d(t,"SurveyTriggerVisible",function(){return n.SurveyTriggerVisible}),o.d(t,"SurveyTriggerCopyValue",function(){return n.SurveyTriggerCopyValue}),o.d(t,"SurveyTriggerRunExpression",function(){return n.SurveyTriggerRunExpression}),o.d(t,"SurveyTriggerSkip",function(){return n.SurveyTriggerSkip}),o.d(t,"Trigger",function(){return n.Trigger}),o.d(t,"PopupSurveyModel",function(){return n.PopupSurveyModel}),o.d(t,"SurveyWindowModel",function(){return n.SurveyWindowModel}),o.d(t,"TextPreProcessor",function(){return n.TextPreProcessor}),o.d(t,"Notifier",function(){return n.Notifier}),o.d(t,"Cover",function(){return n.Cover}),o.d(t,"CoverCell",function(){return n.CoverCell}),o.d(t,"dxSurveyService",function(){return n.dxSurveyService}),o.d(t,"englishStrings",function(){return n.englishStrings}),o.d(t,"surveyLocalization",function(){return n.surveyLocalization}),o.d(t,"surveyStrings",function(){return n.surveyStrings}),o.d(t,"QuestionCustomWidget",function(){return n.QuestionCustomWidget}),o.d(t,"CustomWidgetCollection",function(){return n.CustomWidgetCollection}),o.d(t,"QuestionCustomModel",function(){return n.QuestionCustomModel}),o.d(t,"QuestionCompositeModel",function(){return n.QuestionCompositeModel}),o.d(t,"ComponentQuestionJSON",function(){return n.ComponentQuestionJSON}),o.d(t,"ComponentCollection",function(){return n.ComponentCollection}),o.d(t,"StylesManager",function(){return n.StylesManager}),o.d(t,"ListModel",function(){return n.ListModel}),o.d(t,"MultiSelectListModel",function(){return n.MultiSelectListModel}),o.d(t,"PopupModel",function(){return n.PopupModel}),o.d(t,"createDialogOptions",function(){return n.createDialogOptions}),o.d(t,"PopupBaseViewModel",function(){return n.PopupBaseViewModel}),o.d(t,"PopupDropdownViewModel",function(){return n.PopupDropdownViewModel}),o.d(t,"PopupModalViewModel",function(){return n.PopupModalViewModel}),o.d(t,"createPopupViewModel",function(){return n.createPopupViewModel}),o.d(t,"createPopupModalViewModel",function(){return n.createPopupModalViewModel}),o.d(t,"DropdownListModel",function(){return n.DropdownListModel}),o.d(t,"DropdownMultiSelectListModel",function(){return n.DropdownMultiSelectListModel}),o.d(t,"QuestionButtonGroupModel",function(){return n.QuestionButtonGroupModel}),o.d(t,"ButtonGroupItemModel",function(){return n.ButtonGroupItemModel}),o.d(t,"ButtonGroupItemValue",function(){return n.ButtonGroupItemValue}),o.d(t,"IsMobile",function(){return n.IsMobile}),o.d(t,"IsTouch",function(){return n.IsTouch}),o.d(t,"_setIsTouch",function(){return n._setIsTouch}),o.d(t,"confirmAction",function(){return n.confirmAction}),o.d(t,"confirmActionAsync",function(){return n.confirmActionAsync}),o.d(t,"detectIEOrEdge",function(){return n.detectIEOrEdge}),o.d(t,"doKey2ClickUp",function(){return n.doKey2ClickUp}),o.d(t,"doKey2ClickDown",function(){return n.doKey2ClickDown}),o.d(t,"doKey2ClickBlur",function(){return n.doKey2ClickBlur}),o.d(t,"loadFileFromBase64",function(){return n.loadFileFromBase64}),o.d(t,"increaseHeightByContent",function(){return n.increaseHeightByContent}),o.d(t,"createSvg",function(){return n.createSvg}),o.d(t,"sanitizeEditableContent",function(){return n.sanitizeEditableContent}),o.d(t,"CssClassBuilder",function(){return n.CssClassBuilder}),o.d(t,"surveyCss",function(){return n.surveyCss}),o.d(t,"defaultV2Css",function(){return n.defaultV2Css}),o.d(t,"defaultV2ThemeName",function(){return n.defaultV2ThemeName}),o.d(t,"DragDropCore",function(){return n.DragDropCore}),o.d(t,"DragDropChoices",function(){return n.DragDropChoices}),o.d(t,"DragDropRankingSelectToRank",function(){return n.DragDropRankingSelectToRank});var r=o(/*! ../defaultCss/cssstandard */"./src/defaultCss/cssstandard.ts");o.d(t,"defaultStandardCss",function(){return r.defaultStandardCss});var i=o(/*! ../defaultCss/cssmodern */"./src/defaultCss/cssmodern.ts");o.d(t,"modernCss",function(){return i.modernCss});var s=o(/*! ../svgbundle */"./src/svgbundle.ts");o.d(t,"SvgIconRegistry",function(){return s.SvgIconRegistry}),o.d(t,"SvgRegistry",function(){return s.SvgRegistry}),o.d(t,"SvgBundleViewModel",function(){return s.SvgBundleViewModel});var a=o(/*! ../rendererFactory */"./src/rendererFactory.ts");o.d(t,"RendererFactory",function(){return a.RendererFactory});var l=o(/*! ../utils/responsivity-manager */"./src/utils/responsivity-manager.ts");o.d(t,"ResponsivityManager",function(){return l.ResponsivityManager}),o.d(t,"VerticalResponsivityManager",function(){return l.VerticalResponsivityManager});var u=o(/*! ../utils/utils */"./src/utils/utils.ts");o.d(t,"unwrap",function(){return u.unwrap}),o.d(t,"getOriginalEvent",function(){return u.getOriginalEvent}),o.d(t,"getElement",function(){return u.getElement});var c=o(/*! ../actions/action */"./src/actions/action.ts");o.d(t,"createDropdownActionModel",function(){return c.createDropdownActionModel}),o.d(t,"createDropdownActionModelAdvanced",function(){return c.createDropdownActionModelAdvanced}),o.d(t,"getActionDropdownButtonTarget",function(){return c.getActionDropdownButtonTarget}),o.d(t,"BaseAction",function(){return c.BaseAction}),o.d(t,"Action",function(){return c.Action}),o.d(t,"ActionDropdownViewModel",function(){return c.ActionDropdownViewModel});var p=o(/*! ../actions/adaptive-container */"./src/actions/adaptive-container.ts");o.d(t,"AdaptiveActionContainer",function(){return p.AdaptiveActionContainer});var d=o(/*! ../actions/container */"./src/actions/container.ts");o.d(t,"defaultActionBarCss",function(){return d.defaultActionBarCss}),o.d(t,"ActionContainer",function(){return d.ActionContainer});var h=o(/*! ../utils/dragOrClickHelper */"./src/utils/dragOrClickHelper.ts");o.d(t,"DragOrClickHelper",function(){return h.DragOrClickHelper})},"./src/entries/core.ts":function(e,t,o){"use strict";o.r(t);var n=o(/*! ./core-wo-model */"./src/entries/core-wo-model.ts");o.d(t,"Version",function(){return n.Version}),o.d(t,"ReleaseDate",function(){return n.ReleaseDate}),o.d(t,"checkLibraryVersion",function(){return n.checkLibraryVersion}),o.d(t,"setLicenseKey",function(){return n.setLicenseKey}),o.d(t,"slk",function(){return n.slk}),o.d(t,"hasLicense",function(){return n.hasLicense}),o.d(t,"settings",function(){return n.settings}),o.d(t,"Helpers",function(){return n.Helpers}),o.d(t,"AnswerCountValidator",function(){return n.AnswerCountValidator}),o.d(t,"EmailValidator",function(){return n.EmailValidator}),o.d(t,"NumericValidator",function(){return n.NumericValidator}),o.d(t,"RegexValidator",function(){return n.RegexValidator}),o.d(t,"SurveyValidator",function(){return n.SurveyValidator}),o.d(t,"TextValidator",function(){return n.TextValidator}),o.d(t,"ValidatorResult",function(){return n.ValidatorResult}),o.d(t,"ExpressionValidator",function(){return n.ExpressionValidator}),o.d(t,"ValidatorRunner",function(){return n.ValidatorRunner}),o.d(t,"ItemValue",function(){return n.ItemValue}),o.d(t,"Base",function(){return n.Base}),o.d(t,"Event",function(){return n.Event}),o.d(t,"EventBase",function(){return n.EventBase}),o.d(t,"ArrayChanges",function(){return n.ArrayChanges}),o.d(t,"ComputedUpdater",function(){return n.ComputedUpdater}),o.d(t,"SurveyError",function(){return n.SurveyError}),o.d(t,"SurveyElementCore",function(){return n.SurveyElementCore}),o.d(t,"SurveyElement",function(){return n.SurveyElement}),o.d(t,"DragTypeOverMeEnum",function(){return n.DragTypeOverMeEnum}),o.d(t,"CalculatedValue",function(){return n.CalculatedValue}),o.d(t,"CustomError",function(){return n.CustomError}),o.d(t,"AnswerRequiredError",function(){return n.AnswerRequiredError}),o.d(t,"OneAnswerRequiredError",function(){return n.OneAnswerRequiredError}),o.d(t,"RequreNumericError",function(){return n.RequreNumericError}),o.d(t,"ExceedSizeError",function(){return n.ExceedSizeError}),o.d(t,"LocalizableString",function(){return n.LocalizableString}),o.d(t,"LocalizableStrings",function(){return n.LocalizableStrings}),o.d(t,"HtmlConditionItem",function(){return n.HtmlConditionItem}),o.d(t,"UrlConditionItem",function(){return n.UrlConditionItem}),o.d(t,"ChoicesRestful",function(){return n.ChoicesRestful}),o.d(t,"ChoicesRestfull",function(){return n.ChoicesRestfull}),o.d(t,"FunctionFactory",function(){return n.FunctionFactory}),o.d(t,"registerFunction",function(){return n.registerFunction}),o.d(t,"ConditionRunner",function(){return n.ConditionRunner}),o.d(t,"ExpressionRunner",function(){return n.ExpressionRunner}),o.d(t,"ExpressionExecutor",function(){return n.ExpressionExecutor}),o.d(t,"Operand",function(){return n.Operand}),o.d(t,"Const",function(){return n.Const}),o.d(t,"BinaryOperand",function(){return n.BinaryOperand}),o.d(t,"Variable",function(){return n.Variable}),o.d(t,"FunctionOperand",function(){return n.FunctionOperand}),o.d(t,"ArrayOperand",function(){return n.ArrayOperand}),o.d(t,"UnaryOperand",function(){return n.UnaryOperand}),o.d(t,"ConditionsParser",function(){return n.ConditionsParser}),o.d(t,"ProcessValue",function(){return n.ProcessValue}),o.d(t,"JsonError",function(){return n.JsonError}),o.d(t,"JsonIncorrectTypeError",function(){return n.JsonIncorrectTypeError}),o.d(t,"JsonMetadata",function(){return n.JsonMetadata}),o.d(t,"JsonMetadataClass",function(){return n.JsonMetadataClass}),o.d(t,"JsonMissingTypeError",function(){return n.JsonMissingTypeError}),o.d(t,"JsonMissingTypeErrorBase",function(){return n.JsonMissingTypeErrorBase}),o.d(t,"JsonObject",function(){return n.JsonObject}),o.d(t,"JsonObjectProperty",function(){return n.JsonObjectProperty}),o.d(t,"JsonRequiredPropertyError",function(){return n.JsonRequiredPropertyError}),o.d(t,"JsonUnknownPropertyError",function(){return n.JsonUnknownPropertyError}),o.d(t,"Serializer",function(){return n.Serializer}),o.d(t,"property",function(){return n.property}),o.d(t,"propertyArray",function(){return n.propertyArray}),o.d(t,"MatrixDropdownCell",function(){return n.MatrixDropdownCell}),o.d(t,"MatrixDropdownRowModelBase",function(){return n.MatrixDropdownRowModelBase}),o.d(t,"QuestionMatrixDropdownModelBase",function(){return n.QuestionMatrixDropdownModelBase}),o.d(t,"MatrixDropdownColumn",function(){return n.MatrixDropdownColumn}),o.d(t,"matrixDropdownColumnTypes",function(){return n.matrixDropdownColumnTypes}),o.d(t,"QuestionMatrixDropdownRenderedCell",function(){return n.QuestionMatrixDropdownRenderedCell}),o.d(t,"QuestionMatrixDropdownRenderedRow",function(){return n.QuestionMatrixDropdownRenderedRow}),o.d(t,"QuestionMatrixDropdownRenderedTable",function(){return n.QuestionMatrixDropdownRenderedTable}),o.d(t,"MatrixDropdownRowModel",function(){return n.MatrixDropdownRowModel}),o.d(t,"QuestionMatrixDropdownModel",function(){return n.QuestionMatrixDropdownModel}),o.d(t,"MatrixDynamicRowModel",function(){return n.MatrixDynamicRowModel}),o.d(t,"QuestionMatrixDynamicModel",function(){return n.QuestionMatrixDynamicModel}),o.d(t,"MatrixRowModel",function(){return n.MatrixRowModel}),o.d(t,"MatrixCells",function(){return n.MatrixCells}),o.d(t,"QuestionMatrixModel",function(){return n.QuestionMatrixModel}),o.d(t,"QuestionMatrixBaseModel",function(){return n.QuestionMatrixBaseModel}),o.d(t,"MultipleTextItemModel",function(){return n.MultipleTextItemModel}),o.d(t,"MultipleTextCell",function(){return n.MultipleTextCell}),o.d(t,"MultipleTextErrorCell",function(){return n.MultipleTextErrorCell}),o.d(t,"MutlipleTextErrorRow",function(){return n.MutlipleTextErrorRow}),o.d(t,"MutlipleTextRow",function(){return n.MutlipleTextRow}),o.d(t,"QuestionMultipleTextModel",function(){return n.QuestionMultipleTextModel}),o.d(t,"MultipleTextEditorModel",function(){return n.MultipleTextEditorModel}),o.d(t,"PanelModel",function(){return n.PanelModel}),o.d(t,"PanelModelBase",function(){return n.PanelModelBase}),o.d(t,"QuestionRowModel",function(){return n.QuestionRowModel}),o.d(t,"FlowPanelModel",function(){return n.FlowPanelModel}),o.d(t,"PageModel",function(){return n.PageModel}),o.d(t,"DefaultTitleModel",function(){return n.DefaultTitleModel}),o.d(t,"Question",function(){return n.Question}),o.d(t,"QuestionNonValue",function(){return n.QuestionNonValue}),o.d(t,"QuestionEmptyModel",function(){return n.QuestionEmptyModel}),o.d(t,"QuestionCheckboxBase",function(){return n.QuestionCheckboxBase}),o.d(t,"QuestionSelectBase",function(){return n.QuestionSelectBase}),o.d(t,"QuestionCheckboxModel",function(){return n.QuestionCheckboxModel}),o.d(t,"QuestionTagboxModel",function(){return n.QuestionTagboxModel}),o.d(t,"QuestionRankingModel",function(){return n.QuestionRankingModel}),o.d(t,"QuestionCommentModel",function(){return n.QuestionCommentModel}),o.d(t,"QuestionDropdownModel",function(){return n.QuestionDropdownModel}),o.d(t,"QuestionFactory",function(){return n.QuestionFactory}),o.d(t,"ElementFactory",function(){return n.ElementFactory}),o.d(t,"QuestionFileModel",function(){return n.QuestionFileModel}),o.d(t,"QuestionHtmlModel",function(){return n.QuestionHtmlModel}),o.d(t,"QuestionRadiogroupModel",function(){return n.QuestionRadiogroupModel}),o.d(t,"QuestionRatingModel",function(){return n.QuestionRatingModel}),o.d(t,"RenderedRatingItem",function(){return n.RenderedRatingItem}),o.d(t,"QuestionExpressionModel",function(){return n.QuestionExpressionModel}),o.d(t,"QuestionTextBase",function(){return n.QuestionTextBase}),o.d(t,"CharacterCounter",function(){return n.CharacterCounter}),o.d(t,"QuestionTextModel",function(){return n.QuestionTextModel}),o.d(t,"QuestionBooleanModel",function(){return n.QuestionBooleanModel}),o.d(t,"QuestionImagePickerModel",function(){return n.QuestionImagePickerModel}),o.d(t,"ImageItemValue",function(){return n.ImageItemValue}),o.d(t,"QuestionImageModel",function(){return n.QuestionImageModel}),o.d(t,"QuestionSignaturePadModel",function(){return n.QuestionSignaturePadModel}),o.d(t,"QuestionPanelDynamicModel",function(){return n.QuestionPanelDynamicModel}),o.d(t,"QuestionPanelDynamicItem",function(){return n.QuestionPanelDynamicItem}),o.d(t,"SurveyTimer",function(){return n.SurveyTimer}),o.d(t,"SurveyTimerModel",function(){return n.SurveyTimerModel}),o.d(t,"tryNavigateToPage",function(){return n.tryNavigateToPage}),o.d(t,"tryFocusPage",function(){return n.tryFocusPage}),o.d(t,"createTOCListModel",function(){return n.createTOCListModel}),o.d(t,"getTocRootCss",function(){return n.getTocRootCss}),o.d(t,"TOCModel",function(){return n.TOCModel}),o.d(t,"SurveyProgressModel",function(){return n.SurveyProgressModel}),o.d(t,"SurveyProgressButtonsModel",function(){return n.SurveyProgressButtonsModel}),o.d(t,"SurveyModel",function(){return n.SurveyModel}),o.d(t,"SurveyTrigger",function(){return n.SurveyTrigger}),o.d(t,"SurveyTriggerComplete",function(){return n.SurveyTriggerComplete}),o.d(t,"SurveyTriggerSetValue",function(){return n.SurveyTriggerSetValue}),o.d(t,"SurveyTriggerVisible",function(){return n.SurveyTriggerVisible}),o.d(t,"SurveyTriggerCopyValue",function(){return n.SurveyTriggerCopyValue}),o.d(t,"SurveyTriggerRunExpression",function(){return n.SurveyTriggerRunExpression}),o.d(t,"SurveyTriggerSkip",function(){return n.SurveyTriggerSkip}),o.d(t,"Trigger",function(){return n.Trigger}),o.d(t,"PopupSurveyModel",function(){return n.PopupSurveyModel}),o.d(t,"SurveyWindowModel",function(){return n.SurveyWindowModel}),o.d(t,"TextPreProcessor",function(){return n.TextPreProcessor}),o.d(t,"Notifier",function(){return n.Notifier}),o.d(t,"Cover",function(){return n.Cover}),o.d(t,"CoverCell",function(){return n.CoverCell}),o.d(t,"dxSurveyService",function(){return n.dxSurveyService}),o.d(t,"englishStrings",function(){return n.englishStrings}),o.d(t,"surveyLocalization",function(){return n.surveyLocalization}),o.d(t,"surveyStrings",function(){return n.surveyStrings}),o.d(t,"QuestionCustomWidget",function(){return n.QuestionCustomWidget}),o.d(t,"CustomWidgetCollection",function(){return n.CustomWidgetCollection}),o.d(t,"QuestionCustomModel",function(){return n.QuestionCustomModel}),o.d(t,"QuestionCompositeModel",function(){return n.QuestionCompositeModel}),o.d(t,"ComponentQuestionJSON",function(){return n.ComponentQuestionJSON}),o.d(t,"ComponentCollection",function(){return n.ComponentCollection}),o.d(t,"StylesManager",function(){return n.StylesManager}),o.d(t,"ListModel",function(){return n.ListModel}),o.d(t,"MultiSelectListModel",function(){return n.MultiSelectListModel}),o.d(t,"PopupModel",function(){return n.PopupModel}),o.d(t,"createDialogOptions",function(){return n.createDialogOptions}),o.d(t,"PopupBaseViewModel",function(){return n.PopupBaseViewModel}),o.d(t,"PopupDropdownViewModel",function(){return n.PopupDropdownViewModel}),o.d(t,"PopupModalViewModel",function(){return n.PopupModalViewModel}),o.d(t,"createPopupViewModel",function(){return n.createPopupViewModel}),o.d(t,"createPopupModalViewModel",function(){return n.createPopupModalViewModel}),o.d(t,"DropdownListModel",function(){return n.DropdownListModel}),o.d(t,"DropdownMultiSelectListModel",function(){return n.DropdownMultiSelectListModel}),o.d(t,"QuestionButtonGroupModel",function(){return n.QuestionButtonGroupModel}),o.d(t,"ButtonGroupItemModel",function(){return n.ButtonGroupItemModel}),o.d(t,"ButtonGroupItemValue",function(){return n.ButtonGroupItemValue}),o.d(t,"IsMobile",function(){return n.IsMobile}),o.d(t,"IsTouch",function(){return n.IsTouch}),o.d(t,"_setIsTouch",function(){return n._setIsTouch}),o.d(t,"confirmAction",function(){return n.confirmAction}),o.d(t,"confirmActionAsync",function(){return n.confirmActionAsync}),o.d(t,"detectIEOrEdge",function(){return n.detectIEOrEdge}),o.d(t,"doKey2ClickUp",function(){return n.doKey2ClickUp}),o.d(t,"doKey2ClickDown",function(){return n.doKey2ClickDown}),o.d(t,"doKey2ClickBlur",function(){return n.doKey2ClickBlur}),o.d(t,"loadFileFromBase64",function(){return n.loadFileFromBase64}),o.d(t,"increaseHeightByContent",function(){return n.increaseHeightByContent}),o.d(t,"createSvg",function(){return n.createSvg}),o.d(t,"sanitizeEditableContent",function(){return n.sanitizeEditableContent}),o.d(t,"CssClassBuilder",function(){return n.CssClassBuilder}),o.d(t,"surveyCss",function(){return n.surveyCss}),o.d(t,"defaultV2Css",function(){return n.defaultV2Css}),o.d(t,"defaultV2ThemeName",function(){return n.defaultV2ThemeName}),o.d(t,"DragDropCore",function(){return n.DragDropCore}),o.d(t,"DragDropChoices",function(){return n.DragDropChoices}),o.d(t,"DragDropRankingSelectToRank",function(){return n.DragDropRankingSelectToRank}),o.d(t,"defaultStandardCss",function(){return n.defaultStandardCss}),o.d(t,"modernCss",function(){return n.modernCss}),o.d(t,"SvgIconRegistry",function(){return n.SvgIconRegistry}),o.d(t,"SvgRegistry",function(){return n.SvgRegistry}),o.d(t,"SvgBundleViewModel",function(){return n.SvgBundleViewModel}),o.d(t,"RendererFactory",function(){return n.RendererFactory}),o.d(t,"ResponsivityManager",function(){return n.ResponsivityManager}),o.d(t,"VerticalResponsivityManager",function(){return n.VerticalResponsivityManager}),o.d(t,"unwrap",function(){return n.unwrap}),o.d(t,"getOriginalEvent",function(){return n.getOriginalEvent}),o.d(t,"getElement",function(){return n.getElement}),o.d(t,"createDropdownActionModel",function(){return n.createDropdownActionModel}),o.d(t,"createDropdownActionModelAdvanced",function(){return n.createDropdownActionModelAdvanced}),o.d(t,"getActionDropdownButtonTarget",function(){return n.getActionDropdownButtonTarget}),o.d(t,"BaseAction",function(){return n.BaseAction}),o.d(t,"Action",function(){return n.Action}),o.d(t,"ActionDropdownViewModel",function(){return n.ActionDropdownViewModel}),o.d(t,"AdaptiveActionContainer",function(){return n.AdaptiveActionContainer}),o.d(t,"defaultActionBarCss",function(){return n.defaultActionBarCss}),o.d(t,"ActionContainer",function(){return n.ActionContainer}),o.d(t,"DragOrClickHelper",function(){return n.DragOrClickHelper});var r=o(/*! ../survey */"./src/survey.ts");o.d(t,"Model",function(){return r.SurveyModel})},"./src/error.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"AnswerRequiredError",function(){return a}),o.d(t,"OneAnswerRequiredError",function(){return l}),o.d(t,"RequreNumericError",function(){return u}),o.d(t,"ExceedSizeError",function(){return c}),o.d(t,"WebRequestError",function(){return p}),o.d(t,"WebRequestEmptyError",function(){return d}),o.d(t,"OtherEmptyError",function(){return h}),o.d(t,"UploadingFileError",function(){return g}),o.d(t,"RequiredInAllRowsError",function(){return f}),o.d(t,"MinRowCountError",function(){return y}),o.d(t,"KeyDuplicationError",function(){return m}),o.d(t,"CustomError",function(){return v});var n,r=o(/*! ./surveyStrings */"./src/surveyStrings.ts"),i=o(/*! ./survey-error */"./src/survey-error.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),a=function(e){function AnswerRequiredError(t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n=e.call(this,t,o)||this;return n.text=t,n}return s(AnswerRequiredError,e),AnswerRequiredError.prototype.getErrorType=function(){return"required"},AnswerRequiredError.prototype.getDefaultText=function(){return this.getLocalizationString("requiredError")},AnswerRequiredError}(i.SurveyError),l=function(e){function OneAnswerRequiredError(t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n=e.call(this,t,o)||this;return n.text=t,n}return s(OneAnswerRequiredError,e),OneAnswerRequiredError.prototype.getErrorType=function(){return"requireoneanswer"},OneAnswerRequiredError.prototype.getDefaultText=function(){return this.getLocalizationString("requiredErrorInPanel")},OneAnswerRequiredError}(i.SurveyError),u=function(e){function RequreNumericError(t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n=e.call(this,t,o)||this;return n.text=t,n}return s(RequreNumericError,e),RequreNumericError.prototype.getErrorType=function(){return"requirenumeric"},RequreNumericError.prototype.getDefaultText=function(){return this.getLocalizationString("numericError")},RequreNumericError}(i.SurveyError),c=function(e){function ExceedSizeError(t,o){void 0===o&&(o=null);var n=e.call(this,null,o)||this;return n.maxSize=t,n.locText.text=n.getText(),n}return s(ExceedSizeError,e),ExceedSizeError.prototype.getErrorType=function(){return"exceedsize"},ExceedSizeError.prototype.getDefaultText=function(){return r.surveyLocalization.getString("exceedMaxSize").format(this.getTextSize())},ExceedSizeError.prototype.getTextSize=function(){if(0===this.maxSize)return"0 Byte";var e=Math.floor(Math.log(this.maxSize)/Math.log(1024));return(this.maxSize/Math.pow(1024,e)).toFixed([0,0,2,3,3][e])+" "+["Bytes","KB","MB","GB","TB"][e]},ExceedSizeError}(i.SurveyError),p=function(e){function WebRequestError(t,o,n){void 0===n&&(n=null);var r=e.call(this,null,n)||this;return r.status=t,r.response=o,r}return s(WebRequestError,e),WebRequestError.prototype.getErrorType=function(){return"webrequest"},WebRequestError.prototype.getDefaultText=function(){var e=this.getLocalizationString("urlRequestError");return e?e.format(this.status,this.response):""},WebRequestError}(i.SurveyError),d=function(e){function WebRequestEmptyError(t,o){void 0===o&&(o=null);var n=e.call(this,t,o)||this;return n.text=t,n}return s(WebRequestEmptyError,e),WebRequestEmptyError.prototype.getErrorType=function(){return"webrequestempty"},WebRequestEmptyError.prototype.getDefaultText=function(){return this.getLocalizationString("urlGetChoicesError")},WebRequestEmptyError}(i.SurveyError),h=function(e){function OtherEmptyError(t,o){void 0===o&&(o=null);var n=e.call(this,t,o)||this;return n.text=t,n}return s(OtherEmptyError,e),OtherEmptyError.prototype.getErrorType=function(){return"otherempty"},OtherEmptyError.prototype.getDefaultText=function(){return this.getLocalizationString("otherRequiredError")},OtherEmptyError}(i.SurveyError),g=function(e){function UploadingFileError(t,o){void 0===o&&(o=null);var n=e.call(this,t,o)||this;return n.text=t,n}return s(UploadingFileError,e),UploadingFileError.prototype.getErrorType=function(){return"uploadingfile"},UploadingFileError.prototype.getDefaultText=function(){return this.getLocalizationString("uploadingFile")},UploadingFileError}(i.SurveyError),f=function(e){function RequiredInAllRowsError(t,o){void 0===o&&(o=null);var n=e.call(this,t,o)||this;return n.text=t,n}return s(RequiredInAllRowsError,e),RequiredInAllRowsError.prototype.getErrorType=function(){return"requiredinallrowserror"},RequiredInAllRowsError.prototype.getDefaultText=function(){return this.getLocalizationString("requiredInAllRowsError")},RequiredInAllRowsError}(i.SurveyError),y=function(e){function MinRowCountError(t,o){void 0===o&&(o=null);var n=e.call(this,null,o)||this;return n.minRowCount=t,n}return s(MinRowCountError,e),MinRowCountError.prototype.getErrorType=function(){return"minrowcounterror"},MinRowCountError.prototype.getDefaultText=function(){return r.surveyLocalization.getString("minRowCountError").format(this.minRowCount)},MinRowCountError}(i.SurveyError),m=function(e){function KeyDuplicationError(t,o){void 0===o&&(o=null);var n=e.call(this,t,o)||this;return n.text=t,n}return s(KeyDuplicationError,e),KeyDuplicationError.prototype.getErrorType=function(){return"keyduplicationerror"},KeyDuplicationError.prototype.getDefaultText=function(){return this.getLocalizationString("keyDuplicationError")},KeyDuplicationError}(i.SurveyError),v=function(e){function CustomError(t,o){void 0===o&&(o=null);var n=e.call(this,t,o)||this;return n.text=t,n}return s(CustomError,e),CustomError.prototype.getErrorType=function(){return"custom"},CustomError}(i.SurveyError)},"./src/expressionItems.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"ExpressionItem",function(){return l}),o.d(t,"HtmlConditionItem",function(){return u}),o.d(t,"UrlConditionItem",function(){return c});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./base */"./src/base.ts"),s=o(/*! ./conditions */"./src/conditions.ts"),a=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),l=function(e){function ExpressionItem(t){void 0===t&&(t=null);var o=e.call(this)||this;return o.expression=t,o}return a(ExpressionItem,e),ExpressionItem.prototype.getType=function(){return"expressionitem"},ExpressionItem.prototype.runCondition=function(e,t){return!!this.expression&&new s.ConditionRunner(this.expression).run(e,t)},Object.defineProperty(ExpressionItem.prototype,"expression",{get:function(){return this.getPropertyValue("expression","")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(ExpressionItem.prototype,"locHtml",{get:function(){return this.getLocalizableString("html")},enumerable:!1,configurable:!0}),ExpressionItem.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},ExpressionItem.prototype.getMarkdownHtml=function(e,t){return this.locOwner?this.locOwner.getMarkdownHtml(e,t):void 0},ExpressionItem.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},ExpressionItem.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},ExpressionItem.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},ExpressionItem.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.locOwner},ExpressionItem}(i.Base),u=function(e){function HtmlConditionItem(t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n=e.call(this,t)||this;return n.createLocalizableString("html",n),n.html=o,n}return a(HtmlConditionItem,e),HtmlConditionItem.prototype.getType=function(){return"htmlconditionitem"},Object.defineProperty(HtmlConditionItem.prototype,"html",{get:function(){return this.getLocalizableStringText("html")},set:function(e){this.setLocalizableStringText("html",e)},enumerable:!1,configurable:!0}),Object.defineProperty(HtmlConditionItem.prototype,"locHtml",{get:function(){return this.getLocalizableString("html")},enumerable:!1,configurable:!0}),HtmlConditionItem}(l),c=function(e){function UrlConditionItem(t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n=e.call(this,t)||this;return n.createLocalizableString("url",n),n.url=o,n}return a(UrlConditionItem,e),UrlConditionItem.prototype.getType=function(){return"urlconditionitem"},Object.defineProperty(UrlConditionItem.prototype,"url",{get:function(){return this.getLocalizableStringText("url")},set:function(e){this.setLocalizableStringText("url",e)},enumerable:!1,configurable:!0}),Object.defineProperty(UrlConditionItem.prototype,"locUrl",{get:function(){return this.getLocalizableString("url")},enumerable:!1,configurable:!0}),UrlConditionItem}(l);r.Serializer.addClass("expressionitem",["expression:condition"],function(){return new l},"base"),r.Serializer.addClass("htmlconditionitem",[{name:"html:html",serializationProperty:"locHtml"}],function(){return new u},"expressionitem"),r.Serializer.addClass("urlconditionitem",[{name:"url:string",serializationProperty:"locUrl"}],function(){return new c},"expressionitem")},"./src/expressions/expressionParser.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"SyntaxError",function(){return s}),o.d(t,"parse",function(){return parse});var n,r=o(/*! ./expressions */"./src/expressions/expressions.ts"),i=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),s=function(e){function SyntaxError(t,o,n,r){var i=e.call(this)||this;return i.message=t,i.expected=o,i.found=n,i.location=r,i.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(i,SyntaxError),i}return i(SyntaxError,e),SyntaxError.buildMessage=function(e,t){function hex(e){return e.charCodeAt(0).toString(16).toUpperCase()}function literalEscape(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+hex(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+hex(e)})}function classEscape(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+hex(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+hex(e)})}function describeExpectation(e){switch(e.type){case"literal":return'"'+literalEscape(e.text)+'"';case"class":var t=e.parts.map(function(e){return Array.isArray(e)?classEscape(e[0])+"-"+classEscape(e[1]):classEscape(e)});return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}function describeFound(e){return e?'"'+literalEscape(e)+'"':"end of input"}return"Expected "+function(e){var t,o,n=e.map(describeExpectation);if(n.sort(),n.length>0){for(t=1,o=1;t<n.length;t++)n[t-1]!==n[t]&&(n[o]=n[t],o++);n.length=o}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+describeFound(t)+" found."},SyntaxError}(Error),parse=function(e,t){t=void 0!==t?t:{};var o,n={},i={Expression:peg$parseExpression},a=peg$parseExpression,peg$c0=function(e,t){return buildBinaryOperand(e,t,!0)},l=peg$literalExpectation("||",!1),u=peg$literalExpectation("or",!0),c=peg$literalExpectation("&&",!1),p=peg$literalExpectation("and",!0),peg$c11=function(e,t){return buildBinaryOperand(e,t)},d=peg$literalExpectation("<=",!1),h=peg$literalExpectation("lessorequal",!0),g=peg$literalExpectation(">=",!1),f=peg$literalExpectation("greaterorequal",!0),y=peg$literalExpectation("==",!1),m="equal",v=peg$literalExpectation("equal",!0),peg$c26=function(){return"equal"},b=peg$literalExpectation("=",!1),C=peg$literalExpectation("!=",!1),w=peg$literalExpectation("notequal",!0),P=peg$literalExpectation("<",!1),M=peg$literalExpectation("less",!0),x=peg$literalExpectation(">",!1),V=peg$literalExpectation("greater",!0),S=peg$literalExpectation("+",!1),O=peg$literalExpectation("-",!1),T=peg$literalExpectation("*",!1),_=peg$literalExpectation("/",!1),R=peg$literalExpectation("%",!1),I=peg$literalExpectation("^",!1),E=peg$literalExpectation("power",!0),D=peg$literalExpectation("*=",!1),Q=peg$literalExpectation("contains",!0),B=peg$literalExpectation("contain",!0),j=peg$literalExpectation("notcontains",!0),L=peg$literalExpectation("notcontain",!0),A=peg$literalExpectation("anyof",!0),k=peg$literalExpectation("allof",!0),F=peg$literalExpectation("(",!1),N=peg$literalExpectation(")",!1),q=peg$literalExpectation("!",!1),H=peg$literalExpectation("negate",!0),z=peg$literalExpectation("empty",!0),U=peg$literalExpectation("notempty",!0),W="undefined",J=peg$literalExpectation("undefined",!1),$="null",G=peg$literalExpectation("null",!1),Z=peg$literalExpectation("{",!1),K=peg$literalExpectation("}",!1),peg$c111=function(e){return e},Y=peg$literalExpectation("''",!1),peg$c114=function(){return""},X=peg$literalExpectation('""',!1),ee=peg$literalExpectation("'",!1),peg$c119=function(e){return"'"+e+"'"},et=peg$literalExpectation('"',!1),eo=peg$literalExpectation("[",!1),en=peg$literalExpectation("]",!1),er=peg$literalExpectation(",",!1),peg$c129=function(e,t){if(null==e)return new r.ArrayOperand([]);var o=[e];if(Array.isArray(t))for(var n=flattenArray(t),i=3;i<n.length;i+=4)o.push(n[i]);return new r.ArrayOperand(o)},ei=peg$literalExpectation("true",!0),es=peg$literalExpectation("false",!0),ea=peg$literalExpectation("0x",!1),el=/^[\-]/,eu=peg$classExpectation(["-"],!1,!1),ec=peg$literalExpectation(".",!1),ep=peg$literalExpectation("0",!1),peg$c149=function(e){return e.join("")},ed=peg$literalExpectation("\\'",!1),eh=peg$literalExpectation('\\"',!1),eg=/^[^"']/,ef=peg$classExpectation(['"',"'"],!0,!1),peg$c158=function(){return text()},ey=/^[^{}]/,em=peg$classExpectation(["{","}"],!0,!1),ev=/^[0-9]/,eb=peg$classExpectation([["0","9"]],!1,!1),eC=/^[1-9]/,ew=peg$classExpectation([["1","9"]],!1,!1),eP=/^[a-zA-Z_]/,eM=peg$classExpectation([["a","z"],["A","Z"],"_"],!1,!1),ex=peg$otherExpectation("whitespace"),eV=/^[ \t\n\r]/,eS=peg$classExpectation([" ","	","\n","\r"],!1,!1),eO=0,eT=0,e_=[{line:1,column:1}],eR=0,eI=[],eE=0,eD={};if(void 0!==t.startRule){if(!(t.startRule in i))throw Error("Can't start parsing from rule \""+t.startRule+'".');a=i[t.startRule]}function text(){return e.substring(eT,eO)}function peg$literalExpectation(e,t){return{type:"literal",text:e,ignoreCase:t}}function peg$classExpectation(e,t,o){return{type:"class",parts:e,inverted:t,ignoreCase:o}}function peg$endExpectation(){return{type:"end"}}function peg$otherExpectation(e){return{type:"other",description:e}}function peg$computePosDetails(t){var o,n=e_[t];if(n)return n;for(o=t-1;!e_[o];)o--;for(n={line:(n=e_[o]).line,column:n.column};o<t;)10===e.charCodeAt(o)?(n.line++,n.column=1):n.column++,o++;return e_[t]=n,n}function peg$computeLocation(e,t){var o=peg$computePosDetails(e),n=peg$computePosDetails(t);return{start:{offset:e,line:o.line,column:o.column},end:{offset:t,line:n.line,column:n.column}}}function peg$fail(e){eO<eR||(eO>eR&&(eR=eO,eI=[]),eI.push(e))}function peg$buildStructuredError(e,t,o){return new s(s.buildMessage(e,t),e,t,o)}function peg$parseExpression(){var e,t,o,r,i,s,a,l,u=34*eO+0,c=eD[u];if(c)return eO=c.nextPos,c.result;if(e=eO,peg$parse_()!==n){if((t=peg$parseLogicOr())!==n){for(o=[],r=eO,(i=peg$parse_())!==n&&(s=peg$parseOrSign())!==n&&(a=peg$parse_())!==n&&(l=peg$parseLogicOr())!==n?r=i=[i,s,a,l]:(eO=r,r=n);r!==n;)o.push(r),r=eO,(i=peg$parse_())!==n&&(s=peg$parseOrSign())!==n&&(a=peg$parse_())!==n&&(l=peg$parseLogicOr())!==n?r=i=[i,s,a,l]:(eO=r,r=n);o!==n&&(r=peg$parse_())!==n?(eT=e,e=peg$c0(t,o)):(eO=e,e=n)}else eO=e,e=n}else eO=e,e=n;return eD[u]={nextPos:eO,result:e},e}function peg$parseOrSign(){var t,o,r=34*eO+1,i=eD[r];return i?(eO=i.nextPos,i.result):(t=eO,"||"===e.substr(eO,2)?(o="||",eO+=2):(o=n,0===eE&&peg$fail(l)),o===n&&("or"===e.substr(eO,2).toLowerCase()?(o=e.substr(eO,2),eO+=2):(o=n,0===eE&&peg$fail(u))),o!==n&&(eT=t,o="or"),t=o,eD[r]={nextPos:eO,result:t},t)}function peg$parseLogicOr(){var e,t,o,r,i,s,a,l,u=34*eO+2,c=eD[u];if(c)return eO=c.nextPos,c.result;if(e=eO,(t=peg$parseLogicAnd())!==n){for(o=[],r=eO,(i=peg$parse_())!==n&&(s=peg$parseAndSign())!==n&&(a=peg$parse_())!==n&&(l=peg$parseLogicAnd())!==n?r=i=[i,s,a,l]:(eO=r,r=n);r!==n;)o.push(r),r=eO,(i=peg$parse_())!==n&&(s=peg$parseAndSign())!==n&&(a=peg$parse_())!==n&&(l=peg$parseLogicAnd())!==n?r=i=[i,s,a,l]:(eO=r,r=n);o!==n?(eT=e,e=t=peg$c0(t,o)):(eO=e,e=n)}else eO=e,e=n;return eD[u]={nextPos:eO,result:e},e}function peg$parseAndSign(){var t,o,r=34*eO+3,i=eD[r];return i?(eO=i.nextPos,i.result):(t=eO,"&&"===e.substr(eO,2)?(o="&&",eO+=2):(o=n,0===eE&&peg$fail(c)),o===n&&("and"===e.substr(eO,3).toLowerCase()?(o=e.substr(eO,3),eO+=3):(o=n,0===eE&&peg$fail(p))),o!==n&&(eT=t,o="and"),t=o,eD[r]={nextPos:eO,result:t},t)}function peg$parseLogicAnd(){var e,t,o,r,i,s,a,l,u=34*eO+4,c=eD[u];if(c)return eO=c.nextPos,c.result;if(e=eO,(t=peg$parseCompOps())!==n){for(o=[],r=eO,(i=peg$parse_())!==n&&(s=peg$parseComparableOperators())!==n&&(a=peg$parse_())!==n&&(l=peg$parseCompOps())!==n?r=i=[i,s,a,l]:(eO=r,r=n);r!==n;)o.push(r),r=eO,(i=peg$parse_())!==n&&(s=peg$parseComparableOperators())!==n&&(a=peg$parse_())!==n&&(l=peg$parseCompOps())!==n?r=i=[i,s,a,l]:(eO=r,r=n);o!==n?(eT=e,e=t=peg$c11(t,o)):(eO=e,e=n)}else eO=e,e=n;return eD[u]={nextPos:eO,result:e},e}function peg$parseComparableOperators(){var t,o,r=34*eO+5,i=eD[r];return i?(eO=i.nextPos,i.result):(t=eO,"<="===e.substr(eO,2)?(o="<=",eO+=2):(o=n,0===eE&&peg$fail(d)),o===n&&("lessorequal"===e.substr(eO,11).toLowerCase()?(o=e.substr(eO,11),eO+=11):(o=n,0===eE&&peg$fail(h))),o!==n&&(eT=t,o="lessorequal"),(t=o)===n&&(t=eO,">="===e.substr(eO,2)?(o=">=",eO+=2):(o=n,0===eE&&peg$fail(g)),o===n&&("greaterorequal"===e.substr(eO,14).toLowerCase()?(o=e.substr(eO,14),eO+=14):(o=n,0===eE&&peg$fail(f))),o!==n&&(eT=t,o="greaterorequal"),(t=o)===n&&(t=eO,"=="===e.substr(eO,2)?(o="==",eO+=2):(o=n,0===eE&&peg$fail(y)),o===n&&(e.substr(eO,5).toLowerCase()===m?(o=e.substr(eO,5),eO+=5):(o=n,0===eE&&peg$fail(v))),o!==n&&(eT=t,o=peg$c26()),(t=o)===n&&(t=eO,61===e.charCodeAt(eO)?(o="=",eO++):(o=n,0===eE&&peg$fail(b)),o===n&&(e.substr(eO,5).toLowerCase()===m?(o=e.substr(eO,5),eO+=5):(o=n,0===eE&&peg$fail(v))),o!==n&&(eT=t,o=peg$c26()),(t=o)===n&&(t=eO,"!="===e.substr(eO,2)?(o="!=",eO+=2):(o=n,0===eE&&peg$fail(C)),o===n&&("notequal"===e.substr(eO,8).toLowerCase()?(o=e.substr(eO,8),eO+=8):(o=n,0===eE&&peg$fail(w))),o!==n&&(eT=t,o="notequal"),(t=o)===n&&(t=eO,60===e.charCodeAt(eO)?(o="<",eO++):(o=n,0===eE&&peg$fail(P)),o===n&&("less"===e.substr(eO,4).toLowerCase()?(o=e.substr(eO,4),eO+=4):(o=n,0===eE&&peg$fail(M))),o!==n&&(eT=t,o="less"),(t=o)===n&&(t=eO,62===e.charCodeAt(eO)?(o=">",eO++):(o=n,0===eE&&peg$fail(x)),o===n&&("greater"===e.substr(eO,7).toLowerCase()?(o=e.substr(eO,7),eO+=7):(o=n,0===eE&&peg$fail(V))),o!==n&&(eT=t,o="greater"),t=o)))))),eD[r]={nextPos:eO,result:t},t)}function peg$parseCompOps(){var e,t,o,r,i,s,a,l,u=34*eO+6,c=eD[u];if(c)return eO=c.nextPos,c.result;if(e=eO,(t=peg$parsePlusMinusOps())!==n){for(o=[],r=eO,(i=peg$parse_())!==n&&(s=peg$parsePlusMinusSigns())!==n&&(a=peg$parse_())!==n&&(l=peg$parsePlusMinusOps())!==n?r=i=[i,s,a,l]:(eO=r,r=n);r!==n;)o.push(r),r=eO,(i=peg$parse_())!==n&&(s=peg$parsePlusMinusSigns())!==n&&(a=peg$parse_())!==n&&(l=peg$parsePlusMinusOps())!==n?r=i=[i,s,a,l]:(eO=r,r=n);o!==n?(eT=e,e=t=peg$c0(t,o)):(eO=e,e=n)}else eO=e,e=n;return eD[u]={nextPos:eO,result:e},e}function peg$parsePlusMinusSigns(){var t,o,r=34*eO+7,i=eD[r];return i?(eO=i.nextPos,i.result):(t=eO,43===e.charCodeAt(eO)?(o="+",eO++):(o=n,0===eE&&peg$fail(S)),o!==n&&(eT=t,o="plus"),(t=o)===n&&(t=eO,45===e.charCodeAt(eO)?(o="-",eO++):(o=n,0===eE&&peg$fail(O)),o!==n&&(eT=t,o="minus"),t=o),eD[r]={nextPos:eO,result:t},t)}function peg$parsePlusMinusOps(){var e,t,o,r,i,s,a,l,u=34*eO+8,c=eD[u];if(c)return eO=c.nextPos,c.result;if(e=eO,(t=peg$parseMulDivOps())!==n){for(o=[],r=eO,(i=peg$parse_())!==n&&(s=peg$parseMulDivSigns())!==n&&(a=peg$parse_())!==n&&(l=peg$parseMulDivOps())!==n?r=i=[i,s,a,l]:(eO=r,r=n);r!==n;)o.push(r),r=eO,(i=peg$parse_())!==n&&(s=peg$parseMulDivSigns())!==n&&(a=peg$parse_())!==n&&(l=peg$parseMulDivOps())!==n?r=i=[i,s,a,l]:(eO=r,r=n);o!==n?(eT=e,e=t=peg$c0(t,o)):(eO=e,e=n)}else eO=e,e=n;return eD[u]={nextPos:eO,result:e},e}function peg$parseMulDivSigns(){var t,o,r=34*eO+9,i=eD[r];return i?(eO=i.nextPos,i.result):(t=eO,42===e.charCodeAt(eO)?(o="*",eO++):(o=n,0===eE&&peg$fail(T)),o!==n&&(eT=t,o="mul"),(t=o)===n&&(t=eO,47===e.charCodeAt(eO)?(o="/",eO++):(o=n,0===eE&&peg$fail(_)),o!==n&&(eT=t,o="div"),(t=o)===n&&(t=eO,37===e.charCodeAt(eO)?(o="%",eO++):(o=n,0===eE&&peg$fail(R)),o!==n&&(eT=t,o="mod"),t=o)),eD[r]={nextPos:eO,result:t},t)}function peg$parseMulDivOps(){var e,t,o,r,i,s,a,l,u=34*eO+10,c=eD[u];if(c)return eO=c.nextPos,c.result;if(e=eO,(t=peg$parseBinaryFuncOp())!==n){for(o=[],r=eO,(i=peg$parse_())!==n&&(s=peg$parsePowerSigns())!==n&&(a=peg$parse_())!==n&&(l=peg$parseBinaryFuncOp())!==n?r=i=[i,s,a,l]:(eO=r,r=n);r!==n;)o.push(r),r=eO,(i=peg$parse_())!==n&&(s=peg$parsePowerSigns())!==n&&(a=peg$parse_())!==n&&(l=peg$parseBinaryFuncOp())!==n?r=i=[i,s,a,l]:(eO=r,r=n);o!==n?(eT=e,e=t=peg$c0(t,o)):(eO=e,e=n)}else eO=e,e=n;return eD[u]={nextPos:eO,result:e},e}function peg$parsePowerSigns(){var t,o,r=34*eO+11,i=eD[r];return i?(eO=i.nextPos,i.result):(t=eO,94===e.charCodeAt(eO)?(o="^",eO++):(o=n,0===eE&&peg$fail(I)),o===n&&("power"===e.substr(eO,5).toLowerCase()?(o=e.substr(eO,5),eO+=5):(o=n,0===eE&&peg$fail(E))),o!==n&&(eT=t,o="power"),t=o,eD[r]={nextPos:eO,result:t},t)}function peg$parseBinaryFuncOp(){var e,t,o,r,i,s,a,l,u=34*eO+12,c=eD[u];if(c)return eO=c.nextPos,c.result;if(e=eO,(t=peg$parseFactor())!==n){for(o=[],r=eO,(i=peg$parse_())!==n&&(s=peg$parseBinFunctions())!==n&&(a=peg$parse_())!==n?((l=peg$parseFactor())===n&&(l=null),l!==n?r=i=[i,s,a,l]:(eO=r,r=n)):(eO=r,r=n);r!==n;)o.push(r),r=eO,(i=peg$parse_())!==n&&(s=peg$parseBinFunctions())!==n&&(a=peg$parse_())!==n?((l=peg$parseFactor())===n&&(l=null),l!==n?r=i=[i,s,a,l]:(eO=r,r=n)):(eO=r,r=n);o!==n?(eT=e,e=t=peg$c11(t,o)):(eO=e,e=n)}else eO=e,e=n;return eD[u]={nextPos:eO,result:e},e}function peg$parseBinFunctions(){var t,o,r=34*eO+13,i=eD[r];return i?(eO=i.nextPos,i.result):(t=eO,"*="===e.substr(eO,2)?(o="*=",eO+=2):(o=n,0===eE&&peg$fail(D)),o===n&&("contains"===e.substr(eO,8).toLowerCase()?(o=e.substr(eO,8),eO+=8):(o=n,0===eE&&peg$fail(Q)),o===n&&("contain"===e.substr(eO,7).toLowerCase()?(o=e.substr(eO,7),eO+=7):(o=n,0===eE&&peg$fail(B)))),o!==n&&(eT=t,o="contains"),(t=o)===n&&(t=eO,"notcontains"===e.substr(eO,11).toLowerCase()?(o=e.substr(eO,11),eO+=11):(o=n,0===eE&&peg$fail(j)),o===n&&("notcontain"===e.substr(eO,10).toLowerCase()?(o=e.substr(eO,10),eO+=10):(o=n,0===eE&&peg$fail(L))),o!==n&&(eT=t,o="notcontains"),(t=o)===n&&(t=eO,"anyof"===e.substr(eO,5).toLowerCase()?(o=e.substr(eO,5),eO+=5):(o=n,0===eE&&peg$fail(A)),o!==n&&(eT=t,o="anyof"),(t=o)===n&&(t=eO,"allof"===e.substr(eO,5).toLowerCase()?(o=e.substr(eO,5),eO+=5):(o=n,0===eE&&peg$fail(k)),o!==n&&(eT=t,o="allof"),t=o))),eD[r]={nextPos:eO,result:t},t)}function peg$parseFactor(){var t,o,r,i,s=34*eO+14,a=eD[s];return a?(eO=a.nextPos,a.result):((t=eO,40===e.charCodeAt(eO)?(o="(",eO++):(o=n,0===eE&&peg$fail(F)),o!==n&&peg$parse_()!==n&&(r=peg$parseExpression())!==n&&peg$parse_()!==n&&(41===e.charCodeAt(eO)?(i=")",eO++):(i=n,0===eE&&peg$fail(N)),i===n&&(i=null),i!==n))?(eT=t,t=o=r):(eO=t,t=n),t===n&&(t=peg$parseFunctionOp())===n&&(t=peg$parseUnaryFunctionOp())===n&&(t=peg$parseAtom())===n&&(t=peg$parseArrayOp()),eD[s]={nextPos:eO,result:t},t)}function peg$parseFunctionOp(){var t,o,i,s,a,l,u=34*eO+15,c=eD[u];return c?(eO=c.nextPos,c.result):((o=eO,(i=peg$parseLettersAndDigits())!==n&&(40===e.charCodeAt(eO)?(s="(",eO++):(s=n,0===eE&&peg$fail(F)),s!==n&&(a=peg$parseSequence())!==n&&(41===e.charCodeAt(eO)?(l=")",eO++):(l=n,0===eE&&peg$fail(N)),l===n&&(l=null),l!==n)))?(eT=o,t=i,o=i=new r.FunctionOperand(t,a)):(eO=o,o=n),eD[u]={nextPos:eO,result:o},o)}function peg$parseUnaryFunctionOp(){var t,o,i,s,a,l,u=34*eO+16,c=eD[u];return c?(eO=c.nextPos,c.result):((s=eO,33===e.charCodeAt(eO)?(a="!",eO++):(a=n,0===eE&&peg$fail(q)),a===n&&("negate"===e.substr(eO,6).toLowerCase()?(a=e.substr(eO,6),eO+=6):(a=n,0===eE&&peg$fail(H))),a!==n&&peg$parse_()!==n&&(l=peg$parseExpression())!==n)?(eT=s,t=l,s=a=new r.UnaryOperand(t,"negate")):(eO=s,s=n),s===n&&((s=eO,(a=peg$parseAtom())!==n&&peg$parse_()!==n&&(l=peg$parseUnFunctions())!==n)?(eT=s,o=a,i=l,s=a=new r.UnaryOperand(o,i)):(eO=s,s=n)),eD[u]={nextPos:eO,result:s},s)}function peg$parseUnFunctions(){var t,o,r=34*eO+17,i=eD[r];return i?(eO=i.nextPos,i.result):(t=eO,"empty"===e.substr(eO,5).toLowerCase()?(o=e.substr(eO,5),eO+=5):(o=n,0===eE&&peg$fail(z)),o!==n&&(eT=t,o="empty"),(t=o)===n&&(t=eO,"notempty"===e.substr(eO,8).toLowerCase()?(o=e.substr(eO,8),eO+=8):(o=n,0===eE&&peg$fail(U)),o!==n&&(eT=t,o="notempty"),t=o),eD[r]={nextPos:eO,result:t},t)}function peg$parseAtom(){var t,o,i,s,a,l=34*eO+18,u=eD[l];return u?(eO=u.nextPos,u.result):(o=eO,peg$parse_()!==n?(e.substr(eO,9)===W?(i=W,eO+=9):(i=n,0===eE&&peg$fail(J)),i===n&&(e.substr(eO,4)===$?(i=$,eO+=4):(i=n,0===eE&&peg$fail(G))),i!==n?(eT=o,o=null):(eO=o,o=n)):(eO=o,o=n),o===n&&((o=eO,peg$parse_()!==n&&(i=peg$parseConstValue())!==n)?(eT=o,t=i,o=new r.Const(t)):(eO=o,o=n),o===n&&((o=eO,peg$parse_()!==n&&(123===e.charCodeAt(eO)?(i="{",eO++):(i=n,0===eE&&peg$fail(Z)),i!==n&&(s=peg$parseValueInput())!==n&&(125===e.charCodeAt(eO)?(a="}",eO++):(a=n,0===eE&&peg$fail(K)),a!==n)))?(eT=o,o=new r.Variable(s)):(eO=o,o=n))),eD[l]={nextPos:eO,result:o},o)}function peg$parseConstValue(){var t,o,r,i,s=34*eO+19,a=eD[s];return a?(eO=a.nextPos,a.result):(t=eO,(o=peg$parseLogicValue())!==n&&(eT=t,o=peg$c111(o)),(t=o)===n&&(t=eO,(o=peg$parseArithmeticValue())!==n&&(eT=t,o=peg$c111(o)),(t=o)===n&&(t=eO,(o=peg$parseLettersAndDigits())!==n&&(eT=t,o=peg$c111(o)),(t=o)===n&&(t=eO,"''"===e.substr(eO,2)?(o="''",eO+=2):(o=n,0===eE&&peg$fail(Y)),o!==n&&(eT=t,o=peg$c114()),(t=o)===n&&(t=eO,'""'===e.substr(eO,2)?(o='""',eO+=2):(o=n,0===eE&&peg$fail(X)),o!==n&&(eT=t,o=peg$c114()),(t=o)===n&&(t=eO,39===e.charCodeAt(eO)?(o="'",eO++):(o=n,0===eE&&peg$fail(ee)),o!==n&&(r=peg$parseAnyInput())!==n?(39===e.charCodeAt(eO)?(i="'",eO++):(i=n,0===eE&&peg$fail(ee)),i!==n?(eT=t,t=o=peg$c119(r)):(eO=t,t=n)):(eO=t,t=n),t===n&&(t=eO,34===e.charCodeAt(eO)?(o='"',eO++):(o=n,0===eE&&peg$fail(et)),o!==n&&(r=peg$parseAnyInput())!==n?(34===e.charCodeAt(eO)?(i='"',eO++):(i=n,0===eE&&peg$fail(et)),i!==n?(eT=t,t=o=peg$c119(r)):(eO=t,t=n)):(eO=t,t=n))))))),eD[s]={nextPos:eO,result:t},t)}function peg$parseArrayOp(){var t,o,r,i,s=34*eO+20,a=eD[s];return a?(eO=a.nextPos,a.result):((t=eO,91===e.charCodeAt(eO)?(o="[",eO++):(o=n,0===eE&&peg$fail(eo)),o!==n&&(r=peg$parseSequence())!==n&&(93===e.charCodeAt(eO)?(i="]",eO++):(i=n,0===eE&&peg$fail(en)),i!==n))?(eT=t,t=o=r):(eO=t,t=n),eD[s]={nextPos:eO,result:t},t)}function peg$parseSequence(){var t,o,r,i,s,a,l,u,c=34*eO+21,p=eD[c];if(p)return eO=p.nextPos,p.result;if(t=eO,(o=peg$parseExpression())===n&&(o=null),o!==n){for(r=[],i=eO,(s=peg$parse_())!==n?(44===e.charCodeAt(eO)?(a=",",eO++):(a=n,0===eE&&peg$fail(er)),a!==n&&(l=peg$parse_())!==n&&(u=peg$parseExpression())!==n?i=s=[s,a,l,u]:(eO=i,i=n)):(eO=i,i=n);i!==n;)r.push(i),i=eO,(s=peg$parse_())!==n?(44===e.charCodeAt(eO)?(a=",",eO++):(a=n,0===eE&&peg$fail(er)),a!==n&&(l=peg$parse_())!==n&&(u=peg$parseExpression())!==n?i=s=[s,a,l,u]:(eO=i,i=n)):(eO=i,i=n);r!==n?(eT=t,t=o=peg$c129(o,r)):(eO=t,t=n)}else eO=t,t=n;return eD[c]={nextPos:eO,result:t},t}function peg$parseLogicValue(){var t,o,r=34*eO+22,i=eD[r];return i?(eO=i.nextPos,i.result):(t=eO,"true"===e.substr(eO,4).toLowerCase()?(o=e.substr(eO,4),eO+=4):(o=n,0===eE&&peg$fail(ei)),o!==n&&(eT=t,o=!0),(t=o)===n&&(t=eO,"false"===e.substr(eO,5).toLowerCase()?(o=e.substr(eO,5),eO+=5):(o=n,0===eE&&peg$fail(es)),o!==n&&(eT=t,o=!1),t=o),eD[r]={nextPos:eO,result:t},t)}function peg$parseArithmeticValue(){var t,o,r,i,s,a=34*eO+23,l=eD[a];return l?(eO=l.nextPos,l.result):(r=eO,"0x"===e.substr(eO,2)?(i="0x",eO+=2):(i=n,0===eE&&peg$fail(ea)),i!==n&&(s=peg$parseDigits())!==n?(eT=r,r=i=parseInt(text(),16)):(eO=r,r=n),r===n&&((r=eO,el.test(e.charAt(eO))?(i=e.charAt(eO),eO++):(i=n,0===eE&&peg$fail(eu)),i===n&&(i=null),i!==n&&(s=peg$parseNumber())!==n)?(eT=r,t=i,o=s,r=i=null==t?o:-o):(eO=r,r=n)),eD[a]={nextPos:eO,result:r},r)}function peg$parseNumber(){var t,o,r,i=34*eO+24,s=eD[i];return s?(eO=s.nextPos,s.result):(t=eO,(o=peg$parseDigits())!==n?(46===e.charCodeAt(eO)?(r=".",eO++):(r=n,0===eE&&peg$fail(ec)),r!==n&&peg$parseDigits()!==n?(eT=t,t=o=parseFloat(text())):(eO=t,t=n)):(eO=t,t=n),t===n&&(t=eO,(o=peg$parseNonZeroDigits())!==n?((r=peg$parseDigits())===n&&(r=null),r!==n?(eT=t,t=o=parseInt(text(),10)):(eO=t,t=n)):(eO=t,t=n),t===n&&(t=eO,48===e.charCodeAt(eO)?(o="0",eO++):(o=n,0===eE&&peg$fail(ep)),o!==n&&(eT=t,o=0),t=o)),eD[i]={nextPos:eO,result:t},t)}function peg$parseValueInput(){var e,t,o,r=34*eO+25,i=eD[r];if(i)return eO=i.nextPos,i.result;if(e=eO,t=[],(o=peg$parseValueCharacters())!==n)for(;o!==n;)t.push(o),o=peg$parseValueCharacters();else t=n;return t!==n&&(eT=e,t=peg$c149(t)),e=t,eD[r]={nextPos:eO,result:e},e}function peg$parseAnyInput(){var e,t,o,r=34*eO+26,i=eD[r];if(i)return eO=i.nextPos,i.result;if(e=eO,t=[],(o=peg$parseAnyCharacters())!==n)for(;o!==n;)t.push(o),o=peg$parseAnyCharacters();else t=n;return t!==n&&(eT=e,t=peg$c149(t)),e=t,eD[r]={nextPos:eO,result:e},e}function peg$parseAnyCharacters(){var t,o,r=34*eO+27,i=eD[r];return i?(eO=i.nextPos,i.result):(t=eO,"\\'"===e.substr(eO,2)?(o="\\'",eO+=2):(o=n,0===eE&&peg$fail(ed)),o!==n&&(eT=t,o="'"),(t=o)===n&&(t=eO,'\\"'===e.substr(eO,2)?(o='\\"',eO+=2):(o=n,0===eE&&peg$fail(eh)),o!==n&&(eT=t,o='"'),(t=o)===n&&(t=eO,eg.test(e.charAt(eO))?(o=e.charAt(eO),eO++):(o=n,0===eE&&peg$fail(ef)),o!==n&&(eT=t,o=peg$c158()),t=o)),eD[r]={nextPos:eO,result:t},t)}function peg$parseValueCharacters(){var t,o,r=34*eO+28,i=eD[r];return i?(eO=i.nextPos,i.result):(t=eO,ey.test(e.charAt(eO))?(o=e.charAt(eO),eO++):(o=n,0===eE&&peg$fail(em)),o!==n&&(eT=t,o=peg$c158()),t=o,eD[r]={nextPos:eO,result:t},t)}function peg$parseLettersAndDigits(){var e,t,o,r,i,s,a=34*eO+29,l=eD[a];if(l)return eO=l.nextPos,l.result;if(e=eO,peg$parseLetters()!==n){if(t=[],o=eO,(r=peg$parseDigits())!==n){for(i=[],s=peg$parseLetters();s!==n;)i.push(s),s=peg$parseLetters();i!==n?o=r=[r,i]:(eO=o,o=n)}else eO=o,o=n;for(;o!==n;)if(t.push(o),o=eO,(r=peg$parseDigits())!==n){for(i=[],s=peg$parseLetters();s!==n;)i.push(s),s=peg$parseLetters();i!==n?o=r=[r,i]:(eO=o,o=n)}else eO=o,o=n;t!==n?(eT=e,e=peg$c158()):(eO=e,e=n)}else eO=e,e=n;return eD[a]={nextPos:eO,result:e},e}function peg$parseDigits(){var t,o,r=34*eO+30,i=eD[r];if(i)return eO=i.nextPos,i.result;if(t=[],ev.test(e.charAt(eO))?(o=e.charAt(eO),eO++):(o=n,0===eE&&peg$fail(eb)),o!==n)for(;o!==n;)t.push(o),ev.test(e.charAt(eO))?(o=e.charAt(eO),eO++):(o=n,0===eE&&peg$fail(eb));else t=n;return eD[r]={nextPos:eO,result:t},t}function peg$parseNonZeroDigits(){var t,o,r=34*eO+31,i=eD[r];if(i)return eO=i.nextPos,i.result;if(t=[],eC.test(e.charAt(eO))?(o=e.charAt(eO),eO++):(o=n,0===eE&&peg$fail(ew)),o!==n)for(;o!==n;)t.push(o),eC.test(e.charAt(eO))?(o=e.charAt(eO),eO++):(o=n,0===eE&&peg$fail(ew));else t=n;return eD[r]={nextPos:eO,result:t},t}function peg$parseLetters(){var t,o,r=34*eO+32,i=eD[r];if(i)return eO=i.nextPos,i.result;if(t=[],eP.test(e.charAt(eO))?(o=e.charAt(eO),eO++):(o=n,0===eE&&peg$fail(eM)),o!==n)for(;o!==n;)t.push(o),eP.test(e.charAt(eO))?(o=e.charAt(eO),eO++):(o=n,0===eE&&peg$fail(eM));else t=n;return eD[r]={nextPos:eO,result:t},t}function peg$parse_(){var t,o,r=34*eO+33,i=eD[r];if(i)return eO=i.nextPos,i.result;for(eE++,t=[],eV.test(e.charAt(eO))?(o=e.charAt(eO),eO++):(o=n,0===eE&&peg$fail(eS));o!==n;)t.push(o),eV.test(e.charAt(eO))?(o=e.charAt(eO),eO++):(o=n,0===eE&&peg$fail(eS));return eE--,t===n&&(o=n,0===eE&&peg$fail(ex)),eD[r]={nextPos:eO,result:t},t}function buildBinaryOperand(e,t,o){return void 0===o&&(o=!1),t.reduce(function(e,t){return new r.BinaryOperand(t[1],e,t[3],o)},e)}function flattenArray(e){return[].concat.apply([],e)}if((o=a())!==n&&eO===e.length)return o;throw o!==n&&eO<e.length&&peg$fail(peg$endExpectation()),peg$buildStructuredError(eI,eR<e.length?e.charAt(eR):null,peg$computeLocation(eR,eR<e.length?eR+1:eR))}},"./src/expressions/expressions.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"Operand",function(){return u}),o.d(t,"BinaryOperand",function(){return c}),o.d(t,"UnaryOperand",function(){return p}),o.d(t,"ArrayOperand",function(){return d}),o.d(t,"Const",function(){return h}),o.d(t,"Variable",function(){return g}),o.d(t,"FunctionOperand",function(){return f}),o.d(t,"OperandMaker",function(){return y});var n,r=o(/*! ../helpers */"./src/helpers.ts"),i=o(/*! ../functionsfactory */"./src/functionsfactory.ts"),s=o(/*! ../conditionProcessValue */"./src/conditionProcessValue.ts"),a=o(/*! ../settings */"./src/settings.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),u=function(){function Operand(){}return Operand.prototype.toString=function(e){return void 0===e&&(e=void 0),""},Operand.prototype.hasFunction=function(){return!1},Operand.prototype.hasAsyncFunction=function(){return!1},Operand.prototype.addToAsyncList=function(e){},Operand.prototype.isEqual=function(e){return!!e&&e.getType()===this.getType()&&this.isContentEqual(e)},Operand.prototype.areOperatorsEquals=function(e,t){return!e&&!t||!!e&&e.isEqual(t)},Operand}(),c=function(e){function BinaryOperand(t,o,n,r){void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=!1);var i=e.call(this)||this;return i.operatorName=t,i.left=o,i.right=n,i.isArithmeticValue=r,r?i.consumer=y.binaryFunctions.arithmeticOp(t):i.consumer=y.binaryFunctions[t],null==i.consumer&&y.throwInvalidOperatorError(t),i}return l(BinaryOperand,e),Object.defineProperty(BinaryOperand.prototype,"requireStrictCompare",{get:function(){return this.getIsOperandRequireStrict(this.left)||this.getIsOperandRequireStrict(this.right)},enumerable:!1,configurable:!0}),BinaryOperand.prototype.getIsOperandRequireStrict=function(e){return!!e&&e.requireStrictCompare},BinaryOperand.prototype.getType=function(){return"binary"},Object.defineProperty(BinaryOperand.prototype,"isArithmetic",{get:function(){return this.isArithmeticValue},enumerable:!1,configurable:!0}),Object.defineProperty(BinaryOperand.prototype,"isConjunction",{get:function(){return"or"==this.operatorName||"and"==this.operatorName},enumerable:!1,configurable:!0}),Object.defineProperty(BinaryOperand.prototype,"conjunction",{get:function(){return this.isConjunction?this.operatorName:""},enumerable:!1,configurable:!0}),Object.defineProperty(BinaryOperand.prototype,"operator",{get:function(){return this.operatorName},enumerable:!1,configurable:!0}),Object.defineProperty(BinaryOperand.prototype,"leftOperand",{get:function(){return this.left},enumerable:!1,configurable:!0}),Object.defineProperty(BinaryOperand.prototype,"rightOperand",{get:function(){return this.right},enumerable:!1,configurable:!0}),BinaryOperand.prototype.isContentEqual=function(e){return e.operator===this.operator&&this.areOperatorsEquals(this.left,e.left)&&this.areOperatorsEquals(this.right,e.right)},BinaryOperand.prototype.evaluateParam=function(e,t){return null==e?null:e.evaluate(t)},BinaryOperand.prototype.evaluate=function(e){return this.consumer.call(this,this.evaluateParam(this.left,e),this.evaluateParam(this.right,e),this.requireStrictCompare)},BinaryOperand.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return"("+y.safeToString(this.left,e)+" "+y.operatorToString(this.operatorName)+" "+y.safeToString(this.right,e)+")"},BinaryOperand.prototype.setVariables=function(e){null!=this.left&&this.left.setVariables(e),null!=this.right&&this.right.setVariables(e)},BinaryOperand.prototype.hasFunction=function(){return!!this.left&&this.left.hasFunction()||!!this.right&&this.right.hasFunction()},BinaryOperand.prototype.hasAsyncFunction=function(){return!!this.left&&this.left.hasAsyncFunction()||!!this.right&&this.right.hasAsyncFunction()},BinaryOperand.prototype.addToAsyncList=function(e){this.left&&this.left.addToAsyncList(e),this.right&&this.right.addToAsyncList(e)},BinaryOperand}(u),p=function(e){function UnaryOperand(t,o){var n=e.call(this)||this;return n.expressionValue=t,n.operatorName=o,n.consumer=y.unaryFunctions[o],null==n.consumer&&y.throwInvalidOperatorError(o),n}return l(UnaryOperand,e),Object.defineProperty(UnaryOperand.prototype,"operator",{get:function(){return this.operatorName},enumerable:!1,configurable:!0}),Object.defineProperty(UnaryOperand.prototype,"expression",{get:function(){return this.expressionValue},enumerable:!1,configurable:!0}),UnaryOperand.prototype.getType=function(){return"unary"},UnaryOperand.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return y.operatorToString(this.operatorName)+" "+this.expression.toString(e)},UnaryOperand.prototype.isContentEqual=function(e){return e.operator==this.operator&&this.areOperatorsEquals(this.expression,e.expression)},UnaryOperand.prototype.evaluate=function(e){var t=this.expression.evaluate(e);return this.consumer.call(this,t)},UnaryOperand.prototype.setVariables=function(e){this.expression.setVariables(e)},UnaryOperand}(u),d=function(e){function ArrayOperand(t){var o=e.call(this)||this;return o.values=t,o}return l(ArrayOperand,e),ArrayOperand.prototype.getType=function(){return"array"},ArrayOperand.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return"["+this.values.map(function(t){return t.toString(e)}).join(", ")+"]"},ArrayOperand.prototype.evaluate=function(e){return this.values.map(function(t){return t.evaluate(e)})},ArrayOperand.prototype.setVariables=function(e){this.values.forEach(function(t){t.setVariables(e)})},ArrayOperand.prototype.hasFunction=function(){return this.values.some(function(e){return e.hasFunction()})},ArrayOperand.prototype.hasAsyncFunction=function(){return this.values.some(function(e){return e.hasAsyncFunction()})},ArrayOperand.prototype.addToAsyncList=function(e){this.values.forEach(function(t){return t.addToAsyncList(e)})},ArrayOperand.prototype.isContentEqual=function(e){if(e.values.length!==this.values.length)return!1;for(var t=0;t<this.values.length;t++)if(!e.values[t].isEqual(this.values[t]))return!1;return!0},ArrayOperand}(u),h=function(e){function Const(t){var o=e.call(this)||this;return o.value=t,o}return l(Const,e),Const.prototype.getType=function(){return"const"},Const.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return this.value.toString()},Object.defineProperty(Const.prototype,"correctValue",{get:function(){return this.getCorrectValue(this.value)},enumerable:!1,configurable:!0}),Object.defineProperty(Const.prototype,"requireStrictCompare",{get:function(){return!1},enumerable:!1,configurable:!0}),Const.prototype.evaluate=function(){return this.getCorrectValue(this.value)},Const.prototype.setVariables=function(e){},Const.prototype.getCorrectValue=function(e){return e&&"string"==typeof e?this.isBooleanValue(e)?"true"===e.toLowerCase():e.length>1&&this.isQuote(e[0])&&this.isQuote(e[e.length-1])?e.substring(1,e.length-1):y.isNumeric(e)?0==e.indexOf("0x")?parseInt(e):e.length>1&&"0"==e[0]&&(e.length<2||"."!==e[1]&&","!==e[1])?e:parseFloat(e):e:e},Const.prototype.isContentEqual=function(e){return e.value==this.value},Const.prototype.isQuote=function(e){return"'"==e||'"'==e},Const.prototype.isBooleanValue=function(e){return e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())},Const}(u),g=function(e){function Variable(t){var o=e.call(this,t)||this;return o.variableName=t,o.valueInfo={},o.useValueAsItIs=!1,o.variableName&&o.variableName.length>1&&o.variableName[0]===Variable.DisableConversionChar&&(o.variableName=o.variableName.substring(1),o.useValueAsItIs=!0),o}return l(Variable,e),Object.defineProperty(Variable,"DisableConversionChar",{get:function(){return a.settings.expressionDisableConversionChar},set:function(e){a.settings.expressionDisableConversionChar=e},enumerable:!1,configurable:!0}),Object.defineProperty(Variable.prototype,"requireStrictCompare",{get:function(){return!0===this.valueInfo.sctrictCompare},enumerable:!1,configurable:!0}),Variable.prototype.getType=function(){return"variable"},Variable.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return"{"+(this.useValueAsItIs?Variable.DisableConversionChar:"")+this.variableName+"}"},Object.defineProperty(Variable.prototype,"variable",{get:function(){return this.variableName},enumerable:!1,configurable:!0}),Variable.prototype.evaluate=function(e){return this.valueInfo.name=this.variableName,e.getValueInfo(this.valueInfo),this.valueInfo.hasValue?this.getCorrectValue(this.valueInfo.value):null},Variable.prototype.setVariables=function(e){e.push(this.variableName)},Variable.prototype.getCorrectValue=function(t){return this.useValueAsItIs?t:e.prototype.getCorrectValue.call(this,t)},Variable.prototype.isContentEqual=function(e){return e.variable==this.variable},Variable}(h),f=function(e){function FunctionOperand(t,o){var n=e.call(this)||this;return n.originalValue=t,n.parameters=o,n.isReadyValue=!1,Array.isArray(o)&&0===o.length&&(n.parameters=new d([])),n}return l(FunctionOperand,e),FunctionOperand.prototype.getType=function(){return"function"},FunctionOperand.prototype.evaluateAsync=function(e){var t=this;this.isReadyValue=!1;var o=new s.ProcessValue;o.values=r.Helpers.createCopy(e.values),o.properties=r.Helpers.createCopy(e.properties),o.properties.returnResult=function(e){t.asynResult=e,t.isReadyValue=!0,t.onAsyncReady()},this.evaluateCore(o)},FunctionOperand.prototype.evaluate=function(e){return this.isReady?this.asynResult:this.evaluateCore(e)},FunctionOperand.prototype.evaluateCore=function(e){return i.FunctionFactory.Instance.run(this.originalValue,this.parameters.evaluate(e),e.properties)},FunctionOperand.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return this.originalValue+"("+this.parameters.toString(e)+")"},FunctionOperand.prototype.setVariables=function(e){this.parameters.setVariables(e)},Object.defineProperty(FunctionOperand.prototype,"isReady",{get:function(){return this.isReadyValue},enumerable:!1,configurable:!0}),FunctionOperand.prototype.hasFunction=function(){return!0},FunctionOperand.prototype.hasAsyncFunction=function(){return i.FunctionFactory.Instance.isAsyncFunction(this.originalValue)},FunctionOperand.prototype.addToAsyncList=function(e){this.hasAsyncFunction()&&e.push(this)},FunctionOperand.prototype.isContentEqual=function(e){return e.originalValue==this.originalValue&&this.areOperatorsEquals(e.parameters,this.parameters)},FunctionOperand}(u),y=function(){function OperandMaker(){}return OperandMaker.throwInvalidOperatorError=function(e){throw Error("Invalid operator: '"+e+"'")},OperandMaker.safeToString=function(e,t){return null==e?"":e.toString(t)},OperandMaker.toOperandString=function(e){return!e||OperandMaker.isNumeric(e)||OperandMaker.isBooleanValue(e)||(e="'"+e+"'"),e},OperandMaker.isSpaceString=function(e){return!!e&&!e.replace(" ","")},OperandMaker.isNumeric=function(e){return!(e&&(e.indexOf("-")>-1||e.indexOf("+")>1||e.indexOf("*")>-1||e.indexOf("^")>-1||e.indexOf("/")>-1||e.indexOf("%")>-1)||OperandMaker.isSpaceString(e))&&r.Helpers.isNumber(e)},OperandMaker.isBooleanValue=function(e){return!!e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())},OperandMaker.countDecimals=function(e){if(r.Helpers.isNumber(e)&&Math.floor(e)!==e){var t=e.toString().split(".");return t.length>1&&t[1].length||0}return 0},OperandMaker.plusMinus=function(e,t,o){var n=OperandMaker.countDecimals(e),r=OperandMaker.countDecimals(t);if(n>0||r>0){var i=Math.max(n,r);o=parseFloat(o.toFixed(i))}return o},OperandMaker.isTwoValueEquals=function(e,t,o){return void 0===o&&(o=!0),"undefined"===e&&(e=void 0),"undefined"===t&&(t=void 0),r.Helpers.isTwoValueEquals(e,t,o)},OperandMaker.operatorToString=function(e){var t=OperandMaker.signs[e];return null==t?e:t},OperandMaker.convertValForDateCompare=function(e,t){if(t instanceof Date&&"string"==typeof e){var o=new Date(e);return o.setHours(0,0,0),o}return e},OperandMaker.unaryFunctions={empty:function(e){return r.Helpers.isValueEmpty(e)},notempty:function(e){return!OperandMaker.unaryFunctions.empty(e)},negate:function(e){return!e}},OperandMaker.binaryFunctions={arithmeticOp:function(e){var convertForArithmeticOp=function(e,t){return r.Helpers.isValueEmpty(e)?"number"==typeof t?0:"string"==typeof e?e:"string"==typeof t?"":Array.isArray(t)?[]:0:e};return function(t,o){t=convertForArithmeticOp(t,o),o=convertForArithmeticOp(o,t);var n=OperandMaker.binaryFunctions[e];return null==n?null:n.call(this,t,o)}},and:function(e,t){return e&&t},or:function(e,t){return e||t},plus:function(e,t){return r.Helpers.sumAnyValues(e,t)},minus:function(e,t){return r.Helpers.correctAfterPlusMinis(e,t,e-t)},mul:function(e,t){return r.Helpers.correctAfterMultiple(e,t,e*t)},div:function(e,t){return t?e/t:null},mod:function(e,t){return t?e%t:null},power:function(e,t){return Math.pow(e,t)},greater:function(e,t){return null!=e&&null!=t&&(e=OperandMaker.convertValForDateCompare(e,t),t=OperandMaker.convertValForDateCompare(t,e),e>t)},less:function(e,t){return null!=e&&null!=t&&(e=OperandMaker.convertValForDateCompare(e,t),t=OperandMaker.convertValForDateCompare(t,e),e<t)},greaterorequal:function(e,t){return!!OperandMaker.binaryFunctions.equal(e,t)||OperandMaker.binaryFunctions.greater(e,t)},lessorequal:function(e,t){return!!OperandMaker.binaryFunctions.equal(e,t)||OperandMaker.binaryFunctions.less(e,t)},equal:function(e,t,o){return e=OperandMaker.convertValForDateCompare(e,t),t=OperandMaker.convertValForDateCompare(t,e),OperandMaker.isTwoValueEquals(e,t,!0!==o)},notequal:function(e,t){return!OperandMaker.binaryFunctions.equal(e,t)},contains:function(e,t){return OperandMaker.binaryFunctions.containsCore(e,t,!0)},notcontains:function(e,t){return!(e||r.Helpers.isValueEmpty(t))||OperandMaker.binaryFunctions.containsCore(e,t,!1)},anyof:function(e,t){if(r.Helpers.isValueEmpty(e)&&r.Helpers.isValueEmpty(t))return!0;if(r.Helpers.isValueEmpty(e)||!Array.isArray(e)&&0===e.length)return!1;if(r.Helpers.isValueEmpty(t))return!0;if(!Array.isArray(e))return OperandMaker.binaryFunctions.contains(t,e);if(!Array.isArray(t))return OperandMaker.binaryFunctions.contains(e,t);for(var o=0;o<t.length;o++)if(OperandMaker.binaryFunctions.contains(e,t[o]))return!0;return!1},allof:function(e,t){if(!e&&!r.Helpers.isValueEmpty(t))return!1;if(!Array.isArray(t))return OperandMaker.binaryFunctions.contains(e,t);for(var o=0;o<t.length;o++)if(!OperandMaker.binaryFunctions.contains(e,t[o]))return!1;return!0},containsCore:function(e,t,o){if(!e&&0!==e&&!1!==e)return!1;if(!e.length&&(e=e.toString(),("string"==typeof t||t instanceof String)&&(e=e.toUpperCase(),t=t.toUpperCase())),"string"==typeof e||e instanceof String){if(!t)return!1;t=t.toString();var n=e.indexOf(t)>-1;return o?n:!n}for(var r=Array.isArray(t)?t:[t],i=0;i<r.length;i++){var s=0;for(t=r[i];s<e.length&&!OperandMaker.isTwoValueEquals(e[s],t);s++);if(s==e.length)return!o}return o}},OperandMaker.signs={less:"<",lessorequal:"<=",greater:">",greaterorequal:">=",equal:"==",notequal:"!=",plus:"+",minus:"-",mul:"*",div:"/",and:"and",or:"or",power:"^",mod:"%",negate:"!"},OperandMaker}()},"./src/flowpanel.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"FlowPanelModel",function(){return a});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./panel */"./src/panel.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),a=function(e){function FlowPanelModel(t){void 0===t&&(t="");var o=e.call(this,t)||this;return o.createLocalizableString("content",o,!0),o.registerPropertyChangedHandlers(["content"],function(){o.onContentChanged()}),o}return s(FlowPanelModel,e),FlowPanelModel.prototype.getType=function(){return"flowpanel"},FlowPanelModel.prototype.getChildrenLayoutType=function(){return"flow"},FlowPanelModel.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.onContentChanged()},Object.defineProperty(FlowPanelModel.prototype,"content",{get:function(){return this.getLocalizableStringText("content")},set:function(e){this.setLocalizableStringText("content",e)},enumerable:!1,configurable:!0}),Object.defineProperty(FlowPanelModel.prototype,"locContent",{get:function(){return this.getLocalizableString("content")},enumerable:!1,configurable:!0}),Object.defineProperty(FlowPanelModel.prototype,"html",{get:function(){return this.getPropertyValue("html","")},set:function(e){this.setPropertyValue("html",e)},enumerable:!1,configurable:!0}),FlowPanelModel.prototype.onContentChanged=function(){var e="";e=this.onCustomHtmlProducing?this.onCustomHtmlProducing():this.produceHtml(),this.html=e,this.contentChangedCallback&&this.contentChangedCallback()},FlowPanelModel.prototype.produceHtml=function(){for(var e=[],t=/{(.*?(element:)[^$].*?)}/g,o=this.content,n=0,r=null;null!==(r=t.exec(o));){r.index>n&&(e.push(o.substring(n,r.index)),n=r.index);var i=this.getQuestionFromText(r[0]);i?e.push(this.getHtmlForQuestion(i)):e.push(o.substring(n,r.index+r[0].length)),n=r.index+r[0].length}return n<o.length&&e.push(o.substring(n,o.length)),e.join("").replace(RegExp("<br>","g"),"<br/>")},FlowPanelModel.prototype.getQuestionFromText=function(e){return e=(e=e.substring(1,e.length-1)).replace(FlowPanelModel.contentElementNamePrefix,"").trim(),this.getQuestionByName(e)},FlowPanelModel.prototype.getHtmlForQuestion=function(e){return this.onGetHtmlForQuestion?this.onGetHtmlForQuestion(e):""},FlowPanelModel.prototype.getQuestionHtmlId=function(e){return this.name+"_"+e.id},FlowPanelModel.prototype.onAddElement=function(t,o){e.prototype.onAddElement.call(this,t,o),this.addElementToContent(t),t.renderWidth=""},FlowPanelModel.prototype.onRemoveElement=function(t){var o=this.getElementContentText(t);this.content=this.content.replace(o,""),e.prototype.onRemoveElement.call(this,t)},FlowPanelModel.prototype.dragDropMoveElement=function(e,t,o){},FlowPanelModel.prototype.addElementToContent=function(e){if(!this.isLoadingFromJson){var t=this.getElementContentText(e);this.insertTextAtCursor(t)||(this.content=this.content+t)}},FlowPanelModel.prototype.insertTextAtCursor=function(e,t){if(void 0===t&&(t=null),!this.isDesignMode||"undefined"==typeof document||!window.getSelection)return!1;var o=window.getSelection();if(o.getRangeAt&&o.rangeCount){var n=o.getRangeAt(0);if(n.deleteContents(),n.insertNode(document.createTextNode(e)),this.getContent){var r=this.getContent(t);this.content=r}return!0}return!1},FlowPanelModel.prototype.getElementContentText=function(e){return"{"+FlowPanelModel.contentElementNamePrefix+e.name+"}"},FlowPanelModel.contentElementNamePrefix="element:",FlowPanelModel}(i.PanelModel);r.Serializer.addClass("flowpanel",[{name:"content:html",serializationProperty:"locContent"}],function(){return new a},"panel")},"./src/functionsfactory.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"FunctionFactory",function(){return s}),o.d(t,"registerFunction",function(){return a});var n=o(/*! ./helpers */"./src/helpers.ts"),r=o(/*! ./settings */"./src/settings.ts"),i=o(/*! ./console-warnings */"./src/console-warnings.ts"),s=function(){function FunctionFactory(){this.functionHash={},this.isAsyncHash={}}return FunctionFactory.prototype.register=function(e,t,o){void 0===o&&(o=!1),this.functionHash[e]=t,o&&(this.isAsyncHash[e]=!0)},FunctionFactory.prototype.unregister=function(e){delete this.functionHash[e],delete this.isAsyncHash[e]},FunctionFactory.prototype.hasFunction=function(e){return!!this.functionHash[e]},FunctionFactory.prototype.isAsyncFunction=function(e){return!!this.isAsyncHash[e]},FunctionFactory.prototype.clear=function(){this.functionHash={}},FunctionFactory.prototype.getAll=function(){var e=[];for(var t in this.functionHash)e.push(t);return e.sort()},FunctionFactory.prototype.run=function(e,t,o){void 0===o&&(o=null);var n=this.functionHash[e];if(!n)return i.ConsoleWarnings.warn("Unknown function name: "+e),null;var r={func:n};if(o)for(var s in o)r[s]=o[s];return r.func(t)},FunctionFactory.Instance=new FunctionFactory,FunctionFactory}(),a=s.Instance.register;function getParamsAsArray(e,t){if(null!=e){if(Array.isArray(e))for(var o=0;o<e.length;o++)getParamsAsArray(e[o],t);else n.Helpers.isNumber(e)&&(e=n.Helpers.getNumber(e)),t.push(e)}}function sum(e){var t=[];getParamsAsArray(e,t);for(var o=0,r=0;r<t.length;r++)o=n.Helpers.correctAfterPlusMinis(o,t[r],o+t[r]);return o}function min_max(e,t){var o=[];getParamsAsArray(e,o);for(var n=void 0,r=0;r<o.length;r++)void 0===n&&(n=o[r]),t?n>o[r]&&(n=o[r]):n<o[r]&&(n=o[r]);return n}function min(e){return min_max(e,!0)}function max(e){return min_max(e,!1)}function count(e){var t=[];return getParamsAsArray(e,t),t.length}function avg(e){var t=[];getParamsAsArray(e,t);var o=sum(e);return t.length>0?o/t.length:0}function getInArrayParams(e){if(2!=e.length)return null;var t=e[0];if(!t||!Array.isArray(t)&&!Array.isArray(Object.keys(t)))return null;var o=e[1];return"string"==typeof o||o instanceof String?{data:t,name:o}:null}function convertToNumber(e){return"string"==typeof e?n.Helpers.isNumber(e)?n.Helpers.getNumber(e):void 0:e}function processItemInArray(e,t,o,r,i){return!e||n.Helpers.isValueEmpty(e[t])?o:r(o,i?convertToNumber(e[t]):1)}function calcInArray(e,t,o){void 0===o&&(o=!0);var n=getInArrayParams(e);if(n){var r=void 0;if(Array.isArray(n.data))for(var i=0;i<n.data.length;i++)r=processItemInArray(n.data[i],n.name,r,t,o);else for(var s in n.data)r=processItemInArray(n.data[s],n.name,r,t,o);return r}}function sumInArray(e){var t=calcInArray(e,function(e,t){return(void 0==e&&(e=0),void 0==t||null==t)?e:n.Helpers.correctAfterPlusMinis(e,t,e+t)});return void 0!==t?t:0}function minInArray(e){return calcInArray(e,function(e,t){return void 0==e?t:void 0==t||null==t?e:e<t?e:t})}function maxInArray(e){return calcInArray(e,function(e,t){return void 0==e?t:void 0==t||null==t?e:e>t?e:t})}function countInArray(e){var t=calcInArray(e,function(e,t){return(void 0==e&&(e=0),void 0==t||null==t)?e:e+1},!1);return void 0!==t?t:0}function avgInArray(e){var t=countInArray(e);return 0==t?0:sumInArray(e)/t}function iif(e){return e||3===e.length?e[0]?e[1]:e[2]:""}function getDate(e){return(e||!(e.length<1))&&e[0]?new Date(e[0]):null}function age(e){if(!e&&e.length<1||!e[0])return null;var t=new Date(e[0]),o=new Date,n=o.getFullYear()-t.getFullYear(),r=o.getMonth()-t.getMonth();return(r<0||0===r&&o.getDate()<t.getDate())&&(n-=n>0?1:0),n}function isContainerReadyCore(e){if(!e)return!1;for(var t=e.questions,o=0;o<t.length;o++)if(!t[o].validate(!1))return!1;return!0}function isContainerReady(e){if(!e&&e.length<1||!e[0]||!this.survey)return!1;var t=e[0],o=this.survey.getPageByName(t);if(o||(o=this.survey.getPanelByName(t)),!o){var n=this.survey.getQuestionByName(t);if(!n||!Array.isArray(n.panels))return!1;if(e.length>1)e[1]<n.panels.length&&(o=n.panels[e[1]]);else{for(var r=0;r<n.panels.length;r++)if(!isContainerReadyCore(n.panels[r]))return!1;return!0}}return isContainerReadyCore(o)}function isDisplayMode(){return this.survey&&this.survey.isDisplayMode}function currentDate(){return new Date}function today(e){var t=new Date;return r.settings.localization.useLocalTimeZone?t.setHours(0,0,0,0):t.setUTCHours(0,0,0,0),Array.isArray(e)&&1==e.length&&t.setDate(t.getDate()+e[0]),t}function getYear(e){if(1===e.length&&e[0])return new Date(e[0]).getFullYear()}function currentYear(){return new Date().getFullYear()}function diffDays(e){if(!Array.isArray(e)||2!==e.length||!e[0]||!e[1])return 0;var t=new Date(e[0]);return Math.ceil(Math.abs(new Date(e[1])-t)/864e5)}function dateFromFirstParameterOrToday(e){var t=today(void 0);return e&&e[0]&&(t=new Date(e[0])),t}function year(e){return dateFromFirstParameterOrToday(e).getFullYear()}function month(e){return dateFromFirstParameterOrToday(e).getMonth()+1}function day(e){return dateFromFirstParameterOrToday(e).getDate()}function weekday(e){return dateFromFirstParameterOrToday(e).getDay()}function getQuestionValueByContext(e,t){if(e&&t){for(var o=["row","panel","survey"],n=0;n<o.length;n++){var r=e[o[n]];if(r&&r.getQuestionByName){var i=r.getQuestionByName(t);if(i)return i}}return null}}function displayValue(e){var t=getQuestionValueByContext(this,e[0]);return t?t.displayValue:""}function propertyValue(e){if(2===e.length&&e[0]&&e[1]){var t=getQuestionValueByContext(this,e[0]);return t?t[e[1]]:void 0}}s.Instance.register("sum",sum),s.Instance.register("min",min),s.Instance.register("max",max),s.Instance.register("count",count),s.Instance.register("avg",avg),s.Instance.register("sumInArray",sumInArray),s.Instance.register("minInArray",minInArray),s.Instance.register("maxInArray",maxInArray),s.Instance.register("countInArray",countInArray),s.Instance.register("avgInArray",avgInArray),s.Instance.register("iif",iif),s.Instance.register("getDate",getDate),s.Instance.register("age",age),s.Instance.register("isContainerReady",isContainerReady),s.Instance.register("isDisplayMode",isDisplayMode),s.Instance.register("currentDate",currentDate),s.Instance.register("today",today),s.Instance.register("getYear",getYear),s.Instance.register("currentYear",currentYear),s.Instance.register("diffDays",diffDays),s.Instance.register("year",year),s.Instance.register("month",month),s.Instance.register("day",day),s.Instance.register("weekday",weekday),s.Instance.register("displayValue",displayValue),s.Instance.register("propertyValue",propertyValue)},"./src/header.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"CoverCell",function(){return u}),o.d(t,"Cover",function(){return c});var n,r=o(/*! ./base */"./src/base.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),a=o(/*! ./utils/utils */"./src/utils/utils.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},u=function(){function CoverCell(e,t,o){this.cover=e,this.positionX=t,this.positionY=o}return CoverCell.prototype.calcRow=function(e){return"top"===e?1:"middle"===e?2:3},CoverCell.prototype.calcColumn=function(e){return"left"===e?1:"center"===e?2:3},CoverCell.prototype.calcAlignItems=function(e){return"left"===e?"flex-start":"center"===e?"center":"flex-end"},CoverCell.prototype.calcAlignText=function(e){return"left"===e?"start":"center"===e?"center":"end"},CoverCell.prototype.calcJustifyContent=function(e){return"top"===e?"flex-start":"middle"===e?"center":"flex-end"},Object.defineProperty(CoverCell.prototype,"survey",{get:function(){return this.cover.survey},enumerable:!1,configurable:!0}),Object.defineProperty(CoverCell.prototype,"css",{get:function(){return CoverCell.CLASSNAME+" "+CoverCell.CLASSNAME+"--"+this.positionX+" "+CoverCell.CLASSNAME+"--"+this.positionY},enumerable:!1,configurable:!0}),Object.defineProperty(CoverCell.prototype,"style",{get:function(){var e={};return e.gridColumn=this.calcColumn(this.positionX),e.gridRow=this.calcRow(this.positionY),e},enumerable:!1,configurable:!0}),Object.defineProperty(CoverCell.prototype,"contentStyle",{get:function(){var e={};return e.textAlign=this.calcAlignText(this.positionX),e.alignItems=this.calcAlignItems(this.positionX),e.justifyContent=this.calcJustifyContent(this.positionY),e},enumerable:!1,configurable:!0}),Object.defineProperty(CoverCell.prototype,"showLogo",{get:function(){return this.survey.hasLogo&&this.positionX===this.cover.logoPositionX&&this.positionY===this.cover.logoPositionY},enumerable:!1,configurable:!0}),Object.defineProperty(CoverCell.prototype,"showTitle",{get:function(){return this.survey.hasTitle&&this.positionX===this.cover.titlePositionX&&this.positionY===this.cover.titlePositionY},enumerable:!1,configurable:!0}),Object.defineProperty(CoverCell.prototype,"showDescription",{get:function(){return this.survey.renderedHasDescription&&this.positionX===this.cover.descriptionPositionX&&this.positionY===this.cover.descriptionPositionY},enumerable:!1,configurable:!0}),Object.defineProperty(CoverCell.prototype,"textAreaWidth",{get:function(){return this.cover.textAreaWidth?""+this.cover.textAreaWidth+"px":""},enumerable:!1,configurable:!0}),CoverCell.CLASSNAME="sv-header__cell",CoverCell}(),c=function(e){function Cover(){var t=e.call(this)||this;return t.cells=[],t.renderBackgroundImage=Object(a.wrapUrlForBackgroundImage)(t.backgroundImage),["top","middle","bottom"].forEach(function(e){return["left","center","right"].forEach(function(o){return t.cells.push(new u(t,o,e))})}),t.updateHeaderClasses(),t.updateContentClasses(),t.updateBackgroundImageClasses(),t}return l(Cover,e),Cover.prototype.calcBackgroundSize=function(e){return"fill"===e?"100% 100%":"tile"===e?"auto":e},Cover.prototype.updateHeaderClasses=function(){this.headerClasses=new s.CssClassBuilder().append("sv-header").append("sv-header__without-background","trasparent"===this.backgroundColor&&!this.backgroundImage).append("sv-header__overlap",this.overlapEnabled).toString()},Cover.prototype.updateContentClasses=function(){var e=!!this.survey&&this.survey.calculateWidthMode();this.maxWidth="survey"===this.inheritWidthFrom&&!!e&&"static"===e&&this.survey.renderedWidth,this.contentClasses=new s.CssClassBuilder().append("sv-header__content").append("sv-header__content--static","survey"===this.inheritWidthFrom&&!!e&&"static"===e).append("sv-header__content--responsive","container"===this.inheritWidthFrom||!!e&&"responsive"===e).toString()},Cover.prototype.updateBackgroundImageClasses=function(){this.backgroundImageClasses=new s.CssClassBuilder().append("sv-header__background-image").append("sv-header__background-image--contain","contain"===this.backgroundImageFit).append("sv-header__background-image--tile","tile"===this.backgroundImageFit).toString()},Cover.prototype.fromTheme=function(t){e.prototype.fromJSON.call(this,t.header),t.cssVariables&&(this.backgroundColor=t.cssVariables["--sjs-header-backcolor"])},Cover.prototype.getType=function(){return"cover"},Object.defineProperty(Cover.prototype,"renderedHeight",{get:function(){return this.height&&(this.survey&&!this.survey.isMobile||!this.survey)?Math.max(this.height,this.actualHeight+40)+"px":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(Cover.prototype,"renderedtextAreaWidth",{get:function(){return this.textAreaWidth?this.textAreaWidth+"px":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(Cover.prototype,"survey",{get:function(){return this._survey},set:function(e){var t=this;this._survey!==e&&(this._survey=e,e&&(this.updateContentClasses(),this._survey.onPropertyChanged.add(function(e,o){("widthMode"==o.name||"width"==o.name)&&t.updateContentClasses()})))},enumerable:!1,configurable:!0}),Object.defineProperty(Cover.prototype,"backgroundImageStyle",{get:function(){return this.backgroundImage?{opacity:this.backgroundImageOpacity,backgroundImage:this.renderBackgroundImage,backgroundSize:this.calcBackgroundSize(this.backgroundImageFit)}:null},enumerable:!1,configurable:!0}),Cover.prototype.propertyValueChanged=function(t,o,n){e.prototype.propertyValueChanged.call(this,t,o,n),("backgroundColor"===t||"backgroundImage"===t||"overlapEnabled"===t)&&this.updateHeaderClasses(),"inheritWidthFrom"===t&&this.updateContentClasses(),"backgroundImageFit"===t&&this.updateBackgroundImageClasses()},Cover.prototype.calculateActualHeight=function(e,t,o){var n=["top","middle","bottom"],r=n.indexOf(this.logoPositionY),i=n.indexOf(this.titlePositionY),s=n.indexOf(this.descriptionPositionY),a=["left","center","right"],l=a.indexOf(this.logoPositionX),u=a.indexOf(this.titlePositionX),c=a.indexOf(this.descriptionPositionX),p=[[0,0,0],[0,0,0],[0,0,0]];return p[r][l]=e,p[i][u]+=t,p[s][c]+=o,p.reduce(function(e,t){return e+Math.max.apply(Math,t)},0)},Cover.prototype.processResponsiveness=function(e){if(this.survey&&this.survey.rootElement){var t=this.survey.rootElement.querySelectorAll(".sv-header__logo")[0],o=this.survey.rootElement.querySelectorAll(".sv-header__title")[0],n=this.survey.rootElement.querySelectorAll(".sv-header__description")[0],r=t?t.getBoundingClientRect().height:0,i=o?o.getBoundingClientRect().height:0,s=n?n.getBoundingClientRect().height:0;this.actualHeight=this.calculateActualHeight(r,i,s)}},__decorate([Object(i.property)({defaultValue:0})],Cover.prototype,"actualHeight",void 0),__decorate([Object(i.property)()],Cover.prototype,"height",void 0),__decorate([Object(i.property)()],Cover.prototype,"inheritWidthFrom",void 0),__decorate([Object(i.property)()],Cover.prototype,"textAreaWidth",void 0),__decorate([Object(i.property)()],Cover.prototype,"textGlowEnabled",void 0),__decorate([Object(i.property)()],Cover.prototype,"overlapEnabled",void 0),__decorate([Object(i.property)()],Cover.prototype,"backgroundColor",void 0),__decorate([Object(i.property)({onSet:function(e,t){t.renderBackgroundImage=Object(a.wrapUrlForBackgroundImage)(e)}})],Cover.prototype,"backgroundImage",void 0),__decorate([Object(i.property)()],Cover.prototype,"renderBackgroundImage",void 0),__decorate([Object(i.property)()],Cover.prototype,"backgroundImageFit",void 0),__decorate([Object(i.property)()],Cover.prototype,"backgroundImageOpacity",void 0),__decorate([Object(i.property)()],Cover.prototype,"logoPositionX",void 0),__decorate([Object(i.property)()],Cover.prototype,"logoPositionY",void 0),__decorate([Object(i.property)()],Cover.prototype,"titlePositionX",void 0),__decorate([Object(i.property)()],Cover.prototype,"titlePositionY",void 0),__decorate([Object(i.property)()],Cover.prototype,"descriptionPositionX",void 0),__decorate([Object(i.property)()],Cover.prototype,"descriptionPositionY",void 0),__decorate([Object(i.property)()],Cover.prototype,"logoStyle",void 0),__decorate([Object(i.property)()],Cover.prototype,"titleStyle",void 0),__decorate([Object(i.property)()],Cover.prototype,"descriptionStyle",void 0),__decorate([Object(i.property)()],Cover.prototype,"headerClasses",void 0),__decorate([Object(i.property)()],Cover.prototype,"contentClasses",void 0),__decorate([Object(i.property)()],Cover.prototype,"maxWidth",void 0),__decorate([Object(i.property)()],Cover.prototype,"backgroundImageClasses",void 0),Cover}(r.Base);i.Serializer.addClass("cover",[{name:"height:number",minValue:0,default:256},{name:"inheritWidthFrom",default:"survey"},{name:"textAreaWidth:number",minValue:0,default:512},{name:"textGlowEnabled:boolean"},{name:"overlapEnabled:boolean"},{name:"backgroundImage:file"},{name:"backgroundImageOpacity:number",minValue:0,maxValue:1,default:1},{name:"backgroundImageFit",default:"cover",choices:["cover","fill","contain"]},{name:"logoPositionX",default:"right"},{name:"logoPositionY",default:"top"},{name:"titlePositionX",default:"left"},{name:"titlePositionY",default:"bottom"},{name:"descriptionPositionX",default:"left"},{name:"descriptionPositionY",default:"bottom"}],function(){return new c})},"./src/helpers.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"Helpers",function(){return r});var n=o(/*! ./settings */"./src/settings.ts"),r=function(){function Helpers(){}return Helpers.isValueEmpty=function(e){if(Array.isArray(e)&&0===e.length)return!0;if(e&&Helpers.isValueObject(e)&&e.constructor===Object){for(var t in e)if(!Helpers.isValueEmpty(e[t]))return!1;return!0}return!e&&0!==e&&!1!==e},Helpers.isArrayContainsEqual=function(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var o=0;o<e.length;o++){for(var n=0;n<t.length&&!Helpers.isTwoValueEquals(e[o],t[n]);n++);if(n===t.length)return!1}return!0},Helpers.isArraysEqual=function(e,t,o,n,r){if(void 0===o&&(o=!1),!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;if(o){for(var i=[],s=[],a=0;a<e.length;a++)i.push(e[a]),s.push(t[a]);i.sort(),s.sort(),e=i,t=s}for(var a=0;a<e.length;a++)if(!Helpers.isTwoValueEquals(e[a],t[a],o,n,r))return!1;return!0},Helpers.compareStrings=function(e,t){var o=n.settings.comparator.normalizeTextCallback;if(e&&(e=o(e,"compare").trim()),t&&(t=o(t,"compare").trim()),!e&&!t)return 0;if(!e)return -1;if(!t)return 1;if(e===t)return 0;for(var r=-1,i=0;i<e.length&&i<t.length;i++){if(this.isCharDigit(e[i])&&this.isCharDigit(t[i])){r=i;break}if(e[i]!==t[i])break}if(r>-1){var s=this.getNumberFromStr(e,r),a=this.getNumberFromStr(t,r);if(!Number.isNaN(s)&&!Number.isNaN(a)&&s!==a)return s>a?1:-1}return e>t?1:-1},Helpers.isTwoValueEquals=function(e,t,o,r,i){if(void 0===o&&(o=!1),e===t||Array.isArray(e)&&0===e.length&&void 0===t||Array.isArray(t)&&0===t.length&&void 0===e||null==e&&""===t||null==t&&""===e)return!0;if(void 0===i&&(i=n.settings.comparator.trimStrings),void 0===r&&(r=n.settings.comparator.caseSensitive),"string"==typeof e&&"string"==typeof t){var s=n.settings.comparator.normalizeTextCallback;return e=s(e,"compare"),t=s(t,"compare"),i&&(e=e.trim(),t=t.trim()),r||(e=e.toLowerCase(),t=t.toLowerCase()),e===t}if(e instanceof Date&&t instanceof Date)return e.getTime()==t.getTime();if(Helpers.isConvertibleToNumber(e)&&Helpers.isConvertibleToNumber(t)&&parseInt(e)===parseInt(t)&&parseFloat(e)===parseFloat(t))return!0;if(!Helpers.isValueEmpty(e)&&Helpers.isValueEmpty(t)||Helpers.isValueEmpty(e)&&!Helpers.isValueEmpty(t))return!1;if((!0===e||!1===e)&&"string"==typeof t)return e.toString()===t.toLocaleLowerCase();if((!0===t||!1===t)&&"string"==typeof e)return t.toString()===e.toLocaleLowerCase();if(!Helpers.isValueObject(e)&&!Helpers.isValueObject(t))return e==t;if(!Helpers.isValueObject(e)||!Helpers.isValueObject(t))return!1;if(e.equals)return e.equals(t);if(e.toJSON&&t.toJSON&&e.getType&&t.getType)return!e.isDiposed&&!t.isDiposed&&e.getType()===t.getType()&&(!e.name||e.name===t.name)&&this.isTwoValueEquals(e.toJSON(),t.toJSON(),o,r,i);if(Array.isArray(e)&&Array.isArray(t))return Helpers.isArraysEqual(e,t,o,r,i);if(e.equalsTo&&t.equalsTo)return e.equalsTo(t);for(var a in e)if(e.hasOwnProperty(a)&&(!t.hasOwnProperty(a)||!this.isTwoValueEquals(e[a],t[a],o,r,i)))return!1;for(a in t)if(t.hasOwnProperty(a)&&!e.hasOwnProperty(a))return!1;return!0},Helpers.randomizeArray=function(e){for(var t=e.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[o],e[o]=n}return e},Helpers.getUnbindValue=function(e){if(Array.isArray(e)){for(var t=[],o=0;o<e.length;o++)t.push(Helpers.getUnbindValue(e[o]));return t}return e&&Helpers.isValueObject(e)&&!(e instanceof Date)?JSON.parse(JSON.stringify(e)):e},Helpers.createCopy=function(e){var t={};if(!e)return t;for(var o in e)t[o]=e[o];return t},Helpers.isConvertibleToNumber=function(e){return null!=e&&!Array.isArray(e)&&!isNaN(e)},Helpers.isValueObject=function(e,t){return e instanceof Object&&(!t||!Array.isArray(e))},Helpers.isNumber=function(e){return!isNaN(this.getNumber(e))},Helpers.getNumber=function(e){if("string"==typeof e&&e&&0==e.indexOf("0x")&&e.length>32)return NaN;var t=parseFloat(e=this.prepareStringToNumber(e));return isNaN(t)||!isFinite(e)?NaN:t},Helpers.prepareStringToNumber=function(e){if("string"!=typeof e||!e)return e;var t=e.indexOf(",");return t>-1&&0>e.indexOf(",",t+1)?e.replace(",","."):e},Helpers.getMaxLength=function(e,t){return e<0&&(e=t),e>0?e:null},Helpers.getRemainingCharacterCounterText=function(e,t){return t&&!(t<=0)&&n.settings.showMaxLengthIndicator?[e?e.length:"0",t].join("/"):""},Helpers.getNumberByIndex=function(e,t){if(e<0)return"";var o=1,n="",r=".",i=!0,s="A",a="";if(t){for(var l=(a=t).length-1,u=!1,c=0;c<a.length;c++)if(Helpers.isCharDigit(a[c])){u=!0;break}for(var checkLetter=function(){return u&&!Helpers.isCharDigit(a[l])||Helpers.isCharNotLetterAndDigit(a[l])};l>=0&&checkLetter();)l--;var p="";for(l<a.length-1&&(p=a.substring(l+1),a=a.substring(0,l+1)),l=a.length-1;l>=0&&!checkLetter()&&(l--,u););s=a.substring(l+1),n=a.substring(0,l+1),parseInt(s)?o=parseInt(s):1==s.length&&(i=!1),(p||n)&&(r=p)}if(i){for(var d=(e+o).toString();d.length<s.length;)d="0"+d;return n+d+r}return n+String.fromCharCode(s.charCodeAt(0)+e)+r},Helpers.isCharNotLetterAndDigit=function(e){return e.toUpperCase()==e.toLowerCase()&&!Helpers.isCharDigit(e)},Helpers.isCharDigit=function(e){return e>="0"&&e<="9"},Helpers.getNumberFromStr=function(e,t){if(!this.isCharDigit(e[t]))return NaN;for(var o="";t<e.length&&this.isCharDigit(e[t]);)o+=e[t],t++;return o?this.getNumber(o):NaN},Helpers.countDecimals=function(e){if(Helpers.isNumber(e)&&Math.floor(e)!==e){var t=e.toString().split(".");return t.length>1&&t[1].length||0}return 0},Helpers.correctAfterPlusMinis=function(e,t,o){var n=Helpers.countDecimals(e),r=Helpers.countDecimals(t);if(n>0||r>0){var i=Math.max(n,r);o=parseFloat(o.toFixed(i))}return o},Helpers.sumAnyValues=function(e,t){if(!Helpers.isNumber(e)||!Helpers.isNumber(t)){if(Array.isArray(e)&&Array.isArray(t))return[].concat(e).concat(t);if(Array.isArray(e)||Array.isArray(t)){var o=Array.isArray(e)?e:t,n=o===e?t:e;if("string"==typeof n){var r=o.join(", ");return o===e?r+n:n+r}if("number"==typeof n){for(var i=0,s=0;s<o.length;s++)"number"==typeof o[s]&&(i=Helpers.correctAfterPlusMinis(i,o[s],i+o[s]));return Helpers.correctAfterPlusMinis(i,n,i+n)}}return e+t}return"string"==typeof e||"string"==typeof t?e+t:Helpers.correctAfterPlusMinis(e,t,e+t)},Helpers.correctAfterMultiple=function(e,t,o){var n=Helpers.countDecimals(e)+Helpers.countDecimals(t);return n>0&&(o=parseFloat(o.toFixed(n))),o},Helpers.convertArrayValueToObject=function(e,t,o){void 0===o&&(o=void 0);var n=[];if(!e||!Array.isArray(e))return n;for(var r=0;r<e.length;r++){var i=void 0;Array.isArray(o)&&(i=Helpers.findObjByPropValue(o,t,e[r])),i||((i={})[t]=e[r]),n.push(i)}return n},Helpers.findObjByPropValue=function(e,t,o){for(var n=0;n<e.length;n++)if(Helpers.isTwoValueEquals(e[n][t],o))return e[n]},Helpers.convertArrayObjectToValue=function(e,t){var o=[];if(!e||!Array.isArray(e))return o;for(var n=0;n<e.length;n++){var r=e[n]?e[n][t]:void 0;Helpers.isValueEmpty(r)||o.push(r)}return o},Helpers.convertDateToString=function(e){var toStr=function(e){return e<10?"0"+e.toString():e.toString()};return e.getFullYear()+"-"+toStr(e.getMonth()+1)+"-"+toStr(e.getDate())},Helpers.convertDateTimeToString=function(e){var toStr=function(e){return e<10?"0"+e.toString():e.toString()};return this.convertDateToString(e)+" "+toStr(e.getHours())+":"+toStr(e.getMinutes())},Helpers.convertValToQuestionVal=function(e,t){return e instanceof Date?"datetime-local"===t?Helpers.convertDateTimeToString(e):Helpers.convertDateToString(e):e},Helpers}();String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,o){return void 0!==e[o]?e[o]:t})})},"./src/images sync \\.svg$":function(e,t,o){var n={"./ArrowDown_34x34.svg":"./src/images/ArrowDown_34x34.svg","./ArrowLeft.svg":"./src/images/ArrowLeft.svg","./ArrowRight.svg":"./src/images/ArrowRight.svg","./Arrow_downGREY_10x10.svg":"./src/images/Arrow_downGREY_10x10.svg","./ChangeCamera.svg":"./src/images/ChangeCamera.svg","./ChooseFile.svg":"./src/images/ChooseFile.svg","./Clear.svg":"./src/images/Clear.svg","./CloseCamera.svg":"./src/images/CloseCamera.svg","./DefaultFile.svg":"./src/images/DefaultFile.svg","./Delete.svg":"./src/images/Delete.svg","./Down_34x34.svg":"./src/images/Down_34x34.svg","./Left.svg":"./src/images/Left.svg","./ModernBooleanCheckChecked.svg":"./src/images/ModernBooleanCheckChecked.svg","./ModernBooleanCheckInd.svg":"./src/images/ModernBooleanCheckInd.svg","./ModernBooleanCheckUnchecked.svg":"./src/images/ModernBooleanCheckUnchecked.svg","./ModernCheck.svg":"./src/images/ModernCheck.svg","./ModernRadio.svg":"./src/images/ModernRadio.svg","./More.svg":"./src/images/More.svg","./NavMenu_24x24.svg":"./src/images/NavMenu_24x24.svg","./ProgressButton.svg":"./src/images/ProgressButton.svg","./ProgressButtonV2.svg":"./src/images/ProgressButtonV2.svg","./RemoveFile.svg":"./src/images/RemoveFile.svg","./Right.svg":"./src/images/Right.svg","./SearchClear.svg":"./src/images/SearchClear.svg","./ShowCamera.svg":"./src/images/ShowCamera.svg","./TakePicture.svg":"./src/images/TakePicture.svg","./TakePicture_24x24.svg":"./src/images/TakePicture_24x24.svg","./TimerCircle.svg":"./src/images/TimerCircle.svg","./V2Check.svg":"./src/images/V2Check.svg","./V2Check_24x24.svg":"./src/images/V2Check_24x24.svg","./V2DragElement_16x16.svg":"./src/images/V2DragElement_16x16.svg","./chevron.svg":"./src/images/chevron.svg","./clear_16x16.svg":"./src/images/clear_16x16.svg","./collapseDetail.svg":"./src/images/collapseDetail.svg","./drag-n-drop.svg":"./src/images/drag-n-drop.svg","./expandDetail.svg":"./src/images/expandDetail.svg","./loading.svg":"./src/images/loading.svg","./no-image.svg":"./src/images/no-image.svg","./ranking-arrows.svg":"./src/images/ranking-arrows.svg","./ranking-dash.svg":"./src/images/ranking-dash.svg","./rating-star-2.svg":"./src/images/rating-star-2.svg","./rating-star-small-2.svg":"./src/images/rating-star-small-2.svg","./rating-star-small.svg":"./src/images/rating-star-small.svg","./rating-star.svg":"./src/images/rating-star.svg","./search.svg":"./src/images/search.svg"};function webpackContext(e){return o(webpackContextResolve(e))}function webpackContextResolve(e){if(!o.o(n,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}webpackContext.keys=function(){return Object.keys(n)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id="./src/images sync \\.svg$"},"./src/images/ArrowDown_34x34.svg":function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 34 34" xml:space="preserve"><polygon class="st0" points="12,16 14,14 17,17 20,14 22,16 17,21 "></polygon></svg>'},"./src/images/ArrowLeft.svg":function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15 8.99999H4.39998L8.69998 13.3L7.29998 14.7L0.599976 7.99999L7.29998 1.29999L8.69998 2.69999L4.39998 6.99999H15V8.99999Z"></path></svg>'},"./src/images/ArrowRight.svg":function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M1 6.99999H11.6L7.3 2.69999L8.7 1.29999L15.4 7.99999L8.7 14.7L7.3 13.3L11.6 8.99999H1V6.99999Z"></path></svg>'},"./src/images/Arrow_downGREY_10x10.svg":function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 10 10" xml:space="preserve"><polygon class="st0" points="2,2 0,4 5,9 10,4 8,2 5,5 "></polygon></svg>'},"./src/images/ChangeCamera.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23 12.0037C23 14.2445 21.7794 16.3052 19.5684 17.8257C19.3984 17.9458 19.1983 18.0058 19.0082 18.0058C18.688 18.0058 18.3779 17.8557 18.1778 17.5756C17.8677 17.1155 17.9777 16.4953 18.4379 16.1852C20.0887 15.0448 21.0091 13.5643 21.0091 12.0138C21.0091 8.70262 16.9673 6.01171 12.005 6.01171C11.4948 6.01171 10.9945 6.04172 10.5043 6.09173L11.7149 7.30215C12.105 7.69228 12.105 8.32249 11.7149 8.71263C11.5148 8.9127 11.2647 9.00273 11.0045 9.00273C10.7444 9.00273 10.4943 8.90269 10.2942 8.71263L6.58254 5.00136L10.2842 1.2901C10.6744 0.899964 11.3047 0.899964 11.6949 1.2901C12.085 1.68023 12.085 2.31045 11.6949 2.70058L10.3042 4.09105C10.8545 4.03103 11.4147 4.00102 11.985 4.00102C18.0578 4.00102 22.99 7.59225 22.99 12.0037H23ZM12.2851 15.2949C11.895 15.685 11.895 16.3152 12.2851 16.7054L13.4957 17.9158C13.0055 17.9758 12.4952 17.9958 11.995 17.9958C7.03274 17.9958 2.99091 15.3049 2.99091 11.9937C2.99091 10.4332 3.90132 8.95271 5.56207 7.82232C6.02228 7.51222 6.13233 6.89201 5.82219 6.43185C5.51205 5.97169 4.89177 5.86166 4.43156 6.17176C2.22055 7.69228 1 9.76299 1 11.9937C1 16.4052 5.93224 19.9965 12.005 19.9965C12.5753 19.9965 13.1355 19.9665 13.6858 19.9064L12.2951 21.2969C11.905 21.6871 11.905 22.3173 12.2951 22.7074C12.4952 22.9075 12.7453 22.9975 13.0055 22.9975C13.2656 22.9975 13.5157 22.8975 13.7158 22.7074L17.4275 18.9961L13.7158 15.2849C13.3256 14.8947 12.6953 14.8947 12.3051 15.2849L12.2851 15.2949Z"></path></svg>'},"./src/images/ChooseFile.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22 9V7C22 5.9 21.1 5 20 5H12L10 3H4C2.9 3 2 3.9 2 5V9V10V21H22L24 9H22ZM4 5H9.2L10.6 6.4L11.2 7H12H20V9H4V5ZM20.3 19H4V11H21.6L20.3 19Z"></path></svg>'},"./src/images/Clear.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22.6 8.6L16.4 2.4C16 2 15.5 1.8 15 1.8C14.5 1.8 14 2 13.6 2.4L1.4 14.6C0.600003 15.4 0.600003 16.6 1.4 17.4L6 22H12L22.6 11.4C23.3 10.6 23.3 9.3 22.6 8.6ZM11.1 20H6.8L2.8 16L6.2 12.6L12.4 18.8L11.1 20ZM13.8 17.4L7.6 11.2L15 3.8L21.2 10L13.8 17.4ZM16 20H23V22H14L16 20Z"></path></svg>'},"./src/images/CloseCamera.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.41 12L20.7 4.71C21.09 4.32 21.09 3.69 20.7 3.3C20.31 2.91 19.68 2.91 19.29 3.3L12 10.59L4.71 3.29C4.32 2.9 3.68 2.9 3.29 3.29C2.9 3.68 2.9 4.32 3.29 4.71L10.58 12L3.29 19.29C2.9 19.68 2.9 20.31 3.29 20.7C3.49 20.9 3.74 20.99 4 20.99C4.26 20.99 4.51 20.89 4.71 20.7L12 13.41L19.29 20.7C19.49 20.9 19.74 20.99 20 20.99C20.26 20.99 20.51 20.89 20.71 20.7C21.1 20.31 21.1 19.68 20.71 19.29L13.42 12H13.41Z"></path></svg>'},"./src/images/DefaultFile.svg":function(e,t){e.exports='<svg viewBox="0 0 56 68" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_9011_41219)"><path d="M54.83 10.83L45.17 1.17C44.7982 0.798664 44.357 0.504208 43.8714 0.303455C43.3858 0.102703 42.8654 -0.000411943 42.34 1.2368e-06H6C4.4087 1.2368e-06 2.88257 0.632142 1.75735 1.75736C0.632136 2.88258 0 4.4087 0 6V62C0 63.5913 0.632136 65.1174 1.75735 66.2426C2.88257 67.3679 4.4087 68 6 68H50C51.5913 68 53.1174 67.3679 54.2426 66.2426C55.3679 65.1174 56 63.5913 56 62V13.66C56.0004 13.1346 55.8973 12.6142 55.6965 12.1286C55.4958 11.643 55.2013 11.2018 54.83 10.83ZM44 2.83L53.17 12H48C46.9391 12 45.9217 11.5786 45.1716 10.8284C44.4214 10.0783 44 9.06087 44 8V2.83ZM54 62C54 63.0609 53.5786 64.0783 52.8284 64.8284C52.0783 65.5786 51.0609 66 50 66H6C4.93913 66 3.92172 65.5786 3.17157 64.8284C2.42142 64.0783 2 63.0609 2 62V6C2 4.93914 2.42142 3.92172 3.17157 3.17157C3.92172 2.42143 4.93913 2 6 2H42V8C42 9.5913 42.6321 11.1174 43.7574 12.2426C44.8826 13.3679 46.4087 14 48 14H54V62ZM14 24H42V26H14V24ZM14 30H42V32H14V30ZM14 36H42V38H14V36ZM14 42H42V44H14V42Z" fill="#909090"></path></g><defs><clipPath id="clip0_9011_41219"><rect width="56" height="68" fill="white"></rect></clipPath></defs></svg>'},"./src/images/Delete.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22 4H20H16V2C16 0.9 15.1 0 14 0H10C8.9 0 8 0.9 8 2V4H4H2V6H4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V6H22V4ZM10 2H14V4H10V2ZM18 20H6V6H8H16H18V20ZM14 8H16V18H14V8ZM11 8H13V18H11V8ZM8 8H10V18H8V8Z"></path></svg>'},"./src/images/Down_34x34.svg":function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 34 34" xml:space="preserve"><g><path class="st0" d="M33,34H0V0h33c0.6,0,1,0.4,1,1v32C34,33.6,33.6,34,33,34z"></path><polygon class="st1" points="12,16 14,14 17,17 20,14 22,16 17,21 "></polygon></g></svg>'},"./src/images/Left.svg":function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" xml:space="preserve"><polygon points="11,12 9,14 3,8 9,2 11,4 7,8 "></polygon></svg>'},"./src/images/ModernBooleanCheckChecked.svg":function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><polygon points="19,10 14,10 14,5 10,5 10,10 5,10 5,14 10,14 10,19 14,19 14,14 19,14 "></polygon></svg>'},"./src/images/ModernBooleanCheckInd.svg":function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><path d="M22,0H2C0.9,0,0,0.9,0,2v20c0,1.1,0.9,2,2,2h20c1.1,0,2-0.9,2-2V2C24,0.9,23.1,0,22,0z M21,18L6,3h15V18z M3,6l15,15H3V6z"></path></svg>'},"./src/images/ModernBooleanCheckUnchecked.svg":function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><rect x="5" y="10" width="14" height="4"></rect></svg>'},"./src/images/ModernCheck.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24"><path d="M5,13l2-2l3,3l7-7l2,2l-9,9L5,13z"></path></svg>'},"./src/images/ModernRadio.svg":function(e,t){e.exports='<svg viewBox="-12 -12 24 24"><circle r="6" cx="0" cy="0"></circle></svg>'},"./src/images/More.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 12C6 13.1 5.1 14 4 14C2.9 14 2 13.1 2 12C2 10.9 2.9 10 4 10C5.1 10 6 10.9 6 12ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10ZM20 10C18.9 10 18 10.9 18 12C18 13.1 18.9 14 20 14C21.1 14 22 13.1 22 12C22 10.9 21.1 10 20 10Z"></path></svg>'},"./src/images/NavMenu_24x24.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 7H2V5H16V7ZM2 11V13H22V11H2ZM2 19H10V17H2V19Z" fill="black" fill-opacity="0.45"></path></svg>'},"./src/images/ProgressButton.svg":function(e,t){e.exports='<svg viewBox="0 0 10 10"><polygon points="2,2 0,4 5,9 10,4 8,2 5,5 "></polygon></svg>'},"./src/images/ProgressButtonV2.svg":function(e,t){e.exports='<svg viewBox="0 0 16 16"><path d="M15 8.99999H4.39998L8.69998 13.3L7.29998 14.7L0.599976 7.99999L7.29998 1.29999L8.69998 2.69999L4.39998 6.99999H15V8.99999Z"></path></svg>'},"./src/images/RemoveFile.svg":function(e,t){e.exports='<svg viewBox="0 0 16 16"><path d="M8,2C4.7,2,2,4.7,2,8s2.7,6,6,6s6-2.7,6-6S11.3,2,8,2z M11,10l-1,1L8,9l-2,2l-1-1l2-2L5,6l1-1l2,2l2-2l1,1L9,8 L11,10z"></path></svg>'},"./src/images/Right.svg":function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" xml:space="preserve"><polygon points="5,4 7,2 13,8 7,14 5,12 9,8 "></polygon></svg>'},"./src/images/SearchClear.svg":function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.35 3.34999L12.65 2.64999L8.05002 7.24999L3.35002 2.64999L2.65002 3.34999L7.25002 8.04999L2.65002 12.65L3.35002 13.35L8.05002 8.74999L12.65 13.35L13.35 12.65L8.75002 8.04999L13.35 3.34999Z"></path></svg>'},"./src/images/ShowCamera.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.01 4H18.4C18.2 4 18.01 3.9 17.9 3.73L16.97 2.34C16.41 1.5 15.48 1 14.47 1H9.54C8.53 1 7.6 1.5 7.04 2.34L6.11 3.73C6 3.9 5.81 4 5.61 4H4C2.35 4 1 5.35 1 7V19C1 20.65 2.35 22 4 22H20C21.65 22 23 20.65 23 19V7C23 5.35 21.65 4 20 4H20.01ZM21.01 19C21.01 19.55 20.56 20 20.01 20H4.01C3.46 20 3.01 19.55 3.01 19V7C3.01 6.45 3.46 6 4.01 6H5.62C6.49 6 7.3 5.56 7.79 4.84L8.72 3.45C8.91 3.17 9.22 3 9.55 3H14.48C14.81 3 15.13 3.17 15.31 3.45L16.24 4.84C16.72 5.56 17.54 6 18.41 6H20.02C20.57 6 21.02 6.45 21.02 7V19H21.01ZM12.01 6C8.7 6 6.01 8.69 6.01 12C6.01 15.31 8.7 18 12.01 18C15.32 18 18.01 15.31 18.01 12C18.01 8.69 15.32 6 12.01 6ZM12.01 16C9.8 16 8.01 14.21 8.01 12C8.01 9.79 9.8 8 12.01 8C14.22 8 16.01 9.79 16.01 12C16.01 14.21 14.22 16 12.01 16ZM13.01 10C13.01 10.55 12.56 11 12.01 11C11.46 11 11.01 11.45 11.01 12C11.01 12.55 10.56 13 10.01 13C9.46 13 9.01 12.55 9.01 12C9.01 10.35 10.36 9 12.01 9C12.56 9 13.01 9.45 13.01 10Z" fill="black" fill-opacity="0.45"></path></svg>'},"./src/images/TakePicture.svg":function(e,t){e.exports='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M27 6H23.8C23.34 6 22.92 5.77 22.66 5.39L22.25 4.78C21.51 3.66 20.26 3 18.92 3H13.06C11.72 3 10.48 3.67 9.73 4.78L9.32 5.39C9.07 5.77 8.64 6 8.18 6H4.98C2.79 6 1 7.79 1 10V24C1 26.21 2.79 28 5 28H27C29.21 28 31 26.21 31 24V10C31 7.79 29.21 6 27 6ZM29 24C29 25.1 28.1 26 27 26H5C3.9 26 3 25.1 3 24V10C3 8.9 3.9 8 5 8H8.2C9.33 8 10.38 7.44 11 6.5L11.41 5.89C11.78 5.33 12.41 5 13.07 5H18.93C19.6 5 20.22 5.33 20.59 5.89L21 6.5C21.62 7.44 22.68 8 23.8 8H27C28.1 8 29 8.9 29 10V24ZM16 9C12.13 9 9 12.13 9 16C9 19.87 12.13 23 16 23C19.87 23 23 19.87 23 16C23 12.13 19.87 9 16 9ZM16 21C13.24 21 11 18.76 11 16C11 13.24 13.24 11 16 11C18.76 11 21 13.24 21 16C21 18.76 18.76 21 16 21ZM17 13C17 13.55 16.55 14 16 14C14.9 14 14 14.9 14 16C14 16.55 13.55 17 13 17C12.45 17 12 16.55 12 16C12 13.79 13.79 12 16 12C16.55 12 17 12.45 17 13Z"></path></svg>'},"./src/images/TakePicture_24x24.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.01 4H18.4C18.2 4 18.01 3.9 17.9 3.73L16.97 2.34C16.41 1.5 15.48 1 14.47 1H9.54C8.53 1 7.6 1.5 7.04 2.34L6.11 3.73C6 3.9 5.81 4 5.61 4H4C2.35 4 1 5.35 1 7V19C1 20.65 2.35 22 4 22H20C21.65 22 23 20.65 23 19V7C23 5.35 21.65 4 20 4H20.01ZM21.01 19C21.01 19.55 20.56 20 20.01 20H4.01C3.46 20 3.01 19.55 3.01 19V7C3.01 6.45 3.46 6 4.01 6H5.62C6.49 6 7.3 5.56 7.79 4.84L8.72 3.45C8.91 3.17 9.22 3 9.55 3H14.48C14.81 3 15.13 3.17 15.31 3.45L16.24 4.84C16.72 5.56 17.54 6 18.41 6H20.02C20.57 6 21.02 6.45 21.02 7V19H21.01ZM12.01 6C8.7 6 6.01 8.69 6.01 12C6.01 15.31 8.7 18 12.01 18C15.32 18 18.01 15.31 18.01 12C18.01 8.69 15.32 6 12.01 6ZM12.01 16C9.8 16 8.01 14.21 8.01 12C8.01 9.79 9.8 8 12.01 8C14.22 8 16.01 9.79 16.01 12C16.01 14.21 14.22 16 12.01 16ZM13.01 10C13.01 10.55 12.56 11 12.01 11C11.46 11 11.01 11.45 11.01 12C11.01 12.55 10.56 13 10.01 13C9.46 13 9.01 12.55 9.01 12C9.01 10.35 10.36 9 12.01 9C12.56 9 13.01 9.45 13.01 10Z"></path></svg>'},"./src/images/TimerCircle.svg":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 160 160"><circle cx="80" cy="80" r="70" style="stroke: var(--sd-timer-stroke-background-color); stroke-width: var(--sd-timer-stroke-background-width)" stroke-dasharray="none" stroke-dashoffset="none"></circle><circle cx="80" cy="80" r="70"></circle></svg>'},"./src/images/V2Check.svg":function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.00001 15.8L2.60001 10.4L4.00001 9L8.00001 13L16 5L17.4 6.4L8.00001 15.8Z"></path></svg>'},"./src/images/V2Check_24x24.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9 20.1L1 12L3.1 9.9L9 15.9L20.9 4L23 6.1L9 20.1Z"></path></svg>'},"./src/images/V2DragElement_16x16.svg":function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 4C2 3.73478 2.10536 3.48043 2.29289 3.29289C2.48043 3.10536 2.73478 3 3 3H13C13.2652 3 13.5196 3.10536 13.7071 3.29289C13.8946 3.48043 14 3.73478 14 4C14 4.26522 13.8946 4.51957 13.7071 4.70711C13.5196 4.89464 13.2652 5 13 5H3C2.73478 5 2.48043 4.89464 2.29289 4.70711C2.10536 4.51957 2 4.26522 2 4ZM13 7H3C2.73478 7 2.48043 7.10536 2.29289 7.29289C2.10536 7.48043 2 7.73478 2 8C2 8.26522 2.10536 8.51957 2.29289 8.70711C2.48043 8.89464 2.73478 9 3 9H13C13.2652 9 13.5196 8.89464 13.7071 8.70711C13.8946 8.51957 14 8.26522 14 8C14 7.73478 13.8946 7.48043 13.7071 7.29289C13.5196 7.10536 13.2652 7 13 7ZM13 11H3C2.73478 11 2.48043 11.1054 2.29289 11.2929C2.10536 11.4804 2 11.7348 2 12C2 12.2652 2.10536 12.5196 2.29289 12.7071C2.48043 12.8946 2.73478 13 3 13H13C13.2652 13 13.5196 12.8946 13.7071 12.7071C13.8946 12.5196 14 12.2652 14 12C14 11.7348 13.8946 11.4804 13.7071 11.2929C13.5196 11.1054 13.2652 11 13 11Z"></path></svg>'},"./src/images/chevron.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 15L17 10H7L12 15Z"></path></svg>'},"./src/images/clear_16x16.svg":function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.35 3.34999L12.65 2.64999L8.05002 7.24999L3.35002 2.64999L2.65002 3.34999L7.25002 8.04999L2.65002 12.65L3.35002 13.35L8.05002 8.74999L12.65 13.35L13.35 12.65L8.75002 8.04999L13.35 3.34999Z"></path></svg>'},"./src/images/collapseDetail.svg":function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13 7H3V9H13V7Z"></path></svg>'},"./src/images/drag-n-drop.svg":function(e,t){e.exports='<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M6 2C6 0.9 6.9 0 8 0C9.1 0 10 0.9 10 2C10 3.1 9.1 4 8 4C6.9 4 6 3.1 6 2ZM2 0C0.9 0 0 0.9 0 2C0 3.1 0.9 4 2 4C3.1 4 4 3.1 4 2C4 0.9 3.1 0 2 0ZM8 6C6.9 6 6 6.9 6 8C6 9.1 6.9 10 8 10C9.1 10 10 9.1 10 8C10 6.9 9.1 6 8 6ZM2 6C0.9 6 0 6.9 0 8C0 9.1 0.9 10 2 10C3.1 10 4 9.1 4 8C4 6.9 3.1 6 2 6ZM8 12C6.9 12 6 12.9 6 14C6 15.1 6.9 16 8 16C9.1 16 10 15.1 10 14C10 12.9 9.1 12 8 12ZM2 12C0.9 12 0 12.9 0 14C0 15.1 0.9 16 2 16C3.1 16 4 15.1 4 14C4 12.9 3.1 12 2 12Z"></path></svg>'},"./src/images/expandDetail.svg":function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13 7H9V3H7V7H3V9H7V13H9V9H13V7Z"></path></svg>'},"./src/images/loading.svg":function(e,t){e.exports='<svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_885_24957)"><path opacity="0.1" d="M24 40C15.18 40 8 32.82 8 24C8 15.18 15.18 8 24 8C32.82 8 40 15.18 40 24C40 32.82 32.82 40 24 40ZM24 12C17.38 12 12 17.38 12 24C12 30.62 17.38 36 24 36C30.62 36 36 30.62 36 24C36 17.38 30.62 12 24 12Z" fill="black" fill-opacity="0.91"></path><path d="M10 26C8.9 26 8 25.1 8 24C8 15.18 15.18 8 24 8C25.1 8 26 8.9 26 10C26 11.1 25.1 12 24 12C17.38 12 12 17.38 12 24C12 25.1 11.1 26 10 26Z" fill="#19B394"></path></g><defs><clipPath id="clip0_885_24957"><rect width="32" height="32" fill="white" transform="translate(8 8)"></rect></clipPath></defs></svg>'},"./src/images/no-image.svg":function(e,t){e.exports='<svg viewBox="0 0 48 48"><g opacity="0.5"><path d="M14 17.01C14 16.4167 14.1759 15.8366 14.5056 15.3433C14.8352 14.8499 15.3038 14.4654 15.8519 14.2384C16.4001 14.0113 17.0033 13.9519 17.5853 14.0676C18.1672 14.1834 18.7018 14.4691 19.1213 14.8887C19.5409 15.3082 19.8266 15.8428 19.9424 16.4247C20.0581 17.0067 19.9987 17.6099 19.7716 18.1581C19.5446 18.7062 19.1601 19.1748 18.6667 19.5044C18.1734 19.8341 17.5933 20.01 17 20.01C16.2044 20.01 15.4413 19.6939 14.8787 19.1313C14.3161 18.5687 14 17.8056 14 17.01ZM27.09 24.14L20 36.01H36L27.09 24.14ZM36.72 8.14L35.57 10.01H36C36.5304 10.01 37.0391 10.2207 37.4142 10.5958C37.7893 10.9709 38 11.4796 38 12.01V36.01C38 36.5404 37.7893 37.0491 37.4142 37.4242C37.0391 37.7993 36.5304 38.01 36 38.01H18.77L17.57 40.01H36C37.0609 40.01 38.0783 39.5886 38.8284 38.8384C39.5786 38.0883 40 37.0709 40 36.01V12.01C39.9966 11.0765 39.6668 10.1737 39.0678 9.45778C38.4688 8.74188 37.6382 8.25802 36.72 8.09V8.14ZM36.86 4.5L12.86 44.5L11.14 43.5L13.23 40.01H12C10.9391 40.01 9.92172 39.5886 9.17157 38.8384C8.42143 38.0883 8 37.0709 8 36.01V12.01C8 10.9491 8.42143 9.93172 9.17157 9.18157C9.92172 8.43143 10.9391 8.01 12 8.01H32.43L35.14 3.5L36.86 4.5ZM14.43 38.01L15.63 36.01H12L19 27.01L20.56 27.8L31.23 10.01H12C11.4696 10.01 10.9609 10.2207 10.5858 10.5958C10.2107 10.9709 10 11.4796 10 12.01V36.01C10 36.5404 10.2107 37.0491 10.5858 37.4242C10.9609 37.7993 11.4696 38.01 12 38.01H14.43Z"></path></g></svg>'},"./src/images/ranking-arrows.svg":function(e,t){e.exports='<svg viewBox="0 0 10 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 5L5 0L0 5H4V9H6V5H10Z"></path><path d="M6 19V15H4V19H0L5 24L10 19H6Z"></path></svg>'},"./src/images/ranking-dash.svg":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13 7H3V9H13V7Z"></path></svg>'},"./src/images/rating-star-2.svg":function(e,t){e.exports='<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g><path d="M24 39.5057L11.7226 45.9839C10.4095 46.6739 8.87606 45.5622 9.12525 44.096L11.4734 30.373L1.54411 20.6556C0.480254 19.6207 1.06489 17.8095 2.53128 17.5986L16.2559 15.5957L22.3994 3.10891C23.0512 1.77685 24.9488 1.77685 25.6102 3.10891L31.7441 15.5957L45.4687 17.5986C46.9351 17.8095 47.5197 19.6207 46.4559 20.6556L36.5266 30.373L38.8748 44.096C39.1239 45.5622 37.5905 46.6835 36.2774 45.9839L24 39.5057Z" fill="none" stroke-width="2"></path><path d="M24.4663 34.6154L24 34.3695L23.5336 34.6154L14.4788 39.389L16.2156 29.2691L16.3044 28.7517L15.9289 28.3848L8.57358 21.1966L18.7249 19.7094L19.245 19.6332L19.4772 19.1616L24 9.97413L28.5228 19.1616L28.755 19.6332L29.275 19.7094L39.4264 21.1966L32.0711 28.3848L31.6956 28.7517L31.7844 29.2691L33.5211 39.389L24.4663 34.6154Z" stroke-width="2"></path></g></svg>'},"./src/images/rating-star-small-2.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 19.3373L6.13001 22.4373C5.50001 22.7673 4.77001 22.2373 4.89001 21.5373L6.01001 14.9773L1.26001 10.3273C0.750007 9.83728 1.03001 8.96728 1.73001 8.86728L8.29001 7.90728L11.23 1.93728C11.54 1.29728 12.45 1.29728 12.77 1.93728L15.7 7.90728L22.26 8.86728C22.96 8.96728 23.24 9.83728 22.73 10.3273L17.98 14.9773L19.1 21.5373C19.22 22.2373 18.49 22.7773 17.86 22.4373L11.99 19.3373H12Z" fill="none" stroke-width="2"></path><path d="M12 15.9472L8.58001 17.7572L9.23001 13.9272L6.45001 11.2072L10.29 10.6472L12 7.17725L13.71 10.6472L17.55 11.2072L14.77 13.9272L15.42 17.7572L12 15.9472Z"></path></svg>'},"./src/images/rating-star-small.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g><path d="M12 19.3373L6.13001 22.4373C5.50001 22.7673 4.77001 22.2373 4.89001 21.5373L6.01001 14.9773L1.26001 10.3273C0.750007 9.83728 1.03001 8.96728 1.73001 8.86728L8.29001 7.90728L11.23 1.93728C11.54 1.29728 12.45 1.29728 12.77 1.93728L15.7 7.90728L22.26 8.86728C22.96 8.96728 23.24 9.83728 22.73 10.3273L17.98 14.9773L19.1 21.5373C19.22 22.2373 18.49 22.7773 17.86 22.4373L11.99 19.3373H12Z" stroke-width="2"></path></g></svg>'},"./src/images/rating-star.svg":function(e,t){e.exports='<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g><path d="M24 39.5057L11.7226 45.9839C10.4095 46.6739 8.87606 45.5622 9.12525 44.096L11.4734 30.373L1.54411 20.6556C0.480254 19.6207 1.06489 17.8095 2.53128 17.5986L16.2559 15.5957L22.3994 3.10891C23.0512 1.77685 24.9488 1.77685 25.6102 3.10891L31.7441 15.5957L45.4687 17.5986C46.9351 17.8095 47.5197 19.6207 46.4559 20.6556L36.5266 30.373L38.8748 44.096C39.1239 45.5622 37.5905 46.6835 36.2774 45.9839L24 39.5057Z" stroke-width="2"></path></g></svg>'},"./src/images/search.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14 2C9.6 2 6 5.6 6 10C6 11.8 6.6 13.5 7.7 14.9L2.3 20.3C1.9 20.7 1.9 21.3 2.3 21.7C2.5 21.9 2.7 22 3 22C3.3 22 3.5 21.9 3.7 21.7L9.1 16.3C10.5 17.4 12.2 18 14 18C18.4 18 22 14.4 22 10C22 5.6 18.4 2 14 2ZM14 16C10.7 16 8 13.3 8 10C8 6.7 10.7 4 14 4C17.3 4 20 6.7 20 10C20 13.3 17.3 16 14 16Z"></path></svg>'},"./src/images/smiley sync \\.svg$":function(e,t,o){var n={"./average.svg":"./src/images/smiley/average.svg","./excellent.svg":"./src/images/smiley/excellent.svg","./good.svg":"./src/images/smiley/good.svg","./normal.svg":"./src/images/smiley/normal.svg","./not-good.svg":"./src/images/smiley/not-good.svg","./perfect.svg":"./src/images/smiley/perfect.svg","./poor.svg":"./src/images/smiley/poor.svg","./terrible.svg":"./src/images/smiley/terrible.svg","./very-good.svg":"./src/images/smiley/very-good.svg","./very-poor.svg":"./src/images/smiley/very-poor.svg"};function webpackContext(e){return o(webpackContextResolve(e))}function webpackContextResolve(e){if(!o.o(n,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}webpackContext.keys=function(){return Object.keys(n)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id="./src/images/smiley sync \\.svg$"},"./src/images/smiley/average.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.00572 7C6.45572 7 6.00572 6.55 6.00572 6V2C6.00572 1.45 6.45572 1 7.00572 1C7.55572 1 8.00572 1.45 8.00572 2V6C8.00572 6.55 7.55572 7 7.00572 7ZM18.0057 6V2C18.0057 1.45 17.5557 1 17.0057 1C16.4557 1 16.0057 1.45 16.0057 2V6C16.0057 6.55 16.4557 7 17.0057 7C17.5557 7 18.0057 6.55 18.0057 6ZM19.9457 21.33C20.1257 20.81 19.8557 20.24 19.3357 20.05C14.5457 18.35 9.45572 18.35 4.66572 20.05C4.14572 20.23 3.87572 20.81 4.05572 21.33C4.23572 21.85 4.80572 22.12 5.33572 21.94C9.69572 20.4 14.3057 20.4 18.6657 21.94C18.7757 21.98 18.8857 22 18.9957 22C19.4057 22 19.7957 21.74 19.9357 21.33H19.9457Z"></path></svg>'},"./src/images/smiley/excellent.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 24C6.85767 24 1.15509 20.96 0.0145752 14.16C-0.0354475 13.87 0.0445888 13.57 0.234675 13.35C0.424761 13.13 0.704888 13 0.995019 13H23.005C23.2951 13 23.5752 13.13 23.7653 13.35C23.9554 13.57 24.0354 13.87 23.9854 14.16C22.8549 20.95 17.1423 24 11.99 24H12.01ZM2.25559 15C3.61621 19.82 8.0182 22 12.01 22C16.0018 22 20.4038 19.82 21.7644 15H2.25559ZM8.00819 6V2C8.00819 1.45 7.55799 1 7.00774 1C6.45749 1 6.00729 1.45 6.00729 2V6C6.00729 6.55 6.45749 7 7.00774 7C7.55799 7 8.00819 6.55 8.00819 6ZM18.0127 6V2C18.0127 1.45 17.5625 1 17.0123 1C16.462 1 16.0118 1.45 16.0118 2V6C16.0118 6.55 16.462 7 17.0123 7C17.5625 7 18.0127 6.55 18.0127 6Z"></path></svg>'},"./src/images/smiley/good.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.0022 23.99C11.452 23.99 11.0018 23.5402 11.0018 22.9904C11.0018 22.4407 11.452 21.9909 12.0022 21.9909C16.3137 21.9909 21.0755 19.472 22.0158 13.8344C22.1058 13.2947 22.616 12.9248 23.1662 13.0148C23.7064 13.1047 24.0765 13.6245 23.9865 14.1643C22.8561 20.9513 17.144 24 11.9922 24L12.0022 23.99ZM8.00072 5.99783V1.99957C8.00072 1.4498 7.55056 1 7.00036 1C6.45016 1 6 1.4498 6 1.99957V5.99783C6 6.54759 6.45016 6.99739 7.00036 6.99739C7.55056 6.99739 8.00072 6.54759 8.00072 5.99783ZM18.0043 5.99783V1.99957C18.0043 1.4498 17.5542 1 17.004 1C16.4538 1 16.0036 1.4498 16.0036 1.99957V5.99783C16.0036 6.54759 16.4538 6.99739 17.004 6.99739C17.5542 6.99739 18.0043 6.54759 18.0043 5.99783Z"></path></svg>'},"./src/images/smiley/normal.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 7C6.45 7 6 6.55 6 6V2C6 1.45 6.45 1 7 1C7.55 1 8 1.45 8 2V6C8 6.55 7.55 7 7 7ZM18 6V2C18 1.45 17.55 1 17 1C16.45 1 16 1.45 16 2V6C16 6.55 16.45 7 17 7C17.55 7 18 6.55 18 6ZM21 21C21 20.45 20.55 20 20 20H4C3.45 20 3 20.45 3 21C3 21.55 3.45 22 4 22H20C20.55 22 21 21.55 21 21Z"></path></svg>'},"./src/images/smiley/not-good.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.06927 7C6.51927 7 6.06927 6.55 6.06927 6V2C6.06927 1.45 6.51927 1 7.06927 1C7.61927 1 8.06927 1.45 8.06927 2V6C8.06927 6.55 7.61927 7 7.06927 7ZM18.0693 6V2C18.0693 1.45 17.6193 1 17.0693 1C16.5193 1 16.0693 1.45 16.0693 2V6C16.0693 6.55 16.5193 7 17.0693 7C17.6193 7 18.0693 6.55 18.0693 6ZM22.5693 21.9C23.0693 21.66 23.2793 21.07 23.0393 20.57C21.1093 16.52 16.9093 14 12.0693 14C7.22927 14 3.02927 16.52 1.09927 20.57C0.859273 21.07 1.06927 21.67 1.56927 21.9C2.06927 22.14 2.65927 21.93 2.89927 21.43C4.49927 18.08 8.00927 16 12.0593 16C16.1093 16 19.6293 18.08 21.2193 21.43C21.3893 21.79 21.7493 22 22.1193 22C22.2593 22 22.4093 21.97 22.5493 21.9H22.5693Z"></path></svg>'},"./src/images/smiley/perfect.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 23C6.85721 23 1.15412 19.9621 0.0134987 13.1669C-0.0765501 12.6272 0.293651 12.1076 0.833944 12.0177C1.38424 11.9277 1.89452 12.2975 1.98457 12.8371C2.92508 18.4732 7.69767 20.9914 12 20.9914C16.3023 20.9914 21.0749 18.4732 22.0154 12.8371C22.1055 12.2975 22.6158 11.9277 23.1661 12.0177C23.7063 12.1076 24.0765 12.6272 23.9865 13.1669C22.8559 19.9521 17.1428 23 11.99 23H12.01ZM21.165 6.15177C22.3056 5.01257 22.3056 3.16386 21.165 2.02465L21.0049 1.85477C19.9143 0.765533 18.1633 0.725561 17.0227 1.71487C15.8821 0.715568 14.1312 0.765533 13.0406 1.85477L12.8705 2.01466C11.7299 3.15386 11.7299 5.00257 12.8705 6.14178L17.0227 10.2889L21.175 6.14178L21.165 6.15177ZM15.742 3.27378L17.0127 4.54289L18.2834 3.27378C18.6436 2.91403 19.2239 2.91403 19.5841 3.27378L19.7442 3.43367C20.1044 3.79342 20.1044 4.37301 19.7442 4.73276L17.0127 7.46086L14.2812 4.73276C13.921 4.37301 13.921 3.79342 14.2812 3.43367L14.4413 3.27378C14.6214 3.09391 14.8515 3.00397 15.0917 3.00397C15.3318 3.00397 15.5619 3.09391 15.742 3.27378ZM11.1595 6.15177C12.3002 5.01257 12.3002 3.16386 11.1595 2.02465L10.9995 1.85477C9.90886 0.765533 8.15792 0.725561 7.0173 1.71487C5.87668 0.715568 4.12573 0.765533 3.03514 1.85477L2.86505 2.01466C1.72443 3.15386 1.72443 5.00257 2.86505 6.14178L7.0173 10.2889L11.1695 6.14178L11.1595 6.15177ZM5.7366 3.27378L7.00729 4.54289L8.27798 3.27378C8.63818 2.91403 9.21849 2.91403 9.57869 3.27378L9.73877 3.43367C10.099 3.79342 10.099 4.37301 9.73877 4.73276L7.00729 7.46086L4.27581 4.73276C3.91562 4.37301 3.91562 3.79342 4.27581 3.43367L4.4359 3.27378C4.61599 3.09391 4.84612 3.00397 5.08625 3.00397C5.32638 3.00397 5.5565 3.09391 5.7366 3.27378Z"></path></svg>'},"./src/images/smiley/poor.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.01915 7C6.46961 7 6.01998 6.55 6.01998 6V2C6.01998 1.45 6.46961 1 7.01915 1C7.56869 1 8.01832 1.45 8.01832 2V6C8.01832 6.55 7.56869 7 7.01915 7ZM18.01 6V2C18.01 1.45 17.5604 1 17.0108 1C16.4613 1 16.0117 1.45 16.0117 2V6C16.0117 6.55 16.4613 7 17.0108 7C17.5604 7 18.01 6.55 18.01 6ZM16.4213 21.58L18.01 19.99L19.2989 21.28C19.6886 21.67 20.3181 21.67 20.7077 21.28C21.0974 20.89 21.0974 20.26 20.7077 19.87L19.4188 18.58C18.6395 17.8 17.3705 17.8 16.5912 18.58L15.0025 20.17L13.4138 18.58C12.6345 17.8 11.3655 17.8 10.5862 18.58L8.9975 20.17L7.40883 18.58C6.62948 17.8 5.36053 17.8 4.58118 18.58L3.29226 19.87C2.90258 20.26 2.90258 20.89 3.29226 21.28C3.68193 21.67 4.31141 21.67 4.70108 21.28L5.99001 19.99L7.57868 21.58C8.35803 22.36 9.62698 22.36 10.4063 21.58L11.995 19.99L13.5837 21.58C13.9734 21.97 14.4829 22.16 14.9925 22.16C15.5021 22.16 16.0117 21.97 16.4013 21.58H16.4213Z"></path></svg>'},"./src/images/smiley/terrible.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 4.9938C4 4.44362 4.45 3.99348 5 3.99348H6.59L5.3 2.70306C4.91 2.31293 4.91 1.68272 5.3 1.2926C5.69 0.902468 6.32 0.902468 6.71 1.2926L9.71 4.29357C9.8 4.3836 9.88 4.49364 9.93 4.62368C10.03 4.86376 10.03 5.14385 9.93 5.38393C9.88 5.50397 9.81 5.614 9.71 5.71404L6.71 8.71501C6.51 8.91508 6.26 9.00511 6 9.00511C5.74 9.00511 5.49 8.90508 5.29 8.71501C4.9 8.32489 4.9 7.69468 5.29 7.30456L6.58 6.01413H4.99C4.44 6.01413 3.99 5.56399 3.99 5.01381L4 4.9938ZM14.08 5.37393C14.13 5.49397 14.2 5.604 14.3 5.70403L17.3 8.70501C17.5 8.90508 17.75 8.99511 18.01 8.99511C18.27 8.99511 18.52 8.89507 18.72 8.70501C19.11 8.31488 19.11 7.68468 18.72 7.29455L17.43 6.00413H19.02C19.57 6.00413 20.02 5.55399 20.02 5.00381C20.02 4.45363 19.57 4.00348 19.02 4.00348H17.43L18.72 2.71306C19.11 2.32293 19.11 1.69273 18.72 1.3026C18.33 0.912471 17.7 0.912471 17.31 1.3026L14.31 4.30358C14.22 4.39361 14.14 4.50364 14.09 4.63368C13.99 4.87376 13.99 5.15385 14.09 5.39393L14.08 5.37393ZM22 14.9971V20.999C22 22.6496 20.65 24 19 24H5C3.35 24 2 22.6496 2 20.999V14.9971C2 13.3465 3.35 11.9961 5 11.9961H19C20.65 11.9961 22 13.3465 22 14.9971ZM19 13.9967H16V16.9977H20V14.9971C20 14.4469 19.55 13.9967 19 13.9967ZM14 16.9977V13.9967H10V16.9977H14ZM10 18.9984V21.9993H14V18.9984H10ZM4 14.9971V16.9977H8V13.9967H5C4.45 13.9967 4 14.4469 4 14.9971ZM5 21.9993H8V18.9984H4V20.999C4 21.5492 4.45 21.9993 5 21.9993ZM20 20.999V18.9984H16V21.9993H19C19.55 21.9993 20 21.5492 20 20.999Z"></path></svg>'},"./src/images/smiley/very-good.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 24C6.85721 24 1.15412 20.96 0.0134987 14.16C-0.0765501 13.62 0.293651 13.1 0.833944 13.01C1.38424 12.92 1.89452 13.29 1.98457 13.83C2.92508 19.47 7.69767 21.99 12 21.99C16.3023 21.99 21.0749 19.47 22.0154 13.83C22.1055 13.29 22.6158 12.92 23.1661 13.01C23.7063 13.1 24.0765 13.62 23.9865 14.16C22.8559 20.95 17.1428 24 11.99 24H12.01ZM8.00783 6V2C8.00783 1.45 7.55759 1 7.00729 1C6.45699 1 6.00675 1.45 6.00675 2V6C6.00675 6.55 6.45699 7 7.00729 7C7.55759 7 8.00783 6.55 8.00783 6ZM18.0133 6V2C18.0133 1.45 17.563 1 17.0127 1C16.4624 1 16.0122 1.45 16.0122 2V6C16.0122 6.55 16.4624 7 17.0127 7C17.563 7 18.0133 6.55 18.0133 6Z"></path></svg>'},"./src/images/smiley/very-poor.svg":function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_15894_140103)"><path d="M4.88291 4.50999C4.47291 4.50999 4.08291 4.24999 3.94291 3.83999C3.76291 3.31999 4.03291 2.74999 4.55291 2.56999L8.32291 1.24999C8.84291 1.05999 9.41291 1.33999 9.59291 1.85999C9.77291 2.37999 9.50291 2.94999 8.98291 3.12999L5.20291 4.44999C5.09291 4.48999 4.98291 4.50999 4.87291 4.50999H4.88291ZM19.8129 3.88999C20.0229 3.37999 19.7729 2.78999 19.2629 2.58999L15.5529 1.06999C15.0429 0.859992 14.4529 1.10999 14.2529 1.61999C14.0429 2.12999 14.2929 2.71999 14.8029 2.91999L18.5029 4.42999C18.6229 4.47999 18.7529 4.49999 18.8829 4.49999C19.2729 4.49999 19.6529 4.26999 19.8129 3.87999V3.88999ZM3.50291 5.99999C2.64291 6.36999 1.79291 6.87999 1.00291 7.47999C0.79291 7.63999 0.64291 7.86999 0.59291 8.13999C0.48291 8.72999 0.87291 9.28999 1.45291 9.39999C2.04291 9.50999 2.60291 9.11999 2.71291 8.53999C2.87291 7.68999 3.12291 6.82999 3.50291 5.98999V5.99999ZM21.0429 8.54999C21.6029 10.48 24.2429 8.83999 22.7529 7.47999C21.9629 6.87999 21.1129 6.36999 20.2529 5.99999C20.6329 6.83999 20.8829 7.69999 21.0429 8.54999ZM21.5729 13.2C21.2529 14.2 22.5429 15.09 23.3629 14.39C23.8529 14 23.9229 13.29 23.5429 12.81C21.7429 10.67 22.1329 10.55 21.5829 13.2H21.5729ZM1.75291 11C1.22291 11.79 -0.14709 12.64 0.0129102 13.75C0.15291 14.36 0.75291 14.74 1.35291 14.6C2.98291 14.1 1.80291 12.22 1.75291 11ZM19.8829 17C19.8829 13.14 16.2929 9.99999 11.8829 9.99999C7.47291 9.99999 3.88291 13.14 3.88291 17C3.88291 20.86 7.47291 24 11.8829 24C16.2929 24 19.8829 20.86 19.8829 17ZM17.8829 17C17.8829 19.76 15.1929 22 11.8829 22C8.57291 22 5.88291 19.76 5.88291 17C5.88291 14.24 8.57291 12 11.8829 12C15.1929 12 17.8829 14.24 17.8829 17Z"></path></g><defs><clipPath id="clip0_15894_140103"><rect width="24" height="24" fill="white"></rect></clipPath></defs></svg>'},"./src/itemvalue.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"ItemValue",function(){return h});var n,r=o(/*! ./localizablestring */"./src/localizablestring.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=o(/*! ./helpers */"./src/helpers.ts"),a=o(/*! ./conditions */"./src/conditions.ts"),l=o(/*! ./base */"./src/base.ts"),u=o(/*! ./settings */"./src/settings.ts"),c=o(/*! ./actions/action */"./src/actions/action.ts"),p=o(/*! ./question */"./src/question.ts"),d=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},h=function(e){function ItemValue(t,o,n){void 0===o&&(o=null),void 0===n&&(n="itemvalue");var a=e.call(this)||this;return a.typeName=n,a.ownerPropertyName="",a.locTextValue=new r.LocalizableString(a,!0,"text"),a.locTextValue.onStrChanged=function(e,t){t==a.value&&(t=void 0),a.propertyValueChanged("text",e,t)},a.locTextValue.onGetTextCallback=function(e){return e||(s.Helpers.isValueEmpty(a.value)?null:a.value.toString())},o&&(a.locText.text=o),t&&"object"==typeof t?a.setData(t):a.value=t,"itemvalue"!=a.getType()&&i.CustomPropertiesCollection.createProperties(a),a.data=a,a.onCreating(),a}return d(ItemValue,e),ItemValue.prototype.getMarkdownHtml=function(e,t){return this.locOwner?this.locOwner.getMarkdownHtml(e,t):void 0},ItemValue.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},ItemValue.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},ItemValue.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},Object.defineProperty(ItemValue,"Separator",{get:function(){return u.settings.itemValueSeparator},set:function(e){u.settings.itemValueSeparator=e},enumerable:!1,configurable:!0}),ItemValue.setData=function(e,t,o){e.length=0;for(var n=0;n<t.length;n++){var r=t[n],s=r&&"function"==typeof r.getType?r.getType():null!=o?o:"itemvalue",a=i.Serializer.createClass(s);a.setData(r),r.originalItem&&(a.originalItem=r.originalItem),e.push(a)}},ItemValue.getData=function(e){for(var t=[],o=0;o<e.length;o++)t.push(e[o].getData());return t},ItemValue.getItemByValue=function(e,t){if(!Array.isArray(e))return null;for(var o=s.Helpers.isValueEmpty(t),n=0;n<e.length;n++)if(o&&s.Helpers.isValueEmpty(e[n].value)||s.Helpers.isTwoValueEquals(e[n].value,t,!1,!0,!1))return e[n];return null},ItemValue.getTextOrHtmlByValue=function(e,t){var o=ItemValue.getItemByValue(e,t);return null!==o?o.locText.textOrHtml:""},ItemValue.locStrsChanged=function(e){for(var t=0;t<e.length;t++)e[t].locStrsChanged()},ItemValue.runConditionsForItems=function(e,t,o,n,r,i,s){return void 0===i&&(i=!0),ItemValue.runConditionsForItemsCore(e,t,o,n,r,!0,i,s)},ItemValue.runEnabledConditionsForItems=function(e,t,o,n,r){return ItemValue.runConditionsForItemsCore(e,null,t,o,n,!1,!0,r)},ItemValue.runConditionsForItemsCore=function(e,t,o,n,r,i,s,a){void 0===s&&(s=!0),n||(n={});for(var l=n.item,u=n.choice,c=!1,p=0;p<e.length;p++){var d=e[p];n.item=d.value,n.choice=d.value;var h=!!s&&!!d.getConditionRunner&&d.getConditionRunner(i);h||(h=o);var g=!0;h&&(g=h.run(n,r)),a&&(g=a(d,g)),t&&g&&t.push(d),g!=(i?d.isVisible:d.isEnabled)&&(c=!0,i?d.setIsVisible&&d.setIsVisible(g):d.setIsEnabled&&d.setIsEnabled(g))}return l?n.item=l:delete n.item,u?n.choice=u:delete n.choice,c},ItemValue.prototype.onCreating=function(){},ItemValue.prototype.getType=function(){return this.typeName?this.typeName:"itemvalue"},ItemValue.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.locOwner&&this.locOwner.getSurvey?this.locOwner.getSurvey():null},ItemValue.prototype.getLocale=function(){return this.locOwner&&this.locOwner.getLocale?this.locOwner.getLocale():""},Object.defineProperty(ItemValue.prototype,"isInternal",{get:function(){return!0===this.isGhost},enumerable:!1,configurable:!0}),Object.defineProperty(ItemValue.prototype,"locText",{get:function(){return this.locTextValue},enumerable:!1,configurable:!0}),ItemValue.prototype.setLocText=function(e){this.locTextValue=e},Object.defineProperty(ItemValue.prototype,"locOwner",{get:function(){return this._locOwner},set:function(e){this._locOwner=e},enumerable:!1,configurable:!0}),Object.defineProperty(ItemValue.prototype,"value",{get:function(){return this.getPropertyValue("value")},set:function(e){var t=void 0;if(!s.Helpers.isValueEmpty(e)){var o=e.toString(),n=o.indexOf(u.settings.itemValueSeparator);n>-1&&(e=o.slice(0,n),t=o.slice(n+1))}this.setPropertyValue("value",e),t&&(this.text=t),this.id=this.value},enumerable:!1,configurable:!0}),Object.defineProperty(ItemValue.prototype,"hasText",{get:function(){return!!this.locText.pureText},enumerable:!1,configurable:!0}),Object.defineProperty(ItemValue.prototype,"pureText",{get:function(){return this.locText.pureText},set:function(e){this.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(ItemValue.prototype,"text",{get:function(){return this.locText.calculatedText},set:function(e){this.locText.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(ItemValue.prototype,"calculatedText",{get:function(){return this.locText.calculatedText},enumerable:!1,configurable:!0}),Object.defineProperty(ItemValue.prototype,"shortcutText",{get:function(){return this.text},enumerable:!1,configurable:!0}),ItemValue.prototype.canSerializeValue=function(){var e=this.value;return null!=e&&!Array.isArray(e)&&"object"!=typeof e},ItemValue.prototype.getData=function(){var e=this.toJSON();if(e.value&&e.value.pos&&delete e.value.pos,s.Helpers.isValueEmpty(e.value))return e;var t=this.canSerializeValue();return t&&(u.settings.serialization.itemValueSerializeAsObject||u.settings.serialization.itemValueSerializeDisplayText)||1!=Object.keys(e).length?(u.settings.serialization.itemValueSerializeDisplayText&&void 0===e.text&&t&&(e.text=this.value.toString()),e):this.value},ItemValue.prototype.toJSON=function(){var e={},t=i.Serializer.getProperties(this.getType());t&&0!=t.length||(t=i.Serializer.getProperties("itemvalue"));for(var o=new i.JsonObject,n=0;n<t.length;n++){var r=t[n];"text"===r.name&&!this.locText.hasNonDefaultText()&&s.Helpers.isTwoValueEquals(this.value,this.text,!1,!0,!1)||o.valueToJson(this,e,r)}return e},ItemValue.prototype.setData=function(e){if(!s.Helpers.isValueEmpty(e)){if(void 0===e.value&&void 0!==e.text&&1===Object.keys(e).length&&(e.value=e.text),void 0!==e.value){var t=void 0;t="function"==typeof e.toJSON?e.toJSON():e,new i.JsonObject().toObject(t,this)}else this.value=e;this.locText.strChanged()}},Object.defineProperty(ItemValue.prototype,"visibleIf",{get:function(){return this.getPropertyValue("visibleIf","")},set:function(e){this.setPropertyValue("visibleIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(ItemValue.prototype,"enableIf",{get:function(){return this.getPropertyValue("enableIf","")},set:function(e){this.setPropertyValue("enableIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(ItemValue.prototype,"isVisible",{get:function(){return this.getPropertyValue("isVisible",!0)},enumerable:!1,configurable:!0}),ItemValue.prototype.setIsVisible=function(e){this.setPropertyValue("isVisible",e)},Object.defineProperty(ItemValue.prototype,"isEnabled",{get:function(){return this.getPropertyValue("isEnabled",!0)},enumerable:!1,configurable:!0}),ItemValue.prototype.setIsEnabled=function(e){this.setPropertyValue("isEnabled",e)},ItemValue.prototype.addUsedLocales=function(e){this.AddLocStringToUsedLocales(this.locTextValue,e)},ItemValue.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.locText.strChanged()},ItemValue.prototype.onPropertyValueChanged=function(e,t,o){"value"!==e||this.hasText||this.locText.strChanged();var n="itemValuePropertyChanged";this.locOwner&&this.locOwner[n]&&this.locOwner[n](this,e,t,o)},ItemValue.prototype.getConditionRunner=function(e){return e?this.getVisibleConditionRunner():this.getEnableConditionRunner()},ItemValue.prototype.getVisibleConditionRunner=function(){return this.visibleIf?(this.visibleConditionRunner||(this.visibleConditionRunner=new a.ConditionRunner(this.visibleIf)),this.visibleConditionRunner.expression=this.visibleIf,this.visibleConditionRunner):null},ItemValue.prototype.getEnableConditionRunner=function(){return this.enableIf?(this.enableConditionRunner||(this.enableConditionRunner=new a.ConditionRunner(this.enableIf)),this.enableConditionRunner.expression=this.enableIf,this.enableConditionRunner):null},Object.defineProperty(ItemValue.prototype,"selected",{get:function(){var e=this,t=this._locOwner;return t instanceof p.Question&&t.isItemSelected&&void 0===this.selectedValue&&(this.selectedValue=new l.ComputedUpdater(function(){return t.isItemSelected(e)})),this.selectedValue},enumerable:!1,configurable:!0}),ItemValue.prototype.getComponent=function(){return this._locOwner instanceof p.Question?this.componentValue||this._locOwner.itemComponent:this.componentValue},ItemValue.prototype.setComponent=function(e){this.componentValue=e},ItemValue.prototype.getEnabled=function(){return this.isEnabled},ItemValue.prototype.setEnabled=function(e){this.setIsEnabled(e)},ItemValue.prototype.getVisible=function(){var e=void 0===this.isVisible||this.isVisible,t=void 0===this._visible||this._visible;return e&&t},ItemValue.prototype.setVisible=function(e){this._visible=e},ItemValue.prototype.getLocTitle=function(){return this.locText},ItemValue.prototype.getTitle=function(){return this.text},ItemValue.prototype.setLocTitle=function(e){},ItemValue.prototype.setTitle=function(e){},__decorate([Object(i.property)({defaultValue:!0})],ItemValue.prototype,"_visible",void 0),__decorate([Object(i.property)()],ItemValue.prototype,"selectedValue",void 0),__decorate([Object(i.property)()],ItemValue.prototype,"icon",void 0),ItemValue}(c.BaseAction);l.Base.createItemValue=function(e,t){var o=null;return(o=t?i.JsonObject.metaData.createClass(t,{}):"function"==typeof e.getType?new h(null,void 0,e.getType()):new h(null)).setData(e),o},l.Base.itemValueLocStrChanged=function(e){h.locStrsChanged(e)},i.JsonObjectProperty.getItemValuesDefaultValue=function(e,t){var o=[];return h.setData(o,Array.isArray(e)?e:[],t),o},i.Serializer.addClass("itemvalue",[{name:"!value",isUnique:!0},{name:"text",serializationProperty:"locText"},{name:"visibleIf:condition",showMode:"form"},{name:"enableIf:condition",showMode:"form",visibleIf:function(e){return!e||"rateValues"!==e.ownerPropertyName}}],function(e){return new h(e)})},"./src/jsonobject.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"property",function(){return property}),o.d(t,"propertyArray",function(){return propertyArray}),o.d(t,"JsonObjectProperty",function(){return l}),o.d(t,"CustomPropertiesCollection",function(){return u}),o.d(t,"JsonMetadataClass",function(){return c}),o.d(t,"JsonMetadata",function(){return p}),o.d(t,"JsonError",function(){return d}),o.d(t,"JsonUnknownPropertyError",function(){return h}),o.d(t,"JsonMissingTypeErrorBase",function(){return g}),o.d(t,"JsonMissingTypeError",function(){return f}),o.d(t,"JsonIncorrectTypeError",function(){return y}),o.d(t,"JsonRequiredPropertyError",function(){return m}),o.d(t,"JsonObject",function(){return v}),o.d(t,"Serializer",function(){return b});var n,r=o(/*! ./surveyStrings */"./src/surveyStrings.ts"),i=o(/*! ./base */"./src/base.ts"),s=o(/*! ./helpers */"./src/helpers.ts"),a=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__spreadArray=function(e,t){for(var o=0,n=t.length,r=e.length;o<n;o++,r++)e[r]=t[o];return e};function ensureLocString(e,t,o){var n=e.getLocalizableString(o);if(!n){var r=void 0;"object"==typeof t.localizable&&t.localizable.defaultStr&&(r=t.localizable.defaultStr),n=e.createLocalizableString(o,e,!0,r),"object"==typeof t.localizable&&"function"==typeof t.localizable.onGetTextCallback&&(n.onGetTextCallback=t.localizable.onGetTextCallback)}}function getLocStringValue(e,t,o){ensureLocString(e,t,o);var n=e.getLocalizableStringText(o);if(n)return n;if("object"==typeof t.localizable&&t.localizable.defaultStr){var i=e.getLocale?e.getLocale():"";return r.surveyLocalization.getString(t.localizable.defaultStr,i)}return""}function property(e){return void 0===e&&(e={}),function(t,o){var processComputedUpdater=function(e,t){if(t&&"object"==typeof t&&t.type===i.ComputedUpdater.ComputedUpdaterType){i.Base.startCollectDependencies(function(){return e[o]=t.updater()},e,o);var n=t.updater(),r=i.Base.finishCollectDependencies();return t.setDependencies(r),e.dependencies[o]&&e.dependencies[o].dispose(),e.dependencies[o]=t,n}return t};e&&e.localizable?(Object.defineProperty(t,o,{get:function(){return getLocStringValue(this,e,o)},set:function(t){ensureLocString(this,e,o);var n=processComputedUpdater(this,t);this.setLocalizableStringText(o,n),e&&e.onSet&&e.onSet(n,this)}}),Object.defineProperty(t,"object"==typeof e.localizable&&e.localizable.name?e.localizable.name:"loc"+o.charAt(0).toUpperCase()+o.slice(1),{get:function(){return ensureLocString(this,e,o),this.getLocalizableString(o)}})):Object.defineProperty(t,o,{get:function(){var t=null;return e&&("function"==typeof e.getDefaultValue&&(t=e.getDefaultValue(this)),void 0!==e.defaultValue&&(t=e.defaultValue)),this.getPropertyValue(o,t)},set:function(t){var n=processComputedUpdater(this,t);this.setPropertyValue(o,n),e&&e.onSet&&e.onSet(n,this)}})}}function ensureArray(e,t,o){e.ensureArray(o,function(o,n){var r=t?t.onPush:null;r&&r(o,n,e)},function(o,n){var r=t?t.onRemove:null;r&&r(o,n,e)})}function propertyArray(e){return function(t,o){Object.defineProperty(t,o,{get:function(){return ensureArray(this,e,o),this.getPropertyValue(o)},set:function(t){ensureArray(this,e,o);var n=this.getPropertyValue(o);t!==n&&(n?n.splice.apply(n,__spreadArray([0,n.length],t||[])):this.setPropertyValue(o,t),e&&e.onSet&&e.onSet(t,this))}})}}var l=function(){function JsonObjectProperty(e,t,o){void 0===o&&(o=!1),this.name=t,this.isRequiredValue=!1,this.isUniqueValue=!1,this.isSerializable=!0,this.isLightSerializable=!0,this.isCustom=!1,this.isDynamicChoices=!1,this.isBindable=!1,this.category="",this.categoryIndex=-1,this.visibleIndex=-1,this.maxLength=-1,this.isArray=!1,this.classInfoValue=e,this.isRequiredValue=o,this.idValue=JsonObjectProperty.Index++}return Object.defineProperty(JsonObjectProperty.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(JsonObjectProperty.prototype,"classInfo",{get:function(){return this.classInfoValue},enumerable:!1,configurable:!0}),Object.defineProperty(JsonObjectProperty.prototype,"type",{get:function(){return this.typeValue?this.typeValue:"string"},set:function(e){"itemvalues"===e&&(e="itemvalue[]"),"textitems"===e&&(e="textitem[]"),this.typeValue=e,this.typeValue.indexOf("[]")===this.typeValue.length-2&&(this.isArray=!0,this.className=this.typeValue.substring(0,this.typeValue.length-2))},enumerable:!1,configurable:!0}),Object.defineProperty(JsonObjectProperty.prototype,"isRequired",{get:function(){return this.isRequiredValue},set:function(e){this.isRequiredValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(JsonObjectProperty.prototype,"isUnique",{get:function(){return this.isUniqueValue},set:function(e){this.isUniqueValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(JsonObjectProperty.prototype,"uniquePropertyName",{get:function(){return this.uniquePropertyValue},set:function(e){this.uniquePropertyValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(JsonObjectProperty.prototype,"hasToUseGetValue",{get:function(){return this.onGetValue||this.serializationProperty},enumerable:!1,configurable:!0}),JsonObjectProperty.prototype.getDefaultValue=function(e){var t=this.defaultValueFunc?this.defaultValueFunc(e):this.defaultValueValue;return JsonObjectProperty.getItemValuesDefaultValue&&v.metaData.isDescendantOf(this.className,"itemvalue")&&(t=JsonObjectProperty.getItemValuesDefaultValue(this.defaultValueValue||[],this.className)),t},Object.defineProperty(JsonObjectProperty.prototype,"defaultValue",{get:function(){return this.getDefaultValue(void 0)},set:function(e){this.defaultValueValue=e},enumerable:!1,configurable:!0}),JsonObjectProperty.prototype.isDefaultValue=function(e){return this.isDefaultValueByObj(void 0,e)},JsonObjectProperty.prototype.isDefaultValueByObj=function(e,t){var o=this.getDefaultValue(e);return s.Helpers.isValueEmpty(o)?this.isLocalizable?null==t:!1===t&&("boolean"==this.type||"switch"==this.type)||""===t||s.Helpers.isValueEmpty(t):s.Helpers.isTwoValueEquals(t,o,!1,!0,!1)},JsonObjectProperty.prototype.getValue=function(e){return this.onGetValue?this.onGetValue(e):this.serializationProperty&&e[this.serializationProperty]?e[this.serializationProperty].getJson():e[this.name]},JsonObjectProperty.prototype.getPropertyValue=function(e){return this.isLocalizable?e[this.serializationProperty]?e[this.serializationProperty].text:null:this.getValue(e)},Object.defineProperty(JsonObjectProperty.prototype,"hasToUseSetValue",{get:function(){return this.onSetValue||this.serializationProperty},enumerable:!1,configurable:!0}),JsonObjectProperty.prototype.settingValue=function(e,t){return!this.onSettingValue||e.isLoadingFromJson?t:this.onSettingValue(e,t)},JsonObjectProperty.prototype.setValue=function(e,t,o){this.onSetValue?this.onSetValue(e,t,o):this.serializationProperty&&e[this.serializationProperty]?e[this.serializationProperty].setJson(t):(t&&"string"==typeof t&&("number"==this.type&&(t=parseInt(t)),("boolean"==this.type||"switch"==this.type)&&(t="true"===t.toLowerCase())),e[this.name]=t)},JsonObjectProperty.prototype.getObjType=function(e){return this.classNamePart?e.replace(this.classNamePart,""):e},Object.defineProperty(JsonObjectProperty.prototype,"choices",{get:function(){return this.getChoices(null)},enumerable:!1,configurable:!0}),Object.defineProperty(JsonObjectProperty.prototype,"hasChoices",{get:function(){return!!this.choicesValue||!!this.choicesfunc},enumerable:!1,configurable:!0}),JsonObjectProperty.prototype.getChoices=function(e,t){return(void 0===t&&(t=null),null!=this.choicesValue)?this.choicesValue:null!=this.choicesfunc?this.choicesfunc(e,t):null},JsonObjectProperty.prototype.setChoices=function(e,t){void 0===t&&(t=null),this.choicesValue=e,this.choicesfunc=t},JsonObjectProperty.prototype.getBaseValue=function(){return this.baseValue?"function"==typeof this.baseValue?this.baseValue():this.baseValue:""},JsonObjectProperty.prototype.setBaseValue=function(e){this.baseValue=e},Object.defineProperty(JsonObjectProperty.prototype,"readOnly",{get:function(){return null!=this.readOnlyValue&&this.readOnlyValue},set:function(e){this.readOnlyValue=e},enumerable:!1,configurable:!0}),JsonObjectProperty.prototype.isVisible=function(e,t){void 0===t&&(t=null);var o=!this.layout||this.layout==e;return!!this.visible&&!!o&&(!this.visibleIf||!t||this.visibleIf(t))},Object.defineProperty(JsonObjectProperty.prototype,"visible",{get:function(){return null==this.visibleValue||this.visibleValue},set:function(e){this.visibleValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(JsonObjectProperty.prototype,"isLocalizable",{get:function(){return null!=this.isLocalizableValue&&this.isLocalizableValue},set:function(e){this.isLocalizableValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(JsonObjectProperty.prototype,"dataList",{get:function(){return Array.isArray(this.dataListValue)?this.dataListValue:[]},set:function(e){this.dataListValue=e},enumerable:!1,configurable:!0}),JsonObjectProperty.prototype.mergeWith=function(e){for(var t=JsonObjectProperty.mergableValues,o=0;o<t.length;o++)this.mergeValue(e,t[o])},JsonObjectProperty.prototype.addDependedProperty=function(e){this.dependedProperties||(this.dependedProperties=[]),0>this.dependedProperties.indexOf(e)&&this.dependedProperties.push(e)},JsonObjectProperty.prototype.getDependedProperties=function(){return this.dependedProperties?this.dependedProperties:[]},JsonObjectProperty.prototype.schemaType=function(){if("choicesByUrl"!==this.className)return"string"===this.className?this.className:this.className||this.baseClassName?"array":"switch"==this.type?"boolean":"boolean"==this.type||"number"==this.type?this.type:"string"},JsonObjectProperty.prototype.schemaRef=function(){if(this.className)return this.className},JsonObjectProperty.prototype.mergeValue=function(e,t){null==this[t]&&null!=e[t]&&(this[t]=e[t])},JsonObjectProperty.Index=1,JsonObjectProperty.mergableValues=["typeValue","choicesValue","baseValue","readOnlyValue","visibleValue","isSerializable","isLightSerializable","isCustom","isBindable","isUnique","uniquePropertyName","isDynamicChoices","isLocalizableValue","className","alternativeName","layout","classNamePart","baseClassName","defaultValue","defaultValueFunc","serializationProperty","onGetValue","onSetValue","onSettingValue","displayName","category","categoryIndex","visibleIndex","nextToProperty","overridingProperty","showMode","dependedProperties","visibleIf","onExecuteExpression","onPropertyEditorUpdate","maxLength","maxValue","minValue","dataListValue"],JsonObjectProperty}(),u=function(){function CustomPropertiesCollection(){}return CustomPropertiesCollection.addProperty=function(e,t){e=e.toLowerCase();var o=CustomPropertiesCollection.properties;o[e]||(o[e]=[]),o[e].push(t)},CustomPropertiesCollection.removeProperty=function(e,t){e=e.toLowerCase();var o=CustomPropertiesCollection.properties;if(o[e]){for(var n=o[e],r=0;r<n.length;r++)if(n[r].name==t){o[e].splice(r,1);break}}},CustomPropertiesCollection.removeAllProperties=function(e){e=e.toLowerCase(),delete CustomPropertiesCollection.properties[e]},CustomPropertiesCollection.addClass=function(e,t){e=e.toLowerCase(),t&&(t=t.toLowerCase()),CustomPropertiesCollection.parentClasses[e]=t},CustomPropertiesCollection.getProperties=function(e){e=e.toLowerCase();for(var t=[],o=CustomPropertiesCollection.properties;e;){var n=o[e];if(n)for(var r=0;r<n.length;r++)t.push(n[r]);e=CustomPropertiesCollection.parentClasses[e]}return t},CustomPropertiesCollection.createProperties=function(e){e&&e.getType&&CustomPropertiesCollection.createPropertiesCore(e,e.getType())},CustomPropertiesCollection.createPropertiesCore=function(e,t){var o=CustomPropertiesCollection.properties;o[t]&&CustomPropertiesCollection.createPropertiesInObj(e,o[t]);var n=CustomPropertiesCollection.parentClasses[t];n&&CustomPropertiesCollection.createPropertiesCore(e,n)},CustomPropertiesCollection.createPropertiesInObj=function(e,t){for(var o=0;o<t.length;o++)CustomPropertiesCollection.createPropertyInObj(e,t[o])},CustomPropertiesCollection.createPropertyInObj=function(e,t){if(!CustomPropertiesCollection.checkIsPropertyExists(e,t.name)&&!(t.serializationProperty&&CustomPropertiesCollection.checkIsPropertyExists(e,t.serializationProperty))){if(t.isLocalizable&&t.serializationProperty&&e.createCustomLocalizableObj){e.createCustomLocalizableObj(t.name),Object.defineProperty(e,t.serializationProperty,{get:function(){return e.getLocalizableString(t.name)}});var o={get:function(){return e.getLocalizableStringText(t.name,t.defaultValue)},set:function(o){e.setLocalizableStringText(t.name,o)}};Object.defineProperty(e,t.name,o)}else{var n=t.defaultValue,r=t.isArray||"multiplevalues"===t.type;if("function"==typeof e.createNewArray&&(v.metaData.isDescendantOf(t.className,"itemvalue")?(e.createNewArray(t.name,function(o){o.locOwner=e,o.ownerPropertyName=t.name}),r=!0):r&&e.createNewArray(t.name),r&&(Array.isArray(n)&&e.setPropertyValue(t.name,n),n=null)),e.getPropertyValue&&e.setPropertyValue){var o={get:function(){return t.onGetValue?t.onGetValue(e):e.getPropertyValue(t.name,n)},set:function(o){t.onSetValue?t.onSetValue(e,o,null):e.setPropertyValue(t.name,o)}};Object.defineProperty(e,t.name,o)}}("condition"===t.type||"expression"===t.type)&&t.onExecuteExpression&&e.addExpressionProperty(t.name,t.onExecuteExpression)}},CustomPropertiesCollection.checkIsPropertyExists=function(e,t){return e.hasOwnProperty(t)||e[t]},CustomPropertiesCollection.properties={},CustomPropertiesCollection.parentClasses={},CustomPropertiesCollection}(),c=function(){function JsonMetadataClass(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=null),this.name=e,this.creator=o,this.parentName=n,e=e.toLowerCase(),this.isCustomValue=!o&&"survey"!==e,this.parentName&&(this.parentName=this.parentName.toLowerCase(),u.addClass(e,this.parentName),o&&this.makeParentRegularClass()),this.properties=[];for(var r=0;r<t.length;r++)this.createProperty(t[r],this.isCustom)}return JsonMetadataClass.prototype.find=function(e){for(var t=0;t<this.properties.length;t++)if(this.properties[t].name==e)return this.properties[t];return null},JsonMetadataClass.prototype.findProperty=function(e){return this.fillAllProperties(),this.hashProperties[e]},JsonMetadataClass.prototype.getAllProperties=function(){return this.fillAllProperties(),this.allProperties},JsonMetadataClass.prototype.resetAllProperties=function(){this.allProperties=void 0,this.hashProperties=void 0;for(var e=b.getChildrenClasses(this.name),t=0;t<e.length;t++)e[t].resetAllProperties()},Object.defineProperty(JsonMetadataClass.prototype,"isCustom",{get:function(){return this.isCustomValue},enumerable:!1,configurable:!0}),JsonMetadataClass.prototype.fillAllProperties=function(){var e=this;if(!this.allProperties){this.allProperties=[],this.hashProperties={};var t={};this.properties.forEach(function(e){return t[e.name]=e});var o=this.parentName?b.findClass(this.parentName):null;o&&o.getAllProperties().forEach(function(o){var n=t[o.name];n?(n.mergeWith(o),e.addPropCore(n)):e.addPropCore(o)}),this.properties.forEach(function(t){e.hashProperties[t.name]||e.addPropCore(t)})}},JsonMetadataClass.prototype.addPropCore=function(e){this.allProperties.push(e),this.hashProperties[e.name]=e,e.alternativeName&&(this.hashProperties[e.alternativeName]=e)},JsonMetadataClass.prototype.isOverridedProp=function(e){return!!this.parentName&&!!b.findProperty(this.parentName,e)},JsonMetadataClass.prototype.hasRegularChildClass=function(){if(this.isCustom){this.isCustomValue=!1;for(var e=0;e<this.properties.length;e++)this.properties[e].isCustom=!1;u.removeAllProperties(this.name),this.makeParentRegularClass()}},JsonMetadataClass.prototype.makeParentRegularClass=function(){if(this.parentName){var e=b.findClass(this.parentName);e&&e.hasRegularChildClass()}},JsonMetadataClass.prototype.createProperty=function(e,t){void 0===t&&(t=!1);var o="string"==typeof e?e:e.name;if(o){var n=null,r=o.indexOf(JsonMetadataClass.typeSymbol);r>-1&&(n=o.substring(r+1),o=o.substring(0,r));var i=this.getIsPropertyNameRequired(o)||!!e.isRequired,a=new l(this,o=this.getPropertyName(o),i);if(n&&(a.type=n),"object"==typeof e){if(e.type&&(a.type=e.type),void 0!==e.default&&(a.defaultValue=e.default),void 0!==e.defaultFunc&&(a.defaultValueFunc=e.defaultFunc),s.Helpers.isValueEmpty(e.isSerializable)||(a.isSerializable=e.isSerializable),s.Helpers.isValueEmpty(e.isLightSerializable)||(a.isLightSerializable=e.isLightSerializable),s.Helpers.isValueEmpty(e.maxLength)||(a.maxLength=e.maxLength),s.Helpers.isValueEmpty(e.displayName)||(a.displayName=e.displayName),s.Helpers.isValueEmpty(e.category)||(a.category=e.category),s.Helpers.isValueEmpty(e.categoryIndex)||(a.categoryIndex=e.categoryIndex),s.Helpers.isValueEmpty(e.nextToProperty)||(a.nextToProperty=e.nextToProperty),s.Helpers.isValueEmpty(e.overridingProperty)||(a.overridingProperty=e.overridingProperty),s.Helpers.isValueEmpty(e.visibleIndex)||(a.visibleIndex=e.visibleIndex),s.Helpers.isValueEmpty(e.showMode)||(a.showMode=e.showMode),s.Helpers.isValueEmpty(e.maxValue)||(a.maxValue=e.maxValue),s.Helpers.isValueEmpty(e.minValue)||(a.minValue=e.minValue),s.Helpers.isValueEmpty(e.dataList)||(a.dataList=e.dataList),s.Helpers.isValueEmpty(e.isDynamicChoices)||(a.isDynamicChoices=e.isDynamicChoices),s.Helpers.isValueEmpty(e.isBindable)||(a.isBindable=e.isBindable),s.Helpers.isValueEmpty(e.isUnique)||(a.isUnique=e.isUnique),s.Helpers.isValueEmpty(e.uniqueProperty)||(a.uniquePropertyName=e.uniqueProperty),s.Helpers.isValueEmpty(e.isArray)||(a.isArray=e.isArray),(!0===e.visible||!1===e.visible)&&(a.visible=e.visible),e.visibleIf&&(a.visibleIf=e.visibleIf),e.onExecuteExpression&&(a.onExecuteExpression=e.onExecuteExpression),e.onPropertyEditorUpdate&&(a.onPropertyEditorUpdate=e.onPropertyEditorUpdate),!0===e.readOnly&&(a.readOnly=!0),e.choices){var c="function"==typeof e.choices?e.choices:null,p="function"!=typeof e.choices?e.choices:null;a.setChoices(p,c)}e.baseValue&&a.setBaseValue(e.baseValue),e.onGetValue&&(a.onGetValue=e.onGetValue),e.onSetValue&&(a.onSetValue=e.onSetValue),e.onSettingValue&&(a.onSettingValue=e.onSettingValue),e.isLocalizable&&(e.serializationProperty="loc"+a.name),e.serializationProperty&&(a.serializationProperty=e.serializationProperty,a.serializationProperty&&0==a.serializationProperty.indexOf("loc")&&(a.isLocalizable=!0)),e.isLocalizable&&(a.isLocalizable=e.isLocalizable),e.className&&(a.className=e.className),e.baseClassName&&(a.baseClassName=e.baseClassName),e.classNamePart&&(a.classNamePart=e.classNamePart),e.alternativeName&&(a.alternativeName=e.alternativeName),e.layout&&(a.layout=e.layout),e.dependsOn&&this.addDependsOnProperties(a,e.dependsOn)}return this.properties.push(a),t&&!this.isOverridedProp(a.name)&&(a.isCustom=!0,u.addProperty(this.name,a)),a}},JsonMetadataClass.prototype.addDependsOnProperties=function(e,t){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addDependsOnProperty(e,t[o]);else this.addDependsOnProperty(e,t)},JsonMetadataClass.prototype.addDependsOnProperty=function(e,t){var o=this.find(t);o||(o=b.findProperty(this.parentName,t)),o&&o.addDependedProperty(e.name)},JsonMetadataClass.prototype.getIsPropertyNameRequired=function(e){return e.length>0&&e[0]==JsonMetadataClass.requiredSymbol},JsonMetadataClass.prototype.getPropertyName=function(e){return this.getIsPropertyNameRequired(e)?e=e.slice(1):e},JsonMetadataClass.requiredSymbol="!",JsonMetadataClass.typeSymbol=":",JsonMetadataClass}(),p=function(){function JsonMetadata(){this.classes={},this.alternativeNames={},this.childrenClasses={}}return JsonMetadata.prototype.getObjPropertyValue=function(e,t){if(this.isObjWrapper(e)){var o=e.getOriginalObj(),n=b.findProperty(o.getType(),t);if(n)return this.getObjPropertyValueCore(o,n)}var n=b.findProperty(e.getType(),t);return n?this.getObjPropertyValueCore(e,n):e[t]},JsonMetadata.prototype.setObjPropertyValue=function(e,t,o){if(e[t]!==o){if(e[t]&&e[t].setJson)e[t].setJson(o);else{if(Array.isArray(o)){for(var n=[],r=0;r<o.length;r++)n.push(o[r]);o=n}e[t]=o}}},JsonMetadata.prototype.getObjPropertyValueCore=function(e,t){if(!t.isSerializable)return e[t.name];if(t.isLocalizable){if(t.isArray)return e[t.name];if(t.serializationProperty)return e[t.serializationProperty].text}return e.getPropertyValue(t.name)},JsonMetadata.prototype.isObjWrapper=function(e){return!!e.getOriginalObj&&!!e.getOriginalObj()},JsonMetadata.prototype.addClass=function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=null);var r=new c(e=e.toLowerCase(),t,o,n);return this.classes[e]=r,n&&(n=n.toLowerCase(),this.childrenClasses[n]||(this.childrenClasses[n]=[]),this.childrenClasses[n].push(r)),r},JsonMetadata.prototype.removeClass=function(e){var t=this.findClass(e);if(t&&(delete this.classes[t.name],t.parentName)){var o=this.childrenClasses[t.parentName].indexOf(t);o>-1&&this.childrenClasses[t.parentName].splice(o,1)}},JsonMetadata.prototype.overrideClassCreatore=function(e,t){this.overrideClassCreator(e,t)},JsonMetadata.prototype.overrideClassCreator=function(e,t){e=e.toLowerCase();var o=this.findClass(e);o&&(o.creator=t)},JsonMetadata.prototype.getProperties=function(e){var t=this.findClass(e);return t?t.getAllProperties():[]},JsonMetadata.prototype.getPropertiesByObj=function(e){if(!e||!e.getType)return[];for(var t={},o=this.getProperties(e.getType()),n=0;n<o.length;n++)t[o[n].name]=o[n];var r=e.getDynamicType?this.getProperties(e.getDynamicType()):null;if(r&&r.length>0)for(var n=0;n<r.length;n++){var i=r[n];t[i.name]||(t[i.name]=i)}return Object.keys(t).map(function(e){return t[e]})},JsonMetadata.prototype.getDynamicPropertiesByObj=function(e,t){if(void 0===t&&(t=null),!e||!e.getType||!e.getDynamicType&&!t)return[];var o=t||e.getDynamicType();if(!o)return[];var n=this.getProperties(o);if(!n||0==n.length)return[];for(var r={},i=this.getProperties(e.getType()),s=0;s<i.length;s++)r[i[s].name]=i[s];for(var a=[],s=0;s<n.length;s++){var l=n[s];r[l.name]||a.push(l)}return a},JsonMetadata.prototype.hasOriginalProperty=function(e,t){return!!this.getOriginalProperty(e,t)},JsonMetadata.prototype.getOriginalProperty=function(e,t){return this.findProperty(e.getType(),t)||(this.isObjWrapper(e)?this.findProperty(e.getOriginalObj().getType(),t):null)},JsonMetadata.prototype.getProperty=function(e,t){var o=this.findProperty(e,t);if(!o)return o;var n=this.findClass(e);if(o.classInfo===n)return o;var r=new l(n,o.name,o.isRequired);return r.mergeWith(o),r.isArray=o.isArray,n.properties.push(r),n.resetAllProperties(),r},JsonMetadata.prototype.findProperty=function(e,t){var o=this.findClass(e);return o?o.findProperty(t):null},JsonMetadata.prototype.findProperties=function(e,t){var o=[],n=this.findClass(e);if(!n)return o;for(var r=0;r<t.length;r++){var i=n.findProperty(t[r]);i&&o.push(i)}return o},JsonMetadata.prototype.getAllPropertiesByName=function(e){for(var t=[],o=this.getAllClasses(),n=0;n<o.length;n++)for(var r=this.findClass(o[n]),i=0;i<r.properties.length;i++)if(r.properties[i].name==e){t.push(r.properties[i]);break}return t},JsonMetadata.prototype.getAllClasses=function(){var e=[];for(var t in this.classes)e.push(t);return e},JsonMetadata.prototype.createClass=function(e,t){void 0===t&&(t=void 0),e=e.toLowerCase();var o=this.findClass(e);if(!o)return null;if(o.creator)return o.creator(t);for(var n=o.parentName;n&&(o=this.findClass(n));)if(n=o.parentName,o.creator)return this.createCustomType(e,o.creator,t);return null},JsonMetadata.prototype.createCustomType=function(e,t,o){void 0===o&&(o=void 0),e=e.toLowerCase();var n=t(o),r=e,i=n.getTemplate?n.getTemplate():n.getType();return n.getType=function(){return r},n.getTemplate=function(){return i},u.createProperties(n),n},JsonMetadata.prototype.getChildrenClasses=function(e,t){void 0===t&&(t=!1),e=e.toLowerCase();var o=[];return this.fillChildrenClasses(e,t,o),o},JsonMetadata.prototype.getRequiredProperties=function(e){for(var t=this.getProperties(e),o=[],n=0;n<t.length;n++)t[n].isRequired&&o.push(t[n].name);return o},JsonMetadata.prototype.addProperties=function(e,t){e=e.toLowerCase();for(var o=this.findClass(e),n=0;n<t.length;n++)this.addCustomPropertyCore(o,t[n])},JsonMetadata.prototype.addProperty=function(e,t){return this.addCustomPropertyCore(this.findClass(e),t)},JsonMetadata.prototype.addCustomPropertyCore=function(e,t){if(!e)return null;var o=e.createProperty(t,!0);return o&&e.resetAllProperties(),o},JsonMetadata.prototype.removeProperty=function(e,t){var o=this.findClass(e);if(!o)return!1;var n=o.find(t);n&&(this.removePropertyFromClass(o,n),o.resetAllProperties(),u.removeProperty(o.name,t))},JsonMetadata.prototype.removePropertyFromClass=function(e,t){var o=e.properties.indexOf(t);o<0||e.properties.splice(o,1)},JsonMetadata.prototype.fillChildrenClasses=function(e,t,o){var n=this.childrenClasses[e];if(n)for(var r=0;r<n.length;r++)(!t||n[r].creator)&&o.push(n[r]),this.fillChildrenClasses(n[r].name,t,o)},JsonMetadata.prototype.findClass=function(e){e=e.toLowerCase();var t=this.classes[e];if(!t){var o=this.alternativeNames[e];if(o&&o!=e)return this.findClass(o)}return t},JsonMetadata.prototype.isDescendantOf=function(e,t){if(!e||!t)return!1;e=e.toLowerCase(),t=t.toLowerCase();var o=this.findClass(e);if(!o)return!1;var n=o;do{if(n.name===t)return!0;n=this.classes[n.parentName]}while(!!n);return!1},JsonMetadata.prototype.addAlterNativeClassName=function(e,t){this.alternativeNames[t.toLowerCase()]=e.toLowerCase()},JsonMetadata.prototype.generateSchema=function(e){void 0===e&&(e=void 0),e||(e="survey");var t=this.findClass(e);if(!t)return null;var o={$schema:"http://json-schema.org/draft-07/schema#",title:"SurveyJS Library json schema",type:"object",properties:{},definitions:{locstring:this.generateLocStrClass()}};return this.generateSchemaProperties(t,o,o.definitions,!0),o},JsonMetadata.prototype.generateLocStrClass=function(){var e={},t=b.findProperty("survey","locale");if(t){var o=t.getChoices(null);Array.isArray(o)&&(0>o.indexOf("en")&&o.splice(0,0,"en"),o.splice(0,0,"default"),o.forEach(function(t){t&&(e[t]={type:"string"})}))}return{$id:"locstring",type:"object",properties:e}},JsonMetadata.prototype.generateSchemaProperties=function(e,t,o,n){if(e){var r=t.properties,i=[];("question"===e.name||"panel"===e.name)&&(r.type={type:"string"},i.push("type"));for(var s=0;s<e.properties.length;s++){var a=e.properties[s];!(e.parentName&&b.findProperty(e.parentName,a.name))&&(r[a.name]=this.generateSchemaProperty(a,o,n),a.isRequired&&i.push(a.name))}i.length>0&&(t.required=i)}},JsonMetadata.prototype.generateSchemaProperty=function(e,t,o){if(e.isLocalizable)return{oneOf:[{type:"string"},{$ref:this.getChemeRefName("locstring",o)}]};var n=e.schemaType(),r=e.schemaRef(),i={};if(n&&(i.type=n),e.hasChoices){var s=e.getChoices(null);Array.isArray(s)&&s.length>0&&(i.enum=this.getChoicesValues(s))}if(r&&("array"===n?"string"===e.className?i.items={type:e.className}:i.items={$ref:this.getChemeRefName(e.className,o)}:i.$ref=this.getChemeRefName(r,o),this.generateChemaClass(e.className,t,!1)),e.baseClassName){var a=this.getChildrenClasses(e.baseClassName,!0);"question"==e.baseClassName&&a.push(this.findClass("panel")),i.items={anyOf:[]};for(var l=0;l<a.length;l++){var u=a[l].name;i.items.anyOf.push({$ref:this.getChemeRefName(u,o)}),this.generateChemaClass(u,t,!1)}}return i},JsonMetadata.prototype.getChemeRefName=function(e,t){return"#/definitions/"+e},JsonMetadata.prototype.generateChemaClass=function(e,t,o){if(!t[e]){var n=this.findClass(e);if(n){var r=!!n.parentName&&"base"!=n.parentName;r&&this.generateChemaClass(n.parentName,t,o);var i={type:"object",$id:e};t[e]=i;var s={properties:{}};this.generateSchemaProperties(n,s,t,o),r?i.allOf=[{$ref:this.getChemeRefName(n.parentName,o)},{properties:s.properties}]:i.properties=s.properties,Array.isArray(s.required)&&(i.required=s.required)}}},JsonMetadata.prototype.getChoicesValues=function(e){var t=[];return e.forEach(function(e){"object"==typeof e&&void 0!==e.value?t.push(e.value):t.push(e)}),t},JsonMetadata}(),d=function(){function JsonError(e,t){this.type=e,this.message=t,this.description="",this.at=-1,this.end=-1}return JsonError.prototype.getFullDescription=function(){return this.message+(this.description?"\n"+this.description:"")},JsonError}(),h=function(e){function JsonUnknownPropertyError(t,o){var n=e.call(this,"unknownproperty","The property '"+t+"' in class '"+o+"' is unknown.")||this;n.propertyName=t,n.className=o;var r=v.metaData.getProperties(o);if(r){n.description="The list of available properties are: ";for(var i=0;i<r.length;i++)i>0&&(n.description+=", "),n.description+=r[i].name;n.description+="."}return n}return a(JsonUnknownPropertyError,e),JsonUnknownPropertyError}(d),g=function(e){function JsonMissingTypeErrorBase(t,o,n){var r=e.call(this,o,n)||this;r.baseClassName=t,r.type=o,r.message=n,r.description="The following types are available: ";for(var i=v.metaData.getChildrenClasses(t,!0),s=0;s<i.length;s++)s>0&&(r.description+=", "),r.description+="'"+i[s].name+"'";return r.description+=".",r}return a(JsonMissingTypeErrorBase,e),JsonMissingTypeErrorBase}(d),f=function(e){function JsonMissingTypeError(t,o){var n=e.call(this,o,"missingtypeproperty","The property type is missing in the object. Please take a look at property: '"+t+"'.")||this;return n.propertyName=t,n.baseClassName=o,n}return a(JsonMissingTypeError,e),JsonMissingTypeError}(g),y=function(e){function JsonIncorrectTypeError(t,o){var n=e.call(this,o,"incorrecttypeproperty","The property type is incorrect in the object. Please take a look at property: '"+t+"'.")||this;return n.propertyName=t,n.baseClassName=o,n}return a(JsonIncorrectTypeError,e),JsonIncorrectTypeError}(g),m=function(e){function JsonRequiredPropertyError(t,o){var n=e.call(this,"requiredproperty","The property '"+t+"' is required in class '"+o+"'.")||this;return n.propertyName=t,n.className=o,n}return a(JsonRequiredPropertyError,e),JsonRequiredPropertyError}(d),v=function(){function JsonObject(){this.errors=[],this.lightSerializing=!1}return Object.defineProperty(JsonObject,"metaData",{get:function(){return JsonObject.metaDataValue},enumerable:!1,configurable:!0}),JsonObject.prototype.toJsonObject=function(e,t){return void 0===t&&(t=!1),this.toJsonObjectCore(e,null,t)},JsonObject.prototype.toObject=function(e,t){this.toObjectCore(e,t);var o=this.getRequiredError(t,e);o&&this.addNewError(o,e,t)},JsonObject.prototype.toObjectCore=function(e,t){if(e){var o=null,n=void 0,r=!0;if(t.getType&&(n=t.getType(),o=JsonObject.metaData.getProperties(n),r=!!n&&!JsonObject.metaData.isDescendantOf(n,"itemvalue")),o){for(var i in t.startLoadingFromJson&&t.startLoadingFromJson(e),o=this.addDynamicProperties(t,e,o),e)if(i!==JsonObject.typePropertyName){if(i===JsonObject.positionPropertyName){t[i]=e[i];continue}var s=this.findProperty(o,i);if(!s){r&&this.addNewError(new h(i.toString(),n),e,t);continue}this.valueToObj(e[i],t,s)}t.endLoadingFromJson&&t.endLoadingFromJson()}}},JsonObject.prototype.toJsonObjectCore=function(e,t,o){if(void 0===o&&(o=!1),!e||!e.getType)return e;if("function"==typeof e.getData)return e.getData();var n={};return null==t||t.className||(n[JsonObject.typePropertyName]=t.getObjType(e.getType())),this.propertiesToJson(e,JsonObject.metaData.getProperties(e.getType()),n,o),this.propertiesToJson(e,this.getDynamicProperties(e),n,o),n},JsonObject.prototype.getDynamicProperties=function(e){return b.getDynamicPropertiesByObj(e)},JsonObject.prototype.addDynamicProperties=function(e,t,o){if(!e.getDynamicPropertyName)return o;var n=e.getDynamicPropertyName();if(!n)return o;t[n]&&(e[n]=t[n]);for(var r=this.getDynamicProperties(e),i=[],s=0;s<o.length;s++)i.push(o[s]);for(var s=0;s<r.length;s++)i.push(r[s]);return i},JsonObject.prototype.propertiesToJson=function(e,t,o,n){void 0===n&&(n=!1);for(var r=0;r<t.length;r++)this.valueToJson(e,o,t[r],n)},JsonObject.prototype.valueToJson=function(e,t,o,n){if(void 0===n&&(n=!1),!1!==o.isSerializable&&(!1!==o.isLightSerializable||!this.lightSerializing)){var r=o.getValue(e);if(!(!n&&o.isDefaultValueByObj(e,r))){if(this.isValueArray(r)){for(var i=[],s=0;s<r.length;s++)i.push(this.toJsonObjectCore(r[s],o,n));r=i.length>0?i:null}else r=this.toJsonObjectCore(r,o,n);var a="function"==typeof e.getPropertyValue&&null!==e.getPropertyValue(o.name,null);(!n||!a)&&o.isDefaultValueByObj(e,r)||b.onSerializingProperty&&b.onSerializingProperty(e,o,r,t)||(t[o.name]=r)}}},JsonObject.prototype.valueToObj=function(e,t,o){if(null!=e){if(this.removePos(o,e),null!=o&&o.hasToUseSetValue){o.setValue(t,e,this);return}if(this.isValueArray(e)){this.valueToArray(e,t,o.name,o);return}var n=this.createNewObj(e,o);n.newObj&&(this.toObjectCore(e,n.newObj),e=n.newObj),n.error||(null!=o?o.setValue(t,e,this):t[o.name]=e)}},JsonObject.prototype.removePos=function(e,t){!e||!e.type||0>e.type.indexOf("value")||this.removePosFromObj(t)},JsonObject.prototype.removePosFromObj=function(e){if(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.removePosFromObj(e[t]);e[JsonObject.positionPropertyName]&&delete e[JsonObject.positionPropertyName]}},JsonObject.prototype.isValueArray=function(e){return e&&Array.isArray(e)},JsonObject.prototype.createNewObj=function(e,t){var o={newObj:null,error:null},n=this.getClassNameForNewObj(e,t);return o.newObj=n?JsonObject.metaData.createClass(n,e):null,o.error=this.checkNewObjectOnErrors(o.newObj,e,t,n),o},JsonObject.prototype.getClassNameForNewObj=function(e,t){var o=null!=t&&t.className?t.className:void 0;if(o||(o=e[JsonObject.typePropertyName]),!o)return o;o=o.toLowerCase();var n=t.classNamePart;return n&&0>o.indexOf(n)&&(o+=n),o},JsonObject.prototype.checkNewObjectOnErrors=function(e,t,o,n){var r=null;return e?r=this.getRequiredError(e,t):o.baseClassName&&(r=n?new y(o.name,o.baseClassName):new f(o.name,o.baseClassName)),r&&this.addNewError(r,t,e),r},JsonObject.prototype.getRequiredError=function(e,t){if(!e.getType||"function"==typeof e.getData)return null;var o=e.getType(),n=JsonObject.metaData.getRequiredProperties(o);if(!Array.isArray(n))return null;for(var r=0;r<n.length;r++){var i=b.findProperty(o,n[r]);if(i&&s.Helpers.isValueEmpty(i.defaultValue)&&!t[i.name])return new m(i.name,o)}return null},JsonObject.prototype.addNewError=function(e,t,o){if(e.jsonObj=t,e.element=o,this.errors.push(e),t){var n=t[JsonObject.positionPropertyName];n&&(e.at=n.start,e.end=n.end)}},JsonObject.prototype.valueToArray=function(e,t,o,n){if(!t[o]||this.isValueArray(t[o])){t[o]&&e.length>0&&t[o].splice(0,t[o].length);var r=t[o]?t[o]:[];this.addValuesIntoArray(e,r,n),t[o]||(t[o]=r)}},JsonObject.prototype.addValuesIntoArray=function(e,t,o){for(var n=0;n<e.length;n++){var r=this.createNewObj(e[n],o);r.newObj?(e[n].name&&(r.newObj.name=e[n].name),e[n].valueName&&(r.newObj.valueName=e[n].valueName.toString()),t.push(r.newObj),this.toObjectCore(e[n],r.newObj)):r.error||t.push(e[n])}},JsonObject.prototype.findProperty=function(e,t){if(!e)return null;for(var o=0;o<e.length;o++){var n=e[o];if(n.name==t||n.alternativeName==t)return n}return null},JsonObject.typePropertyName="type",JsonObject.positionPropertyName="pos",JsonObject.metaDataValue=new p,JsonObject}(),b=v.metaData},"./src/list.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"defaultListCss",function(){return d}),o.d(t,"ListModel",function(){return h});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./actions/container */"./src/actions/container.ts"),s=o(/*! ./actions/action */"./src/actions/action.ts"),a=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),l=o(/*! ./element-helper */"./src/element-helper.ts"),u=o(/*! ./utils/utils */"./src/utils/utils.ts"),c=o(/*! ./settings */"./src/settings.ts"),p=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},d={root:"sv-list__container",item:"sv-list__item",searchClearButtonIcon:"sv-list__filter-clear-button",loadingIndicator:"sv-list__loading-indicator",itemSelected:"sv-list__item--selected",itemWithIcon:"sv-list__item--with-icon",itemDisabled:"sv-list__item--disabled",itemFocused:"sv-list__item--focused",itemIcon:"sv-list__item-icon",itemSeparator:"sv-list__item-separator",itemBody:"sv-list__item-body",itemsContainer:"sv-list",itemsContainerFiltering:"sv-list--filtering",filter:"sv-list__filter",filterIcon:"sv-list__filter-icon",filterInput:"sv-list__input",emptyContainer:"sv-list__empty-container",emptyText:"sv-list__empty-text"},h=function(e){function ListModel(t,o,n,r,i,s){var l=e.call(this)||this;return l.onSelectionChanged=o,l.allowSelection=n,l.onFilterStringChangedCallback=i,l.elementId=s,l.onItemClick=function(e){!l.isItemDisabled(e)&&(l.isExpanded=!1,l.allowSelection&&(l.selectedItem=e),l.onSelectionChanged&&l.onSelectionChanged(e))},l.isItemDisabled=function(e){return void 0!==e.enabled&&!e.enabled},l.isItemSelected=function(e){return l.areSameItems(l.selectedItem,e)},l.isItemFocused=function(e){return l.areSameItems(l.focusedItem,e)},l.getListClass=function(){return new a.CssClassBuilder().append(l.cssClasses.itemsContainer).append(l.cssClasses.itemsContainerFiltering,!!l.filterString&&l.visibleActions.length!==l.visibleItems.length).toString()},l.getItemClass=function(e){return new a.CssClassBuilder().append(l.cssClasses.item).append(l.cssClasses.itemWithIcon,!!e.iconName).append(l.cssClasses.itemDisabled,l.isItemDisabled(e)).append(l.cssClasses.itemFocused,l.isItemFocused(e)).append(l.cssClasses.itemSelected,l.isItemSelected(e)).append(e.css).toString()},l.getItemIndent=function(e){return((e.level||0)+1)*ListModel.INDENT+"px"},l.setItems(t),l.selectedItem=r,l}return p(ListModel,e),ListModel.prototype.hasText=function(e,t){if(!t)return!0;var o=(e.title||"").toLocaleLowerCase();return(o=c.settings.comparator.normalizeTextCallback(o,"filter")).indexOf(t.toLocaleLowerCase())>-1},ListModel.prototype.isItemVisible=function(e){return e.visible&&(!this.shouldProcessFilter||this.hasText(e,this.filterString))},Object.defineProperty(ListModel.prototype,"visibleItems",{get:function(){var e=this;return this.visibleActions.filter(function(t){return e.isItemVisible(t)})},enumerable:!1,configurable:!0}),Object.defineProperty(ListModel.prototype,"shouldProcessFilter",{get:function(){return!this.onFilterStringChangedCallback},enumerable:!1,configurable:!0}),ListModel.prototype.onFilterStringChanged=function(e){var t=this;this.onFilterStringChangedCallback&&this.onFilterStringChangedCallback(e),this.isEmpty=0===this.renderedActions.filter(function(e){return t.isItemVisible(e)}).length},ListModel.prototype.scrollToItem=function(e,t){var o=this;void 0===t&&(t=0),setTimeout(function(){if(o.listContainerHtmlElement){var n=o.listContainerHtmlElement.querySelector("."+e);n&&setTimeout(function(){n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},t)}},t)},ListModel.prototype.setOnFilterStringChangedCallback=function(e){this.onFilterStringChangedCallback=e},ListModel.prototype.setItems=function(t,o){var n=this;void 0===o&&(o=!0),e.prototype.setItems.call(this,t,o),this.elementId&&this.renderedActions.forEach(function(e){e.elementId=n.elementId+e.id}),!this.isAllDataLoaded&&this.actions.length&&this.actions.push(this.loadingIndicator)},ListModel.prototype.onSet=function(){this.showFilter=this.searchEnabled&&(this.forceShowFilter||(this.actions||[]).length>ListModel.MINELEMENTCOUNT),e.prototype.onSet.call(this)},ListModel.prototype.getDefaultCssClasses=function(){return d},ListModel.prototype.areSameItems=function(e,t){return this.areSameItemsCallback?this.areSameItemsCallback(e,t):!!e&&!!t&&e.id==t.id},Object.defineProperty(ListModel.prototype,"filterStringPlaceholder",{get:function(){return this.getLocalizationString("filterStringPlaceholder")},enumerable:!1,configurable:!0}),Object.defineProperty(ListModel.prototype,"emptyMessage",{get:function(){return this.isAllDataLoaded?this.getLocalizationString("emptyMessage"):this.loadingText},enumerable:!1,configurable:!0}),Object.defineProperty(ListModel.prototype,"scrollableContainer",{get:function(){return this.listContainerHtmlElement.querySelector("."+this.getDefaultCssClasses().itemsContainer)},enumerable:!1,configurable:!0}),Object.defineProperty(ListModel.prototype,"loadingText",{get:function(){return this.getLocalizationString("loadingFile")},enumerable:!1,configurable:!0}),Object.defineProperty(ListModel.prototype,"loadingIndicator",{get:function(){return this.loadingIndicatorValue||(this.loadingIndicatorValue=new s.Action({id:"loadingIndicator",title:this.loadingText,action:function(){},css:this.cssClasses.loadingIndicator})),this.loadingIndicatorValue},enumerable:!1,configurable:!0}),ListModel.prototype.goToItems=function(e){if("ArrowDown"===e.key||40===e.keyCode){var t=e.target.parentElement.parentElement.querySelector("ul"),o=Object(u.getFirstVisibleChild)(t);t&&o&&(l.ElementHelper.focusElement(o),e.preventDefault())}},ListModel.prototype.onMouseMove=function(e){this.resetFocusedItem()},ListModel.prototype.onKeyDown=function(e){var t=e.target;"ArrowDown"===e.key||40===e.keyCode?(l.ElementHelper.focusElement(l.ElementHelper.getNextElementPreorder(t)),e.preventDefault()):("ArrowUp"===e.key||38===e.keyCode)&&(l.ElementHelper.focusElement(l.ElementHelper.getNextElementPostorder(t)),e.preventDefault())},ListModel.prototype.onPointerDown=function(e,t){},ListModel.prototype.refresh=function(){this.filterString="",this.resetFocusedItem()},ListModel.prototype.onClickSearchClearButton=function(e){e.currentTarget.parentElement.querySelector("input").focus(),this.refresh()},ListModel.prototype.resetFocusedItem=function(){this.focusedItem=void 0},ListModel.prototype.focusFirstVisibleItem=function(){this.focusedItem=this.visibleItems[0]},ListModel.prototype.focusLastVisibleItem=function(){this.focusedItem=this.visibleItems[this.visibleItems.length-1]},ListModel.prototype.initFocusedItem=function(){var e=this;this.focusedItem=this.visibleItems.filter(function(t){return t.visible&&e.isItemSelected(t)})[0],this.focusedItem||this.focusFirstVisibleItem()},ListModel.prototype.focusNextVisibleItem=function(){if(this.focusedItem){var e=this.visibleItems,t=e.indexOf(this.focusedItem),o=e[t+1];o?this.focusedItem=o:this.focusFirstVisibleItem()}else this.initFocusedItem()},ListModel.prototype.focusPrevVisibleItem=function(){if(this.focusedItem){var e=this.visibleItems,t=e.indexOf(this.focusedItem),o=e[t-1];o?this.focusedItem=o:this.focusLastVisibleItem()}else this.initFocusedItem()},ListModel.prototype.selectFocusedItem=function(){this.focusedItem&&this.onItemClick(this.focusedItem)},ListModel.prototype.initListContainerHtmlElement=function(e){this.listContainerHtmlElement=e},ListModel.prototype.onLastItemRended=function(e){!this.isAllDataLoaded&&e===this.actions[this.actions.length-1]&&this.listContainerHtmlElement&&(this.hasVerticalScroller=l.ElementHelper.hasVerticalScroller(this.scrollableContainer))},ListModel.prototype.scrollToFocusedItem=function(){this.scrollToItem(this.getDefaultCssClasses().itemFocused)},ListModel.prototype.scrollToSelectedItem=function(){this.scrollToItem(this.getDefaultCssClasses().itemSelected,110)},ListModel.prototype.addScrollEventListener=function(e){e&&(this.scrollHandler=e),this.scrollHandler&&this.scrollableContainer.addEventListener("scroll",this.scrollHandler)},ListModel.prototype.removeScrollEventListener=function(){this.scrollHandler&&this.scrollableContainer.removeEventListener("scroll",this.scrollHandler)},ListModel.prototype.dispose=function(){e.prototype.dispose.call(this),this.loadingIndicatorValue&&this.loadingIndicatorValue.dispose(),this.listContainerHtmlElement=void 0},ListModel.INDENT=16,ListModel.MINELEMENTCOUNT=10,__decorate([Object(r.property)({defaultValue:!0,onSet:function(e,t){t.onSet()}})],ListModel.prototype,"searchEnabled",void 0),__decorate([Object(r.property)({defaultValue:!1})],ListModel.prototype,"showFilter",void 0),__decorate([Object(r.property)({defaultValue:!1})],ListModel.prototype,"forceShowFilter",void 0),__decorate([Object(r.property)({defaultValue:!1})],ListModel.prototype,"isExpanded",void 0),__decorate([Object(r.property)({})],ListModel.prototype,"selectedItem",void 0),__decorate([Object(r.property)()],ListModel.prototype,"focusedItem",void 0),__decorate([Object(r.property)({onSet:function(e,t){t.onFilterStringChanged(t.filterString)}})],ListModel.prototype,"filterString",void 0),__decorate([Object(r.property)({defaultValue:!1})],ListModel.prototype,"hasVerticalScroller",void 0),__decorate([Object(r.property)({defaultValue:!0})],ListModel.prototype,"isAllDataLoaded",void 0),__decorate([Object(r.property)({defaultValue:!1})],ListModel.prototype,"showSearchClearButton",void 0),__decorate([Object(r.property)({defaultValue:!0})],ListModel.prototype,"renderElements",void 0),ListModel}(i.ActionContainer)},"./src/localizablestring.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"LocalizableString",function(){return a}),o.d(t,"LocalizableStrings",function(){return l});var n=o(/*! ./helpers */"./src/helpers.ts"),r=o(/*! ./surveyStrings */"./src/surveyStrings.ts"),i=o(/*! ./settings */"./src/settings.ts"),s=o(/*! ./base */"./src/base.ts"),a=function(){function LocalizableString(e,t,o){void 0===t&&(t=!1),this.owner=e,this.useMarkdown=t,this.name=o,this.values={},this.htmlValues={},this.onStringChanged=new s.EventBase,this.onCreating()}return Object.defineProperty(LocalizableString,"defaultLocale",{get:function(){return i.settings.localization.defaultLocaleName},set:function(e){i.settings.localization.defaultLocaleName=e},enumerable:!1,configurable:!0}),Object.defineProperty(LocalizableString.prototype,"localizationName",{get:function(){return this._localizationName},set:function(e){this._localizationName!=e&&(this._localizationName=e,this.strChanged())},enumerable:!1,configurable:!0}),LocalizableString.prototype.getIsMultiple=function(){return!1},Object.defineProperty(LocalizableString.prototype,"locale",{get:function(){if(this.owner&&this.owner.getLocale){var e=this.owner.getLocale();if(e||!this.sharedData)return e}return this.sharedData?this.sharedData.locale:""},enumerable:!1,configurable:!0}),LocalizableString.prototype.strChanged=function(){this.searchableText=void 0,void 0!==this.renderedText&&(this.calculatedTextValue=this.calcText(),this.renderedText!==this.calculatedTextValue&&(this.renderedText=void 0,this.calculatedTextValue=void 0),this.htmlValues={},this.onChanged(),this.onStringChanged.fire(this,{}))},Object.defineProperty(LocalizableString.prototype,"text",{get:function(){return this.pureText},set:function(e){this.setLocaleText(this.locale,e)},enumerable:!1,configurable:!0}),Object.defineProperty(LocalizableString.prototype,"calculatedText",{get:function(){return this.renderedText=void 0!==this.calculatedTextValue?this.calculatedTextValue:this.calcText(),this.calculatedTextValue=void 0,this.renderedText},enumerable:!1,configurable:!0}),LocalizableString.prototype.calcText=function(){var e=this.pureText;return e&&this.owner&&this.owner.getProcessedText&&e.indexOf("{")>-1&&(e=this.owner.getProcessedText(e)),this.onGetTextCallback&&(e=this.onGetTextCallback(e)),e},Object.defineProperty(LocalizableString.prototype,"pureText",{get:function(){var e=this.locale;e||(e=this.defaultLoc);var t=this.getValue(e);if(this.isValueEmpty(t)&&e===this.defaultLoc&&(t=this.getValue(r.surveyLocalization.defaultLocale)),this.isValueEmpty(t)){var o=this.getRootDialect(e);o&&(t=this.getValue(o))}return this.isValueEmpty(t)&&e!==this.defaultLoc&&(t=this.getValue(this.defaultLoc)),this.isValueEmpty(t)&&this.getLocalizationName()&&(t=this.getLocalizationStr(),this.onGetLocalizationTextCallback&&(t=this.onGetLocalizationTextCallback(t))),t||(t=""),t},enumerable:!1,configurable:!0}),LocalizableString.prototype.getRootDialect=function(e){if(!e)return e;var t=e.indexOf("-");return t>-1?e.substring(0,t):""},LocalizableString.prototype.getLocalizationName=function(){return this.sharedData?this.sharedData.localizationName:this.localizationName},LocalizableString.prototype.getLocalizationStr=function(){var e=this.getLocalizationName();return e?r.surveyLocalization.getString(e,this.locale):""},Object.defineProperty(LocalizableString.prototype,"hasHtml",{get:function(){return this.hasHtmlValue()},enumerable:!1,configurable:!0}),Object.defineProperty(LocalizableString.prototype,"html",{get:function(){return this.hasHtml?this.getHtmlValue():""},enumerable:!1,configurable:!0}),Object.defineProperty(LocalizableString.prototype,"isEmpty",{get:function(){return 0==this.getValuesKeys().length},enumerable:!1,configurable:!0}),Object.defineProperty(LocalizableString.prototype,"textOrHtml",{get:function(){return this.hasHtml?this.getHtmlValue():this.calculatedText},enumerable:!1,configurable:!0}),Object.defineProperty(LocalizableString.prototype,"renderedHtml",{get:function(){return this.textOrHtml},enumerable:!1,configurable:!0}),LocalizableString.prototype.getLocaleText=function(e){return this.getLocaleTextCore(e)||""},LocalizableString.prototype.getLocaleTextCore=function(e){return e||(e=this.defaultLoc),this.getValue(e)},LocalizableString.prototype.isLocaleTextEqualsWithDefault=function(e,t){var o=this.getLocaleTextCore(e);return!o&&this.onGetDefaultTextCallback&&(o=this.onGetDefaultTextCallback()),o===t||this.isValueEmpty(o)&&this.isValueEmpty(t)},LocalizableString.prototype.clear=function(){this.setJson(void 0)},LocalizableString.prototype.clearLocale=function(e){this.setLocaleText(e,void 0)},LocalizableString.prototype.setLocaleText=function(e,t){if(e=this.getValueLoc(e),!this.storeDefaultText&&this.isLocaleTextEqualsWithDefault(e,t)){if(!this.isValueEmpty(t)||e&&e!==this.defaultLoc)return;var o=r.surveyLocalization.defaultLocale,n=this.getValue(o);o&&!this.isValueEmpty(n)&&(this.setValue(o,t),this.fireStrChanged(o,n));return}if(i.settings.localization.storeDuplicatedTranslations||this.isValueEmpty(t)||!e||e==this.defaultLoc||this.getValue(e)||t!=this.getLocaleText(this.defaultLoc)){var s=this.curLocale;e||(e=this.defaultLoc);var a=this.onStrChanged&&e===s?this.pureText:void 0;delete this.htmlValues[e],this.isValueEmpty(t)?this.deleteValue(e):"string"==typeof t&&(this.canRemoveLocValue(e,t)?this.setLocaleText(e,null):(this.setValue(e,t),e==this.defaultLoc&&this.deleteValuesEqualsToDefault(t))),this.fireStrChanged(e,a)}},LocalizableString.prototype.isValueEmpty=function(e){return null==e||!this.localizationName&&""===e},Object.defineProperty(LocalizableString.prototype,"curLocale",{get:function(){return this.locale?this.locale:this.defaultLoc},enumerable:!1,configurable:!0}),LocalizableString.prototype.canRemoveLocValue=function(e,t){if(i.settings.localization.storeDuplicatedTranslations||e===this.defaultLoc)return!1;var o=this.getRootDialect(e);if(!o)return t==this.getLocaleText(this.defaultLoc);var n=this.getLocaleText(o);return n?n==t:this.canRemoveLocValue(o,t)},LocalizableString.prototype.fireStrChanged=function(e,t){if(this.strChanged(),this.onStrChanged){var o=this.pureText;(e!==this.curLocale||t!==o)&&this.onStrChanged(t,o)}},LocalizableString.prototype.hasNonDefaultText=function(){var e=this.getValuesKeys();return 0!=e.length&&(e.length>1||e[0]!=this.defaultLoc)},LocalizableString.prototype.getLocales=function(){var e=this.getValuesKeys();return 0==e.length?[]:e},LocalizableString.prototype.getJson=function(){if(this.sharedData)return this.sharedData.getJson();var e=this.getValuesKeys();return 0==e.length?null:1!=e.length||e[0]!=i.settings.localization.defaultLocaleName||i.settings.serialization.localizableStringSerializeAsObject?this.values:this.values[e[0]]},LocalizableString.prototype.setJson=function(e){if(this.sharedData){this.sharedData.setJson(e);return}if(this.values={},this.htmlValues={},null!=e){if("string"==typeof e)this.setLocaleText(null,e);else for(var t in e)this.setLocaleText(t,e[t]);this.strChanged()}},Object.defineProperty(LocalizableString.prototype,"renderAs",{get:function(){return this.owner&&"function"==typeof this.owner.getRenderer&&this.owner.getRenderer(this.name)||LocalizableString.defaultRenderer},enumerable:!1,configurable:!0}),Object.defineProperty(LocalizableString.prototype,"renderAsData",{get:function(){return this.owner&&"function"==typeof this.owner.getRendererContext&&this.owner.getRendererContext(this)||this},enumerable:!1,configurable:!0}),LocalizableString.prototype.equals=function(e){return this.sharedData?this.sharedData.equals(e):!!e&&!!e.values&&n.Helpers.isTwoValueEquals(this.values,e.values,!1,!0,!1)},LocalizableString.prototype.setFindText=function(e){if(this.searchText!=e){if(this.searchText=e,!this.searchableText){var t=this.textOrHtml;this.searchableText=t?t.toLowerCase():""}var o=this.searchableText,n=o&&e?o.indexOf(e):void 0;return n<0&&(n=void 0),(void 0!=n||this.searchIndex!=n)&&(this.searchIndex=n,this.onSearchChanged&&this.onSearchChanged()),void 0!=this.searchIndex}},LocalizableString.prototype.onChanged=function(){},LocalizableString.prototype.onCreating=function(){},LocalizableString.prototype.hasHtmlValue=function(){if(!this.owner||!this.useMarkdown)return!1;var e=this.locale;if(e||(e=this.defaultLoc),void 0!==this.htmlValues[e])return!!this.htmlValues[e];var t=this.calculatedText;if(!t||this.getLocalizationName()&&t===this.getLocalizationStr())return!1;var o=this.owner.getMarkdownHtml(t,this.name);return this.htmlValues[e]=o,!!o},LocalizableString.prototype.getHtmlValue=function(){var e=this.locale;return e||(e=this.defaultLoc),this.htmlValues[e]},LocalizableString.prototype.deleteValuesEqualsToDefault=function(e){if(!i.settings.localization.storeDuplicatedTranslations)for(var t=this.getValuesKeys(),o=0;o<t.length;o++)t[o]!=this.defaultLoc&&this.getValue(t[o])==e&&this.deleteValue(t[o])},LocalizableString.prototype.getValue=function(e){return this.sharedData?this.sharedData.getValue(e):this.values[this.getValueLoc(e)]},LocalizableString.prototype.setValue=function(e,t){this.sharedData?this.sharedData.setValue(e,t):this.values[this.getValueLoc(e)]=t},LocalizableString.prototype.deleteValue=function(e){this.sharedData?this.sharedData.deleteValue(e):delete this.values[this.getValueLoc(e)]},LocalizableString.prototype.getValueLoc=function(e){return this.disableLocalization?i.settings.localization.defaultLocaleName:e},LocalizableString.prototype.getValuesKeys=function(){return this.sharedData?this.sharedData.getValuesKeys():Object.keys(this.values)},Object.defineProperty(LocalizableString.prototype,"defaultLoc",{get:function(){return i.settings.localization.defaultLocaleName},enumerable:!1,configurable:!0}),LocalizableString.SerializeAsObject=!1,LocalizableString.defaultRenderer="sv-string-viewer",LocalizableString.editableRenderer="sv-string-editor",LocalizableString}(),l=function(){function LocalizableStrings(e){this.owner=e,this.values={}}return LocalizableStrings.prototype.getIsMultiple=function(){return!0},Object.defineProperty(LocalizableStrings.prototype,"locale",{get:function(){return this.owner&&this.owner.getLocale?this.owner.getLocale():""},enumerable:!1,configurable:!0}),Object.defineProperty(LocalizableStrings.prototype,"value",{get:function(){return this.getValue("")},set:function(e){this.setValue("",e)},enumerable:!1,configurable:!0}),Object.defineProperty(LocalizableStrings.prototype,"text",{get:function(){return Array.isArray(this.value)?this.value.join("\n"):""},set:function(e){this.value=e?e.split("\n"):[]},enumerable:!1,configurable:!0}),LocalizableStrings.prototype.getLocaleText=function(e){var t=this.getValueCore(e,!e||e===this.locale);return t&&Array.isArray(t)&&0!=t.length?t.join("\n"):""},LocalizableStrings.prototype.setLocaleText=function(e,t){var o=t?t.split("\n"):null;this.setValue(e,o)},LocalizableStrings.prototype.getValue=function(e){return this.getValueCore(e)},LocalizableStrings.prototype.getValueCore=function(e,t){if(void 0===t&&(t=!0),e=this.getLocale(e),this.values[e])return this.values[e];if(t){var o=i.settings.localization.defaultLocaleName;if(e!==o&&this.values[o])return this.values[o]}return[]},LocalizableStrings.prototype.setValue=function(e,t){e=this.getLocale(e);var o=n.Helpers.createCopy(this.values);t&&0!=t.length?this.values[e]=t:delete this.values[e],this.onValueChanged&&this.onValueChanged(o,this.values)},LocalizableStrings.prototype.hasValue=function(e){return void 0===e&&(e=""),!this.isEmpty&&this.getValue(e).length>0},Object.defineProperty(LocalizableStrings.prototype,"isEmpty",{get:function(){return 0==this.getValuesKeys().length},enumerable:!1,configurable:!0}),LocalizableStrings.prototype.getLocale=function(e){return e||(e=this.locale)||i.settings.localization.defaultLocaleName},LocalizableStrings.prototype.getLocales=function(){var e=this.getValuesKeys();return 0==e.length?[]:e},LocalizableStrings.prototype.getJson=function(){var e=this.getValuesKeys();return 0==e.length?null:1!=e.length||e[0]!=i.settings.localization.defaultLocaleName||i.settings.serialization.localizableStringSerializeAsObject?n.Helpers.createCopy(this.values):this.values[e[0]]},LocalizableStrings.prototype.setJson=function(e){if(this.values={},e){if(Array.isArray(e))this.setValue(null,e);else for(var t in e)this.setValue(t,e[t])}},LocalizableStrings.prototype.getValuesKeys=function(){return Object.keys(this.values)},LocalizableStrings}()},"./src/localization/english.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"englishStrings",function(){return n});var n={pagePrevText:"Previous",pageNextText:"Next",completeText:"Complete",previewText:"Preview",editText:"Edit",startSurveyText:"Start",otherItemText:"Other (describe)",noneItemText:"None",selectAllItemText:"Select All",progressText:"Page {0} of {1}",indexText:"{0} of {1}",panelDynamicProgressText:"{0} of {1}",panelDynamicTabTextFormat:"Panel {panelIndex}",questionsProgressText:"Answered {0}/{1} questions",emptySurvey:"The survey doesn't contain visible pages or questions.",completingSurvey:"Thank you for completing the survey",completingSurveyBefore:"Our records show that you have already completed this survey.",loadingSurvey:"Loading Survey...",placeholder:"Select...",ratingOptionsCaption:"Select...",value:"value",requiredError:"Response required.",requiredErrorInPanel:"Response required: answer at least one question.",requiredInAllRowsError:"Response required: answer questions in all rows.",numericError:"The value should be numeric.",minError:"The value should not be less than {0}",maxError:"The value should not be greater than {0}",textMinLength:"Please enter at least {0} character(s).",textMaxLength:"Please enter no more than {0} character(s).",textMinMaxLength:"Please enter at least {0} and no more than {1} characters.",minRowCountError:"Please fill in at least {0} row(s).",minSelectError:"Please select at least {0} variant(s).",maxSelectError:"Please select no more than {0} variant(s).",numericMinMax:"The '{0}' should be at least {1} and at most {2}",numericMin:"The '{0}' should be at least {1}",numericMax:"The '{0}' should be at most {1}",invalidEmail:"Please enter a valid e-mail address.",invalidExpression:"The expression: {0} should return 'true'.",urlRequestError:"The request returned error '{0}'. {1}",urlGetChoicesError:"The request returned empty data or the 'path' property is incorrect",exceedMaxSize:"The file size should not exceed {0}.",otherRequiredError:"Response required: enter another value.",uploadingFile:"Your file is uploading. Please wait several seconds and try again.",loadingFile:"Loading...",chooseFile:"Choose file(s)...",noFileChosen:"No file chosen",filePlaceholder:"Drag and drop a file here or click the button below to select a file to upload.",confirmDelete:"Do you want to delete the record?",keyDuplicationError:"This value should be unique.",addColumn:"Add Column",addRow:"Add Row",removeRow:"Remove",emptyRowsText:"There are no rows.",addPanel:"Add new",removePanel:"Remove",choices_Item:"item",matrix_column:"Column",matrix_row:"Row",multipletext_itemname:"text",savingData:"The results are being saved on the server...",savingDataError:"An error occurred and we could not save the results.",savingDataSuccess:"The results were saved successfully!",saveAgainButton:"Try again",timerMin:"min",timerSec:"sec",timerSpentAll:"You have spent {0} on this page and {1} in total.",timerSpentPage:"You have spent {0} on this page.",timerSpentSurvey:"You have spent {0} in total.",timerLimitAll:"You have spent {0} of {1} on this page and {2} of {3} in total.",timerLimitPage:"You have spent {0} of {1} on this page.",timerLimitSurvey:"You have spent {0} of {1} in total.",clearCaption:"Clear",signaturePlaceHolder:"Sign here",chooseFileCaption:"Select File",takePhotoCaption:"Take Photo",photoPlaceholder:"Click the button below to take a photo using the camera.",fileOrPhotoPlaceholder:"Drag and drop or select a file to upload or take a photo using the camera.",replaceFileCaption:"Replace file",removeFileCaption:"Remove this file",booleanCheckedLabel:"Yes",booleanUncheckedLabel:"No",confirmRemoveFile:"Are you sure that you want to remove this file: {0}?",confirmRemoveAllFiles:"Are you sure that you want to remove all files?",questionTitlePatternText:"Question Title",modalCancelButtonText:"Cancel",modalApplyButtonText:"Apply",filterStringPlaceholder:"Type to search...",emptyMessage:"No data to display",noEntriesText:"There are no entries yet.\nClick the button below to add a new entry.",noEntriesReadonlyText:"There are no entries.",more:"More",tagboxDoneButtonCaption:"OK",selectToRankEmptyRankedAreaText:"All choices are ranked",selectToRankEmptyUnrankedAreaText:"Drag and drop choices here to rank them",ok:"OK",cancel:"Cancel"}},"./src/martixBase.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionMatrixBaseModel",function(){return p});var n,r=o(/*! ./itemvalue */"./src/itemvalue.ts"),i=o(/*! ./question */"./src/question.ts"),s=o(/*! ./jsonobject */"./src/jsonobject.ts"),a=o(/*! ./conditions */"./src/conditions.ts"),l=o(/*! ./helpers */"./src/helpers.ts"),u=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),c=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},p=function(e){function QuestionMatrixBaseModel(t){var o=e.call(this,t)||this;return o.generatedVisibleRows=null,o.generatedTotalRow=null,o.filteredRows=null,o.filteredColumns=null,o.columns=o.createColumnValues(),o.rows=o.createItemValues("rows"),o}return c(QuestionMatrixBaseModel,e),QuestionMatrixBaseModel.prototype.createColumnValues=function(){return this.createItemValues("columns")},QuestionMatrixBaseModel.prototype.getType=function(){return"matrixbase"},QuestionMatrixBaseModel.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.updateVisibilityBasedOnRows()},Object.defineProperty(QuestionMatrixBaseModel.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixBaseModel.prototype,"showHeader",{get:function(){return this.getPropertyValue("showHeader")},set:function(e){this.setPropertyValue("showHeader",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixBaseModel.prototype,"columns",{get:function(){return this.getPropertyValue("columns")},set:function(e){this.setPropertyValue("columns",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixBaseModel.prototype,"visibleColumns",{get:function(){return this.filteredColumns?this.filteredColumns:this.columns},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixBaseModel.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},set:function(e){var t=this.processRowsOnSet(e);this.setPropertyValue("rows",t),this.filterItems()},enumerable:!1,configurable:!0}),QuestionMatrixBaseModel.prototype.processRowsOnSet=function(e){return e},QuestionMatrixBaseModel.prototype.getVisibleRows=function(){return[]},Object.defineProperty(QuestionMatrixBaseModel.prototype,"visibleRows",{get:function(){return this.getVisibleRows()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixBaseModel.prototype,"rowsVisibleIf",{get:function(){return this.getPropertyValue("rowsVisibleIf","")},set:function(e){this.setPropertyValue("rowsVisibleIf",e),this.filterItems()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixBaseModel.prototype,"columnsVisibleIf",{get:function(){return this.getPropertyValue("columnsVisibleIf","")},set:function(e){this.setPropertyValue("columnsVisibleIf",e),this.filterItems()},enumerable:!1,configurable:!0}),QuestionMatrixBaseModel.prototype.runCondition=function(t,o){e.prototype.runCondition.call(this,t,o),this.runItemsCondition(t,o)},QuestionMatrixBaseModel.prototype.filterItems=function(){return this.areInvisibleElementsShowing?(this.onRowsChanged(),!1):!this.isLoadingFromJson&&!!this.data&&this.runItemsCondition(this.getDataFilteredValues(),this.getDataFilteredProperties())},QuestionMatrixBaseModel.prototype.onColumnsChanged=function(){},QuestionMatrixBaseModel.prototype.onRowsChanged=function(){this.updateVisibilityBasedOnRows(),this.fireCallback(this.visibleRowsChangedCallback)},QuestionMatrixBaseModel.prototype.updateVisibilityBasedOnRows=function(){this.hideIfRowsEmpty&&(this.visible=this.rows.length>0&&(!this.filteredRows||this.filteredRows.length>0))},QuestionMatrixBaseModel.prototype.shouldRunColumnExpression=function(){return!this.survey||!this.survey.areInvisibleElementsShowing},QuestionMatrixBaseModel.prototype.hasRowsAsItems=function(){return!0},QuestionMatrixBaseModel.prototype.runItemsCondition=function(e,t){var o=null;if(this.filteredRows&&!l.Helpers.isValueEmpty(this.defaultValue)){o=[];for(var n=0;n<this.filteredRows.length;n++)o.push(this.filteredRows[n])}var r=this.hasRowsAsItems()&&this.runConditionsForRows(e,t),i=this.runConditionsForColumns(e,t);return(r=i||r)&&(this.isClearValueOnHidden&&(this.filteredColumns||this.filteredRows)&&this.clearIncorrectValues(),o&&this.restoreNewVisibleRowsValues(o),this.clearGeneratedRows(),i&&this.onColumnsChanged(),this.onRowsChanged()),r},QuestionMatrixBaseModel.prototype.clearGeneratedRows=function(){this.generatedVisibleRows=null},QuestionMatrixBaseModel.prototype.runConditionsForRows=function(e,t){var o=!!this.survey&&this.survey.areInvisibleElementsShowing,n=!o&&this.rowsVisibleIf?new a.ConditionRunner(this.rowsVisibleIf):null;this.filteredRows=[];var i=r.ItemValue.runConditionsForItems(this.rows,this.filteredRows,n,e,t,!o);return this.filteredRows.length===this.rows.length&&(this.filteredRows=null),i},QuestionMatrixBaseModel.prototype.runConditionsForColumns=function(e,t){var o=this.survey&&!this.survey.areInvisibleElementsShowing&&this.columnsVisibleIf?new a.ConditionRunner(this.columnsVisibleIf):null;this.filteredColumns=[];var n=r.ItemValue.runConditionsForItems(this.columns,this.filteredColumns,o,e,t,this.shouldRunColumnExpression());return this.filteredColumns.length===this.columns.length&&(this.filteredColumns=null),n},QuestionMatrixBaseModel.prototype.clearIncorrectValues=function(){var t=this.value;if(t){var o=null,n=!1,i=this.filteredRows?this.filteredRows:this.rows,s=this.filteredColumns?this.filteredColumns:this.columns;for(var a in t)r.ItemValue.getItemByValue(i,a)&&r.ItemValue.getItemByValue(s,t[a])?(null==o&&(o={}),o[a]=t[a]):n=!0;n&&(this.value=o),e.prototype.clearIncorrectValues.call(this)}},QuestionMatrixBaseModel.prototype.clearInvisibleValuesInRows=function(){if(!this.isEmpty()){for(var e=this.getUnbindValue(this.value),t=this.rows,o=0;o<t.length;o++){var n=t[o].value;e[n]&&!t[o].isVisible&&delete e[n]}this.isTwoValueEquals(e,this.value)||(this.value=e)}},QuestionMatrixBaseModel.prototype.restoreNewVisibleRowsValues=function(e){var t=this.filteredRows?this.filteredRows:this.rows,o=this.defaultValue,n=this.getUnbindValue(this.value),i=!1;for(var s in o)r.ItemValue.getItemByValue(t,s)&&!r.ItemValue.getItemByValue(e,s)&&(null==n&&(n={}),n[s]=o[s],i=!0);i&&(this.value=n)},QuestionMatrixBaseModel.prototype.needResponsiveWidth=function(){return!0},QuestionMatrixBaseModel.prototype.getTableCss=function(){return new u.CssClassBuilder().append(this.cssClasses.root).append(this.cssClasses.noHeader,!this.showHeader).append(this.cssClasses.rootAlternateRows,this.alternateRows).append(this.cssClasses.rootVerticalAlignTop,"top"===this.verticalAlign).append(this.cssClasses.rootVerticalAlignMiddle,"middle"===this.verticalAlign).toString()},Object.defineProperty(QuestionMatrixBaseModel.prototype,"columnMinWidth",{get:function(){return this.getPropertyValue("columnMinWidth","")},set:function(e){this.setPropertyValue("columnMinWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixBaseModel.prototype,"rowTitleWidth",{get:function(){return this.getPropertyValue("rowTitleWidth","")},set:function(e){this.setPropertyValue("rowTitleWidth",e)},enumerable:!1,configurable:!0}),__decorate([Object(s.property)({defaultValue:"middle"})],QuestionMatrixBaseModel.prototype,"verticalAlign",void 0),__decorate([Object(s.property)()],QuestionMatrixBaseModel.prototype,"alternateRows",void 0),QuestionMatrixBaseModel}(i.Question);s.Serializer.addClass("matrixbase",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},"columnsVisibleIf:condition","rowsVisibleIf:condition","columnMinWidth",{name:"showHeader:boolean",default:!0},{name:"verticalAlign",choices:["top","middle"],default:"middle"},{name:"alternateRows:boolean",default:!1}],void 0,"question")},"./src/multiSelectListModel.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"MultiSelectListModel",function(){return a});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./list */"./src/list.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},a=function(e){function MultiSelectListModel(t,o,n,r,i,s){var a=e.call(this,t,o,n,void 0,i,s)||this;return a.onItemClick=function(e){!a.isItemDisabled(e)&&(a.isExpanded=!1,a.isItemSelected(e)?(a.selectedItems.splice(a.selectedItems.indexOf(e),1)[0],a.onSelectionChanged&&a.onSelectionChanged(e,"removed")):(a.selectedItems.push(e),a.onSelectionChanged&&a.onSelectionChanged(e,"added")))},a.isItemDisabled=function(e){return void 0!==e.enabled&&!e.enabled},a.isItemSelected=function(e){return!!a.allowSelection&&a.selectedItems.filter(function(t){return a.areSameItems(t,e)}).length>0},a.setSelectedItems(r||[]),a}return s(MultiSelectListModel,e),MultiSelectListModel.prototype.updateItemState=function(){var e=this;this.actions.forEach(function(t){var o=e.isItemSelected(t);t.visible=!e.hideSelectedItems||!o})},MultiSelectListModel.prototype.updateState=function(){var e=this;this.updateItemState(),this.isEmpty=0===this.renderedActions.filter(function(t){return e.isItemVisible(t)}).length},MultiSelectListModel.prototype.setSelectedItems=function(e){this.selectedItems=e,this.updateState()},MultiSelectListModel.prototype.selectFocusedItem=function(){e.prototype.selectFocusedItem.call(this),this.hideSelectedItems&&this.focusNextVisibleItem()},__decorate([Object(r.property)()],MultiSelectListModel.prototype,"hideSelectedItems",void 0),MultiSelectListModel}(i.ListModel)},"./src/notifier.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"Notifier",function(){return c});var n,r=o(/*! ./base */"./src/base.ts"),i=o(/*! ./settings */"./src/settings.ts"),s=o(/*! ./jsonobject */"./src/jsonobject.ts"),a=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),l=o(/*! ./actions/container */"./src/actions/container.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},c=function(e){function Notifier(t){var o=e.call(this)||this;return o.cssClasses=t,o.timeout=i.settings.notifications.lifetime,o.timer=void 0,o.actionsVisibility={},o.showActions=!0,o.actionBar=new l.ActionContainer,o.actionBar.updateCallback=function(e){o.actionBar.actions.forEach(function(e){return e.cssClasses={}})},o.css=o.cssClasses.root,o}return u(Notifier,e),Notifier.prototype.getCssClass=function(e){return new a.CssClassBuilder().append(this.cssClasses.root).append(this.cssClasses.info,"error"!==e&&"success"!==e).append(this.cssClasses.error,"error"===e).append(this.cssClasses.success,"success"===e).append(this.cssClasses.shown,this.active).toString()},Notifier.prototype.updateActionsVisibility=function(e){var t=this;this.actionBar.actions.forEach(function(o){return o.visible=t.showActions&&t.actionsVisibility[o.id]===e})},Notifier.prototype.notify=function(e,t,o){var n=this;void 0===t&&(t="info"),void 0===o&&(o=!1),this.isDisplayed=!0,setTimeout(function(){n.updateActionsVisibility(t),n.message=e,n.active=!0,n.css=n.getCssClass(t),n.timer&&(clearTimeout(n.timer),n.timer=void 0),o||(n.timer=setTimeout(function(){n.timer=void 0,n.active=!1,n.css=n.getCssClass(t)},n.timeout))},1)},Notifier.prototype.addAction=function(e,t){e.visible=!1,e.innerCss=this.cssClasses.button;var o=this.actionBar.addAction(e);this.actionsVisibility[o.id]=t},__decorate([Object(s.property)({defaultValue:!1})],Notifier.prototype,"active",void 0),__decorate([Object(s.property)({defaultValue:!1})],Notifier.prototype,"isDisplayed",void 0),__decorate([Object(s.property)()],Notifier.prototype,"message",void 0),__decorate([Object(s.property)()],Notifier.prototype,"css",void 0),Notifier}(r.Base)},"./src/page.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"PageModel",function(){return u});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./panel */"./src/panel.ts"),s=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),a=o(/*! ./drag-drop-page-helper-v1 */"./src/drag-drop-page-helper-v1.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},u=function(e){function PageModel(t){void 0===t&&(t="");var o=e.call(this,t)||this;return o.hasShownValue=!1,o.timeSpent=0,o.locTitle.onGetTextCallback=function(e){return o.canShowPageNumber()&&e?o.num+". "+e:e},o.createLocalizableString("navigationTitle",o,!0),o.createLocalizableString("navigationDescription",o,!0),o.dragDropPageHelper=new a.DragDropPageHelperV1(o),o}return l(PageModel,e),PageModel.prototype.getType=function(){return"page"},PageModel.prototype.toString=function(){return this.name},Object.defineProperty(PageModel.prototype,"isPage",{get:function(){return!0},enumerable:!1,configurable:!0}),PageModel.prototype.canShowPageNumber=function(){return this.survey&&this.survey.showPageNumbers},PageModel.prototype.canShowTitle=function(){return this.survey&&this.survey.showPageTitles},Object.defineProperty(PageModel.prototype,"navigationTitle",{get:function(){return this.getLocalizableStringText("navigationTitle")},set:function(e){this.setLocalizableStringText("navigationTitle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(PageModel.prototype,"locNavigationTitle",{get:function(){return this.getLocalizableString("navigationTitle")},enumerable:!1,configurable:!0}),Object.defineProperty(PageModel.prototype,"navigationDescription",{get:function(){return this.getLocalizableStringText("navigationDescription")},set:function(e){this.setLocalizableStringText("navigationDescription",e)},enumerable:!1,configurable:!0}),Object.defineProperty(PageModel.prototype,"locNavigationDescription",{get:function(){return this.getLocalizableString("navigationDescription")},enumerable:!1,configurable:!0}),PageModel.prototype.navigationLocStrChanged=function(){this.locNavigationTitle.strChanged(),this.locNavigationDescription.strChanged()},Object.defineProperty(PageModel.prototype,"renderedNavigationTitle",{get:function(){return this.locNavigationTitle.renderedHtml||this.title||this.name},enumerable:!1,configurable:!0}),Object.defineProperty(PageModel.prototype,"passed",{get:function(){return this.getPropertyValue("passed",!1)},set:function(e){this.setPropertyValue("passed",e)},enumerable:!1,configurable:!0}),PageModel.prototype.removeFromParent=function(){this.survey&&this.removeSelfFromList(this.survey.pages)},PageModel.prototype.onFirstRendering=function(){this.wasShown||e.prototype.onFirstRendering.call(this)},Object.defineProperty(PageModel.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},set:function(e){this.setPropertyValue("visibleIndex",e)},enumerable:!1,configurable:!0}),PageModel.prototype.canRenderFirstRows=function(){return!this.isDesignMode||0==this.visibleIndex},Object.defineProperty(PageModel.prototype,"isStartPage",{get:function(){return this.survey&&this.survey.isPageStarted(this)},enumerable:!1,configurable:!0}),Object.defineProperty(PageModel.prototype,"isStarted",{get:function(){return this.isStartPage},enumerable:!1,configurable:!0}),PageModel.prototype.calcCssClasses=function(e){var t={page:{},pageTitle:"",pageDescription:"",row:"",rowMultiple:"",pageRow:"",rowCompact:""};return this.copyCssClasses(t.page,e.page),e.pageTitle&&(t.pageTitle=e.pageTitle),e.pageDescription&&(t.pageDescription=e.pageDescription),e.row&&(t.row=e.row),e.pageRow&&(t.pageRow=e.pageRow),e.rowMultiple&&(t.rowMultiple=e.rowMultiple),e.rowCompact&&(t.rowCompact=e.rowCompact),this.survey&&this.survey.updatePageCssClasses(this,t),t},Object.defineProperty(PageModel.prototype,"cssTitle",{get:function(){return this.cssClasses.page?new s.CssClassBuilder().append(this.cssClasses.page.title).toString():""},enumerable:!1,configurable:!0}),Object.defineProperty(PageModel.prototype,"cssRoot",{get:function(){return this.cssClasses.page&&this.survey?new s.CssClassBuilder().append(this.cssClasses.page.root).append(this.cssClasses.page.emptyHeaderRoot,!this.survey.renderedHasHeader&&!(this.survey.isShowProgressBarOnTop&&!this.survey.isStaring)).toString():""},enumerable:!1,configurable:!0}),Object.defineProperty(PageModel.prototype,"navigationButtonsVisibility",{get:function(){return this.getPropertyValue("navigationButtonsVisibility")},set:function(e){this.setPropertyValue("navigationButtonsVisibility",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(PageModel.prototype,"isActive",{get:function(){return!!this.survey&&this.survey.currentPage===this},enumerable:!1,configurable:!0}),Object.defineProperty(PageModel.prototype,"wasShown",{get:function(){return this.hasShownValue},enumerable:!1,configurable:!0}),Object.defineProperty(PageModel.prototype,"hasShown",{get:function(){return this.wasShown},enumerable:!1,configurable:!0}),PageModel.prototype.setWasShown=function(e){if(e!=this.hasShownValue&&(this.hasShownValue=e,!this.isDesignMode&&!0===e)){for(var t=this.elements,o=0;o<t.length;o++)t[o].isPanel&&t[o].randomizeElements(this.areQuestionsRandomized);this.randomizeElements(this.areQuestionsRandomized)}},PageModel.prototype.scrollToTop=function(){this.survey&&this.survey.scrollElementToTop(this,null,this,this.id)},PageModel.prototype.getAllPanels=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var o=[];return this.addPanelsIntoList(o,e,t),o},PageModel.prototype.getPanels=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!1),this.getAllPanels(e,t)},Object.defineProperty(PageModel.prototype,"maxTimeToFinish",{get:function(){return this.getPropertyValue("maxTimeToFinish",0)},set:function(e){this.setPropertyValue("maxTimeToFinish",e)},enumerable:!1,configurable:!0}),PageModel.prototype.onNumChanged=function(e){},PageModel.prototype.onVisibleChanged=function(){this.isRandomizing||(e.prototype.onVisibleChanged.call(this),null!=this.survey&&this.survey.pageVisibilityChanged(this,this.isVisible))},PageModel.prototype.getDragDropInfo=function(){return this.dragDropPageHelper.getDragDropInfo()},PageModel.prototype.dragDropStart=function(e,t,o){void 0===o&&(o=-1),this.dragDropPageHelper.dragDropStart(e,t,o)},PageModel.prototype.dragDropMoveTo=function(e,t,o){return void 0===t&&(t=!1),void 0===o&&(o=!1),this.dragDropPageHelper.dragDropMoveTo(e,t,o)},PageModel.prototype.dragDropFinish=function(e){return void 0===e&&(e=!1),this.dragDropPageHelper.dragDropFinish(e)},PageModel.prototype.ensureRowsVisibility=function(){e.prototype.ensureRowsVisibility.call(this),this.getPanels().forEach(function(e){return e.ensureRowsVisibility()})},__decorate([Object(r.property)({defaultValue:-1,onSet:function(e,t){return t.onNumChanged(e)}})],PageModel.prototype,"num",void 0),PageModel}(i.PanelModelBase);r.Serializer.addClass("page",[{name:"navigationButtonsVisibility",default:"inherit",choices:["inherit","show","hide"]},{name:"maxTimeToFinish:number",default:0,minValue:0},{name:"navigationTitle",visibleIf:function(e){return!!e.survey&&("buttons"===e.survey.progressBarType||e.survey.showTOC)},serializationProperty:"locNavigationTitle"},{name:"navigationDescription",visibleIf:function(e){return!!e.survey&&"buttons"===e.survey.progressBarType},serializationProperty:"locNavigationDescription"},{name:"title:text",serializationProperty:"locTitle"},{name:"description:text",serializationProperty:"locDescription"}],function(){return new u},"panelbase")},"./src/panel.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionRowModel",function(){return y}),o.d(t,"PanelModelBase",function(){return m}),o.d(t,"PanelModel",function(){return v});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./helpers */"./src/helpers.ts"),s=o(/*! ./base */"./src/base.ts"),a=o(/*! ./survey-element */"./src/survey-element.ts"),l=o(/*! ./question */"./src/question.ts"),u=o(/*! ./questionfactory */"./src/questionfactory.ts"),c=o(/*! ./error */"./src/error.ts"),p=o(/*! ./settings */"./src/settings.ts"),d=o(/*! ./utils/utils */"./src/utils/utils.ts"),h=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),g=o(/*! ./drag-drop-panel-helper-v1 */"./src/drag-drop-panel-helper-v1.ts"),f=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},y=function(e){function QuestionRowModel(t){var o=e.call(this)||this;return o.panel=t,o._scrollableParent=void 0,o._updateVisibility=void 0,o.idValue=QuestionRowModel.getRowId(),o.visible=t.areInvisibleElementsShowing,o.createNewArray("elements"),o.createNewArray("visibleElements"),o}return f(QuestionRowModel,e),QuestionRowModel.getRowId=function(){return"pr_"+QuestionRowModel.rowCounter++},QuestionRowModel.prototype.startLazyRendering=function(e,t){var o=this;void 0===t&&(t=d.findScrollableParent),this._scrollableParent=t(e),this._scrollableParent===document.documentElement&&(this._scrollableParent=window);var n=this._scrollableParent.scrollHeight>this._scrollableParent.clientHeight;this.isNeedRender=!n,n&&(this._updateVisibility=function(){var t=Object(d.isElementVisible)(e,50);!o.isNeedRender&&t&&(o.isNeedRender=!0,o.stopLazyRendering())},setTimeout(function(){o._scrollableParent&&o._scrollableParent.addEventListener&&o._scrollableParent.addEventListener("scroll",o._updateVisibility),o.ensureVisibility()},10))},QuestionRowModel.prototype.ensureVisibility=function(){this._updateVisibility&&this._updateVisibility()},QuestionRowModel.prototype.stopLazyRendering=function(){this._scrollableParent&&this._updateVisibility&&this._scrollableParent.removeEventListener&&this._scrollableParent.removeEventListener("scroll",this._updateVisibility),this._scrollableParent=void 0,this._updateVisibility=void 0},QuestionRowModel.prototype.setIsLazyRendering=function(e){this.isLazyRenderingValue=e,this.isNeedRender=!e},QuestionRowModel.prototype.isLazyRendering=function(){return!0===this.isLazyRenderingValue},Object.defineProperty(QuestionRowModel.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRowModel.prototype,"elements",{get:function(){return this.getPropertyValue("elements")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRowModel.prototype,"visibleElements",{get:function(){return this.getPropertyValue("visibleElements")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRowModel.prototype,"visible",{get:function(){return this.getPropertyValue("visible",!0)},set:function(e){this.setPropertyValue("visible",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRowModel.prototype,"isNeedRender",{get:function(){return this.getPropertyValue("isneedrender",!0)},set:function(e){this.setPropertyValue("isneedrender",e)},enumerable:!1,configurable:!0}),QuestionRowModel.prototype.updateVisible=function(){var e=this.calcVisible();this.setWidth(),this.visible=e},QuestionRowModel.prototype.addElement=function(e){this.elements.push(e),this.updateVisible()},Object.defineProperty(QuestionRowModel.prototype,"index",{get:function(){return this.panel.rows.indexOf(this)},enumerable:!1,configurable:!0}),QuestionRowModel.prototype.setWidth=function(){var e,t=this.visibleElements.length;if(0!=t){for(var o=1===this.visibleElements.length,n=0,r=[],i=0;i<this.elements.length;i++){var s=this.elements[i];if(s.isVisible){s.isSingleInRow=o;var a=this.getElementWidth(s);a&&(s.renderWidth=this.getRenderedWidthFromWidth(a),r.push(s)),n<t-1&&!(this.panel.isDefaultV2Theme||(null===(e=this.panel.parentQuestion)||void 0===e?void 0:e.isDefaultV2Theme))?s.rightIndent=1:s.rightIndent=0,n++}else s.renderWidth=""}for(var i=0;i<this.elements.length;i++){var s=this.elements[i];!s.isVisible||r.indexOf(s)>-1||(0==r.length?s.renderWidth=Number.parseFloat((100/t).toFixed(6))+"%":s.renderWidth=this.getRenderedCalcWidth(s,r,t))}}},QuestionRowModel.prototype.getRenderedCalcWidth=function(e,t,o){for(var n="100%",r=0;r<t.length;r++)n+=" - "+t[r].renderWidth;var i=o-t.length;return i>1&&(n="("+n+")/"+i.toString()),"calc("+n+")"},QuestionRowModel.prototype.getElementWidth=function(e){var t=e.width;return t&&"string"==typeof t?t.trim():""},QuestionRowModel.prototype.getRenderedWidthFromWidth=function(e){return i.Helpers.isNumber(e)?e+"px":e},QuestionRowModel.prototype.calcVisible=function(){for(var e=[],t=0;t<this.elements.length;t++)this.elements[t].isVisible&&e.push(this.elements[t]);return this.needToUpdateVisibleElements(e)&&this.setPropertyValue("visibleElements",e),e.length>0},QuestionRowModel.prototype.needToUpdateVisibleElements=function(e){if(e.length!==this.visibleElements.length)return!0;for(var t=0;t<e.length;t++)if(e[t]!==this.visibleElements[t])return!0;return!1},QuestionRowModel.prototype.dispose=function(){e.prototype.dispose.call(this),this.stopLazyRendering()},QuestionRowModel.prototype.getRowCss=function(){return new h.CssClassBuilder().append(this.panel.cssClasses.row).append(this.panel.cssClasses.rowCompact,this.panel.isCompact).append(this.panel.cssClasses.pageRow,this.panel.isPage||!!this.panel.originalPage&&!this.panel.survey.isShowingPreview).append(this.panel.cssClasses.rowMultiple,this.visibleElements.length>1).toString()},QuestionRowModel.rowCounter=100,__decorate([Object(r.property)({defaultValue:null})],QuestionRowModel.prototype,"dragTypeOverMe",void 0),QuestionRowModel}(s.Base),m=function(e){function PanelModelBase(t){void 0===t&&(t="");var o=e.call(this,t)||this;return o.isQuestionsReady=!1,o.questionsValue=[],o.isRandomizing=!1,o.createNewArray("rows"),o.elementsValue=o.createNewArray("elements",o.onAddElement.bind(o),o.onRemoveElement.bind(o)),o.id=PanelModelBase.getPanelId(),o.addExpressionProperty("visibleIf",function(e,t){o.visible=!0===t},function(e){return!o.areInvisibleElementsShowing}),o.addExpressionProperty("enableIf",function(e,t){o.readOnly=!1===t}),o.addExpressionProperty("requiredIf",function(e,t){o.isRequired=!0===t}),o.createLocalizableString("requiredErrorText",o),o.registerPropertyChangedHandlers(["questionTitleLocation"],function(){o.onVisibleChanged.bind(o),o.updateElementCss(!0)}),o.registerPropertyChangedHandlers(["questionStartIndex","showQuestionNumbers"],function(){o.updateVisibleIndexes()}),o.dragDropPanelHelper=new g.DragDropPanelHelperV1(o),o}return f(PanelModelBase,e),PanelModelBase.getPanelId=function(){return"sp_"+PanelModelBase.panelCounter++},PanelModelBase.prototype.getType=function(){return"panelbase"},PanelModelBase.prototype.setSurveyImpl=function(t,o){e.prototype.setSurveyImpl.call(this,t,o),this.isDesignMode&&this.onVisibleChanged();for(var n=0;n<this.elements.length;n++)this.elements[n].setSurveyImpl(t,o)},PanelModelBase.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.updateDescriptionVisibility(this.description),this.markQuestionListDirty(),this.onRowsChanged()},Object.defineProperty(PanelModelBase.prototype,"hasTitle",{get:function(){return this.canShowTitle()&&this.locTitle.textOrHtml.length>0||this.showTitle&&this.isDesignMode&&p.settings.designMode.showEmptyTitles},enumerable:!1,configurable:!0}),PanelModelBase.prototype.delete=function(e){void 0===e&&(e=!0),this.removeFromParent(),e&&this.dispose()},PanelModelBase.prototype.removeFromParent=function(){},PanelModelBase.prototype.canShowTitle=function(){return!0},Object.defineProperty(PanelModelBase.prototype,"_showDescription",{get:function(){return(!!this.hasTitle||!this.isDesignMode)&&(this.survey&&this.survey.showPageTitles&&this.hasDescription||this.showDescription&&this.isDesignMode&&p.settings.designMode.showEmptyDescriptions)},enumerable:!1,configurable:!0}),PanelModelBase.prototype.localeChanged=function(){e.prototype.localeChanged.call(this);for(var t=0;t<this.elements.length;t++)this.elements[t].localeChanged()},PanelModelBase.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this);for(var t=0;t<this.elements.length;t++)this.elements[t].locStrsChanged()},Object.defineProperty(PanelModelBase.prototype,"renderedNavigationTitle",{get:function(){return this.title||this.name},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"requiredText",{get:function(){return this.survey&&this.isRequired?this.survey.requiredText:""},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"titlePattern",{get:function(){return this.survey?this.survey.questionTitlePattern:"numTitleRequire"},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"isRequireTextOnStart",{get:function(){return this.isRequired&&"requireNumTitle"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"isRequireTextBeforeTitle",{get:function(){return this.isRequired&&"numRequireTitle"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"isRequireTextAfterTitle",{get:function(){return this.isRequired&&"numTitleRequire"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"requiredErrorText",{get:function(){return this.getLocalizableStringText("requiredErrorText")},set:function(e){this.setLocalizableStringText("requiredErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"locRequiredErrorText",{get:function(){return this.getLocalizableString("requiredErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"questionsOrder",{get:function(){return this.getPropertyValue("questionsOrder")},set:function(e){this.setPropertyValue("questionsOrder",e)},enumerable:!1,configurable:!0}),PanelModelBase.prototype.canRandomize=function(e){return e&&"initial"!==this.questionsOrder||"random"===this.questionsOrder},PanelModelBase.prototype.randomizeElements=function(e){if(this.canRandomize(e)&&!this.isRandomizing){this.isRandomizing=!0;for(var t=[],o=this.elements,n=0;n<o.length;n++)t.push(o[n]);var r=i.Helpers.randomizeArray(t);this.setArrayPropertyDirectly("elements",r,!1),this.updateRows(),this.updateVisibleIndexes(),this.isRandomizing=!1}},Object.defineProperty(PanelModelBase.prototype,"areQuestionsRandomized",{get:function(){return"random"==("default"==this.questionsOrder&&this.survey?this.survey.questionsOrder:this.questionsOrder)},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.setPropertyValue("parent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"depth",{get:function(){return null==this.parent?0:this.parent.depth+1},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"visibleIf",{get:function(){return this.getPropertyValue("visibleIf","")},set:function(e){this.setPropertyValue("visibleIf",e)},enumerable:!1,configurable:!0}),PanelModelBase.prototype.calcCssClasses=function(e){var t={panel:{},error:{},row:"",rowMultiple:"",pageRow:"",rowCompact:""};return this.copyCssClasses(t.panel,e.panel),this.copyCssClasses(t.error,e.error),e.pageRow&&(t.pageRow=e.pageRow),e.rowCompact&&(t.rowCompact=e.rowCompact),e.row&&(t.row=e.row),e.rowMultiple&&(t.rowMultiple=e.rowMultiple),this.survey&&this.survey.updatePanelCssClasses(this,t),t},Object.defineProperty(PanelModelBase.prototype,"id",{get:function(){return this.getPropertyValue("id")},set:function(e){this.setPropertyValue("id",e)},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"isPanel",{get:function(){return!1},enumerable:!1,configurable:!0}),PanelModelBase.prototype.getPanel=function(){return this},PanelModelBase.prototype.getLayoutType=function(){return"row"},PanelModelBase.prototype.isLayoutTypeSupported=function(e){return"flow"!==e},Object.defineProperty(PanelModelBase.prototype,"questions",{get:function(){if(!this.isQuestionsReady){this.questionsValue=[];for(var e=0;e<this.elements.length;e++){var t=this.elements[e];if(t.isPanel)for(var o=t.questions,n=0;n<o.length;n++)this.questionsValue.push(o[n]);else this.questionsValue.push(t)}this.isQuestionsReady=!0}return this.questionsValue},enumerable:!1,configurable:!0}),PanelModelBase.prototype.getQuestions=function(e){var t=this.questions;if(!e)return t;var o=[];return t.forEach(function(e){o.push(e),e.getNestedQuestions().forEach(function(e){return o.push(e)})}),o},PanelModelBase.prototype.getValidName=function(e){return e?e.trim():e},PanelModelBase.prototype.getQuestionByName=function(e){for(var t=this.questions,o=0;o<t.length;o++)if(t[o].name==e)return t[o];return null},PanelModelBase.prototype.getElementByName=function(e){for(var t=this.elements,o=0;o<t.length;o++){var n=t[o];if(n.name==e)return n;var r=n.getPanel();if(r){var i=r.getElementByName(e);if(i)return i}}return null},PanelModelBase.prototype.getQuestionByValueName=function(e){for(var t=this.questions,o=0;o<t.length;o++)if(t[o].getValueName()==e)return t[o];return null},PanelModelBase.prototype.getValue=function(){var e={};return this.collectValues(e,0),e},PanelModelBase.prototype.collectValues=function(e,t){var o=this.elements;0===t&&(o=this.questions);for(var n=0;n<o.length;n++){var r=o[n];if(r.isPanel||r.isPage){var i={};r.collectValues(i,t-1)&&(e[r.name]=i)}else if(!r.isEmpty()){var a=r.getValueName();if(e[a]=r.value,this.data){var l=this.data.getComment(a);l&&(e[a+s.Base.commentSuffix]=l)}}}return!0},PanelModelBase.prototype.getDisplayValue=function(e){for(var t={},o=this.questions,n=0;n<o.length;n++){var r=o[n];r.isEmpty()||(t[e?r.title:r.getValueName()]=r.getDisplayValue(e))}return t},PanelModelBase.prototype.getComments=function(){var e={};if(!this.data)return e;for(var t=this.questions,o=0;o<t.length;o++){var n=t[o],r=this.data.getComment(n.getValueName());r&&(e[n.getValueName()]=r)}return e},PanelModelBase.prototype.clearIncorrectValues=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].clearIncorrectValues()},PanelModelBase.prototype.clearErrors=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].clearErrors();this.errors=[]},PanelModelBase.prototype.markQuestionListDirty=function(){this.isQuestionsReady=!1,this.parent&&this.parent.markQuestionListDirty()},Object.defineProperty(PanelModelBase.prototype,"elements",{get:function(){return this.elementsValue},enumerable:!1,configurable:!0}),PanelModelBase.prototype.getElementsInDesign=function(e){return void 0===e&&(e=!1),this.elements},PanelModelBase.prototype.containsElement=function(e){for(var t=0;t<this.elements.length;t++){var o=this.elements[t];if(o==e)return!0;var n=o.getPanel();if(n&&n.containsElement(e))return!0}return!1},Object.defineProperty(PanelModelBase.prototype,"isRequired",{get:function(){return this.getPropertyValue("isRequired")},set:function(e){this.setPropertyValue("isRequired",e)},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"requiredIf",{get:function(){return this.getPropertyValue("requiredIf","")},set:function(e){this.setPropertyValue("requiredIf",e)},enumerable:!1,configurable:!0}),PanelModelBase.prototype.searchText=function(t,o){e.prototype.searchText.call(this,t,o);for(var n=0;n<this.elements.length;n++)this.elements[n].searchText(t,o)},PanelModelBase.prototype.hasErrors=function(e,t,o){return void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===o&&(o=null),!this.validate(e,t,o)},PanelModelBase.prototype.validate=function(e,t,o){return void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===o&&(o=null),!0!==(o=o||{fireCallback:e,focuseOnFirstError:t,firstErrorQuestion:null,result:!1}).result&&(o.result=!1),this.hasErrorsCore(o),o.firstErrorQuestion&&o.firstErrorQuestion.focus(!0),!o.result},PanelModelBase.prototype.validateContainerOnly=function(){this.hasErrorsInPanels({fireCallback:!0}),this.parent&&this.parent.validateContainerOnly()},PanelModelBase.prototype.hasErrorsInPanels=function(e){var t=[];if(this.hasRequiredError(e,t),this.survey){var o=this.survey.validatePanel(this);o&&(t.push(o),e.result=!0)}e.fireCallback&&(this.survey&&this.survey.beforeSettingPanelErrors(this,t),this.errors=t)},PanelModelBase.prototype.getErrorCustomText=function(e,t){return this.survey?this.survey.getSurveyErrorCustomText(this,e,t):e},PanelModelBase.prototype.hasRequiredError=function(e,t){if(this.isRequired){var o=[];if(this.addQuestionsToList(o,!0),0!=o.length){for(var n=0;n<o.length;n++)if(!o[n].isEmpty())return;e.result=!0,t.push(new c.OneAnswerRequiredError(this.requiredErrorText,this)),e.focuseOnFirstError&&!e.firstErrorQuestion&&(e.firstErrorQuestion=o[0])}}},PanelModelBase.prototype.hasErrorsCore=function(e){for(var t=this.elements,o=null,n=0;n<t.length;n++)if((o=t[n]).isVisible){if(o.isPanel)o.hasErrorsCore(e);else{var r=o;r.validate(e.fireCallback,e)||(e.focuseOnFirstError&&null==e.firstErrorQuestion&&(e.firstErrorQuestion=r),e.result=!0)}}this.hasErrorsInPanels(e),this.updateContainsErrors()},PanelModelBase.prototype.getContainsErrors=function(){var t=e.prototype.getContainsErrors.call(this);if(t)return t;for(var o=this.elements,n=0;n<o.length;n++)if(o[n].containsErrors)return!0;return!1},PanelModelBase.prototype.updateElementVisibility=function(){for(var e=0;e<this.elements.length;e++){var t=this.elements[e];t.setPropertyValue("isVisible",t.isVisible),t.isPanel&&t.updateElementVisibility()}},PanelModelBase.prototype.getFirstQuestionToFocus=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),!e&&!t&&this.isCollapsed)return null;for(var o=this.elements,n=0;n<o.length;n++){var r=o[n];if(r.isVisible&&(t||!r.isCollapsed)){if(r.isPanel){var i=r.getFirstQuestionToFocus(e,t);if(i)return i}else{var s=r.getFirstQuestionToFocus(e);if(s)return s}}}return null},PanelModelBase.prototype.focusFirstQuestion=function(){var e=this.getFirstQuestionToFocus();e&&e.focus()},PanelModelBase.prototype.focusFirstErrorQuestion=function(){var e=this.getFirstQuestionToFocus(!0);e&&e.focus()},PanelModelBase.prototype.addQuestionsToList=function(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=!1),this.addElementsToList(e,t,o,!1)},PanelModelBase.prototype.addPanelsIntoList=function(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=!1),this.addElementsToList(e,t,o,!0)},PanelModelBase.prototype.addElementsToList=function(e,t,o,n){(!t||this.visible)&&this.addElementsToListCore(e,this.elements,t,o,n)},PanelModelBase.prototype.addElementsToListCore=function(e,t,o,n,r){for(var i=0;i<t.length;i++){var s=t[i];(!o||s.visible)&&((r&&s.isPanel||!r&&!s.isPanel)&&e.push(s),s.isPanel?s.addElementsToListCore(e,s.elements,o,n,r):n&&this.addElementsToListCore(e,s.getElementsInDesign(!1),o,n,r))}},PanelModelBase.prototype.updateCustomWidgets=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].updateCustomWidgets()},Object.defineProperty(PanelModelBase.prototype,"questionTitleLocation",{get:function(){return this.getPropertyValue("questionTitleLocation")},set:function(e){this.setPropertyValue("questionTitleLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),PanelModelBase.prototype.getQuestionTitleLocation=function(){return this.onGetQuestionTitleLocation?this.onGetQuestionTitleLocation():"default"!=this.questionTitleLocation?this.questionTitleLocation:this.parent?this.parent.getQuestionTitleLocation():this.survey?this.survey.questionTitleLocation:"top"},PanelModelBase.prototype.getStartIndex=function(){return this.parent?this.parent.getQuestionStartIndex():this.survey?this.survey.questionStartIndex:""},PanelModelBase.prototype.getQuestionStartIndex=function(){return this.getStartIndex()},PanelModelBase.prototype.getChildrenLayoutType=function(){return"row"},PanelModelBase.prototype.getProgressInfo=function(){return a.SurveyElement.getProgressInfoByElements(this.elements,this.isRequired)},Object.defineProperty(PanelModelBase.prototype,"root",{get:function(){for(var e=this;e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),PanelModelBase.prototype.childVisibilityChanged=function(){this.getIsPageVisible(null)!==this.getPropertyValue("isVisible",!0)&&this.onVisibleChanged()},PanelModelBase.prototype.createRowAndSetLazy=function(e){var t=this.createRow();return t.setIsLazyRendering(this.isLazyRenderInRow(e)),t},PanelModelBase.prototype.createRow=function(){return new y(this)},PanelModelBase.prototype.onSurveyLoad=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].onSurveyLoad();this.onElementVisibilityChanged(this)},PanelModelBase.prototype.onFirstRendering=function(){e.prototype.onFirstRendering.call(this);for(var t=0;t<this.elements.length;t++)this.elements[t].onFirstRendering();this.onRowsChanged()},PanelModelBase.prototype.updateRows=function(){if(!this.isLoadingFromJson){for(var e=0;e<this.elements.length;e++)this.elements[e].isPanel&&this.elements[e].updateRows();this.onRowsChanged()}},Object.defineProperty(PanelModelBase.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},enumerable:!1,configurable:!0}),PanelModelBase.prototype.ensureRowsVisibility=function(){this.rows.forEach(function(e){e.ensureVisibility()})},PanelModelBase.prototype.onRowsChanged=function(){this.isLoadingFromJson||this.setArrayPropertyDirectly("rows",this.buildRows())},PanelModelBase.prototype.onAddElement=function(e,t){var o=this;if(e.setSurveyImpl(this.surveyImpl),e.parent=this,this.markQuestionListDirty(),this.canBuildRows()){var n=p.settings.supportCreatorV2?this.getDragDropInfo():void 0;this.dragDropPanelHelper.updateRowsOnElementAdded(e,t,n,this)}e.isPanel?this.survey&&this.survey.panelAdded(e,t,this,this.root):this.survey&&this.survey.questionAdded(e,t,this,this.root),this.addElementCallback&&this.addElementCallback(e),e.registerPropertyChangedHandlers(["visible","isVisible"],function(){o.onElementVisibilityChanged(e)},this.id),e.registerPropertyChangedHandlers(["startWithNewLine"],function(){o.onElementStartWithNewLineChanged(e)},this.id),this.onElementVisibilityChanged(this)},PanelModelBase.prototype.onRemoveElement=function(e){e.parent=null,this.markQuestionListDirty(),e.unregisterPropertyChangedHandlers(["visible","isVisible","startWithNewLine"],this.id),this.updateRowsOnElementRemoved(e),this.isRandomizing||(e.isPanel?this.survey&&this.survey.panelRemoved(e):this.survey&&this.survey.questionRemoved(e),this.removeElementCallback&&this.removeElementCallback(e),this.onElementVisibilityChanged(this))},PanelModelBase.prototype.onElementVisibilityChanged=function(e){this.isLoadingFromJson||this.isRandomizing||(this.updateRowsVisibility(e),this.childVisibilityChanged(),this.parent&&this.parent.onElementVisibilityChanged(this))},PanelModelBase.prototype.onElementStartWithNewLineChanged=function(e){this.onRowsChanged()},PanelModelBase.prototype.updateRowsVisibility=function(e){for(var t=this.rows,o=0;o<t.length;o++){var n=t[o];if(n.elements.indexOf(e)>-1){n.updateVisible(),n.visible&&!n.isNeedRender&&(n.isNeedRender=!0);break}}},PanelModelBase.prototype.canBuildRows=function(){return!this.isLoadingFromJson&&"row"==this.getChildrenLayoutType()},PanelModelBase.prototype.buildRows=function(){if(!this.canBuildRows())return[];for(var e=[],t=0;t<this.elements.length;t++){var o=this.elements[t],n=0==t||o.startWithNewLine,r=n?this.createRowAndSetLazy(e.length):e[e.length-1];n&&e.push(r),r.addElement(o)}for(var t=0;t<e.length;t++)e[t].updateVisible();return e},PanelModelBase.prototype.isLazyRenderInRow=function(e){return!!this.survey&&!!this.survey.isLazyRendering&&(e>=p.settings.lazyRender.firstBatchSize||!this.canRenderFirstRows())},PanelModelBase.prototype.canRenderFirstRows=function(){return this.isPage},PanelModelBase.prototype.getDragDropInfo=function(){var e=this.getPage(this.parent);return e?e.getDragDropInfo():void 0},PanelModelBase.prototype.updateRowsOnElementRemoved=function(e){this.canBuildRows()&&this.updateRowsRemoveElementFromRow(e,this.findRowByElement(e))},PanelModelBase.prototype.updateRowsRemoveElementFromRow=function(e,t){if(t&&t.panel){var o=t.elements.indexOf(e);!(o<0)&&(t.elements.splice(o,1),t.elements.length>0?(t.elements[0].startWithNewLine=!0,t.updateVisible()):t.index>=0&&t.panel.rows.splice(t.index,1))}},PanelModelBase.prototype.findRowByElement=function(e){for(var t=this.rows,o=0;o<t.length;o++)if(t[o].elements.indexOf(e)>-1)return t[o];return null},PanelModelBase.prototype.elementWidthChanged=function(e){if(!this.isLoadingFromJson){var t=this.findRowByElement(e);t&&t.updateVisible()}},Object.defineProperty(PanelModelBase.prototype,"processedTitle",{get:function(){return this.getRenderedTitle(this.locTitle.textOrHtml)},enumerable:!1,configurable:!0}),PanelModelBase.prototype.getRenderedTitle=function(e){return null!=this.textProcessor?this.textProcessor.processText(e,!0):e},Object.defineProperty(PanelModelBase.prototype,"visible",{get:function(){return this.getPropertyValue("visible",!0)},set:function(e){e===this.visible||(this.setPropertyValue("visible",e),this.setPropertyValue("isVisible",this.isVisible),this.isLoadingFromJson||this.onVisibleChanged())},enumerable:!1,configurable:!0}),PanelModelBase.prototype.onHidingContent=function(){this.questions.forEach(function(e){return e.onHidingContent()})},PanelModelBase.prototype.onVisibleChanged=function(){if(!this.isRandomizing&&(this.setPropertyValue("isVisible",this.isVisible),this.survey&&"none"!==this.survey.getQuestionClearIfInvisible("default")&&!this.isLoadingFromJson))for(var e=this.questions,t=this.isVisible,o=0;o<e.length;o++){var n=e[o];t?n.updateValueWithDefaults():(n.clearValueIfInvisible("onHiddenContainer"),n.onHidingContent())}},PanelModelBase.prototype.notifyStateChanged=function(){e.prototype.notifyStateChanged.call(this),this.isCollapsed&&this.questions.forEach(function(e){return e.onHidingContent()})},Object.defineProperty(PanelModelBase.prototype,"isVisible",{get:function(){return this.areInvisibleElementsShowing||this.getIsPageVisible(null)},enumerable:!1,configurable:!0}),PanelModelBase.prototype.getIsPageVisible=function(e){if(!this.visible)return!1;for(var t=0;t<this.elements.length;t++)if(this.elements[t]!=e&&this.elements[t].isVisible)return!0;return!1},PanelModelBase.prototype.setVisibleIndex=function(e){if(!this.isVisible||e<0)return this.resetVisibleIndexes(),0;this.lastVisibleIndex=e;var t=e;e+=this.beforeSetVisibleIndex(e);for(var o=this.getPanelStartIndex(e),n=o,r=0;r<this.elements.length;r++)n+=this.elements[r].setVisibleIndex(n);return this.isContinueNumbering()&&(e+=n-o),e-t},PanelModelBase.prototype.updateVisibleIndexes=function(){void 0!==this.lastVisibleIndex&&(this.resetVisibleIndexes(),this.setVisibleIndex(this.lastVisibleIndex))},PanelModelBase.prototype.resetVisibleIndexes=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].setVisibleIndex(-1)},PanelModelBase.prototype.beforeSetVisibleIndex=function(e){return 0},PanelModelBase.prototype.getPanelStartIndex=function(e){return e},PanelModelBase.prototype.isContinueNumbering=function(){return!0},Object.defineProperty(PanelModelBase.prototype,"isReadOnly",{get:function(){var e=!!this.parent&&this.parent.isReadOnly,t=!!this.survey&&this.survey.isDisplayMode;return this.readOnly||e||t},enumerable:!1,configurable:!0}),PanelModelBase.prototype.onReadOnlyChanged=function(){for(var t=0;t<this.elements.length;t++){var o=this.elements[t];o.setPropertyValue("isReadOnly",o.isReadOnly)}e.prototype.onReadOnlyChanged.call(this)},PanelModelBase.prototype.updateElementCss=function(t){e.prototype.updateElementCss.call(this,t);for(var o=0;o<this.elements.length;o++)this.elements[o].updateElementCss(t)},Object.defineProperty(PanelModelBase.prototype,"enableIf",{get:function(){return this.getPropertyValue("enableIf","")},set:function(e){this.setPropertyValue("enableIf",e)},enumerable:!1,configurable:!0}),PanelModelBase.prototype.addElement=function(e,t){return void 0===t&&(t=-1),!!this.canAddElement(e)&&(t<0||t>=this.elements.length?this.elements.push(e):this.elements.splice(t,0,e),!0)},PanelModelBase.prototype.insertElementAfter=function(e,t){var o=this.elements.indexOf(t);o>=0&&this.addElement(e,o+1)},PanelModelBase.prototype.insertElementBefore=function(e,t){var o=this.elements.indexOf(t);o>=0&&this.addElement(e,o)},PanelModelBase.prototype.canAddElement=function(e){return!!e&&e.isLayoutTypeSupported(this.getChildrenLayoutType())},PanelModelBase.prototype.addQuestion=function(e,t){return void 0===t&&(t=-1),this.addElement(e,t)},PanelModelBase.prototype.addPanel=function(e,t){return void 0===t&&(t=-1),this.addElement(e,t)},PanelModelBase.prototype.addNewQuestion=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=-1);var n=u.QuestionFactory.Instance.createQuestion(e,t);return this.addQuestion(n,o)?n:null},PanelModelBase.prototype.addNewPanel=function(e){void 0===e&&(e=null);var t=this.createNewPanel(e);return this.addPanel(t)?t:null},PanelModelBase.prototype.indexOf=function(e){return this.elements.indexOf(e)},PanelModelBase.prototype.createNewPanel=function(e){var t=r.Serializer.createClass("panel");return t.name=e,t},PanelModelBase.prototype.removeElement=function(e){var t=this.elements.indexOf(e);if(t<0){for(var o=0;o<this.elements.length;o++)if(this.elements[o].removeElement(e))return!0;return!1}return this.elements.splice(t,1),!0},PanelModelBase.prototype.removeQuestion=function(e){this.removeElement(e)},PanelModelBase.prototype.runCondition=function(e,t){if(!this.isDesignMode&&!this.isLoadingFromJson){for(var o=this.elements.slice(),n=0;n<o.length;n++)o[n].runCondition(e,t);this.runConditionCore(e,t)}},PanelModelBase.prototype.onAnyValueChanged=function(e,t){for(var o=this.elements,n=0;n<o.length;n++)o[n].onAnyValueChanged(e,t)},PanelModelBase.prototype.checkBindings=function(e,t){for(var o=this.elements,n=0;n<o.length;n++)o[n].checkBindings(e,t)},PanelModelBase.prototype.dragDropAddTarget=function(e){this.dragDropPanelHelper.dragDropAddTarget(e)},PanelModelBase.prototype.dragDropFindRow=function(e){return this.dragDropPanelHelper.dragDropFindRow(e)},PanelModelBase.prototype.dragDropMoveElement=function(e,t,o){this.dragDropPanelHelper.dragDropMoveElement(e,t,o)},PanelModelBase.prototype.needResponsiveWidth=function(){var e=!1;return this.elements.forEach(function(t){t.needResponsiveWidth()&&(e=!0)}),this.rows.forEach(function(t){t.elements.length>1&&(e=!0)}),e},Object.defineProperty(PanelModelBase.prototype,"hasDescriptionUnderTitle",{get:function(){return this.hasDescription},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"cssHeader",{get:function(){return this.cssClasses.panel.header},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"cssDescription",{get:function(){return this.cssClasses.panel.description},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModelBase.prototype,"questionErrorLocation",{get:function(){return this.getPropertyValue("questionErrorLocation")},set:function(e){this.setPropertyValue("questionErrorLocation",e)},enumerable:!1,configurable:!0}),PanelModelBase.prototype.getQuestionErrorLocation=function(){return"default"!==this.questionErrorLocation?this.questionErrorLocation:this.parent?this.parent.getQuestionErrorLocation():this.survey?this.survey.questionErrorLocation:"top"},Object.defineProperty(PanelModelBase.prototype,"no",{get:function(){return""},enumerable:!1,configurable:!0}),PanelModelBase.prototype.dispose=function(){if(e.prototype.dispose.call(this),this.rows){for(var t=0;t<this.rows.length;t++)this.rows[t].dispose();this.rows.splice(0,this.rows.length)}for(var t=0;t<this.elements.length;t++)this.elements[t].dispose();this.elements.splice(0,this.elements.length)},PanelModelBase.panelCounter=100,__decorate([Object(r.property)({defaultValue:!0})],PanelModelBase.prototype,"showTitle",void 0),__decorate([Object(r.property)({defaultValue:!0})],PanelModelBase.prototype,"showDescription",void 0),PanelModelBase}(a.SurveyElement),v=function(e){function PanelModel(t){void 0===t&&(t="");var o=e.call(this,t)||this;return o.createNewArray("footerActions"),o.registerPropertyChangedHandlers(["width"],function(){o.parent&&o.parent.elementWidthChanged(o)}),o.registerPropertyChangedHandlers(["indent","innerIndent","rightIndent"],function(){o.onIndentChanged()}),o}return f(PanelModel,e),PanelModel.prototype.getType=function(){return"panel"},Object.defineProperty(PanelModel.prototype,"contentId",{get:function(){return this.id+"_content"},enumerable:!1,configurable:!0}),PanelModel.prototype.getSurvey=function(t){return(void 0===t&&(t=!1),t)?this.parent?this.parent.getSurvey(t):null:e.prototype.getSurvey.call(this,t)},PanelModel.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.onIndentChanged()},PanelModel.prototype.onSetData=function(){e.prototype.onSetData.call(this),this.onIndentChanged()},Object.defineProperty(PanelModel.prototype,"isPanel",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModel.prototype,"page",{get:function(){return this.getPage(this.parent)},set:function(e){this.setPage(this.parent,e)},enumerable:!1,configurable:!0}),PanelModel.prototype.removeFromParent=function(){this.parent&&this.removeSelfFromList(this.parent.elements)},PanelModel.prototype.moveTo=function(e,t){return void 0===t&&(t=null),this.moveToBase(this.parent,e,t)},Object.defineProperty(PanelModel.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},enumerable:!1,configurable:!0}),PanelModel.prototype.getTitleOwner=function(){return this},Object.defineProperty(PanelModel.prototype,"showNumber",{get:function(){return this.getPropertyValue("showNumber")},set:function(e){this.setPropertyValue("showNumber",e),this.notifySurveyOnVisibilityChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModel.prototype,"showQuestionNumbers",{get:function(){return this.getPropertyValue("showQuestionNumbers")},set:function(e){this.setPropertyValue("showQuestionNumbers",e),this.notifySurveyOnVisibilityChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModel.prototype,"questionStartIndex",{get:function(){return this.getPropertyValue("questionStartIndex","")},set:function(e){this.setPropertyValue("questionStartIndex",e)},enumerable:!1,configurable:!0}),PanelModel.prototype.getQuestionStartIndex=function(){return this.questionStartIndex?this.questionStartIndex:e.prototype.getQuestionStartIndex.call(this)},Object.defineProperty(PanelModel.prototype,"no",{get:function(){return this.getPropertyValue("no","")},enumerable:!1,configurable:!0}),PanelModel.prototype.setNo=function(e){this.setPropertyValue("no",i.Helpers.getNumberByIndex(this.visibleIndex,this.getStartIndex()))},PanelModel.prototype.createLocTitleProperty=function(){var t=this,o=e.prototype.createLocTitleProperty.call(this);return o.onGetTextCallback=function(e){return!e&&(t.isExpanded||t.isCollapsed)&&(e=t.name),e},o},PanelModel.prototype.beforeSetVisibleIndex=function(e){var t=-1;return this.showNumber&&(this.isDesignMode||!this.locTitle.isEmpty)&&(t=e),this.setPropertyValue("visibleIndex",t),this.setNo(t),t<0?0:1},PanelModel.prototype.getPanelStartIndex=function(e){return"off"==this.showQuestionNumbers?-1:"onpanel"==this.showQuestionNumbers?0:e},PanelModel.prototype.isContinueNumbering=function(){return"off"!=this.showQuestionNumbers&&"onpanel"!=this.showQuestionNumbers},PanelModel.prototype.notifySurveyOnVisibilityChanged=function(){null==this.survey||this.isLoadingFromJson||this.survey.panelVisibilityChanged(this,this.isVisible)},PanelModel.prototype.hasErrorsCore=function(t){e.prototype.hasErrorsCore.call(this,t),this.isCollapsed&&t.result&&t.fireCallback&&this.expand()},PanelModel.prototype.getRenderedTitle=function(t){if(!t){if(this.isCollapsed||this.isExpanded)return this.name;if(this.isDesignMode)return"["+this.name+"]"}return e.prototype.getRenderedTitle.call(this,t)},Object.defineProperty(PanelModel.prototype,"innerIndent",{get:function(){return this.getPropertyValue("innerIndent")},set:function(e){this.setPropertyValue("innerIndent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModel.prototype,"startWithNewLine",{get:function(){return this.getPropertyValue("startWithNewLine")},set:function(e){this.setPropertyValue("startWithNewLine",e)},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModel.prototype,"allowAdaptiveActions",{get:function(){return this.getPropertyValue("allowAdaptiveActions")},set:function(e){this.setPropertyValue("allowAdaptiveActions",e)},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModel.prototype,"innerPaddingLeft",{get:function(){return this.getPropertyValue("innerPaddingLeft","")},set:function(e){this.setPropertyValue("innerPaddingLeft",e)},enumerable:!1,configurable:!0}),PanelModel.prototype.onIndentChanged=function(){this.getSurvey()&&(this.innerPaddingLeft=this.getIndentSize(this.innerIndent),this.paddingLeft=this.getIndentSize(this.indent),this.paddingRight=this.getIndentSize(this.rightIndent))},PanelModel.prototype.getIndentSize=function(e){if(e<1)return"";var t=this.survey.css;return t&&t.question.indent?e*t.question.indent+"px":""},PanelModel.prototype.clearOnDeletingContainer=function(){this.elements.forEach(function(e){(e instanceof l.Question||e instanceof PanelModel)&&e.clearOnDeletingContainer()})},Object.defineProperty(PanelModel.prototype,"footerActions",{get:function(){return this.getPropertyValue("footerActions")},enumerable:!1,configurable:!0}),PanelModel.prototype.getFooterToolbar=function(){var e,t,o=this;if(!this.footerToolbarValue){var n=this.footerActions;this.hasEditButton&&n.push({id:"cancel-preview",locTitle:this.survey.locEditText,innerCss:this.survey.cssNavigationEdit,action:function(){o.cancelPreview()}}),n=this.onGetFooterActionsCallback?this.onGetFooterActionsCallback():null===(e=this.survey)||void 0===e?void 0:e.getUpdatedPanelFooterActions(this,n),this.footerToolbarValue=this.createActionContainer(this.allowAdaptiveActions);var r=this.onGetFooterToolbarCssCallback?this.onGetFooterToolbarCssCallback():"";r||(r=null===(t=this.cssClasses.panel)||void 0===t?void 0:t.footer),r&&(this.footerToolbarValue.containerCss=r),this.footerToolbarValue.setItems(n)}return this.footerToolbarValue},Object.defineProperty(PanelModel.prototype,"hasEditButton",{get:function(){return!!this.survey&&"preview"===this.survey.state&&1===this.depth},enumerable:!1,configurable:!0}),PanelModel.prototype.cancelPreview=function(){this.hasEditButton&&this.survey.cancelPreviewByPage(this)},Object.defineProperty(PanelModel.prototype,"cssTitle",{get:function(){return this.getCssTitle(this.cssClasses.panel)},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModel.prototype,"cssError",{get:function(){return this.getCssError(this.cssClasses)},enumerable:!1,configurable:!0}),Object.defineProperty(PanelModel.prototype,"showErrorsAbovePanel",{get:function(){return this.isDefaultV2Theme},enumerable:!1,configurable:!0}),PanelModel.prototype.getCssError=function(e){var t=this.isDefaultV2Theme,o=new h.CssClassBuilder().append(this.cssClasses.error.root).append(this.cssClasses.error.outsideQuestion,t).append(this.cssClasses.error.aboveQuestion,t);return o.append("panel-error-root",o.isEmpty()).toString()},PanelModel.prototype.onVisibleChanged=function(){e.prototype.onVisibleChanged.call(this),this.notifySurveyOnVisibilityChanged()},PanelModel.prototype.needResponsiveWidth=function(){return!this.startWithNewLine||e.prototype.needResponsiveWidth.call(this)},PanelModel.prototype.focusIn=function(){this.survey&&this.survey.whenPanelFocusIn(this)},PanelModel.prototype.getHasFrameV2=function(){return e.prototype.getHasFrameV2.call(this)&&(!this.originalPage||this.survey.isShowingPreview)},PanelModel.prototype.getIsNested=function(){return e.prototype.getIsNested.call(this)&&void 0!==this.parent},PanelModel.prototype.getCssRoot=function(t){return new h.CssClassBuilder().append(e.prototype.getCssRoot.call(this,t)).append(t.container).append(t.asPage,!!this.originalPage&&!this.survey.isShowingPreview).append(t.invisible,!this.isDesignMode&&this.areInvisibleElementsShowing&&!this.visible).toString()},PanelModel.prototype.getContainerCss=function(){return this.getCssRoot(this.cssClasses.panel)},PanelModel}(m);r.Serializer.addClass("panelbase",["name",{name:"elements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},{name:"readOnly:boolean",overridingProperty:"enableIf"},"visibleIf:condition","enableIf:condition","requiredIf:condition",{name:"questionTitleLocation",default:"default",choices:["default","top","bottom","left","hidden"]},{name:"title:text",serializationProperty:"locTitle"},{name:"description:text",serializationProperty:"locDescription"},{name:"questionsOrder",default:"default",choices:["default","initial","random"]},{name:"questionErrorLocation",default:"default",choices:["default","top","bottom"]}],function(){return new m}),r.Serializer.addClass("panel",[{name:"state",default:"default",choices:["default","collapsed","expanded"]},{name:"isRequired:switch",overridingProperty:"requiredIf"},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"startWithNewLine:boolean",default:!0},"width",{name:"minWidth",defaultFunc:function(){return"auto"}},{name:"maxWidth",defaultFunc:function(){return p.settings.maxWidth}},{name:"innerIndent:number",default:0,choices:[0,1,2,3]},{name:"indent:number",default:0,choices:[0,1,2,3]},{name:"page",isSerializable:!1,visibleIf:function(e){var t=e?e.survey:null;return!t||!t.pages||t.pages.length>1},choices:function(e){var t=e?e.survey:null;return t?t.pages.map(function(e){return{value:e.name,text:e.title}}):[]}},"showNumber:boolean",{name:"showQuestionNumbers",default:"default",choices:["default","onpanel","off"]},"questionStartIndex",{name:"allowAdaptiveActions:boolean",default:!0,visible:!1}],function(){return new v},"panelbase"),u.ElementFactory.Instance.registerElement("panel",function(e){return new v(e)})},"./src/popup-dropdown-view-model.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"PopupDropdownViewModel",function(){return p});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./utils/popup */"./src/utils/popup.ts"),s=o(/*! ./popup-view-model */"./src/popup-view-model.ts"),a=o(/*! ./utils/devices */"./src/utils/devices.ts"),l=o(/*! ./settings */"./src/settings.ts"),u=o(/*! ./survey */"./src/survey.ts"),c=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},p=function(e){function PopupDropdownViewModel(t,o){var n=e.call(this,t)||this;return n.targetElement=o,n.scrollEventCallBack=function(e){if(n.isOverlay&&a.IsTouch){e.stopPropagation(),e.preventDefault();return}n.hidePopup()},n.resizeEventCallback=function(){var e=window.visualViewport;document.documentElement.style.setProperty("--sv-popup-overlay-height",e.height*e.scale+"px")},n.resizeWindowCallback=function(){n.isOverlay||n.updatePosition(!0,"vue"===u.SurveyModel.platform||"vue3"===u.SurveyModel.platform)},n.clientY=0,n.isTablet=!1,n.touchStartEventCallback=function(e){n.clientY=e.touches[0].clientY},n.touchMoveEventCallback=function(e){n.preventScrollOuside(e,n.clientY-e.changedTouches[0].clientY)},n.model.onRecalculatePosition.add(n.recalculatePositionHandler),n}return c(PopupDropdownViewModel,e),PopupDropdownViewModel.prototype.calculateIsTablet=function(e,t){var o=Math.min(e,t);this.isTablet=o>=PopupDropdownViewModel.tabletSizeBreakpoint},PopupDropdownViewModel.prototype._updatePosition=function(){if(this.targetElement){var e,t,o,n=this.targetElement.getBoundingClientRect(),r=null===(e=this.container)||void 0===e?void 0:e.querySelector(this.containerSelector);if(r){var s=null===(t=this.container)||void 0===t?void 0:t.querySelector(this.fixedPopupContainer),a=r.querySelector(this.scrollingContentSelector),l=window.getComputedStyle(r),u=parseFloat(l.marginLeft)||0,c=parseFloat(l.marginRight)||0,p=r.offsetHeight-a.offsetHeight+a.scrollHeight,d=r.getBoundingClientRect().width;this.model.setWidthByTarget&&(this.minWidth=n.width+"px");var h=this.model.verticalPosition,g=this.getActualHorizontalPosition();if(window){var f=[p,.9*window.innerHeight,null===(o=window.visualViewport)||void 0===o?void 0:o.height];p=Math.ceil(Math.min.apply(Math,f.filter(function(e){return"number"==typeof e}))),h=i.PopupUtils.updateVerticalPosition(n,p,this.model.verticalPosition,this.model.showPointer,window.innerHeight)}this.popupDirection=i.PopupUtils.calculatePopupDirection(h,g);var y=i.PopupUtils.calculatePosition(n,p,d+u+c,h,g,this.showHeader,this.model.positionMode);if(window){var m=i.PopupUtils.getCorrectedVerticalDimensions(y.top,p,window.innerHeight);if(m.height&&(this.height=m.height+"px",y.top=m.top),this.model.setWidthByTarget)this.width=n.width+"px",y.left=n.left;else{var v=i.PopupUtils.updateHorizontalDimensions(y.left,d,window.innerWidth,g,this.model.positionMode,{left:u,right:c});v&&(this.width=v.width?v.width+"px":void 0,y.left=v.left)}}if(s){var b=s.getBoundingClientRect();y.top-=b.top,y.left-=b.left}this.left=y.left+"px",this.top=y.top+"px",this.showHeader&&(this.pointerTarget=i.PopupUtils.calculatePointerTarget(n,y.top,y.left,h,g,u,c),this.pointerTarget.top+="px",this.pointerTarget.left+="px")}}},PopupDropdownViewModel.prototype.getActualHorizontalPosition=function(){var e=this.model.horizontalPosition;return document&&"rtl"==document.defaultView.getComputedStyle(document.body).direction&&("left"===this.model.horizontalPosition?e="right":"right"===this.model.horizontalPosition&&(e="left")),e},PopupDropdownViewModel.prototype.getStyleClass=function(){return e.prototype.getStyleClass.call(this).append("sv-popup--dropdown",!this.isOverlay).append("sv-popup--dropdown-overlay",this.isOverlay&&"overlay"!==this.model.overlayDisplayMode).append("sv-popup--tablet",this.isTablet&&this.isOverlay).append("sv-popup--show-pointer",!this.isOverlay&&this.showHeader).append("sv-popup--"+this.popupDirection,!this.isOverlay&&this.showHeader)},PopupDropdownViewModel.prototype.getShowHeader=function(){return this.model.showPointer&&!this.isOverlay},PopupDropdownViewModel.prototype.getPopupHeaderTemplate=function(){return"popup-pointer"},PopupDropdownViewModel.prototype.setComponentElement=function(t,o){e.prototype.setComponentElement.call(this,t),t&&t.parentElement&&!this.isModal&&(this.targetElement=o||t.parentElement)},PopupDropdownViewModel.prototype.resetComponentElement=function(){e.prototype.resetComponentElement.call(this),this.targetElement=void 0},PopupDropdownViewModel.prototype.updateOnShowing=function(){var e=l.settings.environment.root;this.prevActiveElement=e.activeElement,this.isOverlay?this.resetDimensionsAndPositionStyleProperties():this.updatePosition(!0,!1),this.switchFocus(),window.addEventListener("resize",this.resizeWindowCallback),this.shouldCreateResizeCallback&&(window.visualViewport.addEventListener("resize",this.resizeEventCallback),this.container&&(this.container.addEventListener("touchstart",this.touchStartEventCallback),this.container.addEventListener("touchmove",this.touchMoveEventCallback)),this.calculateIsTablet(window.innerWidth,window.innerHeight),this.resizeEventCallback()),window.addEventListener("scroll",this.scrollEventCallBack)},Object.defineProperty(PopupDropdownViewModel.prototype,"shouldCreateResizeCallback",{get:function(){return!!window.visualViewport&&this.isOverlay&&a.IsTouch},enumerable:!1,configurable:!0}),PopupDropdownViewModel.prototype.updatePosition=function(e,t){var o=this;void 0===t&&(t=!0),e&&(this.height="auto"),t?setTimeout(function(){o._updatePosition()},1):this._updatePosition()},PopupDropdownViewModel.prototype.updateOnHiding=function(){e.prototype.updateOnHiding.call(this),window.removeEventListener("resize",this.resizeWindowCallback),this.shouldCreateResizeCallback&&(window.visualViewport.removeEventListener("resize",this.resizeEventCallback),this.container&&(this.container.removeEventListener("touchstart",this.touchStartEventCallback),this.container.removeEventListener("touchmove",this.touchMoveEventCallback))),window.removeEventListener("scroll",this.scrollEventCallBack),this.isDisposed||(this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.minWidth=void 0)},PopupDropdownViewModel.prototype.onModelChanging=function(t){var o=this;this.model&&this.model.onRecalculatePosition.remove(this.recalculatePositionHandler),this.recalculatePositionHandler||(this.recalculatePositionHandler=function(e,t){o.isOverlay||o.updatePosition(t.isResetHeight)}),e.prototype.onModelChanging.call(this,t),t.onRecalculatePosition.add(this.recalculatePositionHandler)},PopupDropdownViewModel.prototype.dispose=function(){e.prototype.dispose.call(this),this.updateOnHiding(),this.model&&(this.model.onRecalculatePosition.remove(this.recalculatePositionHandler),this.recalculatePositionHandler=void 0),this.resetComponentElement()},PopupDropdownViewModel.tabletSizeBreakpoint=600,__decorate([Object(r.property)()],PopupDropdownViewModel.prototype,"isTablet",void 0),__decorate([Object(r.property)({defaultValue:"left"})],PopupDropdownViewModel.prototype,"popupDirection",void 0),__decorate([Object(r.property)({defaultValue:{left:"0px",top:"0px"}})],PopupDropdownViewModel.prototype,"pointerTarget",void 0),PopupDropdownViewModel}(s.PopupBaseViewModel)},"./src/popup-modal-view-model.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"PopupModalViewModel",function(){return s});var n,r=o(/*! ./popup-view-model */"./src/popup-view-model.ts"),i=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),s=function(e){function PopupModalViewModel(t){var o=e.call(this,t)||this;return o.onScrollOutsideCallback=function(e){o.preventScrollOuside(e,e.deltaY)},o}return i(PopupModalViewModel,e),PopupModalViewModel.prototype.getStyleClass=function(){return e.prototype.getStyleClass.call(this).append("sv-popup--modal",!this.isOverlay)},PopupModalViewModel.prototype.getShowFooter=function(){return!0},PopupModalViewModel.prototype.createFooterActionBar=function(){var t=this;e.prototype.createFooterActionBar.call(this),this.footerToolbarValue.addAction({id:"apply",visibleIndex:20,title:this.applyButtonText,innerCss:"sv-popup__body-footer-item sv-popup__button sv-popup__button--apply sd-btn sd-btn--action",action:function(){t.apply()}})},Object.defineProperty(PopupModalViewModel.prototype,"applyButtonText",{get:function(){return this.getLocalizationString("modalApplyButtonText")},enumerable:!1,configurable:!0}),PopupModalViewModel.prototype.apply=function(){(!this.model.onApply||this.model.onApply())&&this.hidePopup()},PopupModalViewModel.prototype.clickOutside=function(){},PopupModalViewModel.prototype.onKeyDown=function(t){("Escape"===t.key||27===t.keyCode)&&this.model.onCancel(),e.prototype.onKeyDown.call(this,t)},PopupModalViewModel.prototype.updateOnShowing=function(){this.container&&this.container.addEventListener("wheel",this.onScrollOutsideCallback,{passive:!1}),e.prototype.updateOnShowing.call(this)},PopupModalViewModel.prototype.updateOnHiding=function(){this.container&&this.container.removeEventListener("wheel",this.onScrollOutsideCallback),e.prototype.updateOnHiding.call(this)},PopupModalViewModel}(r.PopupBaseViewModel)},"./src/popup-survey.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"PopupSurveyModel",function(){return l}),o.d(t,"SurveyWindowModel",function(){return u});var n,r=o(/*! ./base */"./src/base.ts"),i=o(/*! ./survey */"./src/survey.ts"),s=o(/*! ./jsonobject */"./src/jsonobject.ts"),a=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},l=function(e){function PopupSurveyModel(t,o){void 0===o&&(o=null);var n=e.call(this)||this;return n.closeOnCompleteTimeout=0,o?n.surveyValue=o:n.surveyValue=n.createSurvey(t),n.surveyValue.showTitle=!1,"undefined"!=typeof document&&(n.windowElement=document.createElement("div")),n.survey.onComplete.add(function(e,t){n.onSurveyComplete()}),n.registerPropertyChangedHandlers(["isShowing"],function(){n.showingChangedCallback&&n.showingChangedCallback()}),n.registerPropertyChangedHandlers(["isExpanded"],function(){n.onExpandedChanged()}),n.width=new r.ComputedUpdater(function(){return n.survey.width}),n.width=n.survey.width,n.updateCss(),n.onCreating(),n}return a(PopupSurveyModel,e),PopupSurveyModel.prototype.onCreating=function(){},PopupSurveyModel.prototype.getType=function(){return"popupsurvey"},Object.defineProperty(PopupSurveyModel.prototype,"survey",{get:function(){return this.surveyValue},enumerable:!1,configurable:!0}),Object.defineProperty(PopupSurveyModel.prototype,"isShowing",{get:function(){return this.getPropertyValue("isShowing",!1)},set:function(e){this.setPropertyValue("isShowing",e)},enumerable:!1,configurable:!0}),PopupSurveyModel.prototype.show=function(){this.isShowing=!0},PopupSurveyModel.prototype.hide=function(){this.isShowing=!1},Object.defineProperty(PopupSurveyModel.prototype,"isExpanded",{get:function(){return this.getPropertyValue("isExpanded",!1)},set:function(e){this.setPropertyValue("isExpanded",e)},enumerable:!1,configurable:!0}),PopupSurveyModel.prototype.onExpandedChanged=function(){this.expandedChangedCallback&&this.expandedChangedCallback(),this.updateCssButton()},Object.defineProperty(PopupSurveyModel.prototype,"title",{get:function(){return this.survey.title},set:function(e){this.survey.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(PopupSurveyModel.prototype,"locTitle",{get:function(){return this.survey.locTitle},enumerable:!1,configurable:!0}),PopupSurveyModel.prototype.expand=function(){this.isExpanded=!0},PopupSurveyModel.prototype.collapse=function(){this.isExpanded=!1},PopupSurveyModel.prototype.changeExpandCollapse=function(){this.isExpanded=!this.isExpanded},Object.defineProperty(PopupSurveyModel.prototype,"allowClose",{get:function(){return this.getPropertyValue("allowClose",!1)},set:function(e){this.setPropertyValue("allowClose",e)},enumerable:!1,configurable:!0}),Object.defineProperty(PopupSurveyModel.prototype,"css",{get:function(){return this.survey.css},enumerable:!1,configurable:!0}),Object.defineProperty(PopupSurveyModel.prototype,"cssButton",{get:function(){return this.getPropertyValue("cssButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(PopupSurveyModel.prototype,"cssRoot",{get:function(){return this.getPropertyValue("cssRoot","")},enumerable:!1,configurable:!0}),Object.defineProperty(PopupSurveyModel.prototype,"cssBody",{get:function(){return this.getPropertyValue("cssBody","")},enumerable:!1,configurable:!0}),Object.defineProperty(PopupSurveyModel.prototype,"cssHeaderRoot",{get:function(){return this.getPropertyValue("cssHeaderRoot","")},enumerable:!1,configurable:!0}),Object.defineProperty(PopupSurveyModel.prototype,"cssHeaderTitle",{get:function(){return this.getPropertyValue("cssHeaderTitle","")},enumerable:!1,configurable:!0}),Object.defineProperty(PopupSurveyModel.prototype,"cssHeaderButton",{get:function(){return this.getPropertyValue("cssHeaderButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(PopupSurveyModel.prototype,"renderedWidth",{get:function(){var e=this.getPropertyValue("width","60%");return e&&!isNaN(e)&&(e+="px"),e},enumerable:!1,configurable:!0}),PopupSurveyModel.prototype.updateCss=function(){if(this.css&&this.css.window){var e=this.css.window;this.setPropertyValue("cssRoot",e.root),this.setPropertyValue("cssBody",e.body);var t=e.header;t&&(this.setPropertyValue("cssHeaderRoot",t.root),this.setPropertyValue("cssHeaderTitle",t.title),this.setPropertyValue("cssHeaderButton",t.button),this.updateCssButton())}},PopupSurveyModel.prototype.updateCssButton=function(){var e=this.css.window?this.css.window.header:null;e&&this.setCssButton(this.isExpanded?e.buttonExpanded:e.buttonCollapsed)},PopupSurveyModel.prototype.setCssButton=function(e){e&&this.setPropertyValue("cssButton",e)},PopupSurveyModel.prototype.createSurvey=function(e){return new i.SurveyModel(e)},PopupSurveyModel.prototype.onSurveyComplete=function(){if(!(this.closeOnCompleteTimeout<0)){if(0==this.closeOnCompleteTimeout)this.hide();else{var e=this,t=null;t="undefined"!=typeof window?window.setInterval(function(){e.hide(),"undefined"!=typeof window&&window.clearInterval(t)},1e3*this.closeOnCompleteTimeout):0}}},PopupSurveyModel.prototype.onScroll=function(){this.survey.onScroll()},__decorate([Object(s.property)()],PopupSurveyModel.prototype,"width",void 0),PopupSurveyModel}(r.Base),u=function(e){function SurveyWindowModel(){return null!==e&&e.apply(this,arguments)||this}return a(SurveyWindowModel,e),SurveyWindowModel}(l)},"./src/popup-utils.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"createPopupModalViewModel",function(){return createPopupModalViewModel}),o.d(t,"createPopupViewModel",function(){return createPopupViewModel});var n=o(/*! ./popup */"./src/popup.ts"),r=o(/*! ./popup-dropdown-view-model */"./src/popup-dropdown-view-model.ts"),i=o(/*! ./popup-modal-view-model */"./src/popup-modal-view-model.ts");function createPopupModalViewModel(e,t){var o,r=new n.PopupModel(e.componentName,e.data,"top","left",!1,!0,e.onCancel,e.onApply,function(){e.onHide(),a&&s.resetComponentElement()},e.onShow,e.cssClass,e.title);r.displayMode=e.displayMode||"popup",r.isFocusedContent=null===(o=e.isFocusedContent)||void 0===o||o;var s=new i.PopupModalViewModel(r);if(t&&t.appendChild){var a=document.createElement("div");t.appendChild(a),s.setComponentElement(a)}return s.container||s.initializePopupContainer(),s}function createPopupViewModel(e,t){return e.isModal?new i.PopupModalViewModel(e):new r.PopupDropdownViewModel(e,t)}},"./src/popup-view-model.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"FOCUS_INPUT_SELECTOR",function(){return p}),o.d(t,"PopupBaseViewModel",function(){return d});var n,r=o(/*! ./base */"./src/base.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),a=o(/*! ./actions/container */"./src/actions/container.ts"),l=o(/*! ./settings */"./src/settings.ts"),u=o(/*! ./utils/utils */"./src/utils/utils.ts"),c=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},p='input:not(:disabled):not([readonly]):not([type=hidden]),select:not(:disabled):not([readonly]),textarea:not(:disabled):not([readonly]), button:not(:disabled):not([readonly]), [tabindex]:not([tabindex^="-"])',d=function(e){function PopupBaseViewModel(t){var o=e.call(this)||this;return o.subscriptionId=PopupBaseViewModel.SubscriptionId++,o.popupSelector=".sv-popup",o.fixedPopupContainer=".sv-popup",o.containerSelector=".sv-popup__container",o.scrollingContentSelector=".sv-popup__scrolling-content",o.model=t,o}return c(PopupBaseViewModel,e),Object.defineProperty(PopupBaseViewModel.prototype,"container",{get:function(){return this.containerElement||this.createdContainer},enumerable:!1,configurable:!0}),PopupBaseViewModel.prototype.getLocale=function(){return this.locale?this.locale:e.prototype.getLocale.call(this)},PopupBaseViewModel.prototype.hidePopup=function(){this.model.isVisible=!1},PopupBaseViewModel.prototype.getStyleClass=function(){return new s.CssClassBuilder().append(this.model.cssClass).append("sv-popup--"+this.model.displayMode,this.isOverlay)},PopupBaseViewModel.prototype.getShowFooter=function(){return this.isOverlay},PopupBaseViewModel.prototype.getShowHeader=function(){return!1},PopupBaseViewModel.prototype.getPopupHeaderTemplate=function(){},PopupBaseViewModel.prototype.createFooterActionBar=function(){var e=this;this.footerToolbarValue=new a.ActionContainer,this.footerToolbar.updateCallback=function(t){e.footerToolbarValue.actions.forEach(function(e){return e.cssClasses={item:"sv-popup__body-footer-item sv-popup__button sd-btn"}})};var t=[{id:"cancel",visibleIndex:10,title:this.cancelButtonText,innerCss:"sv-popup__button--cancel sd-btn",action:function(){e.cancel()}}];t=this.model.updateFooterActions(t),this.footerToolbarValue.setItems(t)},PopupBaseViewModel.prototype.resetDimensionsAndPositionStyleProperties=function(){var e="inherit";this.top=e,this.left=e,this.height=e,this.width=e,this.minWidth=e},PopupBaseViewModel.prototype.onModelChanging=function(e){},PopupBaseViewModel.prototype.setupModel=function(e){var t=this;this.model&&this.model.unregisterPropertyChangedHandlers(["isVisible"],"PopupBaseViewModel"+this.subscriptionId),this.onModelChanging(e),this._model=e;var onIsVisibleChangedHandler=function(){e.isVisible||t.updateOnHiding(),t.isVisible=e.isVisible};e.registerPropertyChangedHandlers(["isVisible"],onIsVisibleChangedHandler,"PopupBaseViewModel"+this.subscriptionId),onIsVisibleChangedHandler()},Object.defineProperty(PopupBaseViewModel.prototype,"model",{get:function(){return this._model},set:function(e){this.setupModel(e)},enumerable:!1,configurable:!0}),Object.defineProperty(PopupBaseViewModel.prototype,"title",{get:function(){return this.model.title},enumerable:!1,configurable:!0}),Object.defineProperty(PopupBaseViewModel.prototype,"contentComponentName",{get:function(){return this.model.contentComponentName},enumerable:!1,configurable:!0}),Object.defineProperty(PopupBaseViewModel.prototype,"contentComponentData",{get:function(){return this.model.contentComponentData},enumerable:!1,configurable:!0}),Object.defineProperty(PopupBaseViewModel.prototype,"isModal",{get:function(){return this.model.isModal},enumerable:!1,configurable:!0}),Object.defineProperty(PopupBaseViewModel.prototype,"isFocusedContent",{get:function(){return this.model.isFocusedContent},enumerable:!1,configurable:!0}),Object.defineProperty(PopupBaseViewModel.prototype,"isFocusedContainer",{get:function(){return this.model.isFocusedContainer},enumerable:!1,configurable:!0}),Object.defineProperty(PopupBaseViewModel.prototype,"showFooter",{get:function(){return this.getShowFooter()},enumerable:!1,configurable:!0}),Object.defineProperty(PopupBaseViewModel.prototype,"showHeader",{get:function(){return this.getShowHeader()},enumerable:!1,configurable:!0}),Object.defineProperty(PopupBaseViewModel.prototype,"popupHeaderTemplate",{get:function(){return this.getPopupHeaderTemplate()},enumerable:!1,configurable:!0}),Object.defineProperty(PopupBaseViewModel.prototype,"isOverlay",{get:function(){return"overlay"===this.model.displayMode},enumerable:!1,configurable:!0}),Object.defineProperty(PopupBaseViewModel.prototype,"styleClass",{get:function(){return this.getStyleClass().toString()},enumerable:!1,configurable:!0}),Object.defineProperty(PopupBaseViewModel.prototype,"cancelButtonText",{get:function(){return this.getLocalizationString("modalCancelButtonText")},enumerable:!1,configurable:!0}),Object.defineProperty(PopupBaseViewModel.prototype,"footerToolbar",{get:function(){return this.footerToolbarValue||this.createFooterActionBar(),this.footerToolbarValue},enumerable:!1,configurable:!0}),PopupBaseViewModel.prototype.onKeyDown=function(e){"Tab"===e.key||9===e.keyCode?this.trapFocus(e):("Escape"===e.key||27===e.keyCode)&&this.hidePopup()},PopupBaseViewModel.prototype.trapFocus=function(e){var t=this.container.querySelectorAll(p),o=t[0],n=t[t.length-1];e.shiftKey?l.settings.environment.root.activeElement===o&&(n.focus(),e.preventDefault()):l.settings.environment.root.activeElement===n&&(o.focus(),e.preventDefault())},PopupBaseViewModel.prototype.switchFocus=function(){this.isFocusedContent?this.focusFirstInput():this.isFocusedContainer&&this.focusContainer()},PopupBaseViewModel.prototype.updateOnShowing=function(){this.prevActiveElement=l.settings.environment.root.activeElement,this.isOverlay&&this.resetDimensionsAndPositionStyleProperties(),this.switchFocus()},PopupBaseViewModel.prototype.updateOnHiding=function(){this.isFocusedContent&&this.prevActiveElement&&this.prevActiveElement.focus()},PopupBaseViewModel.prototype.focusContainer=function(){if(this.container){var e=this.container.querySelector(this.popupSelector);null==e||e.focus()}},PopupBaseViewModel.prototype.focusFirstInput=function(){var e=this;setTimeout(function(){if(e.container){var t=e.container.querySelector(e.model.focusFirstInputSelector||p);t?t.focus():e.focusContainer()}},100)},PopupBaseViewModel.prototype.clickOutside=function(e){this.hidePopup(),null==e||e.stopPropagation()},PopupBaseViewModel.prototype.cancel=function(){this.model.onCancel(),this.hidePopup()},PopupBaseViewModel.prototype.dispose=function(){e.prototype.dispose.call(this),this.model&&this.model.unregisterPropertyChangedHandlers(["isVisible"],"PopupBaseViewModel"+this.subscriptionId),this.createdContainer&&(this.createdContainer.remove(),this.createdContainer=void 0),this.footerToolbarValue&&this.footerToolbarValue.dispose(),this.resetComponentElement()},PopupBaseViewModel.prototype.initializePopupContainer=function(){if(!this.container){var e=document.createElement("div");this.createdContainer=e,Object(u.getElement)(l.settings.environment.popupMountContainer).appendChild(e)}},PopupBaseViewModel.prototype.setComponentElement=function(e,t){e&&(this.containerElement=e)},PopupBaseViewModel.prototype.resetComponentElement=function(){this.containerElement=void 0,this.prevActiveElement=void 0},PopupBaseViewModel.prototype.preventScrollOuside=function(e,t){for(var o=e.target;o!==this.container;){if("auto"===window.getComputedStyle(o).overflowY&&o.scrollHeight!==o.offsetHeight){var n=o.scrollHeight,r=o.scrollTop,i=o.clientHeight;if(!(t>0&&1>Math.abs(n-i-r))&&!(t<0&&r<=0))return}o=o.parentElement}e.preventDefault()},PopupBaseViewModel.SubscriptionId=0,__decorate([Object(i.property)({defaultValue:"0px"})],PopupBaseViewModel.prototype,"top",void 0),__decorate([Object(i.property)({defaultValue:"0px"})],PopupBaseViewModel.prototype,"left",void 0),__decorate([Object(i.property)({defaultValue:"auto"})],PopupBaseViewModel.prototype,"height",void 0),__decorate([Object(i.property)({defaultValue:"auto"})],PopupBaseViewModel.prototype,"width",void 0),__decorate([Object(i.property)({defaultValue:"auto"})],PopupBaseViewModel.prototype,"minWidth",void 0),__decorate([Object(i.property)({defaultValue:!1})],PopupBaseViewModel.prototype,"isVisible",void 0),__decorate([Object(i.property)()],PopupBaseViewModel.prototype,"locale",void 0),PopupBaseViewModel}(r.Base)},"./src/popup.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"PopupModel",function(){return a}),o.d(t,"createDialogOptions",function(){return createDialogOptions});var n,r=o(/*! ./base */"./src/base.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},a=function(e){function PopupModel(t,o,n,r,i,s,a,l,u,c,p,d,h){void 0===n&&(n="bottom"),void 0===r&&(r="left"),void 0===i&&(i=!0),void 0===s&&(s=!1),void 0===a&&(a=function(){}),void 0===l&&(l=function(){return!0}),void 0===u&&(u=function(){}),void 0===c&&(c=function(){}),void 0===p&&(p=""),void 0===d&&(d=""),void 0===h&&(h=function(){});var g=e.call(this)||this;return g.onDispose=h,g.focusFirstInputSelector="",g.onVisibilityChanged=g.addEvent(),g.onFooterActionsCreated=g.addEvent(),g.onRecalculatePosition=g.addEvent(),g.contentComponentName=t,g.contentComponentData=o,g.verticalPosition=n,g.horizontalPosition=r,g.showPointer=i,g.isModal=s,g.onCancel=a,g.onApply=l,g.onHide=u,g.onShow=c,g.cssClass=p,g.title=d,g}return s(PopupModel,e),PopupModel.prototype.refreshInnerModel=function(){var e=this.contentComponentData.model;e&&e.refresh&&e.refresh()},Object.defineProperty(PopupModel.prototype,"isVisible",{get:function(){return this.getPropertyValue("isVisible",!1)},set:function(e){this.isVisible!==e&&(this.setPropertyValue("isVisible",e),this.onVisibilityChanged.fire(this,{model:this,isVisible:e}),this.isVisible?this.onShow():(this.refreshInnerModel(),this.onHide()))},enumerable:!1,configurable:!0}),PopupModel.prototype.toggleVisibility=function(){this.isVisible=!this.isVisible},PopupModel.prototype.recalculatePosition=function(e){this.onRecalculatePosition.fire(this,{isResetHeight:e})},PopupModel.prototype.updateFooterActions=function(e){var t={actions:e};return this.onFooterActionsCreated.fire(this,t),t.actions},PopupModel.prototype.dispose=function(){e.prototype.dispose.call(this),this.onDispose()},__decorate([Object(i.property)()],PopupModel.prototype,"contentComponentName",void 0),__decorate([Object(i.property)()],PopupModel.prototype,"contentComponentData",void 0),__decorate([Object(i.property)({defaultValue:"bottom"})],PopupModel.prototype,"verticalPosition",void 0),__decorate([Object(i.property)({defaultValue:"left"})],PopupModel.prototype,"horizontalPosition",void 0),__decorate([Object(i.property)({defaultValue:!1})],PopupModel.prototype,"showPointer",void 0),__decorate([Object(i.property)({defaultValue:!1})],PopupModel.prototype,"isModal",void 0),__decorate([Object(i.property)({defaultValue:!0})],PopupModel.prototype,"isFocusedContent",void 0),__decorate([Object(i.property)({defaultValue:!0})],PopupModel.prototype,"isFocusedContainer",void 0),__decorate([Object(i.property)({defaultValue:function(){}})],PopupModel.prototype,"onCancel",void 0),__decorate([Object(i.property)({defaultValue:function(){return!0}})],PopupModel.prototype,"onApply",void 0),__decorate([Object(i.property)({defaultValue:function(){}})],PopupModel.prototype,"onHide",void 0),__decorate([Object(i.property)({defaultValue:function(){}})],PopupModel.prototype,"onShow",void 0),__decorate([Object(i.property)({defaultValue:""})],PopupModel.prototype,"cssClass",void 0),__decorate([Object(i.property)({defaultValue:""})],PopupModel.prototype,"title",void 0),__decorate([Object(i.property)({defaultValue:"auto"})],PopupModel.prototype,"overlayDisplayMode",void 0),__decorate([Object(i.property)({defaultValue:"popup"})],PopupModel.prototype,"displayMode",void 0),__decorate([Object(i.property)({defaultValue:"flex"})],PopupModel.prototype,"positionMode",void 0),PopupModel}(r.Base);function createDialogOptions(e,t,o,n,r,i,s,a,l){return void 0===r&&(r=function(){}),void 0===i&&(i=function(){}),void 0===l&&(l="popup"),{componentName:e,data:t,onApply:o,onCancel:n,onHide:r,onShow:i,cssClass:s,title:a,displayMode:l}}},"./src/question.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"Question",function(){return b});var n,r=o(/*! ./helpers */"./src/helpers.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=o(/*! ./survey-element */"./src/survey-element.ts"),a=o(/*! ./error */"./src/error.ts"),l=o(/*! ./validator */"./src/validator.ts"),u=o(/*! ./localizablestring */"./src/localizablestring.ts"),c=o(/*! ./conditions */"./src/conditions.ts"),p=o(/*! ./questionCustomWidgets */"./src/questionCustomWidgets.ts"),d=o(/*! ./settings */"./src/settings.ts"),h=o(/*! ./rendererFactory */"./src/rendererFactory.ts"),g=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),f=o(/*! ./utils/utils */"./src/utils/utils.ts"),y=o(/*! ./console-warnings */"./src/console-warnings.ts"),m=o(/*! ./conditionProcessValue */"./src/conditionProcessValue.ts"),v=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},TriggerExpressionInfo=function(e,t,o){this.name=e,this.canRun=t,this.doComplete=o,this.runSecondCheck=function(e){return!1}},b=function(e){function Question(t){var o=e.call(this,t)||this;return o.customWidgetData={isNeedRender:!0},o.hasCssErrorCallback=function(){return!1},o.isReadyValue=!0,o.dependedQuestions=[],o.onReadyChanged=o.addEvent(),o.triggersInfo=[],o.isRunningValidatorsValue=!1,o.isValueChangedInSurvey=!1,o.allowNotifyValueChanged=!0,o.id=Question.getQuestionId(),o.onCreating(),o.createNewArray("validators",function(e){e.errorOwner=o}),o.addExpressionProperty("visibleIf",function(e,t){o.visible=!0===t},function(e){return!o.areInvisibleElementsShowing}),o.addExpressionProperty("enableIf",function(e,t){o.readOnly=!1===t}),o.addExpressionProperty("requiredIf",function(e,t){o.isRequired=!0===t}),o.createLocalizableString("commentText",o,!0,"otherItemText"),o.locTitle.onGetDefaultTextCallback=function(){return o.name},o.locTitle.storeDefaultText=!0,o.createLocalizableString("requiredErrorText",o),o.addTriggerInfo("resetValueIf",function(){return!o.isEmpty()},function(){o.clearValue(),o.updateValueWithDefaults()}),o.addTriggerInfo("setValueIf",function(){return!0},function(){return o.runSetValueExpression()}).runSecondCheck=function(e){return o.checkExpressionIf(e)},o.registerPropertyChangedHandlers(["width"],function(){o.updateQuestionCss(),o.parent&&o.parent.elementWidthChanged(o)}),o.registerPropertyChangedHandlers(["isRequired"],function(){!o.isRequired&&o.errors.length>0&&o.validate(),o.locTitle.strChanged(),o.clearCssClasses()}),o.registerPropertyChangedHandlers(["indent","rightIndent"],function(){o.onIndentChanged()}),o.registerPropertyChangedHandlers(["showCommentArea","showOtherItem"],function(){o.initCommentFromSurvey()}),o.registerFunctionOnPropertiesValueChanged(["no","readOnly","hasVisibleErrors","containsErrors"],function(){o.updateQuestionCss()}),o.registerPropertyChangedHandlers(["isMobile"],function(){o.onMobileChanged()}),o}return v(Question,e),Question.getQuestionId=function(){return"sq_"+Question.questionCounter++},Question.prototype.isReadOnlyRenderDiv=function(){return this.isReadOnly&&"div"===d.settings.readOnly.commentRenderMode},Question.prototype.allowMobileInDesignMode=function(){return!1},Question.prototype.updateIsMobileFromSurvey=function(){this.setIsMobile(this.survey._isMobile)},Question.prototype.setIsMobile=function(e){this.isMobile=e&&(this.allowMobileInDesignMode()||!this.isDesignMode)},Question.prototype.themeChanged=function(e){},Question.prototype.createLocTitleProperty=function(){var t=this,o=e.prototype.createLocTitleProperty.call(this);return o.onGetTextCallback=function(e){return(e||(e=t.name),t.survey)?t.survey.getUpdatedQuestionTitle(t,e):e},this.locProcessedTitle=new u.LocalizableString(this,!0),this.locProcessedTitle.sharedData=o,o},Question.prototype.getSurvey=function(t){return(void 0===t&&(t=!1),t)?this.parent?this.parent.getSurvey(t):null:this.onGetSurvey?this.onGetSurvey():e.prototype.getSurvey.call(this)},Question.prototype.getValueName=function(){return this.valueName?this.valueName.toString():this.name},Object.defineProperty(Question.prototype,"valueName",{get:function(){return this.getPropertyValue("valueName","")},set:function(e){var t=this.getValueName();this.setPropertyValue("valueName",e),this.onValueNameChanged(t)},enumerable:!1,configurable:!0}),Question.prototype.onValueNameChanged=function(e){this.survey&&(this.survey.questionRenamed(this,this.name,e||this.name),this.initDataFromSurvey())},Question.prototype.onNameChanged=function(e){this.locTitle.strChanged(),this.survey&&this.survey.questionRenamed(this,e,this.valueName?this.valueName:e)},Object.defineProperty(Question.prototype,"isReady",{get:function(){return this.isReadyValue},enumerable:!1,configurable:!0}),Question.prototype.onAsyncRunningChanged=function(){this.updateIsReady()},Question.prototype.updateIsReady=function(){var e=this.getIsQuestionReady();if(e){for(var t=this.getIsReadyDependsOn(),o=0;o<t.length;o++)if(!t[o].getIsQuestionReady()){e=!1;break}}this.setIsReady(e)},Question.prototype.getIsQuestionReady=function(){return!this.isAsyncExpressionRunning&&this.getAreNestedQuestionsReady()},Question.prototype.getAreNestedQuestionsReady=function(){var e=this.getIsReadyNestedQuestions();if(!Array.isArray(e))return!0;for(var t=0;t<e.length;t++)if(!e[t].isReady)return!1;return!0},Question.prototype.getIsReadyNestedQuestions=function(){return this.getNestedQuestions()},Question.prototype.setIsReady=function(e){var t=this.isReadyValue;this.isReadyValue=e,t!=e&&(this.getIsReadyDependends().forEach(function(e){return e.updateIsReady()}),this.onReadyChanged.fire(this,{question:this,isReady:e,oldIsReady:t}))},Question.prototype.getIsReadyDependsOn=function(){return this.getIsReadyDependendCore(!0)},Question.prototype.getIsReadyDependends=function(){return this.getIsReadyDependendCore(!1)},Question.prototype.getIsReadyDependendCore=function(e){var t=this;if(!this.survey)return[];var o=this.survey.questionsByValueName(this.getValueName()),n=[];return o.forEach(function(e){e!==t&&n.push(e)}),!e&&(this.parentQuestion&&n.push(this.parentQuestion),this.dependedQuestions.length>0&&this.dependedQuestions.forEach(function(e){return n.push(e)})),n},Question.prototype.choicesLoaded=function(){},Object.defineProperty(Question.prototype,"page",{get:function(){return this.parentQuestion?this.parentQuestion.page:this.getPage(this.parent)},set:function(e){this.setPage(this.parent,e)},enumerable:!1,configurable:!0}),Question.prototype.getPanel=function(){return null},Question.prototype.delete=function(e){void 0===e&&(e=!0),this.removeFromParent(),e?this.dispose():this.resetDependedQuestions()},Question.prototype.removeFromParent=function(){this.parent&&this.removeSelfFromList(this.parent.elements)},Question.prototype.addDependedQuestion=function(e){!e||this.dependedQuestions.indexOf(e)>-1||this.dependedQuestions.push(e)},Question.prototype.removeDependedQuestion=function(e){if(e){var t=this.dependedQuestions.indexOf(e);t>-1&&this.dependedQuestions.splice(t,1)}},Question.prototype.updateDependedQuestions=function(){for(var e=0;e<this.dependedQuestions.length;e++)this.dependedQuestions[e].updateDependedQuestion()},Question.prototype.updateDependedQuestion=function(){},Question.prototype.resetDependedQuestion=function(){},Object.defineProperty(Question.prototype,"isFlowLayout",{get:function(){return"flow"===this.getLayoutType()},enumerable:!1,configurable:!0}),Question.prototype.getLayoutType=function(){return this.parent?this.parent.getChildrenLayoutType():"row"},Question.prototype.isLayoutTypeSupported=function(e){return"flow"!==e},Object.defineProperty(Question.prototype,"visible",{get:function(){return this.getPropertyValue("visible",!0)},set:function(e){e!=this.visible&&(this.setPropertyValue("visible",e),this.onVisibleChanged(),this.notifySurveyVisibilityChanged())},enumerable:!1,configurable:!0}),Question.prototype.onVisibleChanged=function(){this.updateIsVisibleProp(),!this.isVisible&&this.errors&&this.errors.length>0&&(this.errors=[])},Question.prototype.notifyStateChanged=function(){e.prototype.notifyStateChanged.call(this),this.isCollapsed&&this.onHidingContent()},Question.prototype.updateIsVisibleProp=function(){var e=this.getPropertyValue("isVisible"),t=this.isVisible;e===t||(this.setPropertyValue("isVisible",t),t||this.onHidingContent())},Object.defineProperty(Question.prototype,"useDisplayValuesInDynamicTexts",{get:function(){return this.getPropertyValue("useDisplayValuesInDynamicTexts")},set:function(e){this.setPropertyValue("useDisplayValuesInDynamicTexts",e)},enumerable:!1,configurable:!0}),Question.prototype.getUseDisplayValuesInDynamicTexts=function(){return this.useDisplayValuesInDynamicTexts},Object.defineProperty(Question.prototype,"visibleIf",{get:function(){return this.getPropertyValue("visibleIf","")},set:function(e){this.setPropertyValue("visibleIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"isVisible",{get:function(){return!(this.survey&&this.survey.areEmptyElementsHidden&&this.isEmpty())&&(!!this.areInvisibleElementsShowing||this.isVisibleCore())},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"isVisibleInSurvey",{get:function(){return this.isVisible&&this.isParentVisible},enumerable:!1,configurable:!0}),Question.prototype.isVisibleCore=function(){return this.visible},Object.defineProperty(Question.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},enumerable:!1,configurable:!0}),Question.prototype.onHidingContent=function(){},Object.defineProperty(Question.prototype,"hideNumber",{get:function(){return this.getPropertyValue("hideNumber")},set:function(e){this.setPropertyValue("hideNumber",e),this.notifySurveyVisibilityChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"isAllowTitleLeft",{get:function(){return!0},enumerable:!1,configurable:!0}),Question.prototype.getType=function(){return"question"},Object.defineProperty(Question.prototype,"isQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),Question.prototype.moveTo=function(e,t){return void 0===t&&(t=null),this.moveToBase(this.parent,e,t)},Question.prototype.getProgressInfo=function(){return this.hasInput?{questionCount:1,answeredQuestionCount:this.isEmpty()?0:1,requiredQuestionCount:this.isRequired?1:0,requiredAnsweredQuestionCount:!this.isEmpty()&&this.isRequired?1:0}:e.prototype.getProgressInfo.call(this)},Question.prototype.ensureSetValueExpressionRunner=function(){var e=this;this.setValueExpressionRunner?this.setValueExpressionRunner.expression=this.setValueExpression:(this.setValueExpressionRunner=new c.ExpressionRunner(this.setValueExpression),this.setValueExpressionRunner.onRunComplete=function(t){e.isTwoValueEquals(e.value,t)||(e.value=t)})},Question.prototype.runSetValueExpression=function(){this.setValueExpression?(this.ensureSetValueExpressionRunner(),this.setValueExpressionRunner.run(this.getDataFilteredValues(),this.getDataFilteredProperties())):this.clearValue()},Question.prototype.checkExpressionIf=function(e){return this.ensureSetValueExpressionRunner(),!!this.setValueExpressionRunner&&new m.ProcessValue().isAnyKeyChanged(e,this.setValueExpressionRunner.getVariables())},Question.prototype.addTriggerInfo=function(e,t,o){var n=new TriggerExpressionInfo(e,t,o);return this.triggersInfo.push(n),n},Question.prototype.runTriggerInfo=function(e,t,o){var n=this[e.name],r={};if(r[t]=o,!n||e.isRunning||!e.canRun()){e.runSecondCheck(r)&&e.doComplete();return}e.runner?e.runner.expression=n:(e.runner=new c.ExpressionRunner(n),e.runner.onRunComplete=function(t){!0===t&&e.doComplete(),e.isRunning=!1}),(new m.ProcessValue().isAnyKeyChanged(r,e.runner.getVariables())||e.runSecondCheck(r))&&(e.isRunning=!0,e.runner.run(this.getDataFilteredValues(),this.getDataFilteredProperties()))},Question.prototype.runTriggers=function(e,t){var o=this;this.isReadOnly||this.isSettingQuestionValue||this.parentQuestion&&this.parentQuestion.getValueName()===e||this.triggersInfo.forEach(function(n){o.runTriggerInfo(n,e,t)})},Question.prototype.runConditions=function(){this.data&&!this.isLoadingFromJson&&(this.isDesignMode||this.runCondition(this.getDataFilteredValues(),this.getDataFilteredProperties()),this.locStrsChanged())},Question.prototype.setSurveyImpl=function(t,o){e.prototype.setSurveyImpl.call(this,t),this.survey&&(this.survey.questionCreated(this),!0!==o&&this.runConditions(),this.calcRenderedCommentPlaceholder(),this.visible||this.updateIsVisibleProp(),this.updateIsMobileFromSurvey())},Object.defineProperty(Question.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.parent!==e&&(this.removeFromParent(),this.setPropertyValue("parent",e),this.updateQuestionCss(),this.onParentChanged())},enumerable:!1,configurable:!0}),Question.prototype.onParentChanged=function(){},Object.defineProperty(Question.prototype,"hasTitle",{get:function(){return"hidden"!==this.getTitleLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"titleLocation",{get:function(){return this.getPropertyValue("titleLocation")},set:function(e){var t="hidden"==this.titleLocation||"hidden"==e;this.setPropertyValue("titleLocation",e.toLowerCase()),this.updateQuestionCss(),t&&this.notifySurveyVisibilityChanged()},enumerable:!1,configurable:!0}),Question.prototype.getTitleOwner=function(){return this},Question.prototype.getIsTitleRenderedAsString=function(){return"hidden"===this.titleLocation},Question.prototype.notifySurveyVisibilityChanged=function(){if(this.survey&&!this.isLoadingFromJson){this.survey.questionVisibilityChanged(this,this.isVisible);var e=this.isClearValueOnHidden;this.visible||this.clearValueOnHidding(e),e&&this.isVisibleInSurvey&&this.updateValueWithDefaults()}},Question.prototype.clearValueOnHidding=function(e){e&&this.clearValueIfInvisible()},Question.prototype.getTitleLocation=function(){if(this.isFlowLayout)return"hidden";var e=this.getTitleLocationCore();return"left"!==e||this.isAllowTitleLeft||(e="top"),e},Question.prototype.getTitleLocationCore=function(){return"default"!==this.titleLocation?this.titleLocation:this.parent?this.parent.getQuestionTitleLocation():this.survey?this.survey.questionTitleLocation:"top"},Object.defineProperty(Question.prototype,"hasTitleOnLeft",{get:function(){return this.hasTitle&&"left"===this.getTitleLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"hasTitleOnTop",{get:function(){return this.hasTitle&&"top"===this.getTitleLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"hasTitleOnBottom",{get:function(){return this.hasTitle&&"bottom"===this.getTitleLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"hasTitleOnLeftTop",{get:function(){if(!this.hasTitle)return!1;var e=this.getTitleLocation();return"left"===e||"top"===e},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"errorLocation",{get:function(){return this.getPropertyValue("errorLocation")},set:function(e){this.setPropertyValue("errorLocation",e)},enumerable:!1,configurable:!0}),Question.prototype.getErrorLocation=function(){return"default"!==this.errorLocation?this.errorLocation:this.parentQuestion?this.parentQuestion.getChildErrorLocation(this):this.parent?this.parent.getQuestionErrorLocation():this.survey?this.survey.questionErrorLocation:"top"},Question.prototype.getChildErrorLocation=function(e){return this.getErrorLocation()},Object.defineProperty(Question.prototype,"hasInput",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"hasSingleInput",{get:function(){return this.hasInput},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"inputId",{get:function(){return this.id+"i"},enumerable:!1,configurable:!0}),Question.prototype.getDefaultTitleValue=function(){return this.name},Question.prototype.getDefaultTitleTagName=function(){return d.settings.titleTags.question},Object.defineProperty(Question.prototype,"descriptionLocation",{get:function(){return this.getPropertyValue("descriptionLocation")},set:function(e){this.setPropertyValue("descriptionLocation",e),this.updateQuestionCss()},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"hasDescriptionUnderTitle",{get:function(){return"underTitle"==this.getDescriptionLocation()&&this.hasDescription},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"hasDescriptionUnderInput",{get:function(){return"underInput"==this.getDescriptionLocation()&&this.hasDescription},enumerable:!1,configurable:!0}),Question.prototype.getDescriptionLocation=function(){return"default"!==this.descriptionLocation?this.descriptionLocation:this.survey?this.survey.questionDescriptionLocation:"underTitle"},Question.prototype.needClickTitleFunction=function(){return e.prototype.needClickTitleFunction.call(this)||this.hasInput},Question.prototype.processTitleClick=function(){var t=this;if(e.prototype.processTitleClick.call(this),!this.isCollapsed)return setTimeout(function(){t.focus()},1),!0},Object.defineProperty(Question.prototype,"requiredErrorText",{get:function(){return this.getLocalizableStringText("requiredErrorText")},set:function(e){this.setLocalizableStringText("requiredErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"locRequiredErrorText",{get:function(){return this.getLocalizableString("requiredErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"commentText",{get:function(){return this.getLocalizableStringText("commentText")},set:function(e){this.setLocalizableStringText("commentText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"locCommentText",{get:function(){return this.getLocalizableString("commentText")},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"commentPlaceHolder",{get:function(){return this.commentPlaceholder},set:function(e){this.commentPlaceholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"renderedCommentPlaceholder",{get:function(){return this.getPropertyValue("renderedCommentPlaceholder")},enumerable:!1,configurable:!0}),Question.prototype.calcRenderedCommentPlaceholder=function(){var e=this.isReadOnly?void 0:this.commentPlaceHolder;this.setPropertyValue("renderedCommentPlaceholder",e)},Question.prototype.getAllErrors=function(){return this.errors.slice()},Question.prototype.getErrorByType=function(e){for(var t=0;t<this.errors.length;t++)if(this.errors[t].getErrorType()===e)return this.errors[t];return null},Object.defineProperty(Question.prototype,"customWidget",{get:function(){return this.isCustomWidgetRequested||this.customWidgetValue||(this.isCustomWidgetRequested=!0,this.updateCustomWidget()),this.customWidgetValue},enumerable:!1,configurable:!0}),Question.prototype.updateCustomWidget=function(){this.customWidgetValue=p.CustomWidgetCollection.Instance.getCustomWidget(this)},Question.prototype.localeChanged=function(){e.prototype.localeChanged.call(this),this.calcRenderedCommentPlaceholder(),this.localeChangedCallback&&this.localeChangedCallback()},Object.defineProperty(Question.prototype,"isCompositeQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"isContainer",{get:function(){return!1},enumerable:!1,configurable:!0}),Question.prototype.updateCommentElements=function(){if(this.autoGrowComment&&Array.isArray(this.commentElements))for(var e=0;e<this.commentElements.length;e++){var t=this.commentElements[e];t&&Object(f.increaseHeightByContent)(t)}},Question.prototype.onCommentInput=function(e){this.isInputTextUpdate?e.target&&(this.comment=e.target.value):this.updateCommentElements()},Question.prototype.onCommentChange=function(e){this.comment=e.target.value,this.comment!==e.target.value&&(e.target.value=this.comment)},Question.prototype.afterRenderQuestionElement=function(e){this.survey&&this.hasSingleInput&&this.survey.afterRenderQuestionInput(this,e)},Question.prototype.afterRender=function(e){var t=this;this.afterRenderCore(e),this.survey&&(this.survey.afterRenderQuestion(this,e),this.afterRenderQuestionCallback&&this.afterRenderQuestionCallback(this,e),(this.supportComment()||this.supportOther())&&(this.commentElements=[],this.getCommentElementsId().forEach(function(e){var o=d.settings.environment.root.getElementById(e);o&&t.commentElements.push(o)}),this.updateCommentElements()),this.checkForResponsiveness(e))},Question.prototype.afterRenderCore=function(e){},Question.prototype.getCommentElementsId=function(){return[this.commentId]},Question.prototype.beforeDestroyQuestionElement=function(e){this.commentElements=void 0},Object.defineProperty(Question.prototype,"processedTitle",{get:function(){return this.locProcessedTitle.textOrHtml||this.name},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"fullTitle",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"titlePattern",{get:function(){return this.survey?this.survey.questionTitlePattern:"numTitleRequire"},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"isRequireTextOnStart",{get:function(){return this.isRequired&&"requireNumTitle"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"isRequireTextBeforeTitle",{get:function(){return this.isRequired&&"numRequireTitle"==this.titlePattern&&""!==this.requiredText},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"isRequireTextAfterTitle",{get:function(){return this.isRequired&&"numTitleRequire"==this.titlePattern&&""!==this.requiredText},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"startWithNewLine",{get:function(){return this.getPropertyValue("startWithNewLine")},set:function(e){this.startWithNewLine!=e&&this.setPropertyValue("startWithNewLine",e)},enumerable:!1,configurable:!0}),Question.prototype.calcCssClasses=function(e){var t={error:{}};return this.copyCssClasses(t,e.question),this.copyCssClasses(t.error,e.error),this.updateCssClasses(t,e),this.survey&&this.survey.updateQuestionCssClasses(this,t),this.onUpdateCssClassesCallback&&this.onUpdateCssClassesCallback(t),t},Object.defineProperty(Question.prototype,"cssRoot",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssRoot","")},enumerable:!1,configurable:!0}),Question.prototype.setCssRoot=function(e){this.setPropertyValue("cssRoot",e)},Question.prototype.getCssRoot=function(t){var o=this.hasCssError();return new g.CssClassBuilder().append(e.prototype.getCssRoot.call(this,t)).append(this.isFlowLayout&&!this.isDesignMode?t.flowRoot:t.mainRoot).append(t.titleLeftRoot,!this.isFlowLayout&&this.hasTitleOnLeft).append(t.titleTopRoot,!this.isFlowLayout&&this.hasTitleOnTop).append(t.titleBottomRoot,!this.isFlowLayout&&this.hasTitleOnBottom).append(t.descriptionUnderInputRoot,!this.isFlowLayout&&this.hasDescriptionUnderInput).append(t.hasError,o).append(t.hasErrorTop,o&&"top"==this.getErrorLocation()).append(t.hasErrorBottom,o&&"bottom"==this.getErrorLocation()).append(t.small,!this.width).append(t.answered,this.isAnswered).toString()},Object.defineProperty(Question.prototype,"cssHeader",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssHeader","")},enumerable:!1,configurable:!0}),Question.prototype.setCssHeader=function(e){this.setPropertyValue("cssHeader",e)},Question.prototype.getCssHeader=function(e){return new g.CssClassBuilder().append(e.header).append(e.headerTop,this.hasTitleOnTop).append(e.headerLeft,this.hasTitleOnLeft).append(e.headerBottom,this.hasTitleOnBottom).toString()},Object.defineProperty(Question.prototype,"cssContent",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssContent","")},enumerable:!1,configurable:!0}),Question.prototype.setCssContent=function(e){this.setPropertyValue("cssContent",e)},Question.prototype.getCssContent=function(e){return new g.CssClassBuilder().append(e.content).append(e.contentLeft,this.hasTitleOnLeft).toString()},Object.defineProperty(Question.prototype,"cssTitle",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssTitle","")},enumerable:!1,configurable:!0}),Question.prototype.setCssTitle=function(e){this.setPropertyValue("cssTitle",e)},Question.prototype.getCssTitle=function(t){return new g.CssClassBuilder().append(e.prototype.getCssTitle.call(this,t)).append(t.titleOnAnswer,!this.containsErrors&&this.isAnswered).append(t.titleEmpty,!this.title.trim()).toString()},Object.defineProperty(Question.prototype,"cssDescription",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssDescription","")},enumerable:!1,configurable:!0}),Question.prototype.setCssDescription=function(e){this.setPropertyValue("cssDescription",e)},Question.prototype.getCssDescription=function(e){return new g.CssClassBuilder().append(e.description,this.hasDescriptionUnderTitle).append(e.descriptionUnderInput,this.hasDescriptionUnderInput).toString()},Question.prototype.showErrorOnCore=function(e){return!this.showErrorsAboveQuestion&&!this.showErrorsBelowQuestion&&this.getErrorLocation()===e},Object.defineProperty(Question.prototype,"showErrorOnTop",{get:function(){return this.showErrorOnCore("top")},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"showErrorOnBottom",{get:function(){return this.showErrorOnCore("bottom")},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"showErrorsOutsideQuestion",{get:function(){return this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"showErrorsAboveQuestion",{get:function(){return this.showErrorsOutsideQuestion&&"top"===this.getErrorLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"showErrorsBelowQuestion",{get:function(){return this.showErrorsOutsideQuestion&&"bottom"===this.getErrorLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"cssError",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssError","")},enumerable:!1,configurable:!0}),Question.prototype.setCssError=function(e){this.setPropertyValue("cssError",e)},Question.prototype.getCssError=function(e){return new g.CssClassBuilder().append(e.error.root).append(e.error.outsideQuestion,this.showErrorsBelowQuestion||this.showErrorsAboveQuestion).append(e.error.belowQuestion,this.showErrorsBelowQuestion).append(e.error.aboveQuestion,this.showErrorsAboveQuestion).append(e.error.locationTop,this.showErrorOnTop).append(e.error.locationBottom,this.showErrorOnBottom).toString()},Question.prototype.hasCssError=function(){return this.errors.length>0||this.hasCssErrorCallback()},Question.prototype.getRootCss=function(){return new g.CssClassBuilder().append(this.cssRoot).append(this.cssClasses.disabled,this.isReadOnly).append(this.cssClasses.invisible,!this.isDesignMode&&this.areInvisibleElementsShowing&&!this.visible).toString()},Question.prototype.getQuestionRootCss=function(){return new g.CssClassBuilder().append(this.cssClasses.root).append(this.cssClasses.rootMobile,this.isMobile).toString()},Question.prototype.updateElementCss=function(t){e.prototype.updateElementCss.call(this,t),t&&this.updateQuestionCss(!0),this.onIndentChanged()},Question.prototype.updateQuestionCss=function(e){!this.isLoadingFromJson&&this.survey&&(!0===e||this.cssClassesValue)&&this.updateElementCssCore(this.cssClasses)},Question.prototype.ensureElementCss=function(){this.cssClassesValue||this.updateQuestionCss(!0)},Question.prototype.updateElementCssCore=function(e){this.setCssRoot(this.getCssRoot(e)),this.setCssHeader(this.getCssHeader(e)),this.setCssContent(this.getCssContent(e)),this.setCssTitle(this.getCssTitle(e)),this.setCssDescription(this.getCssDescription(e)),this.setCssError(this.getCssError(e))},Question.prototype.updateCssClasses=function(e,t){if(t.question){var o=t[this.getCssType()],n=new g.CssClassBuilder().append(e.title).append(t.question.titleRequired,this.isRequired);e.title=n.toString();var r=new g.CssClassBuilder().append(e.root).append(o,this.isRequired&&!!t.question.required);if(null==o)e.root=r.toString();else if("string"==typeof o||o instanceof String)e.root=r.append(o.toString()).toString();else for(var i in e.root=r.toString(),o)e[i]=o[i]}},Question.prototype.getCssType=function(){return this.getType()},Object.defineProperty(Question.prototype,"renderCssRoot",{get:function(){return this.cssClasses.root||void 0},enumerable:!1,configurable:!0}),Question.prototype.onIndentChanged=function(){this.paddingLeft=this.getIndentSize(this.indent),this.paddingRight=this.getIndentSize(this.rightIndent)},Question.prototype.getIndentSize=function(e){return!(e<1)&&this.getSurvey()&&this.cssClasses&&this.cssClasses.indent?e*this.cssClasses.indent+"px":""},Question.prototype.focus=function(e,t){if(void 0===e&&(e=!1),!this.isDesignMode&&this.isVisible&&this.survey){var o=this.page;o&&this.survey.activePage!==o?this.survey.focusQuestionByInstance(this,e):this.focuscore(e,t)}},Question.prototype.focuscore=function(e,t){void 0===e&&(e=!1),this.survey&&(this.expandAllParents(this),this.survey.scrollElementToTop(this,this,null,this.id,t));var o=e?this.getFirstErrorInputElementId():this.getFirstInputElementId();s.SurveyElement.FocusElement(o)&&this.fireCallback(this.focusCallback)},Question.prototype.expandAllParents=function(e){e&&(e.isCollapsed&&e.expand(),this.expandAllParents(e.parent),this.expandAllParents(e.parentQuestion))},Question.prototype.focusIn=function(){!this.survey||this.isDisposed||this.isContainer||this.survey.whenQuestionFocusIn(this)},Question.prototype.fireCallback=function(e){e&&e()},Question.prototype.getOthersMaxLength=function(){return this.survey&&this.survey.maxOthersLength>0?this.survey.maxOthersLength:null},Question.prototype.onCreating=function(){},Question.prototype.getFirstQuestionToFocus=function(e){return this.hasInput&&(!e||this.currentErrorCount>0)?this:null},Question.prototype.getFirstInputElementId=function(){return this.inputId},Question.prototype.getFirstErrorInputElementId=function(){return this.getFirstInputElementId()},Question.prototype.getProcessedTextValue=function(e){var t=e.name.toLocaleLowerCase();e.isExists=-1!==Object.keys(Question.TextPreprocessorValuesMap).indexOf(t)||void 0!==this[e.name],e.value=this[Question.TextPreprocessorValuesMap[t]||e.name]},Question.prototype.supportComment=function(){var e=this.getPropertyByName("showCommentArea");return!e||e.visible},Question.prototype.supportOther=function(){return!1},Object.defineProperty(Question.prototype,"isRequired",{get:function(){return this.getPropertyValue("isRequired")},set:function(e){this.setPropertyValue("isRequired",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"requiredIf",{get:function(){return this.getPropertyValue("requiredIf","")},set:function(e){this.setPropertyValue("requiredIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"showCommentArea",{get:function(){return this.getPropertyValue("showCommentArea",!1)},set:function(e){this.supportComment()&&this.setPropertyValue("showCommentArea",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"hasComment",{get:function(){return this.showCommentArea},set:function(e){this.showCommentArea=e},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"id",{get:function(){return this.getPropertyValue("id")},set:function(e){this.setPropertyValue("id",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"ariaTitleId",{get:function(){return this.id+"_ariaTitle"},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"commentId",{get:function(){return this.id+"_comment"},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"showOtherItem",{get:function(){return this.getPropertyValue("showOtherItem",!1)},set:function(e){this.supportOther()&&this.showOtherItem!=e&&(this.setPropertyValue("showOtherItem",e),this.hasOtherChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"hasOther",{get:function(){return this.showOtherItem},set:function(e){this.showOtherItem=e},enumerable:!1,configurable:!0}),Question.prototype.hasOtherChanged=function(){},Object.defineProperty(Question.prototype,"requireUpdateCommentValue",{get:function(){return this.hasComment||this.hasOther},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"isReadOnly",{get:function(){var e=!!this.parent&&this.parent.isReadOnly,t=!!this.parentQuestion&&this.parentQuestion.isReadOnly,o=!!this.survey&&this.survey.isDisplayMode;return this.readOnly||e||o||t},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"isInputReadOnly",{get:function(){if(void 0!==this.forceIsInputReadOnly)return this.forceIsInputReadOnly;var e=d.settings.supportCreatorV2&&this.isDesignMode;return this.isReadOnly||e},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"renderedInputReadOnly",{get:function(){return this.isInputReadOnly?"":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"renderedInputDisabled",{get:function(){return this.isInputReadOnly?"":void 0},enumerable:!1,configurable:!0}),Question.prototype.onReadOnlyChanged=function(){this.setPropertyValue("isInputReadOnly",this.isInputReadOnly),e.prototype.onReadOnlyChanged.call(this),this.updateQuestionCss(),this.calcRenderedCommentPlaceholder()},Object.defineProperty(Question.prototype,"enableIf",{get:function(){return this.getPropertyValue("enableIf","")},set:function(e){this.setPropertyValue("enableIf",e)},enumerable:!1,configurable:!0}),Question.prototype.surveyChoiceItemVisibilityChange=function(){},Question.prototype.runCondition=function(e,t){this.isDesignMode||(t||(t={}),t.question=this,this.runConditionCore(e,t),this.isValueChangedDirectly||this.isClearValueOnHidden&&!this.isVisibleInSurvey||(this.defaultValueRunner=this.getDefaultRunner(this.defaultValueRunner,this.defaultValueExpression),this.runDefaultValueExpression(this.defaultValueRunner,e,t)))},Object.defineProperty(Question.prototype,"no",{get:function(){return this.getPropertyValue("no")},enumerable:!1,configurable:!0}),Question.prototype.calcNo=function(){if(!this.hasTitle||this.hideNumber)return"";var e=r.Helpers.getNumberByIndex(this.visibleIndex,this.getStartIndex());return this.survey&&(e=this.survey.getUpdatedQuestionNo(this,e)),e},Question.prototype.getStartIndex=function(){return this.parent?this.parent.getQuestionStartIndex():this.survey?this.survey.questionStartIndex:""},Question.prototype.onSurveyLoad=function(){this.isCustomWidgetRequested=!1,this.fireCallback(this.surveyLoadCallback),this.updateValueWithDefaults(),this.isEmpty()&&this.initDataFromSurvey(),this.calcRenderedCommentPlaceholder(),this.onIndentChanged()},Question.prototype.onSetData=function(){e.prototype.onSetData.call(this),this.survey&&(this.initDataFromSurvey(),this.onSurveyValueChanged(this.value),this.updateValueWithDefaults(),this.onIndentChanged(),this.updateQuestionCss(),this.updateIsAnswered())},Question.prototype.initDataFromSurvey=function(){if(this.data){var e=this.data.getValue(this.getValueName());r.Helpers.isValueEmpty(e)&&this.isLoadingFromJson||this.updateValueFromSurvey(e),this.initCommentFromSurvey()}},Question.prototype.initCommentFromSurvey=function(){this.data&&this.requireUpdateCommentValue?this.updateCommentFromSurvey(this.data.getComment(this.getValueName())):this.updateCommentFromSurvey("")},Question.prototype.runExpression=function(e){if(this.survey&&e)return this.survey.runExpression(e)},Object.defineProperty(Question.prototype,"autoGrowComment",{get:function(){return this.survey&&this.survey.autoGrowComment},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"allowResizeComment",{get:function(){return this.survey&&this.survey.allowResizeComment},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"questionValue",{get:function(){return this.getPropertyValueWithoutDefault("value")},set:function(e){this.setPropertyValue("value",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"questionComment",{get:function(){return this.getPropertyValueWithoutDefault("comment")},set:function(e){this.setPropertyValue("comment",e),this.fireCallback(this.commentChangedCallback)},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"isValueArray",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"value",{get:function(){return this.getValueCore()},set:function(e){this.setNewValue(e)},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"hasFilteredValue",{get:function(){return!1},enumerable:!1,configurable:!0}),Question.prototype.getFilteredValue=function(){return this.value},Object.defineProperty(Question.prototype,"valueForSurvey",{get:function(){return this.valueToDataCallback?this.valueToDataCallback(this.value):this.value},enumerable:!1,configurable:!0}),Question.prototype.clearValue=function(){void 0!==this.value&&(this.value=void 0),this.comment&&(this.comment=void 0),this.isValueChangedDirectly=!1},Question.prototype.unbindValue=function(){this.clearValue()},Question.prototype.createValueCopy=function(){return this.getUnbindValue(this.value)},Question.prototype.initDataUI=function(){},Question.prototype.getUnbindValue=function(e){return this.isValueSurveyElement(e)?e:r.Helpers.getUnbindValue(e)},Question.prototype.isValueSurveyElement=function(e){return!!e&&(Array.isArray(e)?e.length>0&&this.isValueSurveyElement(e[0]):!!e.getType&&!!e.onPropertyChanged)},Question.prototype.canClearValueAsInvisible=function(e){return"onHiddenContainer"===e&&!this.isParentVisible||!this.isVisibleInSurvey&&(!this.page||!this.page.isStartPage)&&(!this.survey||!this.valueName||!this.survey.hasVisibleQuestionByValueName(this.valueName))},Object.defineProperty(Question.prototype,"isParentVisible",{get:function(){if(this.parentQuestion&&!this.parentQuestion.isVisible)return!1;for(var e=this.parent;e;){if(!e.isVisible)return!1;e=e.parent}return!0},enumerable:!1,configurable:!0}),Question.prototype.clearValueIfInvisible=function(e){void 0===e&&(e="onHidden");var t=this.getClearIfInvisible();"none"!==t&&("onHidden"!==e||"onComplete"!==t)&&("onHiddenContainer"!==e||t===e)&&this.clearValueIfInvisibleCore(e)},Question.prototype.clearValueIfInvisibleCore=function(e){this.canClearValueAsInvisible(e)&&(this.clearValue(),this.isValueChangedDirectly=void 0)},Object.defineProperty(Question.prototype,"clearIfInvisible",{get:function(){return this.getPropertyValue("clearIfInvisible")},set:function(e){this.setPropertyValue("clearIfInvisible",e)},enumerable:!1,configurable:!0}),Question.prototype.getClearIfInvisible=function(){var e=this.clearIfInvisible;return this.survey?this.survey.getQuestionClearIfInvisible(e):"default"!==e?e:"onComplete"},Object.defineProperty(Question.prototype,"displayValue",{get:function(){return this.isLoadingFromJson?"":this.getDisplayValue(!0)},enumerable:!1,configurable:!0}),Question.prototype.getDisplayValue=function(e,t){void 0===t&&(t=void 0);var o=this.calcDisplayValue(e,t);return this.survey&&(o=this.survey.getQuestionDisplayValue(this,o)),this.displayValueCallback?this.displayValueCallback(o):o},Question.prototype.calcDisplayValue=function(e,t){if(void 0===t&&(t=void 0),this.customWidget){var o=this.customWidget.getDisplayValue(this,t);if(o)return o}return(t=void 0==t?this.createValueCopy():t,this.isValueEmpty(t,!this.allowSpaceAsAnswer))?this.getDisplayValueEmpty():this.getDisplayValueCore(e,t)},Question.prototype.getDisplayValueCore=function(e,t){return t},Question.prototype.getDisplayValueEmpty=function(){return""},Object.defineProperty(Question.prototype,"defaultValue",{get:function(){return this.getPropertyValue("defaultValue")},set:function(e){if(this.isValueExpression(e)){this.defaultValueExpression=e.substring(1);return}this.setPropertyValue("defaultValue",this.convertDefaultValue(e)),this.updateValueWithDefaults()},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"defaultValueExpression",{get:function(){return this.getPropertyValue("defaultValueExpression")},set:function(e){this.setPropertyValue("defaultValueExpression",e),this.defaultValueRunner=void 0,this.updateValueWithDefaults()},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"resetValueIf",{get:function(){return this.getPropertyValue("resetValueIf")},set:function(e){this.setPropertyValue("resetValueIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"setValueIf",{get:function(){return this.getPropertyValue("setValueIf")},set:function(e){this.setPropertyValue("setValueIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"setValueExpression",{get:function(){return this.getPropertyValue("setValueExpression")},set:function(e){this.setPropertyValue("setValueExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"resizeStyle",{get:function(){return this.allowResizeComment?"both":"none"},enumerable:!1,configurable:!0}),Question.prototype.getPlainData=function(e){var t=this;if(e||(e={includeEmpty:!0,includeQuestionTypes:!1}),e.includeEmpty||!this.isEmpty()){var o={name:this.name,title:this.locTitle.renderedHtml,value:this.value,displayValue:this.displayValue,isNode:!1,getString:function(e){return"object"==typeof e?JSON.stringify(e):e}};return!0===e.includeQuestionTypes&&(o.questionType=this.getType()),(e.calculations||[]).forEach(function(e){o[e.propertyName]=t.getPlainDataCalculatedValue(e.propertyName)}),this.hasComment&&(o.isNode=!0,o.data=[{name:0,isComment:!0,title:"Comment",value:d.settings.commentSuffix,displayValue:this.comment,getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!1}]),o}},Question.prototype.getPlainDataCalculatedValue=function(e){return this[e]},Object.defineProperty(Question.prototype,"correctAnswer",{get:function(){return this.getPropertyValue("correctAnswer")},set:function(e){this.setPropertyValue("correctAnswer",this.convertDefaultValue(e))},enumerable:!1,configurable:!0}),Question.prototype.convertDefaultValue=function(e){return e},Object.defineProperty(Question.prototype,"quizQuestionCount",{get:function(){return this.isVisible&&this.hasInput&&!this.isValueEmpty(this.correctAnswer)?this.getQuizQuestionCount():0},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"correctAnswerCount",{get:function(){return this.isEmpty()||this.isValueEmpty(this.correctAnswer)?0:this.getCorrectAnswerCount()},enumerable:!1,configurable:!0}),Question.prototype.getQuizQuestionCount=function(){return 1},Question.prototype.getCorrectAnswerCount=function(){return this.checkIfAnswerCorrect()?1:0},Question.prototype.checkIfAnswerCorrect=function(){var e=r.Helpers.isTwoValueEquals(this.value,this.correctAnswer,this.getAnswerCorrectIgnoreOrder(),d.settings.comparator.caseSensitive,!0),t=e?1:0,o={result:e,correctAnswer:t,correctAnswers:t,incorrectAnswers:this.quizQuestionCount-t};return this.survey&&this.survey.onCorrectQuestionAnswer(this,o),o.result},Question.prototype.getAnswerCorrectIgnoreOrder=function(){return!1},Question.prototype.isAnswerCorrect=function(){return this.correctAnswerCount==this.quizQuestionCount},Question.prototype.updateValueWithDefaults=function(){!(this.isLoadingFromJson||!this.isDesignMode&&this.isDefaultValueEmpty()||!this.isDesignMode&&!this.isEmpty()||this.isEmpty()&&this.isDefaultValueEmpty())&&(!this.isClearValueOnHidden||this.isVisible)&&(this.isDesignMode&&this.isContentElement&&this.isDefaultValueEmpty()||this.setDefaultValue())},Object.defineProperty(Question.prototype,"isClearValueOnHidden",{get:function(){var e=this.getClearIfInvisible();return"none"!==e&&"onComplete"!==e&&("onHidden"===e||"onHiddenContainer"===e)},enumerable:!1,configurable:!0}),Question.prototype.getQuestionFromArray=function(e,t){return null},Question.prototype.getDefaultValue=function(){return this.defaultValue},Question.prototype.isDefaultValueEmpty=function(){return!this.defaultValueExpression&&this.isValueEmpty(this.defaultValue,!this.allowSpaceAsAnswer)},Question.prototype.getDefaultRunner=function(e,t){return!e&&t&&(e=this.createExpressionRunner(t)),e&&(e.expression=t),e},Question.prototype.setDefaultValue=function(){var e=this;this.defaultValueRunner=this.getDefaultRunner(this.defaultValueRunner,this.defaultValueExpression),this.setValueAndRunExpression(this.defaultValueRunner,this.getUnbindValue(this.defaultValue),function(t){e.isTwoValueEquals(e.value,t)||(e.value=t)})},Question.prototype.isValueExpression=function(e){return!!e&&"string"==typeof e&&e.length>0&&"="==e[0]},Question.prototype.setValueAndRunExpression=function(e,t,o,n,r){var i=this;void 0===n&&(n=null),void 0===r&&(r=null);var func=function(e){i.runExpressionSetValue(e,o)};this.runDefaultValueExpression(e,n,r,func)||func(t)},Question.prototype.convertFuncValuetoQuestionValue=function(e){return r.Helpers.convertValToQuestionVal(e)},Question.prototype.runExpressionSetValue=function(e,t){t(this.convertFuncValuetoQuestionValue(e))},Question.prototype.runDefaultValueExpression=function(e,t,o,n){var r=this;return void 0===t&&(t=null),void 0===o&&(o=null),!!e&&!!this.data&&(n||(n=function(e){r.runExpressionSetValue(e,function(e){r.isTwoValueEquals(r.value,e)||(r.value=e)})}),t||(t=this.data.getFilteredValues()),o||(o=this.data.getFilteredProperties()),e&&e.canRun&&(e.onRunComplete=function(e){void 0==e&&(e=r.defaultValue),r.isChangingViaDefaultValue=!0,n(e),r.isChangingViaDefaultValue=!1},e.run(t,o)),!0)},Object.defineProperty(Question.prototype,"comment",{get:function(){return this.getQuestionComment()},set:function(e){if(e){var t=e.toString().trim();t!==e&&(e=t)===this.comment&&this.setPropertyValueDirectly("comment",e)}this.comment!=e&&(this.setQuestionComment(e),this.updateCommentElements())},enumerable:!1,configurable:!0}),Question.prototype.getCommentAreaCss=function(e){return void 0===e&&(e=!1),new g.CssClassBuilder().append("form-group",e).append(this.cssClasses.formGroup,!e).append(this.cssClasses.commentArea).toString()},Question.prototype.getQuestionComment=function(){return this.questionComment},Question.prototype.setQuestionComment=function(e){this.setNewComment(e)},Question.prototype.isEmpty=function(){return this.isValueEmpty(this.value,!this.allowSpaceAsAnswer)},Object.defineProperty(Question.prototype,"isAnswered",{get:function(){return this.getPropertyValue("isAnswered")},set:function(e){this.setPropertyValue("isAnswered",e)},enumerable:!1,configurable:!0}),Question.prototype.updateIsAnswered=function(){var e=this.isAnswered;this.setPropertyValue("isAnswered",this.getIsAnswered()),e!==this.isAnswered&&this.updateQuestionCss()},Question.prototype.getIsAnswered=function(){return!this.isEmpty()},Object.defineProperty(Question.prototype,"validators",{get:function(){return this.getPropertyValue("validators")},set:function(e){this.setPropertyValue("validators",e)},enumerable:!1,configurable:!0}),Question.prototype.getValidators=function(){return this.validators},Question.prototype.getSupportedValidators=function(){for(var e=[],t=this.getType();t;){var o=d.settings.supportedValidators[t];if(o)for(var n=o.length-1;n>=0;n--)e.splice(0,0,o[n]);t=i.Serializer.findClass(t).parentName}return e},Question.prototype.addConditionObjectsByContext=function(e,t){e.push({name:this.getValueName(),text:this.processedTitle,question:this})},Question.prototype.getNestedQuestions=function(e){void 0===e&&(e=!1);var t=[];return(this.collectNestedQuestions(t,e),1===t.length&&t[0]===this)?[]:t},Question.prototype.collectNestedQuestions=function(e,t){void 0===t&&(t=!1),(!t||this.isVisible)&&this.collectNestedQuestionsCore(e,t)},Question.prototype.collectNestedQuestionsCore=function(e,t){e.push(this)},Question.prototype.getConditionJson=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var o=new i.JsonObject().toJsonObject(this);return o.type=this.getType(),o},Question.prototype.hasErrors=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=null),this.errors.length;var o=this.checkForErrors(!!t&&!0===t.isOnValueChanged);return e&&(this.survey&&this.survey.beforeSettingQuestionErrors(this,o),this.errors=o,this.errors!==o&&this.errors.forEach(function(e){return e.locText.strChanged()})),this.updateContainsErrors(),this.isCollapsed&&t&&e&&o.length>0&&this.expand(),o.length>0},Question.prototype.validate=function(e,t){return void 0===e&&(e=!0),void 0===t&&(t=null),t&&t.isOnValueChanged&&this.parent&&this.parent.validateContainerOnly(),!this.hasErrors(e,t)},Object.defineProperty(Question.prototype,"currentErrorCount",{get:function(){return this.errors.length},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"requiredText",{get:function(){return null!=this.survey&&this.isRequired?this.survey.requiredText:""},enumerable:!1,configurable:!0}),Question.prototype.addError=function(e){if(e){var t=null;t="string"==typeof e||e instanceof String?new a.CustomError(e,this.survey):e,this.errors.push(t)}},Question.prototype.removeError=function(e){var t=this.errors,o=t.indexOf(e);-1!==o&&t.splice(o,1)},Question.prototype.checkForErrors=function(e){var t=[];return this.isVisible&&this.canCollectErrors()&&this.collectErrors(t,e),t},Question.prototype.canCollectErrors=function(){return!this.isReadOnly||d.settings.readOnly.enableValidation},Question.prototype.collectErrors=function(e,t){if(this.onCheckForErrors(e,t),!(e.length>0)&&this.canRunValidators(t)){var o=this.runValidators();if(o.length>0){e.length=0;for(var n=0;n<o.length;n++)e.push(o[n])}if(this.survey&&0==e.length){var r=this.fireSurveyValidation();r&&e.push(r)}}},Question.prototype.canRunValidators=function(e){return!0},Question.prototype.fireSurveyValidation=function(){return this.validateValueCallback?this.validateValueCallback():this.survey?this.survey.validateQuestion(this):null},Question.prototype.onCheckForErrors=function(e,t){var o=this;if((!t||this.isOldAnswered)&&this.hasRequiredError()){var n=new a.AnswerRequiredError(this.requiredErrorText,this);n.onUpdateErrorTextCallback=function(e){e.text=o.requiredErrorText},e.push(n)}},Question.prototype.hasRequiredError=function(){return this.isRequired&&this.isEmpty()},Object.defineProperty(Question.prototype,"isRunningValidators",{get:function(){return this.getIsRunningValidators()},enumerable:!1,configurable:!0}),Question.prototype.getIsRunningValidators=function(){return this.isRunningValidatorsValue},Question.prototype.runValidators=function(){var e=this;return this.validatorRunner&&(this.validatorRunner.onAsyncCompleted=null),this.validatorRunner=new l.ValidatorRunner,this.isRunningValidatorsValue=!0,this.validatorRunner.onAsyncCompleted=function(t){e.doOnAsyncCompleted(t)},this.validatorRunner.run(this)},Question.prototype.doOnAsyncCompleted=function(e){for(var t=0;t<e.length;t++)this.errors.push(e[t]);this.isRunningValidatorsValue=!1,this.raiseOnCompletedAsyncValidators()},Question.prototype.raiseOnCompletedAsyncValidators=function(){this.onCompletedAsyncValidators&&!this.isRunningValidators&&(this.onCompletedAsyncValidators(this.getAllErrors().length>0),this.onCompletedAsyncValidators=null)},Question.prototype.setNewValue=function(e){!this.isNewValueEqualsToValue(e)&&this.checkIsValueCorrect(e)&&(this.isOldAnswered=this.isAnswered,this.isSettingQuestionValue=!0,this.setNewValueInData(e),this.allowNotifyValueChanged&&this.onValueChanged(),this.isSettingQuestionValue=!1,this.isAnswered!==this.isOldAnswered&&this.updateQuestionCss(),this.isOldAnswered=void 0)},Question.prototype.checkIsValueCorrect=function(e){var t=this.isValueEmpty(e,!this.allowSpaceAsAnswer)||this.isNewValueCorrect(e);return t||y.ConsoleWarnings.inCorrectQuestionValue(this.name,e),t},Question.prototype.isNewValueCorrect=function(e){return!0},Question.prototype.isNewValueEqualsToValue=function(e){var t=this.value;return!!this.isTwoValueEquals(e,t,!1,!1)&&!(e===t&&t&&(Array.isArray(t)||"object"==typeof t))},Question.prototype.isTextValue=function(){return!1},Object.defineProperty(Question.prototype,"isSurveyInputTextUpdate",{get:function(){return!!this.survey&&this.survey.isUpdateValueTextOnTyping},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"requireStrictCompare",{get:function(){return!1},enumerable:!1,configurable:!0}),Question.prototype.getDataLocNotification=function(){return!!this.isInputTextUpdate&&"text"},Object.defineProperty(Question.prototype,"isInputTextUpdate",{get:function(){return this.isSurveyInputTextUpdate&&this.isTextValue()},enumerable:!1,configurable:!0}),Question.prototype.setNewValueInData=function(e){e=this.valueToData(e),this.isValueChangedInSurvey||this.setValueCore(e)},Question.prototype.getValueCore=function(){return this.questionValue},Question.prototype.setValueCore=function(e){this.setQuestionValue(e),null!=this.data&&this.canSetValueToSurvey()&&(e=this.valueForSurvey,this.data.setValue(this.getValueName(),e,this.getDataLocNotification(),this.allowNotifyValueChanged,this.name)),this.isMouseDown=!1},Question.prototype.canSetValueToSurvey=function(){return!0},Question.prototype.valueFromData=function(e){return e},Question.prototype.valueToData=function(e){return e},Question.prototype.convertToCorrectValue=function(e){return e},Question.prototype.onValueChanged=function(){},Question.prototype.onMouseDown=function(){this.isMouseDown=!0},Question.prototype.setNewComment=function(e){this.questionComment!==e&&(this.questionComment=e,null!=this.data&&this.data.setComment(this.getValueName(),e,!!this.isSurveyInputTextUpdate&&"text"))},Question.prototype.getValidName=function(e){return makeNameValid(e)},Question.prototype.updateValueFromSurvey=function(e){e=this.getUnbindValue(e),this.valueFromDataCallback&&(e=this.valueFromDataCallback(e)),this.checkIsValueCorrect(e)&&(this.isChangingViaDefaultValue=this.isValueEmpty(e),this.setQuestionValue(this.valueFromData(e)),this.isChangingViaDefaultValue=!1,this.updateDependedQuestions(),this.updateIsAnswered())},Question.prototype.updateCommentFromSurvey=function(e){this.questionComment=e},Question.prototype.onChangeQuestionValue=function(e){},Question.prototype.setValueChangedDirectly=function(){this.isValueChangedDirectly=!0},Question.prototype.setQuestionValue=function(e,t){void 0===t&&(t=!0),e=this.convertToCorrectValue(e);var o=this.isTwoValueEquals(this.questionValue,e);o||this.isChangingViaDefaultValue||this.setValueChangedDirectly(),this.questionValue=e,o||this.onChangeQuestionValue(e),!o&&this.allowNotifyValueChanged&&this.fireCallback(this.valueChangedCallback),t&&this.updateIsAnswered()},Question.prototype.onSurveyValueChanged=function(e){},Question.prototype.setVisibleIndex=function(e){return this.isVisible&&(this.hasTitle||d.settings.numbering.includeQuestionsWithHiddenTitle)&&(!this.hideNumber||d.settings.numbering.includeQuestionsWithHiddenNumber)||(e=-1),this.setPropertyValue("visibleIndex",e),this.setPropertyValue("no",this.calcNo()),e<0?0:1},Question.prototype.removeElement=function(e){return!1},Question.prototype.supportGoNextPageAutomatic=function(){return!1},Question.prototype.supportGoNextPageError=function(){return!0},Question.prototype.clearIncorrectValues=function(){},Question.prototype.clearOnDeletingContainer=function(){},Question.prototype.clearErrors=function(){this.errors=[]},Question.prototype.clearUnusedValues=function(){},Question.prototype.onAnyValueChanged=function(e,t){},Question.prototype.checkBindings=function(e,t){if(!this.bindings.isEmpty()&&this.data)for(var o=this.bindings.getPropertiesByValueName(e),n=0;n<o.length;n++){var i=o[n];this.isValueEmpty(t)&&r.Helpers.isNumber(this[i])&&(t=0),this[i]=t}},Question.prototype.getComponentName=function(){return h.RendererFactory.Instance.getRendererByQuestion(this)},Question.prototype.isDefaultRendering=function(){return!!this.customWidget||"default"===this.renderAs||"default"===this.getComponentName()},Question.prototype.getErrorCustomText=function(e,t){return this.survey?this.survey.getSurveyErrorCustomText(this,e,t):e},Question.prototype.getValidatorTitle=function(){return null},Object.defineProperty(Question.prototype,"validatedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),Question.prototype.getAllValues=function(){return this.data?this.data.getAllValues():null},Question.prototype.processPopupVisiblilityChanged=function(e,t){this.survey.processPopupVisiblityChanged(this,e,t)},Question.prototype.onTextKeyDownHandler=function(e){13===e.keyCode&&this.survey.questionEditFinishCallback(this,e)},Question.prototype.transformToMobileView=function(){},Question.prototype.transformToDesktopView=function(){},Question.prototype.needResponsiveWidth=function(){return!1},Question.prototype.supportResponsiveness=function(){return!1},Question.prototype.needResponsiveness=function(){return this.supportResponsiveness()&&this.isDefaultV2Theme&&!this.isDesignMode},Question.prototype.checkForResponsiveness=function(e){var t=this;this.needResponsiveness()&&(this.isCollapsed?this.registerPropertyChangedHandlers(["state"],function(){t.isExpanded&&(t.initResponsiveness(e),t.unregisterPropertyChangedHandlers(["state"],"for-responsiveness"))},"for-responsiveness"):this.initResponsiveness(e))},Question.prototype.getObservedElementSelector=function(){return".sd-scrollable-container"},Question.prototype.onMobileChanged=function(){this.onMobileChangedCallback&&this.onMobileChangedCallback()},Question.prototype.triggerResponsiveness=function(e){void 0===e&&(e=!0),this.triggerResponsivenessCallback&&this.triggerResponsivenessCallback(e)},Question.prototype.initResponsiveness=function(e){var t=this;if(this.destroyResizeObserver(),e&&this.isDefaultRendering()){var o=this.getObservedElementSelector();if(!o||!e.querySelector(o))return;var n=!1,r=void 0;this.triggerResponsivenessCallback=function(i){i&&(r=void 0,t.renderAs="default",n=!1);var callback=function(){var i=e.querySelector(o);!r&&t.isDefaultRendering()&&(r=i.scrollWidth),n=!n&&!!Object(f.isContainerVisible)(i)&&t.processResponsiveness(r,Object(f.getElementWidth)(i))};i?setTimeout(callback,1):callback()},this.resizeObserver=new ResizeObserver(function(e){window.requestAnimationFrame(function(){t.triggerResponsiveness(!1)})}),this.onMobileChangedCallback=function(){setTimeout(function(){var n=e.querySelector(o);t.processResponsiveness(r,Object(f.getElementWidth)(n))},0)},this.resizeObserver.observe(e)}},Question.prototype.getCompactRenderAs=function(){return"default"},Question.prototype.getDesktopRenderAs=function(){return"default"},Question.prototype.processResponsiveness=function(e,t){if(Math.abs(e-(t=Math.round(t)))>2){var o=this.renderAs;return e>t?this.renderAs=this.getCompactRenderAs():this.renderAs=this.getDesktopRenderAs(),o!==this.renderAs}return!1},Question.prototype.destroyResizeObserver=function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0,this.onMobileChangedCallback=void 0,this.triggerResponsivenessCallback=void 0,this.renderAs=this.getDesktopRenderAs())},Question.prototype.dispose=function(){e.prototype.dispose.call(this),this.resetDependedQuestions(),this.destroyResizeObserver()},Question.prototype.resetDependedQuestions=function(){for(var e=0;e<this.dependedQuestions.length;e++)this.dependedQuestions[e].resetDependedQuestion()},Object.defineProperty(Question.prototype,"isNewA11yStructure",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"ariaLabel",{get:function(){return this.isNewA11yStructure?null:this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"ariaRole",{get:function(){return this.isNewA11yStructure?null:"textbox"},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"ariaRequired",{get:function(){return this.isNewA11yStructure?null:this.isRequired?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"ariaInvalid",{get:function(){return this.isNewA11yStructure?null:this.hasCssError()?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"ariaLabelledBy",{get:function(){return this.isNewA11yStructure?null:this.hasTitle?this.ariaTitleId:null},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"ariaExpanded",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"ariaDescribedBy",{get:function(){return this.isNewA11yStructure?null:this.hasCssError()?this.id+"_errors":null},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"a11y_input_ariaRole",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"a11y_input_ariaRequired",{get:function(){return this.isRequired?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"a11y_input_ariaInvalid",{get:function(){return this.hasCssError()?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"a11y_input_ariaLabel",{get:function(){return this.hasTitle&&!this.parentQuestion?null:this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"a11y_input_ariaLabelledBy",{get:function(){return this.hasTitle&&!this.parentQuestion?this.ariaTitleId:null},enumerable:!1,configurable:!0}),Object.defineProperty(Question.prototype,"a11y_input_ariaDescribedBy",{get:function(){return this.hasCssError()?this.id+"_errors":null},enumerable:!1,configurable:!0}),Question.TextPreprocessorValuesMap={title:"processedTitle",require:"requiredText"},Question.questionCounter=100,__decorate([Object(i.property)({defaultValue:!1})],Question.prototype,"isMobile",void 0),__decorate([Object(i.property)()],Question.prototype,"forceIsInputReadOnly",void 0),__decorate([Object(i.property)({localizable:!0,onSet:function(e,t){return t.calcRenderedCommentPlaceholder()}})],Question.prototype,"commentPlaceholder",void 0),__decorate([Object(i.property)()],Question.prototype,"renderAs",void 0),__decorate([Object(i.property)({defaultValue:!1})],Question.prototype,"inMatrixMode",void 0),Question}(s.SurveyElement);function makeNameValid(e){if(!e)return e;for(e=e.trim().replace(/[\{\}]+/g,"");e&&e[0]===d.settings.expressionDisableConversionChar;)e=e.substring(1);return e}i.Serializer.addClass("question",[{name:"!name",onSettingValue:function(e,t){return makeNameValid(t)}},{name:"state",default:"default",choices:["default","collapsed","expanded"]},{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},{name:"useDisplayValuesInDynamicTexts:boolean",alternativeName:"useDisplayValuesInTitle",default:!0,layout:"row"},"visibleIf:condition",{name:"width"},{name:"minWidth",defaultFunc:function(){return d.settings.minWidth}},{name:"maxWidth",defaultFunc:function(){return d.settings.maxWidth}},{name:"startWithNewLine:boolean",default:!0,layout:"row"},{name:"indent:number",default:0,choices:[0,1,2,3],layout:"row"},{name:"page",isSerializable:!1,visibleIf:function(e){var t=e?e.survey:null;return!t||!t.pages||t.pages.length>1},choices:function(e){var t=e?e.survey:null;return t?t.pages.map(function(e){return{value:e.name,text:e.title}}):[]}},{name:"title:text",serializationProperty:"locTitle",layout:"row",dependsOn:"name",onPropertyEditorUpdate:function(e,t){e&&t&&(t.placeholder=e.name)}},{name:"titleLocation",default:"default",choices:["default","top","bottom","left","hidden"],layout:"row"},{name:"description:text",serializationProperty:"locDescription",layout:"row"},{name:"descriptionLocation",default:"default",choices:["default","underInput","underTitle"]},{name:"hideNumber:boolean",dependsOn:"titleLocation",visibleIf:function(e){if(!e)return!0;if("hidden"===e.titleLocation)return!1;var t=e?e.parent:null;if(!(!t||"off"!==t.showQuestionNumbers))return!1;var o=e?e.survey:null;return!o||"off"!==o.showQuestionNumbers||!!t&&"onpanel"===t.showQuestionNumbers}},{name:"valueName",onSettingValue:function(e,t){return makeNameValid(t)}},"enableIf:condition","resetValueIf:condition","setValueIf:condition",{name:"setValueExpression:expression",visibleIf:function(e){return!!e.setValueIf}},"defaultValue:value",{name:"defaultValueExpression:expression",category:"logic"},"correctAnswer:value",{name:"clearIfInvisible",default:"default",choices:["default","none","onComplete","onHidden","onHiddenContainer"]},{name:"isRequired:switch",overridingProperty:"requiredIf"},"requiredIf:condition",{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"errorLocation",default:"default",choices:["default","top","bottom"]},{name:"readOnly:switch",overridingProperty:"enableIf"},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"},{name:"bindings:bindings",serializationProperty:"bindings",visibleIf:function(e){return e.bindings.getNames().length>0}},{name:"renderAs",default:"default",visible:!1},{name:"showCommentArea",visible:!1,default:!1,alternativeName:"hasComment",category:"general"},{name:"commentText",dependsOn:"showCommentArea",visibleIf:function(e){return e.showCommentArea},serializationProperty:"locCommentText",layout:"row"},{name:"commentPlaceholder",alternativeName:"commentPlaceHolder",serializationProperty:"locCommentPlaceholder",dependsOn:"showCommentArea",visibleIf:function(e){return e.hasComment}}]),i.Serializer.addAlterNativeClassName("question","questionbase")},"./src/questionCustomWidgets.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionCustomWidget",function(){return r}),o.d(t,"CustomWidgetCollection",function(){return i});var n=o(/*! ./base */"./src/base.ts"),r=function(){function QuestionCustomWidget(e,t){this.name=e,this.widgetJson=t,this.htmlTemplate=t.htmlTemplate?t.htmlTemplate:""}return QuestionCustomWidget.prototype.afterRender=function(e,t){var o=this;this.widgetJson.afterRender&&(e.localeChangedCallback=function(){o.widgetJson.willUnmount&&o.widgetJson.willUnmount(e,t),o.widgetJson.afterRender(e,t)},this.widgetJson.afterRender(e,t))},QuestionCustomWidget.prototype.willUnmount=function(e,t){this.widgetJson.willUnmount&&this.widgetJson.willUnmount(e,t)},QuestionCustomWidget.prototype.getDisplayValue=function(e,t){return(void 0===t&&(t=void 0),this.widgetJson.getDisplayValue)?this.widgetJson.getDisplayValue(e,t):null},QuestionCustomWidget.prototype.isFit=function(e){return!!this.isLibraryLoaded()&&!!this.widgetJson.isFit&&this.widgetJson.isFit(e)},Object.defineProperty(QuestionCustomWidget.prototype,"canShowInToolbox",{get:function(){return!1!==this.widgetJson.showInToolbox&&"customtype"==i.Instance.getActivatedBy(this.name)&&(!this.widgetJson.widgetIsLoaded||this.widgetJson.widgetIsLoaded())},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCustomWidget.prototype,"showInToolbox",{get:function(){return!1!==this.widgetJson.showInToolbox},set:function(e){this.widgetJson.showInToolbox=e},enumerable:!1,configurable:!0}),QuestionCustomWidget.prototype.init=function(){this.widgetJson.init&&this.widgetJson.init()},QuestionCustomWidget.prototype.activatedByChanged=function(e){this.isLibraryLoaded()&&this.widgetJson.activatedByChanged&&this.widgetJson.activatedByChanged(e)},QuestionCustomWidget.prototype.isLibraryLoaded=function(){return!this.widgetJson.widgetIsLoaded||!0==this.widgetJson.widgetIsLoaded()},Object.defineProperty(QuestionCustomWidget.prototype,"isDefaultRender",{get:function(){return this.widgetJson.isDefaultRender},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCustomWidget.prototype,"pdfQuestionType",{get:function(){return this.widgetJson.pdfQuestionType},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCustomWidget.prototype,"pdfRender",{get:function(){return this.widgetJson.pdfRender},enumerable:!1,configurable:!0}),QuestionCustomWidget}(),i=function(){function CustomWidgetCollection(){this.widgetsValues=[],this.widgetsActivatedBy={},this.onCustomWidgetAdded=new n.Event}return Object.defineProperty(CustomWidgetCollection.prototype,"widgets",{get:function(){return this.widgetsValues},enumerable:!1,configurable:!0}),CustomWidgetCollection.prototype.add=function(e,t){void 0===t&&(t="property"),this.addCustomWidget(e,t)},CustomWidgetCollection.prototype.addCustomWidget=function(e,t){void 0===t&&(t="property");var o=e.name;o||(o="widget_"+this.widgets.length+"1");var n=new r(o,e);return this.widgetsValues.push(n),n.init(),this.widgetsActivatedBy[o]=t,n.activatedByChanged(t),this.onCustomWidgetAdded.fire(n,null),n},CustomWidgetCollection.prototype.getActivatedBy=function(e){return this.widgetsActivatedBy[e]||"property"},CustomWidgetCollection.prototype.setActivatedBy=function(e,t){if(e&&t){var o=this.getCustomWidgetByName(e);o&&(this.widgetsActivatedBy[e]=t,o.activatedByChanged(t))}},CustomWidgetCollection.prototype.clear=function(){this.widgetsValues=[]},CustomWidgetCollection.prototype.getCustomWidgetByName=function(e){for(var t=0;t<this.widgets.length;t++)if(this.widgets[t].name==e)return this.widgets[t];return null},CustomWidgetCollection.prototype.getCustomWidget=function(e){for(var t=0;t<this.widgetsValues.length;t++)if(this.widgetsValues[t].isFit(e))return this.widgetsValues[t];return null},CustomWidgetCollection.Instance=new CustomWidgetCollection,CustomWidgetCollection}()},"./src/question_baseselect.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionSelectBase",function(){return m}),o.d(t,"QuestionCheckboxBase",function(){return v});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./survey */"./src/survey.ts"),s=o(/*! ./question */"./src/question.ts"),a=o(/*! ./itemvalue */"./src/itemvalue.ts"),l=o(/*! ./surveyStrings */"./src/surveyStrings.ts"),u=o(/*! ./error */"./src/error.ts"),c=o(/*! ./choicesRestful */"./src/choicesRestful.ts"),p=o(/*! ./conditions */"./src/conditions.ts"),d=o(/*! ./helpers */"./src/helpers.ts"),h=o(/*! ./settings */"./src/settings.ts"),g=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),f=o(/*! ./utils/utils */"./src/utils/utils.ts"),y=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},m=function(e){function QuestionSelectBase(t){var o=e.call(this,t)||this;o.otherItemValue=new a.ItemValue("other"),o.noneItemValue=new a.ItemValue(h.settings.noneItemValue),o.isSettingDefaultValue=!1,o.isSettingComment=!1,o.isRunningChoices=!1,o.isFirstLoadChoicesFromUrl=!0,o.isUpdatingChoicesDependedQuestions=!1,o.prevIsOtherSelected=!1;var n=o.createLocalizableString("noneText",o.noneItemValue,!0,"noneItemText");o.noneItemValue.locOwner=o,o.noneItemValue.setLocText(n),o.createItemValues("choices"),o.registerPropertyChangedHandlers(["choices"],function(){o.filterItems()||o.onVisibleChoicesChanged()}),o.registerPropertyChangedHandlers(["choicesFromQuestion","choicesFromQuestionMode","choiceValuesFromQuestion","choiceTextsFromQuestion","showNoneItem"],function(){o.onVisibleChoicesChanged()}),o.registerPropertyChangedHandlers(["hideIfChoicesEmpty"],function(){o.onVisibleChanged()}),o.createNewArray("visibleChoices"),o.setNewRestfulProperty();var r=o.createLocalizableString("otherText",o.otherItemValue,!0,"otherItemText");return o.createLocalizableString("otherErrorText",o,!0,"otherRequiredError"),o.otherItemValue.locOwner=o,o.otherItemValue.setLocText(r),o.choicesByUrl.createItemValue=function(e){return o.createItemValue(e)},o.choicesByUrl.beforeSendRequestCallback=function(){o.onBeforeSendRequest()},o.choicesByUrl.getResultCallback=function(e){o.onLoadChoicesFromUrl(e)},o.choicesByUrl.updateResultCallback=function(e,t){return o.survey?o.survey.updateChoicesFromServer(o,e,t):e},o}return y(QuestionSelectBase,e),Object.defineProperty(QuestionSelectBase.prototype,"waitingChoicesByURL",{get:function(){return!this.isChoicesLoaded&&!this.choicesByUrl.isEmpty},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.getType=function(){return"selectbase"},QuestionSelectBase.prototype.dispose=function(){e.prototype.dispose.call(this);var t=this.getQuestionWithChoices();t&&t.removeDependedQuestion(this)},QuestionSelectBase.prototype.resetDependedQuestion=function(){this.choicesFromQuestion=""},Object.defineProperty(QuestionSelectBase.prototype,"otherId",{get:function(){return this.id+"_other"},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.getCommentElementsId=function(){return[this.commentId,this.otherId]},QuestionSelectBase.prototype.getItemValueType=function(){return"itemvalue"},QuestionSelectBase.prototype.createItemValue=function(e,t){var o=r.Serializer.createClass(this.getItemValueType(),e);return o.locOwner=this,t&&(o.text=t),o},Object.defineProperty(QuestionSelectBase.prototype,"isUsingCarryForward",{get:function(){return!!this.carryForwardQuestionType},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"carryForwardQuestionType",{get:function(){return this.getPropertyValue("carryForwardQuestionType")},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.setCarryForwardQuestionType=function(e,t){this.setPropertyValue("carryForwardQuestionType",e?"select":t?"array":void 0)},QuestionSelectBase.prototype.supportGoNextPageError=function(){return!this.isOtherSelected||!!this.otherValue},QuestionSelectBase.prototype.isLayoutTypeSupported=function(e){return!0},QuestionSelectBase.prototype.localeChanged=function(){e.prototype.localeChanged.call(this),"none"!==this.choicesOrder&&(this.updateVisibleChoices(),this.onVisibleChoicesChanged())},QuestionSelectBase.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.choicesFromUrl&&(a.ItemValue.locStrsChanged(this.choicesFromUrl),a.ItemValue.locStrsChanged(this.visibleChoices))},Object.defineProperty(QuestionSelectBase.prototype,"otherValue",{get:function(){return this.showCommentArea?this.otherValueCore:this.comment},set:function(e){this.showCommentArea?this.setOtherValueInternally(e):this.comment=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"otherValueCore",{get:function(){return this.getPropertyValue("otherValue")},set:function(e){this.setPropertyValue("otherValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"otherItem",{get:function(){return this.otherItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"isOtherSelected",{get:function(){return this.hasOther&&this.getHasOther(this.renderedValue)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"isNoneSelected",{get:function(){return this.hasNone&&this.getIsItemValue(this.renderedValue,this.noneItem)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"showNoneItem",{get:function(){return this.getPropertyValue("showNoneItem")},set:function(e){this.setPropertyValue("showNoneItem",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"hasNone",{get:function(){return this.showNoneItem},set:function(e){this.showNoneItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"noneItem",{get:function(){return this.noneItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"noneText",{get:function(){return this.getLocalizableStringText("noneText")},set:function(e){this.setLocalizableStringText("noneText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"locNoneText",{get:function(){return this.getLocalizableString("noneText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"choicesVisibleIf",{get:function(){return this.getPropertyValue("choicesVisibleIf","")},set:function(e){this.setPropertyValue("choicesVisibleIf",e),this.filterItems()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"choicesEnableIf",{get:function(){return this.getPropertyValue("choicesEnableIf","")},set:function(e){this.setPropertyValue("choicesEnableIf",e),this.filterItems()},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.surveyChoiceItemVisibilityChange=function(){this.filterItems()},QuestionSelectBase.prototype.runCondition=function(t,o){e.prototype.runCondition.call(this,t,o),this.runItemsEnableCondition(t,o),this.runItemsCondition(t,o)},QuestionSelectBase.prototype.isTextValue=function(){return!0},QuestionSelectBase.prototype.setDefaultValue=function(){this.isSettingDefaultValue=!this.isValueEmpty(this.defaultValue)&&this.hasUnknownValue(this.defaultValue),this.prevOtherValue=void 0,e.prototype.setDefaultValue.call(this),this.isSettingDefaultValue=!1},QuestionSelectBase.prototype.getIsMultipleValue=function(){return!1},QuestionSelectBase.prototype.convertDefaultValue=function(e){if(null==e||void 0==e)return e;if(this.getIsMultipleValue()){if(!Array.isArray(e))return[e]}else if(Array.isArray(e)&&e.length>0)return e[0];return e},QuestionSelectBase.prototype.filterItems=function(){if(this.isLoadingFromJson||!this.data||this.areInvisibleElementsShowing)return!1;var e=this.getDataFilteredValues(),t=this.getDataFilteredProperties();return this.runItemsEnableCondition(e,t),this.runItemsCondition(e,t)},QuestionSelectBase.prototype.runItemsCondition=function(e,t){this.setConditionalChoicesRunner();var o=this.runConditionsForItems(e,t);return this.filteredChoicesValue&&this.filteredChoicesValue.length===this.activeChoices.length&&(this.filteredChoicesValue=void 0),o&&(this.onVisibleChoicesChanged(),this.clearIncorrectValues()),o},QuestionSelectBase.prototype.runItemsEnableCondition=function(e,t){var o=this;this.setConditionalEnableChoicesRunner(),a.ItemValue.runEnabledConditionsForItems(this.activeChoices,this.conditionChoicesEnableIfRunner,e,t,function(e,t){return t&&o.onEnableItemCallBack(e)})&&this.clearDisabledValues(),this.onAfterRunItemsEnableCondition()},QuestionSelectBase.prototype.onAfterRunItemsEnableCondition=function(){},QuestionSelectBase.prototype.onEnableItemCallBack=function(e){return!0},QuestionSelectBase.prototype.onSelectedItemValuesChangedHandler=function(e){var t;null===(t=this.survey)||void 0===t||t.loadedChoicesFromServer(this)},QuestionSelectBase.prototype.getItemIfChoicesNotContainThisValue=function(e,t){return this.waitingChoicesByURL?this.createItemValue(e,t):null},QuestionSelectBase.prototype.getSingleSelectedItem=function(){var e=this.selectedItemValues;if(this.isEmpty())return null;var t=a.ItemValue.getItemByValue(this.visibleChoices,this.value);return this.onGetSingleSelectedItem(t),t||e&&this.value==e.id||this.updateSelectedItemValues(),t||e||(this.isOtherSelected?this.otherItem:this.getItemIfChoicesNotContainThisValue(this.value))},QuestionSelectBase.prototype.onGetSingleSelectedItem=function(e){},QuestionSelectBase.prototype.getMultipleSelectedItems=function(){return[]},QuestionSelectBase.prototype.setConditionalChoicesRunner=function(){this.choicesVisibleIf?(this.conditionChoicesVisibleIfRunner||(this.conditionChoicesVisibleIfRunner=new p.ConditionRunner(this.choicesVisibleIf)),this.conditionChoicesVisibleIfRunner.expression=this.choicesVisibleIf):this.conditionChoicesVisibleIfRunner=null},QuestionSelectBase.prototype.setConditionalEnableChoicesRunner=function(){this.choicesEnableIf?(this.conditionChoicesEnableIfRunner||(this.conditionChoicesEnableIfRunner=new p.ConditionRunner(this.choicesEnableIf)),this.conditionChoicesEnableIfRunner.expression=this.choicesEnableIf):this.conditionChoicesEnableIfRunner=null},QuestionSelectBase.prototype.canSurveyChangeItemVisibility=function(){return!!this.survey&&this.survey.canChangeChoiceItemsVisibility()},QuestionSelectBase.prototype.changeItemVisisbility=function(){var e=this;return this.canSurveyChangeItemVisibility()?function(t,o){return e.survey.getChoiceItemVisibility(e,t,o)}:null},QuestionSelectBase.prototype.runConditionsForItems=function(e,t){this.filteredChoicesValue=[];var o=this.changeItemVisisbility();return a.ItemValue.runConditionsForItems(this.activeChoices,this.getFilteredChoices(),this.areInvisibleElementsShowing?null:this.conditionChoicesVisibleIfRunner,e,t,!this.survey||!this.survey.areInvisibleElementsShowing,function(e,t){return o?o(e,t):t})},QuestionSelectBase.prototype.getHasOther=function(e){return this.getIsItemValue(e,this.otherItem)},QuestionSelectBase.prototype.getIsItemValue=function(e,t){return e===t.value},Object.defineProperty(QuestionSelectBase.prototype,"validatedValue",{get:function(){return this.rendredValueToDataCore(this.value)},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.createRestful=function(){return new c.ChoicesRestful},QuestionSelectBase.prototype.setNewRestfulProperty=function(){this.setPropertyValue("choicesByUrl",this.createRestful()),this.choicesByUrl.owner=this,this.choicesByUrl.loadingOwner=this},Object.defineProperty(QuestionSelectBase.prototype,"autoOtherMode",{get:function(){return this.getPropertyValue("autoOtherMode")},set:function(e){this.setPropertyValue("autoOtherMode",e)},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.getQuestionComment=function(){return this.showCommentArea?e.prototype.getQuestionComment.call(this):this.otherValueCore?this.otherValueCore:this.hasComment||this.getStoreOthersAsComment()?e.prototype.getQuestionComment.call(this):this.otherValueCore},QuestionSelectBase.prototype.selectOtherValueFromComment=function(e){this.value=e?this.otherItem.value:void 0},QuestionSelectBase.prototype.setQuestionComment=function(t){if(this.showCommentArea){e.prototype.setQuestionComment.call(this,t);return}this.onUpdateCommentOnAutoOtherMode(t),this.getStoreOthersAsComment()?e.prototype.setQuestionComment.call(this,t):this.setOtherValueInternally(t),this.updateChoicesDependedQuestions()},QuestionSelectBase.prototype.onUpdateCommentOnAutoOtherMode=function(e){if(this.autoOtherMode){this.prevOtherValue=void 0;var t=this.isOtherSelected;(!t&&e||t&&!e)&&this.selectOtherValueFromComment(!!e)}},QuestionSelectBase.prototype.setOtherValueInternally=function(e){this.isSettingComment||e==this.otherValueCore||(this.isSettingComment=!0,this.otherValueCore=e,this.isOtherSelected&&!this.isRenderedValueSetting&&(this.value=this.rendredValueToData(this.renderedValue)),this.isSettingComment=!1)},QuestionSelectBase.prototype.clearValue=function(){e.prototype.clearValue.call(this),this.prevOtherValue=void 0},QuestionSelectBase.prototype.updateCommentFromSurvey=function(t){e.prototype.updateCommentFromSurvey.call(this,t),this.prevOtherValue=void 0},Object.defineProperty(QuestionSelectBase.prototype,"renderedValue",{get:function(){return this.getPropertyValue("renderedValue",null)},set:function(e){this.setPropertyValue("renderedValue",e);var e=this.rendredValueToData(e);this.isTwoValueEquals(e,this.value)||(this.value=e)},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.setQuestionValue=function(t,o,n){if(void 0===o&&(o=!0),void 0===n&&(n=!0),!(this.isLoadingFromJson||this.isTwoValueEquals(this.value,t))&&(e.prototype.setQuestionValue.call(this,t,o),this.setPropertyValue("renderedValue",this.rendredValueFromData(t)),this.updateChoicesDependedQuestions(),!this.hasComment&&n)){var r=this.isOtherSelected;if(r&&this.prevOtherValue){var i=this.prevOtherValue;this.prevOtherValue=void 0,this.otherValue=i}!r&&this.otherValue&&(this.getStoreOthersAsComment()&&!this.autoOtherMode&&(this.prevOtherValue=this.otherValue),this.otherValue="")}},QuestionSelectBase.prototype.setNewValue=function(t){t=this.valueFromData(t),(this.choicesByUrl.isRunning||this.choicesByUrl.isWaitingForParameters)&&this.isValueEmpty(t)||(this.cachedValueForUrlRequests=t),e.prototype.setNewValue.call(this,t)},QuestionSelectBase.prototype.valueFromData=function(t){var o=a.ItemValue.getItemByValue(this.activeChoices,t);return o?o.value:e.prototype.valueFromData.call(this,t)},QuestionSelectBase.prototype.rendredValueFromData=function(e){return this.getStoreOthersAsComment()?e:this.renderedValueFromDataCore(e)},QuestionSelectBase.prototype.rendredValueToData=function(e){return this.getStoreOthersAsComment()?e:this.rendredValueToDataCore(e)},QuestionSelectBase.prototype.renderedValueFromDataCore=function(e){return this.hasUnknownValue(e,!0,!1)?(this.otherValue=e,this.otherItem.value):this.valueFromData(e)},QuestionSelectBase.prototype.rendredValueToDataCore=function(e){return e==this.otherItem.value&&this.needConvertRenderedOtherToDataValue()&&(e=this.otherValue),e},QuestionSelectBase.prototype.needConvertRenderedOtherToDataValue=function(){var e=this.otherValue;return!!(e&&(e=e.trim()))&&this.hasUnknownValue(e,!0,!1)},QuestionSelectBase.prototype.getIsQuestionReady=function(){return e.prototype.getIsQuestionReady.call(this)&&!this.waitingChoicesByURL&&!this.waitingGetChoiceDisplayValueResponse},QuestionSelectBase.prototype.updateSelectedItemValues=function(){var e=this;if(!(this.waitingGetChoiceDisplayValueResponse||!this.survey||this.isEmpty())){var t=this.value,o=Array.isArray(t)?t:[t];o.some(function(t){return!a.ItemValue.getItemByValue(e.choices,t)})&&(this.choicesLazyLoadEnabled||!this.choicesByUrl.isEmpty)&&(this.waitingGetChoiceDisplayValueResponse=!0,this.updateIsReady(),this.survey.getChoiceDisplayValue({question:this,values:o,setItems:function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(e.waitingGetChoiceDisplayValueResponse=!1,!n||!n.length){e.updateIsReady();return}var s=n.map(function(t,n){return e.createItemValue(o[n],t)});e.setCustomValuesIntoItems(s,r),Array.isArray(t)?e.selectedItemValues=s:e.selectedItemValues=s[0],e.updateIsReady()}}))}},QuestionSelectBase.prototype.setCustomValuesIntoItems=function(e,t){Array.isArray(t)&&0!==t.length&&t.forEach(function(t){var o=t.values,n=t.propertyName;if(Array.isArray(o))for(var r=0;r<e.length&&r<o.length;r++)e[r][n]=o[r]})},QuestionSelectBase.prototype.hasUnknownValue=function(e,t,o,n){if(void 0===t&&(t=!1),void 0===o&&(o=!0),void 0===n&&(n=!1),!n&&this.isValueEmpty(e)||t&&e==this.otherItem.value||this.hasNone&&e==this.noneItem.value)return!1;var r=o?this.getFilteredChoices():this.activeChoices;return null==a.ItemValue.getItemByValue(r,e)},QuestionSelectBase.prototype.isValueDisabled=function(e){var t=a.ItemValue.getItemByValue(this.getFilteredChoices(),e);return!!t&&!t.isEnabled},Object.defineProperty(QuestionSelectBase.prototype,"choicesByUrl",{get:function(){return this.getPropertyValue("choicesByUrl")},set:function(e){e&&(this.setNewRestfulProperty(),this.choicesByUrl.fromJSON(e.toJSON()))},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"choices",{get:function(){return this.getPropertyValue("choices")},set:function(e){this.setPropertyValue("choices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"choicesFromQuestion",{get:function(){return this.getPropertyValue("choicesFromQuestion")},set:function(e){var t=this.getQuestionWithChoices();this.isLockVisibleChoices=!!t&&t.name===e,t&&t.name!==e&&t.removeDependedQuestion(this),this.setPropertyValue("choicesFromQuestion",e),this.isLockVisibleChoices=!1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"choicesFromQuestionMode",{get:function(){return this.getPropertyValue("choicesFromQuestionMode")},set:function(e){this.setPropertyValue("choicesFromQuestionMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"choiceValuesFromQuestion",{get:function(){return this.getPropertyValue("choiceValuesFromQuestion")},set:function(e){this.setPropertyValue("choiceValuesFromQuestion",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"choiceTextsFromQuestion",{get:function(){return this.getPropertyValue("choiceTextsFromQuestion")},set:function(e){this.setPropertyValue("choiceTextsFromQuestion",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"hideIfChoicesEmpty",{get:function(){return this.getPropertyValue("hideIfChoicesEmpty")},set:function(e){this.setPropertyValue("hideIfChoicesEmpty",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"keepIncorrectValues",{get:function(){return this.getPropertyValue("keepIncorrectValues",!1)},set:function(e){this.setPropertyValue("keepIncorrectValues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"storeOthersAsComment",{get:function(){return this.getPropertyValue("storeOthersAsComment")},set:function(e){this.setPropertyValue("storeOthersAsComment",e)},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.hasOtherChanged=function(){this.onVisibleChoicesChanged()},Object.defineProperty(QuestionSelectBase.prototype,"choicesOrder",{get:function(){return this.getPropertyValue("choicesOrder")},set:function(e){(e=e.toLowerCase())!=this.choicesOrder&&(this.setPropertyValue("choicesOrder",e),this.onVisibleChoicesChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"otherText",{get:function(){return this.getLocalizableStringText("otherText")},set:function(e){this.setLocalizableStringText("otherText",e),this.onVisibleChoicesChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"locOtherText",{get:function(){return this.getLocalizableString("otherText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"otherPlaceHolder",{get:function(){return this.otherPlaceholder},set:function(e){this.otherPlaceholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"otherErrorText",{get:function(){return this.getLocalizableStringText("otherErrorText")},set:function(e){this.setLocalizableStringText("otherErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"locOtherErrorText",{get:function(){return this.getLocalizableString("otherErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"visibleChoices",{get:function(){return this.getPropertyValue("visibleChoices")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"enabledChoices",{get:function(){for(var e=[],t=this.visibleChoices,o=0;o<t.length;o++)t[o].isEnabled&&e.push(t[o]);return e},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.updateVisibleChoices=function(){if(!this.isLoadingFromJson&&!this.isDisposed){var e=[],t=this.calcVisibleChoices();t||(t=[]);for(var o=0;o<t.length;o++)e.push(t[o]);var n=this.visibleChoices;(!this.isTwoValueEquals(n,e)||this.choicesLazyLoadEnabled)&&this.setArrayPropertyDirectly("visibleChoices",e)}},QuestionSelectBase.prototype.calcVisibleChoices=function(){if(this.canUseFilteredChoices())return this.getFilteredChoices();var e=this.sortVisibleChoices(this.getFilteredChoices().slice());return this.addToVisibleChoices(e,this.isAddDefaultItems),e},QuestionSelectBase.prototype.canUseFilteredChoices=function(){return!this.isAddDefaultItems&&!this.hasNone&&!this.hasOther&&"none"==this.choicesOrder},QuestionSelectBase.prototype.setCanShowOptionItemCallback=function(e){this.canShowOptionItemCallback=e,e&&this.onVisibleChoicesChanged()},Object.defineProperty(QuestionSelectBase.prototype,"newItem",{get:function(){return this.newItemValue},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.addToVisibleChoices=function(e,t){t&&(this.newItemValue||(this.newItemValue=this.createItemValue("newitem"),this.newItemValue.isGhost=!0),!this.isUsingCarryForward&&this.canShowOptionItem(this.newItemValue,t,!1)&&e.push(this.newItemValue)),this.supportNone()&&this.canShowOptionItem(this.noneItem,t,this.hasNone)&&e.push(this.noneItem),this.supportOther()&&this.canShowOptionItem(this.otherItem,t,this.hasOther)&&e.push(this.otherItem)},QuestionSelectBase.prototype.canShowOptionItem=function(e,t,o){var n=t&&(!this.canShowOptionItemCallback||this.canShowOptionItemCallback(e))||o;return this.canSurveyChangeItemVisibility()?this.changeItemVisisbility()(e,n):n},QuestionSelectBase.prototype.isItemInList=function(e){return e===this.otherItem?this.hasOther:e===this.noneItem?this.hasNone:e!==this.newItemValue},Object.defineProperty(QuestionSelectBase.prototype,"isAddDefaultItems",{get:function(){return h.settings.supportCreatorV2&&h.settings.showDefaultItemsInCreatorV2&&this.isDesignMode&&!this.customWidget&&!this.isContentElement},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.getPlainData=function(t){var o=this;void 0===t&&(t={includeEmpty:!0,includeQuestionTypes:!1});var n=e.prototype.getPlainData.call(this,t);if(n){var r=Array.isArray(this.value)?this.value:[this.value];n.isNode=!0,n.data=(n.data||[]).concat(r.map(function(e,n){var r=a.ItemValue.getItemByValue(o.visibleChoices,e),i={name:n,title:"Choice",value:e,displayValue:o.getChoicesDisplayValue(o.visibleChoices,e),getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!1};return r&&(t.calculations||[]).forEach(function(e){i[e.propertyName]=r[e.propertyName]}),o.isOtherSelected&&o.otherItemValue===r&&(i.isOther=!0,i.displayValue=o.otherValue),i}))}return n},QuestionSelectBase.prototype.getDisplayValueCore=function(e,t){return this.getChoicesDisplayValue(this.visibleChoices,t)},QuestionSelectBase.prototype.getDisplayValueEmpty=function(){return a.ItemValue.getTextOrHtmlByValue(this.visibleChoices,void 0)},QuestionSelectBase.prototype.getChoicesDisplayValue=function(e,t){if(t==this.otherItemValue.value)return this.otherValue?this.otherValue:this.locOtherText.textOrHtml;var o=this.getSingleSelectedItem();if(o&&this.isTwoValueEquals(o.value,t))return o.locText.textOrHtml;var n=a.ItemValue.getTextOrHtmlByValue(e,t);return""==n&&t?t:n},QuestionSelectBase.prototype.getDisplayArrayValue=function(e,t,o){for(var n=this,r=this.visibleChoices,i=[],s=[],a=0;a<t.length;a++)s.push(o?o(a):t[a]);if(d.Helpers.isTwoValueEquals(this.value,s)&&this.getMultipleSelectedItems().forEach(function(e){return i.push(n.getItemDisplayValue(e))}),0===i.length)for(var a=0;a<s.length;a++){var l=this.getChoicesDisplayValue(r,s[a]);l&&i.push(l)}return i.join(", ")},QuestionSelectBase.prototype.getItemDisplayValue=function(e){return e===this.otherItem&&this.comment?this.comment:e.locText.textOrHtml},QuestionSelectBase.prototype.getFilteredChoices=function(){return this.filteredChoicesValue?this.filteredChoicesValue:this.activeChoices},Object.defineProperty(QuestionSelectBase.prototype,"activeChoices",{get:function(){var e=this.getCarryForwardQuestion();return"select"===this.carryForwardQuestionType?(e.addDependedQuestion(this),this.getChoicesFromSelectQuestion(e)):"array"===this.carryForwardQuestionType?(e.addDependedQuestion(this),this.getChoicesFromArrayQuestion(e)):this.choicesFromUrl?this.choicesFromUrl:this.getChoices()},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.getCarryForwardQuestion=function(e){var t=this.findCarryForwardQuestion(e),o=this.getQuestionWithChoicesCore(t),n=o?null:this.getQuestionWithArrayValue(t);return this.setCarryForwardQuestionType(!!o,!!n),o||n?t:null},QuestionSelectBase.prototype.getIsReadyDependsOn=function(){var t=e.prototype.getIsReadyDependsOn.call(this);return this.carryForwardQuestion&&t.push(this.carryForwardQuestion),t},QuestionSelectBase.prototype.getQuestionWithChoices=function(){return this.getQuestionWithChoicesCore(this.findCarryForwardQuestion())},QuestionSelectBase.prototype.findCarryForwardQuestion=function(e){return e||(e=this.data),this.carryForwardQuestion=null,this.choicesFromQuestion&&e&&(this.carryForwardQuestion=e.findQuestionByName(this.choicesFromQuestion)),this.carryForwardQuestion},QuestionSelectBase.prototype.getQuestionWithChoicesCore=function(e){return e&&e.visibleChoices&&r.Serializer.isDescendantOf(e.getType(),"selectbase")&&e!==this?e:null},QuestionSelectBase.prototype.getQuestionWithArrayValue=function(e){return e&&e.isValueArray?e:null},QuestionSelectBase.prototype.getChoicesFromArrayQuestion=function(e){if(this.isDesignMode)return[];var t=e.value;if(!Array.isArray(t))return[];for(var o=[],n=0;n<t.length;n++){var r=t[n];if(d.Helpers.isValueObject(r)){var i=this.getValueKeyName(r);if(i&&!this.isValueEmpty(r[i])){var s=this.choiceTextsFromQuestion?r[this.choiceTextsFromQuestion]:void 0;o.push(this.createItemValue(r[i],s))}}}return o},QuestionSelectBase.prototype.getValueKeyName=function(e){if(this.choiceValuesFromQuestion)return this.choiceValuesFromQuestion;var t=Object.keys(e);return t.length>0?t[0]:void 0},QuestionSelectBase.prototype.getChoicesFromSelectQuestion=function(e){if(this.isDesignMode)return[];for(var t=[],o="selected"==this.choicesFromQuestionMode||"unselected"!=this.choicesFromQuestionMode&&void 0,n=e.visibleChoices,r=0;r<n.length;r++)if(!this.isBuiltInChoice(n[r],e)){if(void 0===o){t.push(this.copyChoiceItem(n[r]));continue}var i=e.isItemSelected(n[r]);(i&&o||!i&&!o)&&t.push(this.copyChoiceItem(n[r]))}return"selected"===this.choicesFromQuestionMode&&!this.showOtherItem&&e.isOtherSelected&&e.comment&&t.push(this.createItemValue(e.otherItem.value,e.comment)),t},QuestionSelectBase.prototype.copyChoiceItem=function(e){var t=this.createItemValue(e.value);return t.setData(e),t},Object.defineProperty(QuestionSelectBase.prototype,"hasActiveChoices",{get:function(){var e=this.visibleChoices;e&&0!=e.length||(this.onVisibleChoicesChanged(),e=this.visibleChoices);for(var t=0;t<e.length;t++)if(!this.isBuiltInChoice(e[t],this))return!0;return!1},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.isHeadChoice=function(e,t){return!1},QuestionSelectBase.prototype.isFootChoice=function(e,t){return e===t.noneItem||e===t.otherItem||e===t.newItemValue},QuestionSelectBase.prototype.isBuiltInChoice=function(e,t){return this.isHeadChoice(e,t)||this.isFootChoice(e,t)},QuestionSelectBase.prototype.getChoices=function(){return this.choices},QuestionSelectBase.prototype.supportOther=function(){return this.isSupportProperty("showOtherItem")},QuestionSelectBase.prototype.supportNone=function(){return this.isSupportProperty("showNoneItem")},QuestionSelectBase.prototype.isSupportProperty=function(e){return!this.isDesignMode||this.getPropertyByName(e).visible},QuestionSelectBase.prototype.onCheckForErrors=function(t,o){var n=this;if(e.prototype.onCheckForErrors.call(this,t,o),this.hasOther&&this.isOtherSelected&&!this.otherValue){var r=new u.OtherEmptyError(this.otherErrorText,this);r.onUpdateErrorTextCallback=function(e){e.text=n.otherErrorText},t.push(r)}},QuestionSelectBase.prototype.setSurveyImpl=function(t,o){this.isRunningChoices=!0,e.prototype.setSurveyImpl.call(this,t,o),this.isRunningChoices=!1,this.runChoicesByUrl(),this.isAddDefaultItems&&this.updateVisibleChoices()},QuestionSelectBase.prototype.setSurveyCore=function(t){e.prototype.setSurveyCore.call(this,t),t&&this.choicesFromQuestion&&this.onVisibleChoicesChanged()},QuestionSelectBase.prototype.getStoreOthersAsComment=function(){return!this.isSettingDefaultValue&&!this.showCommentArea&&(!0===this.storeOthersAsComment||"default"==this.storeOthersAsComment&&(null==this.survey||this.survey.storeOthersAsComment)||!this.choicesByUrl.isEmpty&&!this.choicesFromUrl)},QuestionSelectBase.prototype.onSurveyLoad=function(){this.runChoicesByUrl(),this.onVisibleChoicesChanged(),e.prototype.onSurveyLoad.call(this)},QuestionSelectBase.prototype.onAnyValueChanged=function(t,o){e.prototype.onAnyValueChanged.call(this,t,o),t!=this.getValueName()&&this.runChoicesByUrl();var n=this.choicesFromQuestion;t&&n&&(t===n||o===n)&&this.onVisibleChoicesChanged()},QuestionSelectBase.prototype.updateValueFromSurvey=function(t){var o="";this.hasOther&&!this.isRunningChoices&&!this.choicesByUrl.isRunning&&this.getStoreOthersAsComment()&&(this.hasUnknownValue(t)&&!this.getHasOther(t)?(o=this.getCommentFromValue(t),t=this.setOtherValueIntoValue(t)):o=this.data.getComment(this.getValueName())),e.prototype.updateValueFromSurvey.call(this,t),(this.isRunningChoices||this.choicesByUrl.isRunning)&&!this.isEmpty()&&(this.cachedValueForUrlRequests=this.value),o&&this.setNewComment(o)},QuestionSelectBase.prototype.getCommentFromValue=function(e){return e},QuestionSelectBase.prototype.setOtherValueIntoValue=function(e){return this.otherItem.value},QuestionSelectBase.prototype.onOtherValueInput=function(e){this.isInputTextUpdate?e.target&&(this.otherValue=e.target.value):this.updateCommentElements()},QuestionSelectBase.prototype.onOtherValueChange=function(e){this.otherValue=e.target.value,this.otherValue!==e.target.value&&(e.target.value=this.otherValue)},QuestionSelectBase.prototype.runChoicesByUrl=function(){if(this.choicesByUrl&&!this.isLoadingFromJson&&!this.isRunningChoices){var e=this.surveyImpl?this.surveyImpl.getTextProcessor():this.textProcessor;e||(e=this.survey),e&&(this.updateIsReady(),this.isRunningChoices=!0,this.choicesByUrl.run(e),this.isRunningChoices=!1)}},QuestionSelectBase.prototype.onBeforeSendRequest=function(){!0!==h.settings.web.disableQuestionWhileLoadingChoices||this.isReadOnly||(this.enableOnLoadingChoices=!0,this.readOnly=!0)},QuestionSelectBase.prototype.onLoadChoicesFromUrl=function(e){this.enableOnLoadingChoices&&(this.readOnly=!1);var t=[];!this.isReadOnly&&this.choicesByUrl&&this.choicesByUrl.error&&t.push(this.choicesByUrl.error);var o=null,n=!0;this.isFirstLoadChoicesFromUrl&&!this.cachedValueForUrlRequests&&this.defaultValue&&(this.cachedValueForUrlRequests=this.defaultValue,n=!1),this.isValueEmpty(this.cachedValueForUrlRequests)&&(this.cachedValueForUrlRequests=this.value),this.isFirstLoadChoicesFromUrl=!1;var r=this.createCachedValueForUrlRequests(this.cachedValueForUrlRequests,n);if(e&&(e.length>0||this.choicesByUrl.allowEmptyResponse)&&(o=[],a.ItemValue.setData(o,e)),o)for(var i=0;i<o.length;i++)o[i].locOwner=this;if(this.choicesFromUrl=o,this.filterItems(),this.onVisibleChoicesChanged(),o){var s=this.updateCachedValueForUrlRequests(r,o);if(s&&!this.isReadOnly){var l=!this.isTwoValueEquals(this.value,s.value);try{this.isValueEmpty(s.value)||(this.allowNotifyValueChanged=!1,this.setQuestionValue(void 0,!0,!1)),this.allowNotifyValueChanged=l,l?this.value=s.value:this.setQuestionValue(s.value)}finally{this.allowNotifyValueChanged=!0}}}this.isReadOnly||o||this.isFirstLoadChoicesFromUrl||(this.value=null),this.errors=t,this.choicesLoaded()},QuestionSelectBase.prototype.createCachedValueForUrlRequests=function(e,t){if(this.isValueEmpty(e))return null;if(Array.isArray(e)){for(var o=[],n=0;n<e.length;n++)o.push(this.createCachedValueForUrlRequests(e[n],!0));return o}var r=!t||!this.hasUnknownValue(e);return{value:e,isExists:r}},QuestionSelectBase.prototype.updateCachedValueForUrlRequests=function(e,t){if(this.isValueEmpty(e))return null;if(Array.isArray(e)){for(var o=[],n=0;n<e.length;n++){var r=this.updateCachedValueForUrlRequests(e[n],t);if(r&&!this.isValueEmpty(r.value)){var i=r.value,s=a.ItemValue.getItemByValue(t,r.value);s&&(i=s.value),o.push(i)}}return{value:o}}var l=e.isExists&&this.hasUnknownValue(e.value)?null:e.value,s=a.ItemValue.getItemByValue(t,l);return s&&(l=s.value),{value:l}},QuestionSelectBase.prototype.updateChoicesDependedQuestions=function(){this.isLoadingFromJson||this.isUpdatingChoicesDependedQuestions||!this.allowNotifyValueChanged||this.choicesByUrl.isRunning||(this.isUpdatingChoicesDependedQuestions=!0,this.updateDependedQuestions(),this.isUpdatingChoicesDependedQuestions=!1)},QuestionSelectBase.prototype.updateDependedQuestion=function(){this.onVisibleChoicesChanged(),this.clearIncorrectValues()},QuestionSelectBase.prototype.onSurveyValueChanged=function(t){e.prototype.onSurveyValueChanged.call(this,t),this.updateChoicesDependedQuestions()},QuestionSelectBase.prototype.onVisibleChoicesChanged=function(){this.isLoadingFromJson||this.isLockVisibleChoices||(this.updateVisibleChoices(),this.onVisibleChanged(),this.visibleChoicesChangedCallback&&this.visibleChoicesChangedCallback(),this.updateChoicesDependedQuestions())},QuestionSelectBase.prototype.isVisibleCore=function(){var t=e.prototype.isVisibleCore.call(this);if(!this.hideIfChoicesEmpty||!t)return t;var o=this.getFilteredChoices();return!o||o.length>0},QuestionSelectBase.prototype.sortVisibleChoices=function(e){if(this.isDesignMode)return e;var t=this.choicesOrder.toLowerCase();return"asc"==t?this.sortArray(e,1):"desc"==t?this.sortArray(e,-1):"random"==t?this.randomizeArray(e):e},QuestionSelectBase.prototype.sortArray=function(e,t){return e.sort(function(e,o){return d.Helpers.compareStrings(e.calculatedText,o.calculatedText)*t})},QuestionSelectBase.prototype.randomizeArray=function(e){return d.Helpers.randomizeArray(e)},QuestionSelectBase.prototype.clearIncorrectValues=function(){this.hasValueToClearIncorrectValues()&&(!this.carryForwardQuestion||this.carryForwardQuestion.isReady)&&(!this.survey||!(this.survey.questionsByValueName(this.getValueName()).length>1))&&(!this.choicesByUrl||this.choicesByUrl.isEmpty||this.choicesFromUrl&&0!=this.choicesFromUrl.length)&&(this.clearIncorrectValuesCallback?this.clearIncorrectValuesCallback():this.clearIncorrectValuesCore())},QuestionSelectBase.prototype.hasValueToClearIncorrectValues=function(){return(!this.survey||!this.survey.keepIncorrectValues)&&!this.keepIncorrectValues&&!this.isEmpty()},QuestionSelectBase.prototype.clearValueIfInvisibleCore=function(t){e.prototype.clearValueIfInvisibleCore.call(this,t),this.clearIncorrectValues()},QuestionSelectBase.prototype.isItemSelected=function(e){return e===this.otherItem?this.isOtherSelected:this.isItemSelectedCore(e)},QuestionSelectBase.prototype.isItemSelectedCore=function(e){return e.value===this.value},QuestionSelectBase.prototype.clearDisabledValues=function(){this.survey&&this.survey.clearValueOnDisableItems&&this.clearDisabledValuesCore()},QuestionSelectBase.prototype.clearIncorrectValuesCore=function(){var e=this.value;this.canClearValueAnUnknown(e)&&this.clearValue()},QuestionSelectBase.prototype.canClearValueAnUnknown=function(e){return(!!this.getStoreOthersAsComment()||!this.isOtherSelected)&&this.hasUnknownValue(e,!0,!0,!0)},QuestionSelectBase.prototype.clearDisabledValuesCore=function(){this.isValueDisabled(this.value)&&this.clearValue()},QuestionSelectBase.prototype.clearUnusedValues=function(){e.prototype.clearUnusedValues.call(this),this.isOtherSelected||(this.otherValue=""),this.showCommentArea||this.getStoreOthersAsComment()||this.isOtherSelected||(this.comment="")},QuestionSelectBase.prototype.getColumnClass=function(){return new g.CssClassBuilder().append(this.cssClasses.column).append("sv-q-column-"+this.colCount,this.hasColumns).toString()},QuestionSelectBase.prototype.getItemIndex=function(e){return this.visibleChoices.indexOf(e)},QuestionSelectBase.prototype.getItemClass=function(e){var t={item:e},o=this.getItemClassCore(e,t);return t.css=o,this.survey&&this.survey.updateChoiceItemCss(this,t),t.css},QuestionSelectBase.prototype.getCurrentColCount=function(){return this.colCount},QuestionSelectBase.prototype.getItemClassCore=function(e,t){var o=new g.CssClassBuilder().append(this.cssClasses.item).append(this.cssClasses.itemInline,!this.hasColumns&&0===this.colCount).append("sv-q-col-"+this.getCurrentColCount(),!this.hasColumns&&0!==this.colCount).append(this.cssClasses.itemOnError,this.hasCssError()),n=this.isReadOnly||!e.isEnabled,r=this.isItemSelected(e)||this.isOtherSelected&&this.otherItem.value===e.value,i=!n&&!r&&!(this.survey&&this.survey.isDesignMode),s=e===this.noneItem;return t.isDisabled=n,t.isChecked=r,t.isNone=s,o.append(this.cssClasses.itemDisabled,n).append(this.cssClasses.itemChecked,r).append(this.cssClasses.itemHover,i).append(this.cssClasses.itemNone,s).toString()},QuestionSelectBase.prototype.getLabelClass=function(e){return new g.CssClassBuilder().append(this.cssClasses.label).append(this.cssClasses.labelChecked,this.isItemSelected(e)).toString()},QuestionSelectBase.prototype.getControlLabelClass=function(e){return new g.CssClassBuilder().append(this.cssClasses.controlLabel).append(this.cssClasses.controlLabelChecked,this.isItemSelected(e)).toString()||void 0},Object.defineProperty(QuestionSelectBase.prototype,"headItems",{get:function(){var e=this;return this.separateSpecialChoices||this.isDesignMode?this.visibleChoices.filter(function(t){return e.isHeadChoice(t,e)}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"footItems",{get:function(){var e=this;return this.separateSpecialChoices||this.isDesignMode?this.visibleChoices.filter(function(t){return e.isFootChoice(t,e)}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"dataChoices",{get:function(){var e=this;return this.visibleChoices.filter(function(t){return!e.isBuiltInChoice(t,e)})},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"bodyItems",{get:function(){return this.hasHeadItems||this.hasFootItems?this.dataChoices:this.visibleChoices},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"hasHeadItems",{get:function(){return this.headItems.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"hasFootItems",{get:function(){return this.footItems.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"columns",{get:function(){var e=[],t=this.getCurrentColCount();if(this.hasColumns&&this.visibleChoices.length>0){var o=this.separateSpecialChoices||this.isDesignMode?this.dataChoices:this.visibleChoices;if("column"==h.settings.showItemsInOrder)for(var n=0,r=o.length%t,i=0;i<t;i++){for(var s=[],a=n;a<n+Math.floor(o.length/t);a++)s.push(o[a]);r>0&&(r--,s.push(o[a]),a++),n=a,e.push(s)}else for(var i=0;i<t;i++){for(var s=[],a=i;a<o.length;a+=t)s.push(o[a]);e.push(s)}}return e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"hasColumns",{get:function(){return!this.isMobile&&this.getCurrentColCount()>1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"rowLayout",{get:function(){return 0==this.getCurrentColCount()&&!(this.hasFootItems||this.hasHeadItems)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSelectBase.prototype,"blockedRow",{get:function(){return 0==this.getCurrentColCount()&&(this.hasFootItems||this.hasHeadItems)},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.choicesLoaded=function(){this.isChoicesLoaded=!0,this.updateIsReady(),this.survey&&this.survey.loadedChoicesFromServer(this),this.loadedChoicesFromServerCallback&&this.loadedChoicesFromServerCallback()},QuestionSelectBase.prototype.getItemValueWrapperComponentName=function(e){var t=this.survey;return t?t.getItemValueWrapperComponentName(e,this):i.SurveyModel.TemplateRendererComponentName},QuestionSelectBase.prototype.getItemValueWrapperComponentData=function(e){var t=this.survey;return t?t.getItemValueWrapperComponentData(e,this):e},QuestionSelectBase.prototype.ariaItemChecked=function(e){return this.renderedValue===e.value?"true":"false"},QuestionSelectBase.prototype.isOtherItem=function(e){return this.hasOther&&e.value==this.otherItem.value},Object.defineProperty(QuestionSelectBase.prototype,"itemSvgIcon",{get:function(){return this.cssClasses.itemSvgIconId},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.getSelectBaseRootCss=function(){return new g.CssClassBuilder().append(this.getQuestionRootCss()).append(this.cssClasses.rootRow,this.rowLayout).toString()},QuestionSelectBase.prototype.allowMobileInDesignMode=function(){return!0},QuestionSelectBase.prototype.getAriaItemLabel=function(e){return e.locText.renderedHtml},QuestionSelectBase.prototype.getItemId=function(e){return this.inputId+"_"+this.getItemIndex(e)},Object.defineProperty(QuestionSelectBase.prototype,"questionName",{get:function(){return this.name+"_"+this.id},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.getItemEnabled=function(e){return!this.isInputReadOnly&&e.isEnabled},QuestionSelectBase.prototype.afterRender=function(t){e.prototype.afterRender.call(this,t),this.rootElement=t},QuestionSelectBase.prototype.beforeDestroyQuestionElement=function(t){e.prototype.beforeDestroyQuestionElement.call(this,t),this.rootElement=void 0},QuestionSelectBase.prototype.focusOtherComment=function(){var e=this;this.rootElement&&setTimeout(function(){var t=e.rootElement.querySelector("textarea");t&&t.focus()},10)},QuestionSelectBase.prototype.onValueChanged=function(){e.prototype.onValueChanged.call(this),this.isDesignMode||this.prevIsOtherSelected||!this.isOtherSelected||this.focusOtherComment(),this.prevIsOtherSelected=this.isOtherSelected},QuestionSelectBase.prototype.getDefaultItemComponent=function(){return""},Object.defineProperty(QuestionSelectBase.prototype,"itemComponent",{get:function(){return this.getPropertyValue("itemComponent",this.getDefaultItemComponent())},set:function(e){this.setPropertyValue("itemComponent",e)},enumerable:!1,configurable:!0}),QuestionSelectBase.prototype.updateCssClasses=function(t,o){if(e.prototype.updateCssClasses.call(this,t,o),this.dropdownListModel){var n={};Object(f.mergeValues)(o.list,n),Object(f.mergeValues)(t.list,n),t.list=n}},QuestionSelectBase.prototype.calcCssClasses=function(t){var o=e.prototype.calcCssClasses.call(this,t);return this.dropdownListModel&&this.dropdownListModel.updateCssClasses(o.popup,o.list),o},__decorate([Object(r.property)({onSet:function(e,t){t.onSelectedItemValuesChangedHandler(e)}})],QuestionSelectBase.prototype,"selectedItemValues",void 0),__decorate([Object(r.property)()],QuestionSelectBase.prototype,"separateSpecialChoices",void 0),__decorate([Object(r.property)({localizable:!0})],QuestionSelectBase.prototype,"otherPlaceholder",void 0),QuestionSelectBase}(s.Question),v=function(e){function QuestionCheckboxBase(t){return e.call(this,t)||this}return y(QuestionCheckboxBase,e),Object.defineProperty(QuestionCheckboxBase.prototype,"colCount",{get:function(){return this.getPropertyValue("colCount",this.isFlowLayout?0:1)},set:function(e){e<0||e>5||this.isFlowLayout||(this.setPropertyValue("colCount",e),this.fireCallback(this.colCountChangedCallback))},enumerable:!1,configurable:!0}),QuestionCheckboxBase.prototype.clickItemHandler=function(e,t){var o=[].concat(this.renderedValue||[]),n=o.indexOf(e.value);t?n<0&&o.push(e.value):n>-1&&o.splice(n,1),this.renderedValue=o},QuestionCheckboxBase.prototype.onParentChanged=function(){e.prototype.onParentChanged.call(this),this.isFlowLayout&&this.setPropertyValue("colCount",null)},QuestionCheckboxBase.prototype.onParentQuestionChanged=function(){this.onVisibleChoicesChanged()},QuestionCheckboxBase.prototype.getSearchableItemValueKeys=function(e){e.push("choices")},QuestionCheckboxBase}(m);function checkCopyPropVisibility(e,t){var o;if(!e)return!1;if(e.templateQuestion){var n=null===(o=e.colOwner)||void 0===o?void 0:o.data;if(!(e=e.templateQuestion).getCarryForwardQuestion(n))return!1}return e.carryForwardQuestionType===t}r.Serializer.addClass("selectbase",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},"choicesFromQuestion:question_carryforward",{name:"choices:itemvalue[]",uniqueProperty:"value",baseValue:function(){return l.surveyLocalization.getString("choices_Item")},dependsOn:"choicesFromQuestion",visibleIf:function(e){return!e.choicesFromQuestion}},{name:"choicesFromQuestionMode",default:"all",choices:["all","selected","unselected"],dependsOn:"choicesFromQuestion",visibleIf:function(e){return checkCopyPropVisibility(e,"select")}},{name:"choiceValuesFromQuestion",dependsOn:"choicesFromQuestion",visibleIf:function(e){return checkCopyPropVisibility(e,"array")}},{name:"choiceTextsFromQuestion",dependsOn:"choicesFromQuestion",visibleIf:function(e){return checkCopyPropVisibility(e,"array")}},{name:"choicesOrder",default:"none",choices:["none","asc","desc","random"],dependsOn:"choicesFromQuestion",visibleIf:function(e){return!e.choicesFromQuestion}},{name:"choicesByUrl:restfull",className:"choicesByUrl",onGetValue:function(e){return e.choicesByUrl.getData()},onSetValue:function(e,t){e.choicesByUrl.setData(t)}},"hideIfChoicesEmpty:boolean","choicesVisibleIf:condition",{name:"choicesEnableIf:condition",dependsOn:"choicesFromQuestion",visibleIf:function(e){return!e.choicesFromQuestion}},{name:"separateSpecialChoices:boolean",visible:!1},{name:"showOtherItem:boolean",alternativeName:"hasOther"},{name:"showNoneItem:boolean",alternativeName:"hasNone"},{name:"otherPlaceholder",alternativeName:"otherPlaceHolder",serializationProperty:"locOtherPlaceholder",dependsOn:"showOtherItem",visibleIf:function(e){return e.hasOther}},{name:"noneText",serializationProperty:"locNoneText",dependsOn:"showNoneItem",visibleIf:function(e){return e.hasNone}},{name:"otherText",serializationProperty:"locOtherText",dependsOn:"showOtherItem",visibleIf:function(e){return e.hasOther}},{name:"otherErrorText",serializationProperty:"locOtherErrorText",dependsOn:"showOtherItem",visibleIf:function(e){return e.hasOther}},{name:"storeOthersAsComment",default:"default",choices:["default",!0,!1],visible:!1}],null,"question"),r.Serializer.addClass("checkboxbase",[{name:"colCount:number",default:1,choices:[0,1,2,3,4,5],layout:"row"}],null,"selectbase")},"./src/question_boolean.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionBooleanModel",function(){return c});var n,r=o(/*! ./questionfactory */"./src/questionfactory.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=o(/*! ./question */"./src/question.ts"),a=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),l=o(/*! ./utils/utils */"./src/utils/utils.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},c=function(e){function QuestionBooleanModel(t){var o=e.call(this,t)||this;return o.createLocalizableString("labelFalse",o,!0,"booleanUncheckedLabel"),o.createLocalizableString("labelTrue",o,!0,"booleanCheckedLabel"),o}return u(QuestionBooleanModel,e),QuestionBooleanModel.prototype.getType=function(){return"boolean"},QuestionBooleanModel.prototype.isLayoutTypeSupported=function(e){return!0},QuestionBooleanModel.prototype.supportGoNextPageAutomatic=function(){return"checkbox"!==this.renderAs},Object.defineProperty(QuestionBooleanModel.prototype,"isIndeterminate",{get:function(){return this.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionBooleanModel.prototype,"hasTitle",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionBooleanModel.prototype,"booleanValue",{get:function(){return this.isEmpty()?null:this.value==this.getValueTrue()},set:function(e){this.isReadOnly||this.isDesignMode||this.setBooleanValue(e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionBooleanModel.prototype,"checkedValue",{get:function(){return this.booleanValue},set:function(e){this.booleanValue=e},enumerable:!1,configurable:!0}),QuestionBooleanModel.prototype.setBooleanValue=function(e){this.isValueEmpty(e)?(this.value=null,this.booleanValueRendered=null):(this.value=!0==e?this.getValueTrue():this.getValueFalse(),this.booleanValueRendered=e)},Object.defineProperty(QuestionBooleanModel.prototype,"defaultValue",{get:function(){return this.getPropertyValue("defaultValue")},set:function(e){!0===e&&(e="true"),!1===e&&(e="false"),void 0===e&&(e="indeterminate"),this.setPropertyValue("defaultValue",e),this.updateValueWithDefaults()},enumerable:!1,configurable:!0}),QuestionBooleanModel.prototype.getDefaultValue=function(){return"indeterminate"==this.defaultValue||void 0===this.defaultValue?null:"true"==this.defaultValue?this.getValueTrue():this.getValueFalse()},Object.defineProperty(QuestionBooleanModel.prototype,"locTitle",{get:function(){var e=this.getLocalizableString("title");return!this.isValueEmpty(this.locLabel.text)&&(this.isValueEmpty(e.text)||this.isLabelRendered&&!this.showTitle)?this.locLabel:e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionBooleanModel.prototype,"labelRenderedAriaID",{get:function(){return this.isLabelRendered?this.ariaTitleId:null},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionBooleanModel.prototype,"isLabelRendered",{get:function(){return"hidden"===this.titleLocation},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionBooleanModel.prototype,"canRenderLabelDescription",{get:function(){return this.isLabelRendered&&this.hasDescription&&(this.hasDescriptionUnderTitle||this.hasDescriptionUnderInput)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionBooleanModel.prototype,"labelTrue",{get:function(){return this.getLocalizableStringText("labelTrue")},set:function(e){this.setLocalizableStringText("labelTrue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionBooleanModel.prototype,"locLabelTrue",{get:function(){return this.getLocalizableString("labelTrue")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionBooleanModel.prototype,"isDeterminated",{get:function(){return null!==this.booleanValue},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionBooleanModel.prototype,"labelFalse",{get:function(){return this.getLocalizableStringText("labelFalse")},set:function(e){this.setLocalizableStringText("labelFalse",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionBooleanModel.prototype,"locLabelFalse",{get:function(){return this.getLocalizableString("labelFalse")},enumerable:!1,configurable:!0}),QuestionBooleanModel.prototype.getValueTrue=function(){return void 0===this.valueTrue||this.valueTrue},QuestionBooleanModel.prototype.getValueFalse=function(){return void 0!==this.valueFalse&&this.valueFalse},QuestionBooleanModel.prototype.setDefaultValue=function(){this.isDefaultValueSet("true",this.valueTrue)&&this.setBooleanValue(!0),this.isDefaultValueSet("false",this.valueFalse)&&this.setBooleanValue(!1),"indeterminate"==this.defaultValue&&this.setBooleanValue(null)},QuestionBooleanModel.prototype.isDefaultValueSet=function(e,t){return this.defaultValue==e||void 0!==t&&this.defaultValue===t},QuestionBooleanModel.prototype.getDisplayValueCore=function(e,t){return t==this.getValueTrue()?this.locLabelTrue.textOrHtml:this.locLabelFalse.textOrHtml},QuestionBooleanModel.prototype.getItemCssValue=function(e){return new a.CssClassBuilder().append(e.item).append(e.itemOnError,this.hasCssError()).append(e.itemDisabled,this.isReadOnly).append(e.itemHover,!this.isDesignMode).append(e.itemChecked,!!this.booleanValue).append(e.itemIndeterminate,null===this.booleanValue).toString()},QuestionBooleanModel.prototype.getItemCss=function(){return this.getItemCssValue(this.cssClasses)},QuestionBooleanModel.prototype.getCheckboxItemCss=function(){return this.getItemCssValue({item:this.cssClasses.checkboxItem,itemOnError:this.cssClasses.checkboxItemOnError,itemDisabled:this.cssClasses.checkboxItemDisabled,itemChecked:this.cssClasses.checkboxItemChecked,itemIndeterminate:this.cssClasses.checkboxItemIndeterminate})},QuestionBooleanModel.prototype.getLabelCss=function(e){return new a.CssClassBuilder().append(this.cssClasses.label).append(this.cssClasses.disabledLabel,!e===this.booleanValue||this.isReadOnly).append(this.cssClasses.labelTrue,!this.isIndeterminate&&!0===e).append(this.cssClasses.labelFalse,!this.isIndeterminate&&!1===e).toString()},Object.defineProperty(QuestionBooleanModel.prototype,"svgIcon",{get:function(){return this.booleanValue&&this.cssClasses.svgIconCheckedId?this.cssClasses.svgIconCheckedId:null===this.booleanValue&&this.cssClasses.svgIconIndId?this.cssClasses.svgIconIndId:!this.booleanValue&&this.cssClasses.svgIconUncheckedId?this.cssClasses.svgIconUncheckedId:this.cssClasses.svgIconId},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionBooleanModel.prototype,"allowClick",{get:function(){return this.isIndeterminate&&!this.isInputReadOnly},enumerable:!1,configurable:!0}),QuestionBooleanModel.prototype.getCheckedLabel=function(){return!0===this.booleanValue?this.locLabelTrue:!1===this.booleanValue?this.locLabelFalse:void 0},QuestionBooleanModel.prototype.setQuestionValue=function(t,o){void 0===o&&(o=!0),"true"===t&&"true"!==this.valueTrue&&(t=!0),"false"===t&&"false"!==this.valueFalse&&(t=!1),"indeterminate"===t&&(t=null),e.prototype.setQuestionValue.call(this,t,o)},QuestionBooleanModel.prototype.onLabelClick=function(e,t){return this.allowClick&&(Object(l.preventDefaults)(e),this.booleanValue=t),!0},QuestionBooleanModel.prototype.calculateBooleanValueByEvent=function(e,t){var o="rtl"==document.defaultView.getComputedStyle(e.target).direction;this.booleanValue=o?!t:t},QuestionBooleanModel.prototype.onSwitchClickModel=function(e){if(this.allowClick){Object(l.preventDefaults)(e);var t=e.offsetX/e.target.offsetWidth>.5;this.calculateBooleanValueByEvent(e,t);return}return!0},QuestionBooleanModel.prototype.onKeyDownCore=function(e){return("ArrowLeft"===e.key||"ArrowRight"===e.key)&&(e.stopPropagation(),this.calculateBooleanValueByEvent(e,"ArrowRight"===e.key)),!0},QuestionBooleanModel.prototype.getRadioItemClass=function(e,t){var o=void 0;return e.radioItem&&(o=e.radioItem),e.radioItemChecked&&t===this.booleanValue&&(o=(o?o+" ":"")+e.radioItemChecked),o},QuestionBooleanModel.prototype.supportResponsiveness=function(){return!0},QuestionBooleanModel.prototype.getCompactRenderAs=function(){return"radio"},QuestionBooleanModel.prototype.createActionContainer=function(t){return e.prototype.createActionContainer.call(this,"checkbox"!==this.renderAs)},__decorate([Object(i.property)()],QuestionBooleanModel.prototype,"booleanValueRendered",void 0),__decorate([Object(i.property)()],QuestionBooleanModel.prototype,"showTitle",void 0),__decorate([Object(i.property)({localizable:!0})],QuestionBooleanModel.prototype,"label",void 0),__decorate([Object(i.property)()],QuestionBooleanModel.prototype,"valueTrue",void 0),__decorate([Object(i.property)()],QuestionBooleanModel.prototype,"valueFalse",void 0),QuestionBooleanModel}(s.Question);i.Serializer.addClass("boolean",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"label:text",serializationProperty:"locLabel",isSerializable:!1,visible:!1},{name:"labelTrue:text",serializationProperty:"locLabelTrue"},{name:"labelFalse:text",serializationProperty:"locLabelFalse"},"valueTrue","valueFalse",{name:"renderAs",default:"default",visible:!1}],function(){return new c("")},"question"),r.QuestionFactory.Instance.registerQuestion("boolean",function(e){return new c(e)})},"./src/question_buttongroup.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"ButtonGroupItemValue",function(){return u}),o.d(t,"QuestionButtonGroupModel",function(){return c}),o.d(t,"ButtonGroupItemModel",function(){return p});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./itemvalue */"./src/itemvalue.ts"),s=o(/*! ./question_baseselect */"./src/question_baseselect.ts"),a=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},u=function(e){function ButtonGroupItemValue(t,o,n){void 0===o&&(o=null),void 0===n&&(n="buttongroupitemvalue");var r=e.call(this,t,o,n)||this;return r.typeName=n,r}return l(ButtonGroupItemValue,e),ButtonGroupItemValue.prototype.getType=function(){return this.typeName?this.typeName:"buttongroupitemvalue"},__decorate([Object(r.property)()],ButtonGroupItemValue.prototype,"iconName",void 0),__decorate([Object(r.property)()],ButtonGroupItemValue.prototype,"iconSize",void 0),__decorate([Object(r.property)()],ButtonGroupItemValue.prototype,"showCaption",void 0),ButtonGroupItemValue}(i.ItemValue),c=function(e){function QuestionButtonGroupModel(t){return e.call(this,t)||this}return l(QuestionButtonGroupModel,e),QuestionButtonGroupModel.prototype.getType=function(){return"buttongroup"},QuestionButtonGroupModel.prototype.getItemValueType=function(){return"buttongroupitemvalue"},QuestionButtonGroupModel.prototype.supportOther=function(){return!1},QuestionButtonGroupModel}(s.QuestionCheckboxBase);r.Serializer.addClass("buttongroup",[{name:"choices:buttongroupitemvalue[]"}],function(){return new c("")},"checkboxbase"),r.Serializer.addClass("buttongroupitemvalue",[{name:"showCaption:boolean",default:!0},{name:"iconName:text"},{name:"iconSize:number"}],function(e){return new u(e)},"itemvalue");var p=function(){function ButtonGroupItemModel(e,t,o){this.question=e,this.item=t,this.index=o}return Object.defineProperty(ButtonGroupItemModel.prototype,"value",{get:function(){return this.item.value},enumerable:!1,configurable:!0}),Object.defineProperty(ButtonGroupItemModel.prototype,"iconName",{get:function(){return this.item.iconName},enumerable:!1,configurable:!0}),Object.defineProperty(ButtonGroupItemModel.prototype,"iconSize",{get:function(){return this.item.iconSize||24},enumerable:!1,configurable:!0}),Object.defineProperty(ButtonGroupItemModel.prototype,"caption",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),Object.defineProperty(ButtonGroupItemModel.prototype,"showCaption",{get:function(){return this.item.showCaption||void 0===this.item.showCaption},enumerable:!1,configurable:!0}),Object.defineProperty(ButtonGroupItemModel.prototype,"isRequired",{get:function(){return this.question.isRequired},enumerable:!1,configurable:!0}),Object.defineProperty(ButtonGroupItemModel.prototype,"selected",{get:function(){return this.question.isItemSelected(this.item)},enumerable:!1,configurable:!0}),Object.defineProperty(ButtonGroupItemModel.prototype,"readOnly",{get:function(){return this.question.isInputReadOnly||!this.item.isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(ButtonGroupItemModel.prototype,"name",{get:function(){return this.question.name+"_"+this.question.id},enumerable:!1,configurable:!0}),Object.defineProperty(ButtonGroupItemModel.prototype,"id",{get:function(){return this.question.inputId+"_"+this.index},enumerable:!1,configurable:!0}),Object.defineProperty(ButtonGroupItemModel.prototype,"hasErrors",{get:function(){return this.question.errors.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(ButtonGroupItemModel.prototype,"describedBy",{get:function(){return this.question.errors.length>0?this.question.id+"_errors":null},enumerable:!1,configurable:!0}),Object.defineProperty(ButtonGroupItemModel.prototype,"labelClass",{get:function(){return new a.CssClassBuilder().append(this.question.cssClasses.item).append(this.question.cssClasses.itemSelected,this.selected).append(this.question.cssClasses.itemHover,!this.readOnly&&!this.selected).append(this.question.cssClasses.itemDisabled,this.question.isReadOnly||!this.item.isEnabled).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(ButtonGroupItemModel.prototype,"css",{get:function(){return{label:this.labelClass,icon:this.question.cssClasses.itemIcon,control:this.question.cssClasses.itemControl,caption:this.question.cssClasses.itemCaption,decorator:this.question.cssClasses.itemDecorator}},enumerable:!1,configurable:!0}),ButtonGroupItemModel.prototype.onChange=function(){this.question.renderedValue=this.item.value},ButtonGroupItemModel}()},"./src/question_checkbox.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionCheckboxModel",function(){return d});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./questionfactory */"./src/questionfactory.ts"),s=o(/*! ./question_baseselect */"./src/question_baseselect.ts"),a=o(/*! ./helpers */"./src/helpers.ts"),l=o(/*! ./itemvalue */"./src/itemvalue.ts"),u=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),c=o(/*! ./error */"./src/error.ts"),p=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),d=function(e){function QuestionCheckboxModel(t){var o=e.call(this,t)||this;o.selectAllItemValue=new l.ItemValue("selectall"),o.invisibleOldValues={},o.isChangingValueOnClearIncorrect=!1;var n=o.createLocalizableString("selectAllText",o.selectAllItem,!0,"selectAllItemText");return o.selectAllItem.locOwner=o,o.selectAllItem.setLocText(n),o.registerPropertyChangedHandlers(["showSelectAllItem","selectAllText"],function(){o.onVisibleChoicesChanged()}),o}return p(QuestionCheckboxModel,e),QuestionCheckboxModel.prototype.getDefaultItemComponent=function(){return"survey-checkbox-item"},QuestionCheckboxModel.prototype.getType=function(){return"checkbox"},QuestionCheckboxModel.prototype.onCreating=function(){e.prototype.onCreating.call(this),this.createNewArray("renderedValue"),this.createNewArray("value")},QuestionCheckboxModel.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},Object.defineProperty(QuestionCheckboxModel.prototype,"valuePropertyName",{get:function(){return this.getPropertyValue("valuePropertyName")},set:function(e){this.setPropertyValue("valuePropertyName",e)},enumerable:!1,configurable:!0}),QuestionCheckboxModel.prototype.getQuestionFromArray=function(e,t){if(e&&e===this.valuePropertyName){var o=this.value;if(Array.isArray(o)&&t<o.length)return this}return null},Object.defineProperty(QuestionCheckboxModel.prototype,"selectAllItem",{get:function(){return this.selectAllItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCheckboxModel.prototype,"selectAllText",{get:function(){return this.getLocalizableStringText("selectAllText")},set:function(e){this.setLocalizableStringText("selectAllText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCheckboxModel.prototype,"locSelectAllText",{get:function(){return this.getLocalizableString("selectAllText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCheckboxModel.prototype,"showSelectAllItem",{get:function(){return this.getPropertyValue("showSelectAllItem")},set:function(e){this.setPropertyValue("showSelectAllItem",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCheckboxModel.prototype,"hasSelectAll",{get:function(){return this.showSelectAllItem},set:function(e){this.showSelectAllItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCheckboxModel.prototype,"isAllSelected",{get:function(){var e=this.value;if(!e||!Array.isArray(e)||this.isItemSelected(this.noneItem))return!1;var t=this.visibleChoices.length;this.hasOther&&t--,this.hasNone&&t--,this.hasSelectAll&&t--;var o=e.length;return this.isOtherSelected&&o--,o===t},set:function(e){e?this.selectAll():this.clearValue()},enumerable:!1,configurable:!0}),QuestionCheckboxModel.prototype.toggleSelectAll=function(){this.isAllSelected=!this.isAllSelected},QuestionCheckboxModel.prototype.selectAll=function(){for(var e=[],t=0;t<this.visibleChoices.length;t++){var o=this.visibleChoices[t];o!==this.noneItem&&o!==this.otherItem&&o!==this.selectAllItem&&e.push(o.value)}this.renderedValue=e},QuestionCheckboxModel.prototype.isItemSelectedCore=function(e){if(e===this.selectAllItem)return this.isAllSelected;var t=this.renderedValue;if(!t||!Array.isArray(t))return!1;for(var o=0;o<t.length;o++)if(this.isTwoValueEquals(t[o],e.value))return!0;return!1},QuestionCheckboxModel.prototype.getRealValue=function(e){return e&&this.valuePropertyName?e[this.valuePropertyName]:e},Object.defineProperty(QuestionCheckboxModel.prototype,"isValueArray",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCheckboxModel.prototype,"maxSelectedChoices",{get:function(){return this.getPropertyValue("maxSelectedChoices")},set:function(e){e<0&&(e=0),this.setPropertyValue("maxSelectedChoices",e),this.filterItems()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCheckboxModel.prototype,"minSelectedChoices",{get:function(){return this.getPropertyValue("minSelectedChoices")},set:function(e){e<0&&(e=0),this.setPropertyValue("minSelectedChoices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCheckboxModel.prototype,"selectedChoices",{get:function(){if(this.isEmpty())return[];var e=this.renderedValue,t=this.defaultSelectedItemValues?[].concat(this.defaultSelectedItemValues,this.visibleChoices):this.visibleChoices,o=e.map(function(e){return l.ItemValue.getItemByValue(t,e)}).filter(function(e){return!!e});return o.length||this.selectedItemValues||this.updateSelectedItemValues(),this.validateItemValues(o)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCheckboxModel.prototype,"selectedItems",{get:function(){return this.selectedChoices},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCheckboxModel.prototype,"hasFilteredValue",{get:function(){return!!this.valuePropertyName},enumerable:!1,configurable:!0}),QuestionCheckboxModel.prototype.getFilteredValue=function(){return this.hasFilteredValue?this.renderedValue:e.prototype.getFilteredValue.call(this)},QuestionCheckboxModel.prototype.getMultipleSelectedItems=function(){return this.selectedChoices},QuestionCheckboxModel.prototype.validateItemValues=function(e){var t=this;if(e.length)return e;var o=this.selectedItemValues;return o&&o.length?(this.defaultSelectedItemValues=[].concat(o),o):this.renderedValue.map(function(e){return t.createItemValue(e)})},QuestionCheckboxModel.prototype.getAnswerCorrectIgnoreOrder=function(){return!0},QuestionCheckboxModel.prototype.onCheckForErrors=function(t,o){if(e.prototype.onCheckForErrors.call(this,t,o),!o&&this.minSelectedChoices>0&&this.checkMinSelectedChoicesUnreached()){var n=new c.CustomError(this.getLocalizationFormatString("minSelectError",this.minSelectedChoices),this);t.push(n)}},QuestionCheckboxModel.prototype.onEnableItemCallBack=function(e){return!this.shouldCheckMaxSelectedChoices()||this.isItemSelected(e)},QuestionCheckboxModel.prototype.onAfterRunItemsEnableCondition=function(){if(this.maxSelectedChoices<1){this.selectAllItem.setIsEnabled(!0),this.otherItem.setIsEnabled(!0);return}this.hasSelectAll&&this.selectAllItem.setIsEnabled(this.maxSelectedChoices>=this.activeChoices.length),this.hasOther&&this.otherItem.setIsEnabled(!this.shouldCheckMaxSelectedChoices()||this.isOtherSelected)},QuestionCheckboxModel.prototype.shouldCheckMaxSelectedChoices=function(){if(this.maxSelectedChoices<1)return!1;var e=this.value;return(Array.isArray(e)?e.length:0)>=this.maxSelectedChoices},QuestionCheckboxModel.prototype.checkMinSelectedChoicesUnreached=function(){if(this.minSelectedChoices<1)return!1;var e=this.value;return(Array.isArray(e)?e.length:0)<this.minSelectedChoices},QuestionCheckboxModel.prototype.getItemClassCore=function(t,o){return this.value,o.isSelectAllItem=t===this.selectAllItem,new u.CssClassBuilder().append(e.prototype.getItemClassCore.call(this,t,o)).append(this.cssClasses.itemSelectAll,o.isSelectAllItem).toString()},QuestionCheckboxModel.prototype.updateValueFromSurvey=function(t){e.prototype.updateValueFromSurvey.call(this,t),this.invisibleOldValues={}},QuestionCheckboxModel.prototype.setDefaultValue=function(){e.prototype.setDefaultValue.call(this);var t=this.defaultValue;if(Array.isArray(t))for(var o=0;o<t.length;o++){var n=this.getRealValue(t[o]);this.canClearValueAnUnknown(n)&&this.addIntoInvisibleOldValues(n)}},QuestionCheckboxModel.prototype.addIntoInvisibleOldValues=function(e){this.invisibleOldValues[e]=e},QuestionCheckboxModel.prototype.hasValueToClearIncorrectValues=function(){return e.prototype.hasValueToClearIncorrectValues.call(this)||!a.Helpers.isValueEmpty(this.invisibleOldValues)},QuestionCheckboxModel.prototype.setNewValue=function(t){this.isChangingValueOnClearIncorrect||(this.invisibleOldValues={}),t=this.valueFromData(t);var o=this.value;if(t||(t=[]),o||(o=[]),!this.isTwoValueEquals(o,t)){if(this.hasNone){var n=this.noneIndexInArray(o),r=this.noneIndexInArray(t);n>-1?r>-1&&t.length>1&&t.splice(r,1):r>-1&&(t.splice(0,t.length),t.push(this.noneItem.value))}e.prototype.setNewValue.call(this,t)}},QuestionCheckboxModel.prototype.getIsMultipleValue=function(){return!0},QuestionCheckboxModel.prototype.getCommentFromValue=function(e){var t=this.getFirstUnknownIndex(e);return t<0?"":e[t]},QuestionCheckboxModel.prototype.setOtherValueIntoValue=function(e){var t=this.getFirstUnknownIndex(e);return t<0||e.splice(t,1,this.otherItem.value),e},QuestionCheckboxModel.prototype.getFirstUnknownIndex=function(e){if(!Array.isArray(e))return -1;for(var t=0;t<e.length;t++)if(this.hasUnknownValue(e[t],!1,!1))return t;return -1},QuestionCheckboxModel.prototype.noneIndexInArray=function(e){if(!e||!Array.isArray(e))return -1;for(var t=this.noneItem.value,o=0;o<e.length;o++)if(e[o]==t)return o;return -1},QuestionCheckboxModel.prototype.canUseFilteredChoices=function(){return!this.hasSelectAll&&e.prototype.canUseFilteredChoices.call(this)},QuestionCheckboxModel.prototype.supportSelectAll=function(){return this.isSupportProperty("showSelectAllItem")},QuestionCheckboxModel.prototype.addToVisibleChoices=function(t,o){this.supportSelectAll()&&this.canShowOptionItem(this.selectAllItem,o,this.hasSelectAll)&&t.unshift(this.selectAllItem),e.prototype.addToVisibleChoices.call(this,t,o)},QuestionCheckboxModel.prototype.isHeadChoice=function(e,t){return e===t.selectAllItem},QuestionCheckboxModel.prototype.isItemInList=function(t){return t==this.selectAllItem?this.hasSelectAll:e.prototype.isItemInList.call(this,t)},QuestionCheckboxModel.prototype.getDisplayValueCore=function(t,o){if(!Array.isArray(o))return e.prototype.getDisplayValueCore.call(this,t,o);var n=this.valuePropertyName;return this.getDisplayArrayValue(t,o,function(e){var t=o[e];return n&&t[n]&&(t=t[n]),t})},QuestionCheckboxModel.prototype.clearIncorrectValuesCore=function(){this.clearIncorrectAndDisabledValues(!1)},QuestionCheckboxModel.prototype.clearDisabledValuesCore=function(){this.clearIncorrectAndDisabledValues(!0)},QuestionCheckboxModel.prototype.clearIncorrectAndDisabledValues=function(e){var t=this.value,o=!1,n=this.restoreValuesFromInvisible();if(t||0!=n.length){if(!Array.isArray(t)||0==t.length){if(this.isChangingValueOnClearIncorrect=!0,e||(this.hasComment?this.value=null:this.clearValue()),this.isChangingValueOnClearIncorrect=!1,0==n.length)return;t=[]}for(var r=[],i=0;i<t.length;i++){var s=this.getRealValue(t[i]),a=this.canClearValueAnUnknown(s);(e||a)&&(!e||this.isValueDisabled(s))?(o=!0,a&&this.addIntoInvisibleOldValues(t[i])):r.push(t[i])}for(var i=0;i<n.length;i++)r.push(n[i]),o=!0;o&&(this.isChangingValueOnClearIncorrect=!0,0==r.length?this.clearValue():this.value=r,this.isChangingValueOnClearIncorrect=!1)}},QuestionCheckboxModel.prototype.restoreValuesFromInvisible=function(){for(var e=[],t=this.visibleChoices,o=0;o<t.length;o++){var n=t[o].value;a.Helpers.isTwoValueEquals(n,this.invisibleOldValues[n])&&(this.isItemSelected(t[o])||e.push(n),delete this.invisibleOldValues[n])}return e},QuestionCheckboxModel.prototype.getConditionJson=function(t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n=e.prototype.getConditionJson.call(this);return("contains"==t||"notcontains"==t)&&(n.type="radiogroup"),n.maxSelectedChoices=0,n.minSelectedChoices=0,n},QuestionCheckboxModel.prototype.isAnswerCorrect=function(){return a.Helpers.isArrayContainsEqual(this.value,this.correctAnswer)},QuestionCheckboxModel.prototype.setDefaultValueWithOthers=function(){this.value=this.renderedValueFromDataCore(this.defaultValue)},QuestionCheckboxModel.prototype.getIsItemValue=function(e,t){return!!(e&&Array.isArray(e))&&e.indexOf(t.value)>=0},QuestionCheckboxModel.prototype.valueFromData=function(t){if(!t)return t;if(!Array.isArray(t))return[e.prototype.valueFromData.call(this,t)];for(var o=[],n=0;n<t.length;n++){var r=l.ItemValue.getItemByValue(this.activeChoices,t[n]);r?o.push(r.value):o.push(t[n])}return o},QuestionCheckboxModel.prototype.rendredValueFromData=function(t){return t=this.convertValueFromObject(t),e.prototype.rendredValueFromData.call(this,t)},QuestionCheckboxModel.prototype.rendredValueToData=function(t){return t=e.prototype.rendredValueToData.call(this,t),this.convertValueToObject(t)},QuestionCheckboxModel.prototype.convertValueFromObject=function(e){return this.valuePropertyName?a.Helpers.convertArrayObjectToValue(e,this.valuePropertyName):e},QuestionCheckboxModel.prototype.convertValueToObject=function(e){if(!this.valuePropertyName)return e;var t=void 0;return this.survey&&this.survey.questionsByValueName(this.getValueName()).length>1&&(t=this.data.getValue(this.getValueName())),a.Helpers.convertArrayValueToObject(e,this.valuePropertyName,t)},QuestionCheckboxModel.prototype.renderedValueFromDataCore=function(e){if(e&&Array.isArray(e)||(e=[]),!this.hasActiveChoices)return e;for(var t=0;t<e.length&&e[t]!=this.otherItem.value;t++)if(this.hasUnknownValue(e[t],!0,!1)){this.otherValue=e[t];var o=e.slice();return o[t]=this.otherItem.value,o}return e},QuestionCheckboxModel.prototype.rendredValueToDataCore=function(e){if(!e||!e.length)return e;for(var t=0;t<e.length;t++)if(e[t]==this.otherItem.value&&this.needConvertRenderedOtherToDataValue()){var o=e.slice();return o[t]=this.otherValue,o}return e},QuestionCheckboxModel.prototype.selectOtherValueFromComment=function(e){var t=[],o=this.renderedValue;if(Array.isArray(o))for(var n=0;n<o.length;n++)o[n]!==this.otherItem.value&&t.push(o[n]);e&&t.push(this.otherItem.value),this.value=t},Object.defineProperty(QuestionCheckboxModel.prototype,"checkBoxSvgPath",{get:function(){return"M5,13l2-2l3,3l7-7l2,2l-9,9L5,13z"},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCheckboxModel.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCheckboxModel.prototype,"a11y_input_ariaRole",{get:function(){return"listbox"},enumerable:!1,configurable:!0}),QuestionCheckboxModel}(s.QuestionCheckboxBase);r.Serializer.addClass("checkbox",[{name:"showSelectAllItem:boolean",alternativeName:"hasSelectAll"},{name:"separateSpecialChoices",visible:!0},{name:"maxSelectedChoices:number",default:0},{name:"minSelectedChoices:number",default:0},{name:"selectAllText",serializationProperty:"locSelectAllText",dependsOn:"showSelectAllItem",visibleIf:function(e){return e.hasSelectAll}},{name:"valuePropertyName",category:"data"},{name:"itemComponent",visible:!1,default:"survey-checkbox-item"}],function(){return new d("")},"checkboxbase"),i.QuestionFactory.Instance.registerQuestion("checkbox",function(e){var t=new d(e);return t.choices=i.QuestionFactory.DefaultChoices,t})},"./src/question_comment.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionCommentModel",function(){return c});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./questionfactory */"./src/questionfactory.ts"),s=o(/*! ./question_textbase */"./src/question_textbase.ts"),a=o(/*! ./utils/utils */"./src/utils/utils.ts"),l=o(/*! ./settings */"./src/settings.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),c=function(e){function QuestionCommentModel(){return null!==e&&e.apply(this,arguments)||this}return u(QuestionCommentModel,e),Object.defineProperty(QuestionCommentModel.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},set:function(e){this.setPropertyValue("rows",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCommentModel.prototype,"cols",{get:function(){return this.getPropertyValue("cols")},set:function(e){this.setPropertyValue("cols",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCommentModel.prototype,"acceptCarriageReturn",{get:function(){return this.getPropertyValue("acceptCarriageReturn")},set:function(e){this.setPropertyValue("acceptCarriageReturn",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCommentModel.prototype,"autoGrow",{get:function(){return this.getPropertyValue("autoGrow")||this.survey&&this.survey.autoGrowComment},set:function(e){this.setPropertyValue("autoGrow",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCommentModel.prototype,"allowResize",{get:function(){return this.getPropertyValue("allowResize")&&this.survey&&this.survey.allowResizeComment},set:function(e){this.setPropertyValue("allowResize",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCommentModel.prototype,"resizeStyle",{get:function(){return this.allowResize?"both":"none"},enumerable:!1,configurable:!0}),QuestionCommentModel.prototype.getType=function(){return"comment"},QuestionCommentModel.prototype.afterRenderQuestionElement=function(t){var o=l.settings.environment.root;this.element=o.getElementById(this.inputId)||t,this.updateElement(),e.prototype.afterRenderQuestionElement.call(this,t)},QuestionCommentModel.prototype.updateElement=function(){var e=this;this.element&&this.autoGrow&&setTimeout(function(){return Object(a.increaseHeightByContent)(e.element)},1)},QuestionCommentModel.prototype.beforeDestroyQuestionElement=function(t){e.prototype.beforeDestroyQuestionElement.call(this,t),this.element=void 0},QuestionCommentModel.prototype.onInput=function(e){this.isInputTextUpdate?this.value=e.target.value:this.updateElement(),this.updateRemainingCharacterCounter(e.target.value)},QuestionCommentModel.prototype.onKeyDown=function(e){this.checkForUndo(e),this.acceptCarriageReturn||"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation())},QuestionCommentModel.prototype.onValueChanged=function(){e.prototype.onValueChanged.call(this),this.updateElement()},QuestionCommentModel.prototype.setNewValue=function(t){!this.acceptCarriageReturn&&t&&(t=t.replace(RegExp("(\r\n|\n|\r)","gm"),"")),e.prototype.setNewValue.call(this,t)},QuestionCommentModel.prototype.getValueSeparator=function(){return"\n"},Object.defineProperty(QuestionCommentModel.prototype,"className",{get:function(){return(this.cssClasses?this.getControlClass():"panel-comment-root")||void 0},enumerable:!1,configurable:!0}),QuestionCommentModel}(s.QuestionTextBase);r.Serializer.addClass("comment",[{name:"maxLength:number",default:-1},{name:"cols:number",default:50,visible:!1,isSerializable:!1},{name:"rows:number",default:4},{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder"},{name:"textUpdateMode",default:"default",choices:["default","onBlur","onTyping"]},{name:"autoGrow:boolean"},{name:"allowResize:boolean",default:!0},{name:"acceptCarriageReturn:boolean",default:!0,visible:!1}],function(){return new c("")},"textbase"),i.QuestionFactory.Instance.registerQuestion("comment",function(e){return new c(e)})},"./src/question_custom.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"ComponentQuestionJSON",function(){return p}),o.d(t,"ComponentCollection",function(){return d}),o.d(t,"QuestionCustomModelBase",function(){return h}),o.d(t,"QuestionCustomModel",function(){return g}),o.d(t,"QuestionCompositeModel",function(){return y});var n,r=o(/*! ./question */"./src/question.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=o(/*! ./survey-element */"./src/survey-element.ts"),a=o(/*! ./helpers */"./src/helpers.ts"),l=o(/*! ./textPreProcessor */"./src/textPreProcessor.ts"),u=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),c=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),p=function(){function ComponentQuestionJSON(e,t){this.name=e,this.json=t;var o=this;i.Serializer.addClass(e,[],function(e){return d.Instance.createQuestion(e?e.name:"",o)},"question"),this.onInit()}return ComponentQuestionJSON.prototype.onInit=function(){this.json.onInit&&this.json.onInit()},ComponentQuestionJSON.prototype.onCreated=function(e){this.json.onCreated&&this.json.onCreated(e)},ComponentQuestionJSON.prototype.onLoaded=function(e){this.json.onLoaded&&this.json.onLoaded(e)},ComponentQuestionJSON.prototype.onAfterRender=function(e,t){this.json.onAfterRender&&this.json.onAfterRender(e,t)},ComponentQuestionJSON.prototype.onAfterRenderContentElement=function(e,t,o){this.json.onAfterRenderContentElement&&this.json.onAfterRenderContentElement(e,t,o)},ComponentQuestionJSON.prototype.onUpdateQuestionCssClasses=function(e,t,o){this.json.onUpdateQuestionCssClasses&&this.json.onUpdateQuestionCssClasses(e,t,o)},ComponentQuestionJSON.prototype.onPropertyChanged=function(e,t,o){this.json.onPropertyChanged&&this.json.onPropertyChanged(e,t,o)},ComponentQuestionJSON.prototype.onValueChanged=function(e,t,o){this.json.onValueChanged&&this.json.onValueChanged(e,t,o)},ComponentQuestionJSON.prototype.onValueChanging=function(e,t,o){return this.json.onValueChanging?this.json.onValueChanging(e,t,o):o},ComponentQuestionJSON.prototype.onItemValuePropertyChanged=function(e,t,o,n,r){this.json.onItemValuePropertyChanged&&this.json.onItemValuePropertyChanged(e,{obj:t,propertyName:o,name:n,newValue:r})},ComponentQuestionJSON.prototype.getDisplayValue=function(e,t,o){return this.json.getDisplayValue?this.json.getDisplayValue(o):o.getDisplayValue(e,t)},ComponentQuestionJSON.prototype.setValueToQuestion=function(e){var t=this.json.valueToQuestion||this.json.setValue;return t?t(e):e},ComponentQuestionJSON.prototype.getValueFromQuestion=function(e){var t=this.json.valueFromQuestion||this.json.getValue;return t?t(e):e},Object.defineProperty(ComponentQuestionJSON.prototype,"isComposite",{get:function(){return!!this.json.elementsJSON||!!this.json.createElements},enumerable:!1,configurable:!0}),ComponentQuestionJSON}(),d=function(){function ComponentCollection(){this.customQuestionValues=[]}return ComponentCollection.prototype.add=function(e){if(e){var t=e.name;if(!t)throw"Attribute name is missed";if(t=t.toLowerCase(),this.getCustomQuestionByName(t))throw"There is already registered custom question with name '"+t+"'";if(i.Serializer.findClass(t))throw"There is already class with name '"+t+"'";var o=new p(t,e);this.onAddingJson&&this.onAddingJson(t,o.isComposite),this.customQuestionValues.push(o)}},Object.defineProperty(ComponentCollection.prototype,"items",{get:function(){return this.customQuestionValues},enumerable:!1,configurable:!0}),ComponentCollection.prototype.getCustomQuestionByName=function(e){for(var t=0;t<this.customQuestionValues.length;t++)if(this.customQuestionValues[t].name==e)return this.customQuestionValues[t];return null},ComponentCollection.prototype.clear=function(){for(var e=0;e<this.customQuestionValues.length;e++)i.Serializer.removeClass(this.customQuestionValues[e].name);this.customQuestionValues=[]},ComponentCollection.prototype.createQuestion=function(e,t){return t.isComposite?this.createCompositeModel(e,t):this.createCustomModel(e,t)},ComponentCollection.prototype.createCompositeModel=function(e,t){return this.onCreateComposite?this.onCreateComposite(e,t):new y(e,t)},ComponentCollection.prototype.createCustomModel=function(e,t){return this.onCreateCustom?this.onCreateCustom(e,t):new g(e,t)},ComponentCollection.Instance=new ComponentCollection,ComponentCollection}(),h=function(e){function QuestionCustomModelBase(t,o){var n=e.call(this,t)||this;return n.customQuestion=o,i.CustomPropertiesCollection.createProperties(n),s.SurveyElement.CreateDisabledDesignElements=!0,n.createWrapper(),s.SurveyElement.CreateDisabledDesignElements=!1,n.customQuestion&&n.customQuestion.onCreated(n),n}return c(QuestionCustomModelBase,e),QuestionCustomModelBase.prototype.getType=function(){return this.customQuestion?this.customQuestion.name:"custom"},QuestionCustomModelBase.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.getElement()&&this.getElement().locStrsChanged()},QuestionCustomModelBase.prototype.createWrapper=function(){},QuestionCustomModelBase.prototype.onPropertyValueChanged=function(t,o,n){e.prototype.onPropertyValueChanged.call(this,t,o,n),this.customQuestion&&!this.isLoadingFromJson&&this.customQuestion.onPropertyChanged(this,t,n)},QuestionCustomModelBase.prototype.itemValuePropertyChanged=function(t,o,n,r){e.prototype.itemValuePropertyChanged.call(this,t,o,n,r),this.customQuestion&&!this.isLoadingFromJson&&this.customQuestion.onItemValuePropertyChanged(this,t,t.ownerPropertyName,o,r)},QuestionCustomModelBase.prototype.onFirstRendering=function(){var t=this.getElement();t&&t.onFirstRendering(),e.prototype.onFirstRendering.call(this)},QuestionCustomModelBase.prototype.onHidingContent=function(){e.prototype.onHidingContent.call(this);var t=this.getElement();t&&t.onHidingContent()},QuestionCustomModelBase.prototype.getProgressInfo=function(){var t=e.prototype.getProgressInfo.call(this);return this.getElement()&&(t=this.getElement().getProgressInfo()),this.isRequired&&0==t.requiredQuestionCount&&(t.requiredQuestionCount=1,this.isEmpty()||(t.answeredQuestionCount=1)),t},QuestionCustomModelBase.prototype.initElement=function(e){e&&(e.setSurveyImpl(this),e.disableDesignActions=!0)},QuestionCustomModelBase.prototype.setSurveyImpl=function(t,o){this.isSettingValOnLoading=!0,e.prototype.setSurveyImpl.call(this,t,o),this.initElement(this.getElement()),this.isSettingValOnLoading=!1},QuestionCustomModelBase.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.getElement()&&(this.getElement().onSurveyLoad(),this.customQuestion.onLoaded(this))},QuestionCustomModelBase.prototype.afterRenderQuestionElement=function(e){},QuestionCustomModelBase.prototype.afterRenderCore=function(t){e.prototype.afterRenderCore.call(this,t),this.customQuestion&&this.customQuestion.onAfterRender(this,t)},QuestionCustomModelBase.prototype.onUpdateQuestionCssClasses=function(e,t){this.customQuestion&&this.customQuestion.onUpdateQuestionCssClasses(this,e,t)},QuestionCustomModelBase.prototype.setQuestionValue=function(t,o){void 0===o&&(o=!0),e.prototype.setQuestionValue.call(this,t,o),this.updateElementCss()},QuestionCustomModelBase.prototype.setNewValue=function(t){e.prototype.setNewValue.call(this,t),this.updateElementCss()},QuestionCustomModelBase.prototype.getSurveyData=function(){return this},QuestionCustomModelBase.prototype.getTextProcessor=function(){return this.textProcessor},QuestionCustomModelBase.prototype.getValue=function(e){return this.value},QuestionCustomModelBase.prototype.setValue=function(e,t,o,n){if(this.data){var r=this.convertDataName(e),i=this.convertDataValue(e,t);this.valueToDataCallback&&(i=this.valueToDataCallback(i)),this.data.setValue(r,i,o,n),this.updateIsAnswered(),this.updateElementCss(),this.customQuestion&&this.customQuestion.onValueChanged(this,e,t)}},QuestionCustomModelBase.prototype.getQuestionByName=function(e){},QuestionCustomModelBase.prototype.isValueChanging=function(e,t){if(this.customQuestion){var o=t;if(t=this.customQuestion.onValueChanging(this,e,t),!a.Helpers.isTwoValueEquals(t,o)){var n=this.getQuestionByName(e);if(n)return n.value=t,!0}}return!1},QuestionCustomModelBase.prototype.convertDataName=function(e){return this.getValueName()},QuestionCustomModelBase.prototype.convertDataValue=function(e,t){return t},QuestionCustomModelBase.prototype.getVariable=function(e){return this.data?this.data.getVariable(e):null},QuestionCustomModelBase.prototype.setVariable=function(e,t){this.data&&this.data.setVariable(e,t)},QuestionCustomModelBase.prototype.getComment=function(e){return this.data?this.data.getComment(this.getValueName()):""},QuestionCustomModelBase.prototype.setComment=function(e,t,o){this.data&&this.data.setComment(this.getValueName(),t,o)},QuestionCustomModelBase.prototype.getAllValues=function(){return this.data?this.data.getAllValues():{}},QuestionCustomModelBase.prototype.getFilteredValues=function(){return this.data?this.data.getFilteredValues():{}},QuestionCustomModelBase.prototype.getFilteredProperties=function(){return this.data?this.data.getFilteredProperties():{}},QuestionCustomModelBase.prototype.findQuestionByName=function(e){return this.data?this.data.findQuestionByName(e):null},QuestionCustomModelBase.prototype.addElement=function(e,t){},QuestionCustomModelBase.prototype.removeElement=function(e){return!1},QuestionCustomModelBase.prototype.getQuestionTitleLocation=function(){return"left"},QuestionCustomModelBase.prototype.getQuestionStartIndex=function(){return this.getStartIndex()},QuestionCustomModelBase.prototype.getChildrenLayoutType=function(){return"row"},QuestionCustomModelBase.prototype.elementWidthChanged=function(e){},Object.defineProperty(QuestionCustomModelBase.prototype,"elements",{get:function(){return[]},enumerable:!1,configurable:!0}),QuestionCustomModelBase.prototype.indexOf=function(e){return -1},QuestionCustomModelBase.prototype.ensureRowsVisibility=function(){},QuestionCustomModelBase.prototype.validateContainerOnly=function(){},QuestionCustomModelBase.prototype.getQuestionErrorLocation=function(){return this.getErrorLocation()},QuestionCustomModelBase.prototype.getContentDisplayValueCore=function(t,o,n){return n?this.customQuestion.getDisplayValue(t,o,n):e.prototype.getDisplayValueCore.call(this,t,o)},QuestionCustomModelBase}(r.Question),g=function(e){function QuestionCustomModel(){return null!==e&&e.apply(this,arguments)||this}return c(QuestionCustomModel,e),QuestionCustomModel.prototype.getTemplate=function(){return"custom"},QuestionCustomModel.prototype.createWrapper=function(){this.questionWrapper=this.createQuestion()},QuestionCustomModel.prototype.getElement=function(){return this.contentQuestion},QuestionCustomModel.prototype.onAnyValueChanged=function(t,o){e.prototype.onAnyValueChanged.call(this,t,o),this.contentQuestion&&this.contentQuestion.onAnyValueChanged(t,o)},QuestionCustomModel.prototype.getQuestionByName=function(e){return this.contentQuestion},QuestionCustomModel.prototype.setValue=function(t,o,n,r){this.isValueChanging(t,o)||e.prototype.setValue.call(this,t,o,n,r)},QuestionCustomModel.prototype.onSetData=function(){e.prototype.onSetData.call(this),this.survey&&!this.isEmpty()&&this.setValue(this.name,this.value,!1,this.allowNotifyValueChanged)},QuestionCustomModel.prototype.hasErrors=function(t,o){if(void 0===t&&(t=!0),void 0===o&&(o=null),!this.contentQuestion)return!1;var n=this.contentQuestion.hasErrors(t,o);this.errors=[];for(var r=0;r<this.contentQuestion.errors.length;r++)this.errors.push(this.contentQuestion.errors[r]);return n||(n=e.prototype.hasErrors.call(this,t,o)),this.updateElementCss(),n},QuestionCustomModel.prototype.focus=function(t){void 0===t&&(t=!1),this.contentQuestion?this.contentQuestion.focus(t):e.prototype.focus.call(this,t)},QuestionCustomModel.prototype.afterRenderCore=function(t){e.prototype.afterRenderCore.call(this,t),this.contentQuestion&&this.contentQuestion.afterRender(t)},Object.defineProperty(QuestionCustomModel.prototype,"contentQuestion",{get:function(){return this.questionWrapper},enumerable:!1,configurable:!0}),QuestionCustomModel.prototype.createQuestion=function(){var e=this,t=this.customQuestion.json,o=null;if(t.questionJSON){var n=t.questionJSON.type;if(!n||!i.Serializer.findClass(n))throw"type attribute in questionJSON is empty or incorrect";o=i.Serializer.createClass(n),this.initElement(o),o.fromJSON(t.questionJSON)}else t.createQuestion&&(o=t.createQuestion(),this.initElement(o));return o&&(o.isContentElement=!0,o.name||(o.name="question"),o.onUpdateCssClassesCallback=function(t){e.onUpdateQuestionCssClasses(o,t)},o.hasCssErrorCallback=function(){return e.errors.length>0}),o},QuestionCustomModel.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.contentQuestion&&this.isEmpty()&&!this.contentQuestion.isEmpty()&&(this.value=this.getContentQuestionValue())},QuestionCustomModel.prototype.runCondition=function(t,o){e.prototype.runCondition.call(this,t,o),this.contentQuestion&&this.contentQuestion.runCondition(t,o)},QuestionCustomModel.prototype.convertDataName=function(t){if(!this.contentQuestion)return e.prototype.convertDataName.call(this,t);var o=t.replace(this.contentQuestion.getValueName(),this.getValueName());return 0==o.indexOf(this.getValueName())?o:e.prototype.convertDataName.call(this,t)},QuestionCustomModel.prototype.convertDataValue=function(t,o){return this.convertDataName(t)==e.prototype.convertDataName.call(this,t)?this.getContentQuestionValue():o},QuestionCustomModel.prototype.getContentQuestionValue=function(){if(this.contentQuestion){var e=this.contentQuestion.value;return this.customQuestion&&(e=this.customQuestion.getValueFromQuestion(e)),e}},QuestionCustomModel.prototype.setContentQuestionValue=function(e){this.contentQuestion&&(this.customQuestion&&(e=this.customQuestion.setValueToQuestion(e)),this.contentQuestion.value=e)},QuestionCustomModel.prototype.canSetValueToSurvey=function(){return!1},QuestionCustomModel.prototype.setQuestionValue=function(t,o){void 0===o&&(o=!0),e.prototype.setQuestionValue.call(this,t,o),this.isLoadingFromJson||!this.contentQuestion||this.isTwoValueEquals(this.getContentQuestionValue(),t)||this.setContentQuestionValue(this.getUnbindValue(t))},QuestionCustomModel.prototype.onSurveyValueChanged=function(t){e.prototype.onSurveyValueChanged.call(this,t),this.contentQuestion&&this.contentQuestion.onSurveyValueChanged(t)},QuestionCustomModel.prototype.getValueCore=function(){return this.contentQuestion?this.getContentQuestionValue():e.prototype.getValueCore.call(this)},QuestionCustomModel.prototype.initElement=function(t){var o=this;e.prototype.initElement.call(this,t),t&&(t.parent=this,t.afterRenderQuestionCallback=function(e,t){o.customQuestion&&o.customQuestion.onAfterRenderContentElement(o,e,t)})},QuestionCustomModel.prototype.updateElementCss=function(t){this.contentQuestion&&this.questionWrapper.updateElementCss(t),e.prototype.updateElementCss.call(this,t)},QuestionCustomModel.prototype.updateElementCssCore=function(t){this.contentQuestion&&(t=this.contentQuestion.cssClasses),e.prototype.updateElementCssCore.call(this,t)},QuestionCustomModel.prototype.getDisplayValueCore=function(t,o){return e.prototype.getContentDisplayValueCore.call(this,t,o,this.contentQuestion)},QuestionCustomModel}(h),f=function(e){function QuestionCompositeTextProcessor(t,o){var n=e.call(this,o)||this;return n.composite=t,n.variableName=o,n}return c(QuestionCompositeTextProcessor,e),Object.defineProperty(QuestionCompositeTextProcessor.prototype,"survey",{get:function(){return this.composite.survey},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCompositeTextProcessor.prototype,"panel",{get:function(){return this.composite.contentPanel},enumerable:!1,configurable:!0}),QuestionCompositeTextProcessor}(l.QuestionTextProcessor),y=function(e){function QuestionCompositeModel(t,o){var n=e.call(this,t,o)||this;return n.customQuestion=o,n.settingNewValue=!1,n.textProcessing=new f(n,QuestionCompositeModel.ItemVariableName),n}return c(QuestionCompositeModel,e),QuestionCompositeModel.prototype.createWrapper=function(){this.panelWrapper=this.createPanel()},QuestionCompositeModel.prototype.getTemplate=function(){return"composite"},QuestionCompositeModel.prototype.getElement=function(){return this.contentPanel},QuestionCompositeModel.prototype.getCssRoot=function(t){return new u.CssClassBuilder().append(e.prototype.getCssRoot.call(this,t)).append(t.composite).toString()},Object.defineProperty(QuestionCompositeModel.prototype,"contentPanel",{get:function(){return this.panelWrapper},enumerable:!1,configurable:!0}),QuestionCompositeModel.prototype.hasErrors=function(t,o){void 0===t&&(t=!0),void 0===o&&(o=null);var n=e.prototype.hasErrors.call(this,t,o);return this.contentPanel&&this.contentPanel.hasErrors(t,!1,o)||n},QuestionCompositeModel.prototype.updateElementCss=function(t){e.prototype.updateElementCss.call(this,t),this.contentPanel&&this.contentPanel.updateElementCss(t)},QuestionCompositeModel.prototype.getTextProcessor=function(){return this.textProcessing},QuestionCompositeModel.prototype.findQuestionByName=function(t){return this.getQuestionByName(t)||e.prototype.findQuestionByName.call(this,t)},QuestionCompositeModel.prototype.clearValueIfInvisibleCore=function(t){e.prototype.clearValueIfInvisibleCore.call(this,t);for(var o=this.contentPanel.questions,n=0;n<o.length;n++)o[n].clearValueIfInvisible(t)},QuestionCompositeModel.prototype.onAnyValueChanged=function(t,o){e.prototype.onAnyValueChanged.call(this,t,o);for(var n=this.contentPanel.questions,r=0;r<n.length;r++)n[r].onAnyValueChanged(t,o)},Object.defineProperty(QuestionCompositeModel.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionCompositeModel.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),QuestionCompositeModel.prototype.createPanel=function(){var e=this,t=i.Serializer.createClass("panel");t.showQuestionNumbers="off",t.renderWidth="100%";var o=this.customQuestion.json;return o.elementsJSON&&t.fromJSON({elements:o.elementsJSON}),o.createElements&&o.createElements(t,this),this.initElement(t),t.readOnly=this.isReadOnly,t.questions.forEach(function(t){return t.onUpdateCssClassesCallback=function(o){e.onUpdateQuestionCssClasses(t,o)}}),this.setAfterRenderCallbacks(t),t},QuestionCompositeModel.prototype.onReadOnlyChanged=function(){this.contentPanel&&(this.contentPanel.readOnly=this.isReadOnly),e.prototype.onReadOnlyChanged.call(this)},QuestionCompositeModel.prototype.onSurveyLoad=function(){if(this.isSettingValOnLoading=!0,this.contentPanel&&(this.contentPanel.readOnly=this.isReadOnly,this.setIsContentElement(this.contentPanel)),e.prototype.onSurveyLoad.call(this),this.contentPanel){var t=this.getContentPanelValue();a.Helpers.isValueEmpty(t)||(this.value=t)}this.isSettingValOnLoading=!1},QuestionCompositeModel.prototype.setIsContentElement=function(e){e.isContentElement=!0;for(var t=e.elements,o=0;o<t.length;o++){var n=t[o];n.isPanel?this.setIsContentElement(n):n.isContentElement=!0}},QuestionCompositeModel.prototype.setVisibleIndex=function(t){var o=e.prototype.setVisibleIndex.call(this,t);return this.isVisible&&this.contentPanel&&(o+=this.contentPanel.setVisibleIndex(t)),o},QuestionCompositeModel.prototype.runCondition=function(t,o){if(e.prototype.runCondition.call(this,t,o),this.contentPanel){var n=t[QuestionCompositeModel.ItemVariableName];t[QuestionCompositeModel.ItemVariableName]=this.contentPanel.getValue(),this.contentPanel.runCondition(t,o),delete t[QuestionCompositeModel.ItemVariableName],n&&(t[QuestionCompositeModel.ItemVariableName]=n)}},QuestionCompositeModel.prototype.getValue=function(e){var t=this.value;return t?t[e]:null},QuestionCompositeModel.prototype.getQuestionByName=function(e){return this.contentPanel?this.contentPanel.getQuestionByName(e):void 0},QuestionCompositeModel.prototype.setValue=function(t,o,n,r){if(this.settingNewValue){this.setNewValueIntoQuestion(t,o);return}if(!this.isValueChanging(t,o)){if(this.settingNewValue=!0,!this.isEditingSurveyElement&&this.contentPanel)for(var i=0,s=this.contentPanel.questions.length+1;i<s&&this.updateValueCoreWithPanelValue();)i++;this.setNewValueIntoQuestion(t,o),e.prototype.setValue.call(this,t,o,n,r),this.settingNewValue=!1}},QuestionCompositeModel.prototype.updateValueCoreWithPanelValue=function(){var e=this.getContentPanelValue();return!this.isTwoValueEquals(this.getValueCore(),e)&&(this.setValueCore(e),!0)},QuestionCompositeModel.prototype.getContentPanelValue=function(e){return e||(e=this.contentPanel.getValue()),this.customQuestion.setValueToQuestion(e)},QuestionCompositeModel.prototype.getValueForContentPanel=function(e){return this.customQuestion.getValueFromQuestion(e)},QuestionCompositeModel.prototype.setNewValueIntoQuestion=function(e,t){var o=this.getQuestionByName(e);o&&!this.isTwoValueEquals(t,o.value)&&(o.value=t)},QuestionCompositeModel.prototype.addConditionObjectsByContext=function(e,t){if(this.contentPanel)for(var o=this.contentPanel.questions,n=this.name,r=this.title,i=0;i<o.length;i++)e.push({name:n+"."+o[i].name,text:r+"."+o[i].title,question:o[i]})},QuestionCompositeModel.prototype.collectNestedQuestionsCore=function(e,t){this.contentPanel&&this.contentPanel.questions.forEach(function(o){return o.collectNestedQuestions(e,t)})},QuestionCompositeModel.prototype.convertDataValue=function(e,t){var o=this.getValueForContentPanel(this.value);return o||(o={}),this.isValueEmpty(t)&&!this.isEditingSurveyElement?delete o[e]:o[e]=t,this.getContentPanelValue(o)},QuestionCompositeModel.prototype.setQuestionValue=function(t,o){void 0===o&&(o=!0),this.setValuesIntoQuestions(t),!this.isEditingSurveyElement&&this.contentPanel&&(t=this.getContentPanelValue()),e.prototype.setQuestionValue.call(this,t,o)},QuestionCompositeModel.prototype.setValuesIntoQuestions=function(e){if(this.contentPanel){e=this.getValueForContentPanel(e);var t=this.settingNewValue;this.settingNewValue=!0;for(var o=this.contentPanel.questions,n=0;n<o.length;n++){var r=o[n].getValueName(),i=e?e[r]:void 0,s=o[n];this.isTwoValueEquals(s.value,i)||(s.value=i)}this.settingNewValue=t}},QuestionCompositeModel.prototype.getDisplayValueCore=function(t,o){return e.prototype.getContentDisplayValueCore.call(this,t,o,this.contentPanel)},QuestionCompositeModel.prototype.setAfterRenderCallbacks=function(e){var t=this;if(e&&this.customQuestion)for(var o=e.questions,n=0;n<o.length;n++)o[n].afterRenderQuestionCallback=function(e,o){t.customQuestion.onAfterRenderContentElement(t,e,o)}},QuestionCompositeModel.ItemVariableName="composite",QuestionCompositeModel}(h)},"./src/question_dropdown.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionDropdownModel",function(){return p});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./questionfactory */"./src/questionfactory.ts"),s=o(/*! ./question_baseselect */"./src/question_baseselect.ts"),a=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),l=o(/*! ./dropdownListModel */"./src/dropdownListModel.ts"),u=o(/*! ./settings */"./src/settings.ts"),c=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},p=function(e){function QuestionDropdownModel(t){var o=e.call(this,t)||this;return o.lastSelectedItemValue=null,o.minMaxChoices=[],o.onOpened=o.addEvent(),o.createLocalizableString("placeholder",o,!1,!0),o.createLocalizableString("clearCaption",o,!1,!0),o.registerPropertyChangedHandlers(["choicesMin","choicesMax","choicesStep"],function(){o.onVisibleChoicesChanged()}),o.registerPropertyChangedHandlers(["value","renderAs","showOtherItem","otherText","placeholder","choices","visibleChoices"],function(){o.updateReadOnlyText()}),o.updateReadOnlyText(),o}return c(QuestionDropdownModel,e),QuestionDropdownModel.prototype.updateReadOnlyText=function(){var e=this.selectedItem?"":this.placeholder;"select"==this.renderAs&&(this.isOtherSelected?e=this.otherText:this.isNoneSelected?e=this.noneText:this.selectedItem&&(e=this.selectedItemText)),this.readOnlyText=e},QuestionDropdownModel.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.updateReadOnlyText()},Object.defineProperty(QuestionDropdownModel.prototype,"showOptionsCaption",{get:function(){return this.allowClear},set:function(e){this.allowClear=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"showClearButton",{get:function(){return this.allowClear&&!this.isEmpty()&&(!this.isDesignMode||u.settings.supportCreatorV2)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"optionsCaption",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"placeholder",{get:function(){return this.getLocalizableStringText("placeholder")},set:function(e){this.setLocalizableStringText("placeholder",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"locPlaceholder",{get:function(){return this.getLocalizableString("placeholder")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"clearCaption",{get:function(){return this.getLocalizableStringText("clearCaption")},set:function(e){this.setLocalizableStringText("clearCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"locClearCaption",{get:function(){return this.getLocalizableString("clearCaption")},enumerable:!1,configurable:!0}),QuestionDropdownModel.prototype.getType=function(){return"dropdown"},Object.defineProperty(QuestionDropdownModel.prototype,"ariaRole",{get:function(){return"combobox"},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"selectedItem",{get:function(){return this.getSingleSelectedItem()},enumerable:!1,configurable:!0}),QuestionDropdownModel.prototype.onGetSingleSelectedItem=function(e){e&&(this.lastSelectedItemValue=e)},QuestionDropdownModel.prototype.supportGoNextPageAutomatic=function(){return!0},QuestionDropdownModel.prototype.getChoices=function(){var t=e.prototype.getChoices.call(this);if(this.choicesMax<=this.choicesMin)return t;for(var o=[],n=0;n<t.length;n++)o.push(t[n]);if(0===this.minMaxChoices.length||this.minMaxChoices.length!==(this.choicesMax-this.choicesMin)/this.choicesStep+1){this.minMaxChoices=[];for(var n=this.choicesMin;n<=this.choicesMax;n+=this.choicesStep)this.minMaxChoices.push(this.createItemValue(n))}return o.concat(this.minMaxChoices)},Object.defineProperty(QuestionDropdownModel.prototype,"choicesMin",{get:function(){return this.getPropertyValue("choicesMin")},set:function(e){this.setPropertyValue("choicesMin",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"choicesMax",{get:function(){return this.getPropertyValue("choicesMax")},set:function(e){this.setPropertyValue("choicesMax",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"choicesStep",{get:function(){return this.getPropertyValue("choicesStep")},set:function(e){e<1&&(e=1),this.setPropertyValue("choicesStep",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"autocomplete",{get:function(){return this.getPropertyValue("autocomplete","")},set:function(e){this.setPropertyValue("autocomplete",e)},enumerable:!1,configurable:!0}),QuestionDropdownModel.prototype.getControlClass=function(){return new a.CssClassBuilder().append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isReadOnly).append(this.cssClasses.controlInputFieldComponent,!!this.inputFieldComponentName).toString()},Object.defineProperty(QuestionDropdownModel.prototype,"selectedItemLocText",{get:function(){var e=this.suggestedItem||this.selectedItem;return null==e?void 0:e.locText},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"inputFieldComponentName",{get:function(){return this.inputFieldComponent||this.itemComponent},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"showSelectedItemLocText",{get:function(){return!this.inputHasValue&&!this.inputFieldComponentName&&!!this.selectedItemLocText&&this.dropdownListModel.canShowSelectedItem},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"showInputFieldComponent",{get:function(){return!this.inputHasValue&&!!this.inputFieldComponentName&&!this.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"selectedItemText",{get:function(){var e=this.selectedItem;return e?e.text:""},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"dropdownListModel",{get:function(){return"select"===this.renderAs||this.dropdownListModelValue||(this.dropdownListModelValue=new l.DropdownListModel(this)),this.dropdownListModelValue},set:function(e){this.dropdownListModelValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"popupModel",{get:function(){var e;return null===(e=this.dropdownListModel)||void 0===e?void 0:e.popupModel},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionDropdownModel.prototype,"ariaExpanded",{get:function(){var e=this.popupModel;return e&&e.isVisible?"true":"false"},enumerable:!1,configurable:!0}),QuestionDropdownModel.prototype.onOpenedCallBack=function(){this.onOpened.fire(this,{question:this,choices:this.choices})},QuestionDropdownModel.prototype.onSelectedItemValuesChangedHandler=function(t){var o;null===(o=this.dropdownListModel)||void 0===o||o.setInputStringFromSelectedItem(t),e.prototype.onSelectedItemValuesChangedHandler.call(this,t)},QuestionDropdownModel.prototype.hasUnknownValue=function(t,o,n,r){return!this.choicesLazyLoadEnabled&&e.prototype.hasUnknownValue.call(this,t,o,n,r)},QuestionDropdownModel.prototype.needConvertRenderedOtherToDataValue=function(){var t,o=null===(t=this.otherValue)||void 0===t?void 0:t.trim();return!!o&&e.prototype.hasUnknownValue.call(this,o,!0,!1)},QuestionDropdownModel.prototype.getItemIfChoicesNotContainThisValue=function(t,o){return this.choicesLazyLoadEnabled&&!this.dropdownListModel.isAllDataLoaded?this.createItemValue(t,o):e.prototype.getItemIfChoicesNotContainThisValue.call(this,t,o)},QuestionDropdownModel.prototype.onVisibleChoicesChanged=function(){e.prototype.onVisibleChoicesChanged.call(this),this.popupModel&&this.dropdownListModel.updateItems()},QuestionDropdownModel.prototype.getFirstInputElementId=function(){return this.inputId+(this.searchEnabled?"_0":"")},QuestionDropdownModel.prototype.getInputId=function(){return this.inputId+"_0"},QuestionDropdownModel.prototype.clearValue=function(){var t;e.prototype.clearValue.call(this),this.lastSelectedItemValue=null,null===(t=this.dropdownListModel)||void 0===t||t.clear()},QuestionDropdownModel.prototype.onClick=function(e){this.onOpenedCallBack&&this.onOpenedCallBack()},QuestionDropdownModel.prototype.onKeyUp=function(e){46===(e.which||e.keyCode)&&(this.clearValue(),e.preventDefault(),e.stopPropagation())},QuestionDropdownModel.prototype.dispose=function(){e.prototype.dispose.call(this),this.dropdownListModelValue&&this.dropdownListModelValue.dispose()},__decorate([Object(r.property)()],QuestionDropdownModel.prototype,"allowClear",void 0),__decorate([Object(r.property)({onSet:function(e,t){t.dropdownListModel&&t.dropdownListModel.setSearchEnabled(e)}})],QuestionDropdownModel.prototype,"searchEnabled",void 0),__decorate([Object(r.property)({defaultValue:!1})],QuestionDropdownModel.prototype,"inputHasValue",void 0),__decorate([Object(r.property)({defaultValue:""})],QuestionDropdownModel.prototype,"readOnlyText",void 0),__decorate([Object(r.property)()],QuestionDropdownModel.prototype,"choicesLazyLoadEnabled",void 0),__decorate([Object(r.property)({defaultValue:25})],QuestionDropdownModel.prototype,"choicesLazyLoadPageSize",void 0),__decorate([Object(r.property)()],QuestionDropdownModel.prototype,"suggestedItem",void 0),QuestionDropdownModel}(s.QuestionSelectBase);r.Serializer.addClass("dropdown",[{name:"placeholder",alternativeName:"optionsCaption",serializationProperty:"locPlaceholder"},{name:"allowClear:boolean",alternativeName:"showOptionsCaption",default:!0},{name:"choicesMin:number",default:0},{name:"choicesMax:number",default:0},{name:"choicesStep:number",default:1,minValue:1},{name:"autocomplete",alternativeName:"autoComplete",choices:u.settings.questions.dataList},{name:"renderAs",default:"default",visible:!1},{name:"searchEnabled:boolean",default:!0,visible:!1},{name:"choicesLazyLoadEnabled:boolean",default:!1,visible:!1},{name:"choicesLazyLoadPageSize:number",default:25,visible:!1},{name:"inputFieldComponent",visible:!1},{name:"itemComponent",visible:!1,default:""}],function(){return new p("")},"selectbase"),i.QuestionFactory.Instance.registerQuestion("dropdown",function(e){var t=new p(e);return t.choices=i.QuestionFactory.DefaultChoices,t})},"./src/question_empty.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionEmptyModel",function(){return a});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./question */"./src/question.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),a=function(e){function QuestionEmptyModel(t){return e.call(this,t)||this}return s(QuestionEmptyModel,e),QuestionEmptyModel.prototype.getType=function(){return"empty"},QuestionEmptyModel}(i.Question);r.Serializer.addClass("empty",[],function(){return new a("")},"question")},"./src/question_expression.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionExpressionModel",function(){return u}),o.d(t,"getCurrecyCodes",function(){return getCurrecyCodes});var n,r=o(/*! ./helpers */"./src/helpers.ts"),i=o(/*! ./question */"./src/question.ts"),s=o(/*! ./jsonobject */"./src/jsonobject.ts"),a=o(/*! ./questionfactory */"./src/questionfactory.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),u=function(e){function QuestionExpressionModel(t){var o=e.call(this,t)||this;return o.createLocalizableString("format",o),o.registerPropertyChangedHandlers(["expression"],function(){o.expressionRunner&&(o.expressionRunner=o.createRunner())}),o.registerPropertyChangedHandlers(["format","currency","displayStyle"],function(){o.updateFormatedValue()}),o}return l(QuestionExpressionModel,e),QuestionExpressionModel.prototype.getType=function(){return"expression"},Object.defineProperty(QuestionExpressionModel.prototype,"hasInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionExpressionModel.prototype,"format",{get:function(){return this.getLocalizableStringText("format","")},set:function(e){this.setLocalizableStringText("format",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionExpressionModel.prototype,"locFormat",{get:function(){return this.getLocalizableString("format")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionExpressionModel.prototype,"expression",{get:function(){return this.getPropertyValue("expression","")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),QuestionExpressionModel.prototype.locCalculation=function(){this.expressionIsRunning=!0},QuestionExpressionModel.prototype.unlocCalculation=function(){this.expressionIsRunning=!1},QuestionExpressionModel.prototype.runCondition=function(t,o){e.prototype.runCondition.call(this,t,o),this.expression&&!this.expressionIsRunning&&(this.runIfReadOnly||!this.isReadOnly)&&(this.locCalculation(),this.expressionRunner||(this.expressionRunner=this.createRunner()),this.expressionRunner.run(t,o))},QuestionExpressionModel.prototype.canCollectErrors=function(){return!0},QuestionExpressionModel.prototype.hasRequiredError=function(){return!1},QuestionExpressionModel.prototype.createRunner=function(){var e=this,t=this.createExpressionRunner(this.expression);return t.onRunComplete=function(t){e.value=e.roundValue(t),e.unlocCalculation()},t},Object.defineProperty(QuestionExpressionModel.prototype,"maximumFractionDigits",{get:function(){return this.getPropertyValue("maximumFractionDigits")},set:function(e){e<-1||e>20||this.setPropertyValue("maximumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionExpressionModel.prototype,"minimumFractionDigits",{get:function(){return this.getPropertyValue("minimumFractionDigits")},set:function(e){e<-1||e>20||this.setPropertyValue("minimumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionExpressionModel.prototype,"runIfReadOnly",{get:function(){return!0===this.runIfReadOnlyValue},set:function(e){this.runIfReadOnlyValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionExpressionModel.prototype,"formatedValue",{get:function(){return this.getPropertyValue("formatedValue","")},enumerable:!1,configurable:!0}),QuestionExpressionModel.prototype.updateFormatedValue=function(){this.setPropertyValue("formatedValue",this.getDisplayValueCore(!1,this.value))},QuestionExpressionModel.prototype.onValueChanged=function(){this.updateFormatedValue()},QuestionExpressionModel.prototype.updateValueFromSurvey=function(t){e.prototype.updateValueFromSurvey.call(this,t),this.updateFormatedValue()},QuestionExpressionModel.prototype.getDisplayValueCore=function(e,t){var o=this.isValueEmpty(t)?this.defaultValue:t,n="";if(!this.isValueEmpty(o)){var r=this.getValueAsStr(o);n=this.format?this.format.format(r):r}return this.survey&&(n=this.survey.getExpressionDisplayValue(this,o,n)),n},Object.defineProperty(QuestionExpressionModel.prototype,"displayStyle",{get:function(){return this.getPropertyValue("displayStyle")},set:function(e){this.setPropertyValue("displayStyle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionExpressionModel.prototype,"currency",{get:function(){return this.getPropertyValue("currency")},set:function(e){0>getCurrecyCodes().indexOf(e)||this.setPropertyValue("currency",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionExpressionModel.prototype,"useGrouping",{get:function(){return this.getPropertyValue("useGrouping")},set:function(e){this.setPropertyValue("useGrouping",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionExpressionModel.prototype,"precision",{get:function(){return this.getPropertyValue("precision")},set:function(e){this.setPropertyValue("precision",e)},enumerable:!1,configurable:!0}),QuestionExpressionModel.prototype.roundValue=function(e){if(e!==1/0)return this.precision<0||!r.Helpers.isNumber(e)?e:parseFloat(e.toFixed(this.precision))},QuestionExpressionModel.prototype.getValueAsStr=function(e){if("date"==this.displayStyle){var t=new Date(e);if(t&&t.toLocaleDateString)return t.toLocaleDateString()}if("none"!=this.displayStyle&&r.Helpers.isNumber(e)){var o=this.getLocale();o||(o="en");var n={style:this.displayStyle,currency:this.currency,useGrouping:this.useGrouping};return this.maximumFractionDigits>-1&&(n.maximumFractionDigits=this.maximumFractionDigits),this.minimumFractionDigits>-1&&(n.minimumFractionDigits=this.minimumFractionDigits),e.toLocaleString(o,n)}return e.toString()},QuestionExpressionModel}(i.Question);function getCurrecyCodes(){return["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]}s.Serializer.addClass("expression",["expression:expression",{name:"format",serializationProperty:"locFormat"},{name:"displayStyle",default:"none",choices:["none","decimal","currency","percent","date"]},{name:"currency",choices:function(){return getCurrecyCodes()},default:"USD"},{name:"maximumFractionDigits:number",default:-1},{name:"minimumFractionDigits:number",default:-1},{name:"useGrouping:boolean",default:!0},{name:"precision:number",default:-1,category:"data"},{name:"enableIf",visible:!1},{name:"isRequired",visible:!1},{name:"readOnly",visible:!1},{name:"requiredErrorText",visible:!1},{name:"defaultValueExpression",visible:!1},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"requiredIf",visible:!1}],function(){return new u("")},"question"),a.QuestionFactory.Instance.registerQuestion("expression",function(e){return new u(e)})},"./src/question_file.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionFileModel",function(){return m}),o.d(t,"FileLoader",function(){return v});var n,r=o(/*! ./question */"./src/question.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=o(/*! ./questionfactory */"./src/questionfactory.ts"),a=o(/*! ./base */"./src/base.ts"),l=o(/*! ./error */"./src/error.ts"),u=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),c=o(/*! ./utils/utils */"./src/utils/utils.ts"),p=o(/*! ./actions/container */"./src/actions/container.ts"),d=o(/*! ./actions/action */"./src/actions/action.ts"),h=o(/*! ./helpers */"./src/helpers.ts"),g=o(/*! ./utils/camera */"./src/utils/camera.ts"),f=o(/*! ./settings */"./src/settings.ts"),y=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},m=function(e){function QuestionFileModel(t){var o=e.call(this,t)||this;return o.isUploading=!1,o.isDragging=!1,o.onUploadStateChanged=o.addEvent(),o.onStateChanged=o.addEvent(),o.fileNavigator=new p.ActionContainer,o.actionsContainer=new p.ActionContainer,o.canFlipCameraValue=void 0,o.prevPreviewLength=0,o.calcAvailableItemsCount=function(e,t,o){var n=Math.floor(e/(t+o));return(n+1)*(t+o)-o<=e&&n++,n},o.dragCounter=0,o.onDragEnter=function(e){o.canDragDrop()&&(e.preventDefault(),o.isDragging=!0,o.dragCounter++)},o.onDragOver=function(e){if(!o.canDragDrop())return e.returnValue=!1,!1;e.dataTransfer.dropEffect="copy",e.preventDefault()},o.onDrop=function(e){if(o.canDragDrop()){o.isDragging=!1,o.dragCounter=0,e.preventDefault();var t=e.dataTransfer;o.onChange(t)}},o.onDragLeave=function(e){o.canDragDrop()&&(o.dragCounter--,0===o.dragCounter&&(o.isDragging=!1))},o.doChange=function(e){var t=e.target||e.srcElement;o.onChange(t)},o.doClean=function(){if(o.needConfirmRemoveFile){Object(c.confirmActionAsync)(o.confirmRemoveAllMessage,function(){o.clearFilesCore()});return}o.clearFilesCore()},o.doDownloadFile=function(e,t){Object(c.detectIEOrEdge)()&&(e.preventDefault(),Object(c.loadFileFromBase64)(t.content,t.name))},o.fileIndexAction=new d.Action({id:"fileIndex",title:o.getFileIndexCaption(),enabled:!1}),o.prevFileAction=new d.Action({id:"prevPage",iconSize:16,action:function(){o.indexToShow=o.previewValue.length&&(o.indexToShow-1+o.pagesCount)%o.pagesCount||0,o.fileIndexAction.title=o.getFileIndexCaption()}}),o.nextFileAction=new d.Action({id:"nextPage",iconSize:16,action:function(){o.indexToShow=o.previewValue.length&&(o.indexToShow+1)%o.pagesCount||0,o.fileIndexAction.title=o.getFileIndexCaption()}}),o.takePictureAction=new d.Action({iconName:"icon-takepicture",id:"sv-file-take-picture",iconSize:"auto",innerCss:new a.ComputedUpdater(function(){return new u.CssClassBuilder().append(o.cssClasses.contextButton).append(o.cssClasses.takePictureButton).toString()}),title:new a.ComputedUpdater(function(){return o.takePhotoCaption}),showTitle:!1,action:function(){o.snapPicture()}}),o.closeCameraAction=new d.Action({iconName:"icon-closecamera",id:"sv-file-close-camera",iconSize:"auto",innerCss:new a.ComputedUpdater(function(){return new u.CssClassBuilder().append(o.cssClasses.contextButton).append(o.cssClasses.closeCameraButton).toString()}),action:function(){o.stopVideo()}}),o.changeCameraAction=new d.Action({iconName:"icon-changecamera",id:"sv-file-change-camera",iconSize:"auto",innerCss:new a.ComputedUpdater(function(){return new u.CssClassBuilder().append(o.cssClasses.contextButton).append(o.cssClasses.changeCameraButton).toString()}),visible:new a.ComputedUpdater(function(){return o.canFlipCamera()}),action:function(){o.flipCamera()}}),o.chooseFileAction=new d.Action({iconName:"icon-choosefile",id:"sv-file-choose-file",iconSize:"auto",data:{question:o},component:"sv-file-choose-btn"}),o.startCameraAction=new d.Action({iconName:"icon-takepicture_24x24",id:"sv-file-start-camera",iconSize:"auto",title:new a.ComputedUpdater(function(){return o.takePhotoCaption}),showTitle:new a.ComputedUpdater(function(){return!o.isAnswered}),action:function(){o.startVideo()}}),o.cleanAction=new d.Action({iconName:"icon-clear",id:"sv-file-clean",iconSize:"auto",title:new a.ComputedUpdater(function(){return o.clearButtonCaption}),showTitle:!1,innerCss:new a.ComputedUpdater(function(){return o.cssClasses.removeButton}),action:function(){o.doClean()}}),[o.closeCameraAction,o.changeCameraAction,o.takePictureAction].forEach(function(e){e.cssClasses={}}),o.registerFunctionOnPropertiesValueChanged(["currentMode","isAnswered"],function(){o.updateActions()}),o.updateActions(),o.actionsContainer.actions=[o.chooseFileAction,o.startCameraAction,o.cleanAction],o.fileNavigator.actions=[o.prevFileAction,o.fileIndexAction,o.nextFileAction],o}return y(QuestionFileModel,e),Object.defineProperty(QuestionFileModel.prototype,"fileNavigatorVisible",{get:function(){var e=this.isUploading,t=this.isPlayingVideo,o=this.containsMultiplyFiles,n=this.pageSize<this.previewValue.length;return!e&&!t&&o&&n&&this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"pagesCount",{get:function(){return Math.ceil(this.previewValue.length/this.pageSize)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"actionsContainerVisible",{get:function(){var e=this.isUploading,t=this.isPlayingVideo,o=this.isDefaultV2Theme,n=this.isInputReadOnly;return!e&&!t&&!n&&o},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"videoId",{get:function(){return this.id+"_video"},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"hasVideoUI",{get:function(){return"file"!==this.currentMode},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"hasFileUI",{get:function(){return"camera"!==this.currentMode},enumerable:!1,configurable:!0}),QuestionFileModel.prototype.startVideo=function(){var e=this;"file"===this.currentMode||this.isDesignMode||this.isPlayingVideo||(this.setIsPlayingVideo(!0),setTimeout(function(){e.startVideoInCamera()},0))},QuestionFileModel.prototype.startVideoInCamera=function(){var e=this;this.camera.startVideo(this.videoId,function(t){e.videoStream=t,t||e.stopVideo()},this.imageWidth,this.imageHeight)},QuestionFileModel.prototype.stopVideo=function(){this.setIsPlayingVideo(!1),this.closeVideoStream()},QuestionFileModel.prototype.snapPicture=function(){var e=this;this.isPlayingVideo&&(this.camera.snap(this.videoId,function(t){if(t){var o=new File([t],"snap_picture.png",{type:"image/png"});e.loadFiles([o])}}),this.stopVideo())},QuestionFileModel.prototype.canFlipCamera=function(){var e=this;return void 0===this.canFlipCameraValue&&(this.canFlipCameraValue=this.camera.canFlip(function(t){e.canFlipCameraValue=t})),this.canFlipCameraValue},QuestionFileModel.prototype.flipCamera=function(){this.canFlipCamera()&&(this.closeVideoStream(),this.camera.flip(),this.startVideoInCamera())},QuestionFileModel.prototype.closeVideoStream=function(){this.videoStream&&(this.videoStream.getTracks().forEach(function(e){e.stop()}),this.videoStream=void 0)},QuestionFileModel.prototype.onHidingContent=function(){e.prototype.onHidingContent.call(this),this.stopVideo()},QuestionFileModel.prototype.updateElementCssCore=function(t){e.prototype.updateElementCssCore.call(this,t),this.prevFileAction.iconName=this.cssClasses.leftIconId,this.nextFileAction.iconName=this.cssClasses.rightIconId},QuestionFileModel.prototype.getFileIndexCaption=function(){return this.getLocalizationFormatString("indexText",this.indexToShow+1,this.pagesCount)},QuestionFileModel.prototype.updateFileNavigator=function(){this.indexToShow=this.previewValue.length&&(this.indexToShow+this.pagesCount)%this.pagesCount||0,this.fileIndexAction.title=this.getFileIndexCaption()},QuestionFileModel.prototype.previewValueChanged=function(){var e=this;this.previewValue.length!==this.prevPreviewLength&&(this.previewValue.length>0?this.prevPreviewLength>this.previewValue.length?this.indexToShow=this.indexToShow>=this.pagesCount&&this.indexToShow>0?this.pagesCount-1:this.indexToShow:this.indexToShow=Math.floor(this.prevPreviewLength/this.pageSize):this.indexToShow=0),this.fileIndexAction.title=this.getFileIndexCaption(),this.containsMultiplyFiles=this.previewValue.length>1,!(this.previewValue.length>0)||this.calculatedGapBetweenItems||this.calculatedItemWidth||setTimeout(function(){e.processResponsiveness(0,e._width)}),this.prevPreviewLength=this.previewValue.length},QuestionFileModel.prototype.isPreviewVisible=function(e){var t=this.fileNavigatorVisible,o=this.indexToShow*this.pageSize<=e&&e<(this.indexToShow+1)*this.pageSize;return!t||o},QuestionFileModel.prototype.getType=function(){return"file"},QuestionFileModel.prototype.clearValue=function(){this.clearOnDeletingContainer(),e.prototype.clearValue.call(this)},QuestionFileModel.prototype.clearOnDeletingContainer=function(){this.survey&&this.survey.clearFiles(this,this.name,this.value,null,function(){})},Object.defineProperty(QuestionFileModel.prototype,"showPreview",{get:function(){return this.getPropertyValue("showPreview")},set:function(e){this.setPropertyValue("showPreview",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"allowMultiple",{get:function(){return this.getPropertyValue("allowMultiple")},set:function(e){this.setPropertyValue("allowMultiple",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"imageHeight",{get:function(){return this.getPropertyValue("imageHeight")},set:function(e){this.setPropertyValue("imageHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"imageWidth",{get:function(){return this.getPropertyValue("imageWidth")},set:function(e){this.setPropertyValue("imageWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"acceptedTypes",{get:function(){return this.getPropertyValue("acceptedTypes")},set:function(e){this.setPropertyValue("acceptedTypes",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"storeDataAsText",{get:function(){return this.getPropertyValue("storeDataAsText")},set:function(e){this.setPropertyValue("storeDataAsText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"waitForUpload",{get:function(){return this.getPropertyValue("waitForUpload")},set:function(e){this.setPropertyValue("waitForUpload",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"allowImagesPreview",{get:function(){return this.getPropertyValue("allowImagesPreview")},set:function(e){this.setPropertyValue("allowImagesPreview",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"maxSize",{get:function(){return this.getPropertyValue("maxSize")},set:function(e){this.setPropertyValue("maxSize",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"needConfirmRemoveFile",{get:function(){return this.getPropertyValue("needConfirmRemoveFile")},set:function(e){this.setPropertyValue("needConfirmRemoveFile",e)},enumerable:!1,configurable:!0}),QuestionFileModel.prototype.getConfirmRemoveMessage=function(e){return this.confirmRemoveMessage.format(e)},Object.defineProperty(QuestionFileModel.prototype,"locRenderedPlaceholder",{get:function(){var e=this;return void 0===this.locRenderedPlaceholderValue&&(this.locRenderedPlaceholderValue=new a.ComputedUpdater(function(){var t=e.isReadOnly,o=!e.isDesignMode&&e.hasFileUI||e.isDesignMode&&"camera"!=e.sourceType,n=!e.isDesignMode&&e.hasVideoUI||e.isDesignMode&&"file"!=e.sourceType;return t?e.locNoFileChosenCaption:o&&n?e.locFileOrPhotoPlaceholder:o?e.locFilePlaceholder:e.locPhotoPlaceholder})),this.locRenderedPlaceholderValue},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"currentMode",{get:function(){return this.getPropertyValue("currentMode",this.sourceType)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"isPlayingVideo",{get:function(){return this.getPropertyValue("isPlayingVideo",!1)},enumerable:!1,configurable:!0}),QuestionFileModel.prototype.setIsPlayingVideo=function(e){this.setPropertyValue("isPlayingVideo",e)},QuestionFileModel.prototype.updateCurrentMode=function(){var e=this;this.isDesignMode||("file"!==this.sourceType?this.camera.hasCamera(function(t){e.setPropertyValue("currentMode",t&&e.isDefaultV2Theme?e.sourceType:"file")}):this.setPropertyValue("currentMode",this.sourceType))},QuestionFileModel.prototype.updateActions=function(){this.chooseFileAction.visible=this.hasFileUI,this.startCameraAction.visible=this.hasVideoUI,this.cleanAction.visible=!!this.isAnswered},Object.defineProperty(QuestionFileModel.prototype,"inputTitle",{get:function(){return this.isUploading?this.loadingFileTitle:this.isEmpty()?this.chooseFileTitle:" "},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"chooseButtonText",{get:function(){return this.isEmpty()||this.allowMultiple?this.chooseButtonCaption:this.replaceButtonCaption},enumerable:!1,configurable:!0}),QuestionFileModel.prototype.clear=function(e){var t=this;this.survey&&(this.containsMultiplyFiles=!1,this.survey.clearFiles(this,this.name,this.value,null,function(o,n){"success"===o&&(t.value=void 0,t.errors=[],e&&e(),t.indexToShow=0,t.fileIndexAction.title=t.getFileIndexCaption())}))},Object.defineProperty(QuestionFileModel.prototype,"renderCapture",{get:function(){return this.allowCameraAccess?"user":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"multipleRendered",{get:function(){return this.allowMultiple?"multiple":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"showChooseButton",{get:function(){return!this.isReadOnly&&!this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"showFileDecorator",{get:function(){var e=this.isPlayingVideo,t=this.showLoadingIndicator;return!e&&!t},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"showLoadingIndicator",{get:function(){return this.isUploading&&this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"allowShowPreview",{get:function(){var e=this.showLoadingIndicator,t=this.isPlayingVideo;return!e&&!t},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"showPreviewContainer",{get:function(){return this.previewValue&&this.previewValue.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"showRemoveButtonCore",{get:function(){var e=this.showLoadingIndicator,t=this.isReadOnly,o=this.isEmpty();return!t&&!o&&!e&&!this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"showRemoveButton",{get:function(){return this.showRemoveButtonCore&&this.cssClasses.removeButton},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFileModel.prototype,"showRemoveButtonBottom",{get:function(){var e=new u.CssClassBuilder().append(this.cssClasses.removeButtonBottom).append(this.cssClasses.contextButton).toString();return this.showRemoveButtonCore&&e},enumerable:!1,configurable:!0}),QuestionFileModel.prototype.defaultImage=function(e){return!this.canPreviewImage(e)&&!!this.cssClasses.defaultImage},QuestionFileModel.prototype.removeFile=function(e){this.removeFileByContent(this.value.filter(function(t){return t.name===e})[0])},QuestionFileModel.prototype.removeFileByContent=function(e){var t=this;this.survey&&this.survey.clearFiles(this,this.name,this.value,e.name,function(o,n){if("success"===o){var r=t.value;Array.isArray(r)?t.value=r.filter(function(t){return!h.Helpers.isTwoValueEquals(t,e,!0,!1,!1)}):t.value=void 0}})},QuestionFileModel.prototype.loadFiles=function(e){var t=this;if(this.survey&&(this.errors=[],this.allFilesOk(e))){var loadFilesProc=function(){t.stateChanged("loading");var o=[];t.storeDataAsText?e.forEach(function(n){var r=new FileReader;r.onload=function(i){(o=o.concat([{name:n.name,type:n.type,content:r.result}])).length===e.length&&(t.value=(t.value||[]).concat(o))},r.readAsDataURL(n)}):t.survey&&t.survey.uploadFiles(t,t.name,e,function(e,o){"error"===e&&t.stateChanged("error"),"success"===e&&(t.value=(t.value||[]).concat(o.map(function(e){return{name:e.file.name,type:e.file.type,content:e.content}})))})};this.allowMultiple?loadFilesProc():this.clear(loadFilesProc)}},Object.defineProperty(QuestionFileModel.prototype,"camera",{get:function(){return this.cameraValue||(this.cameraValue=new g.Camera),this.cameraValue},enumerable:!1,configurable:!0}),QuestionFileModel.prototype.canPreviewImage=function(e){return this.allowImagesPreview&&!!e&&this.isFileImage(e)},QuestionFileModel.prototype.loadPreview=function(e){var t=this;if(this.previewValue.splice(0,this.previewValue.length),this.showPreview&&e){var o=Array.isArray(e)?e:e?[e]:[];this.storeDataAsText?o.forEach(function(e){var o=e.content||e;t.previewValue.push({name:e.name,type:e.type,content:o})}):(this._previewLoader&&this._previewLoader.dispose(),this.isFileLoading=!0,this._previewLoader=new v(this,function(e,o){"loaded"===e&&(o.forEach(function(e){t.previewValue.push(e)}),t.previewValueChanged()),t.isFileLoading=!1,t._previewLoader.dispose(),t._previewLoader=void 0}),this._previewLoader.load(o)),this.previewValueChanged()}},Object.defineProperty(QuestionFileModel.prototype,"isFileLoading",{get:function(){return this.isFileLoadingValue},set:function(e){this.isFileLoadingValue=e,this.updateIsReady()},enumerable:!1,configurable:!0}),QuestionFileModel.prototype.getIsQuestionReady=function(){return e.prototype.getIsQuestionReady.call(this)&&!this.isFileLoading},QuestionFileModel.prototype.onCheckForErrors=function(t,o){e.prototype.onCheckForErrors.call(this,t,o),this.isUploading&&this.waitForUpload&&t.push(new l.UploadingFileError(this.getLocalizationString("uploadingFile"),this))},QuestionFileModel.prototype.stateChanged=function(e){this.currentState!=e&&("loading"===e&&(this.isUploading=!0),"loaded"===e&&(this.isUploading=!1),"error"===e&&(this.isUploading=!1),this.currentState=e,this.onStateChanged.fire(this,{state:e}),this.onUploadStateChanged.fire(this,{state:e}))},QuestionFileModel.prototype.allFilesOk=function(e){var t=this,o=this.errors?this.errors.length:0;return(e||[]).forEach(function(e){t.maxSize>0&&e.size>t.maxSize&&t.errors.push(new l.ExceedSizeError(t.maxSize,t))}),o===this.errors.length},QuestionFileModel.prototype.isFileImage=function(e){if(!e||!e.content||!e.content.substring)return!1;var t="data:image",o=e.content&&e.content.substring(0,t.length);return(o=o&&o.toLowerCase())===t||!!e.type&&0===e.type.toLowerCase().indexOf("image/")},QuestionFileModel.prototype.getPlainData=function(t){void 0===t&&(t={includeEmpty:!0});var o=e.prototype.getPlainData.call(this,t);if(o&&!this.isEmpty()){o.isNode=!1;var n=Array.isArray(this.value)?this.value:[this.value];o.data=n.map(function(e,t){return{name:t,title:"File",value:e.content&&e.content||e,displayValue:e.name&&e.name||e,getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!1}})}return o},QuestionFileModel.prototype.getActionsContainerCss=function(e){return new u.CssClassBuilder().append(e.actionsContainer).append(e.actionsContainerAnswered,this.isAnswered).toString()},QuestionFileModel.prototype.getRemoveButtonCss=function(){return new u.CssClassBuilder().append(this.cssClasses.removeFileButton).append(this.cssClasses.contextButton).toString()},QuestionFileModel.prototype.getChooseFileCss=function(){var e=this.isAnswered;return new u.CssClassBuilder().append(this.cssClasses.chooseFile).append(this.cssClasses.controlDisabled,this.isReadOnly).append(this.cssClasses.chooseFileAsText,!e).append(this.cssClasses.chooseFileAsTextDisabled,!e&&this.isInputReadOnly).append(this.cssClasses.contextButton,e).append(this.cssClasses.chooseFileAsIcon,e).toString()},QuestionFileModel.prototype.getReadOnlyFileCss=function(){return new u.CssClassBuilder().append("form-control").append(this.cssClasses.placeholderInput).toString()},Object.defineProperty(QuestionFileModel.prototype,"fileRootCss",{get:function(){return new u.CssClassBuilder().append(this.cssClasses.root).append(this.cssClasses.rootDragging,this.isDragging).append(this.cssClasses.rootAnswered,this.isAnswered).append(this.cssClasses.single,!this.allowMultiple).append(this.cssClasses.singleImage,!this.allowMultiple&&this.isAnswered&&this.canPreviewImage(this.value[0])).append(this.cssClasses.mobile,this.isMobile).toString()},enumerable:!1,configurable:!0}),QuestionFileModel.prototype.getFileDecoratorCss=function(){return new u.CssClassBuilder().append(this.cssClasses.fileDecorator).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.fileDecoratorDrag,this.isDragging).toString()},QuestionFileModel.prototype.onChange=function(e){if(window.FileReader&&e&&e.files&&!(e.files.length<1)){for(var t=[],o=this.allowMultiple?e.files.length:1,n=0;n<o;n++)t.push(e.files[n]);e.value="",this.loadFiles(t)}},QuestionFileModel.prototype.onChangeQuestionValue=function(t){e.prototype.onChangeQuestionValue.call(this,t),this.stateChanged(this.isEmpty()?"empty":"loaded"),this.isLoadingFromJson||this.loadPreview(t)},QuestionFileModel.prototype.calcCssClasses=function(t){var o=e.prototype.calcCssClasses.call(this,t);return this.actionsContainer.cssClasses=t.actionBar,this.actionsContainer.cssClasses.itemWithTitle=this.actionsContainer.cssClasses.item,this.actionsContainer.cssClasses.item="",this.actionsContainer.cssClasses.itemAsIcon=o.contextButton,this.actionsContainer.containerCss=o.actionsContainer,o},QuestionFileModel.prototype.updateElementCss=function(t){e.prototype.updateElementCss.call(this,t),this.updateCurrentMode()},QuestionFileModel.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.updateCurrentMode(),this.updateActions(),this.loadPreview(this.value)},QuestionFileModel.prototype.needResponsiveness=function(){return this.supportResponsiveness()&&this.isDefaultV2Theme},QuestionFileModel.prototype.supportResponsiveness=function(){return!0},QuestionFileModel.prototype.getObservedElementSelector=function(){return Object(c.classesToSelector)(this.cssClasses.dragArea)},QuestionFileModel.prototype.getFileListSelector=function(){return Object(c.classesToSelector)(this.cssClasses.fileList)},QuestionFileModel.prototype.triggerResponsiveness=function(t){t&&(this.calculatedGapBetweenItems=void 0,this.calculatedItemWidth=void 0),e.prototype.triggerResponsiveness.call(this)},QuestionFileModel.prototype.processResponsiveness=function(e,t){var o=this;if(this._width=t,this.rootElement&&(!this.calculatedGapBetweenItems||!this.calculatedItemWidth)&&this.allowMultiple){var n=this.getFileListSelector()?this.rootElement.querySelector(this.getFileListSelector()):void 0;if(n){this.calculatedGapBetweenItems=Math.ceil(Number.parseFloat(window.getComputedStyle(n).gap));var r=Array.from(n.children).filter(function(e,t){return o.isPreviewVisible(t)})[0];r&&(this.calculatedItemWidth=Math.ceil(Number.parseFloat(window.getComputedStyle(r).width)))}}return!!this.calculatedGapBetweenItems&&!!this.calculatedItemWidth&&(this.pageSize=this.calcAvailableItemsCount(t,this.calculatedItemWidth,this.calculatedGapBetweenItems),!0)},QuestionFileModel.prototype.canDragDrop=function(){return!this.isInputReadOnly&&"camera"!==this.currentMode&&!this.isPlayingVideo},QuestionFileModel.prototype.afterRender=function(t){this.rootElement=t,e.prototype.afterRender.call(this,t)},QuestionFileModel.prototype.clearFilesCore=function(){if(this.rootElement){var e=this.rootElement.querySelectorAll("input")[0];e&&(e.value="")}this.clear()},QuestionFileModel.prototype.doRemoveFile=function(e){var t=this;if(this.needConfirmRemoveFile){Object(c.confirmActionAsync)(this.getConfirmRemoveMessage(e.name),function(){t.removeFileCore(e)});return}this.removeFileCore(e)},QuestionFileModel.prototype.removeFileCore=function(e){var t=this.previewValue.indexOf(e);this.removeFileByContent(-1===t?e:this.value[t])},QuestionFileModel.prototype.dispose=function(){this.cameraValue=void 0,this.closeVideoStream(),e.prototype.dispose.call(this)},__decorate([Object(i.property)()],QuestionFileModel.prototype,"isUploading",void 0),__decorate([Object(i.property)()],QuestionFileModel.prototype,"isDragging",void 0),__decorate([Object(i.propertyArray)({})],QuestionFileModel.prototype,"previewValue",void 0),__decorate([Object(i.property)({defaultValue:"empty"})],QuestionFileModel.prototype,"currentState",void 0),__decorate([Object(i.property)({defaultValue:0})],QuestionFileModel.prototype,"indexToShow",void 0),__decorate([Object(i.property)({defaultValue:1,onSet:function(e,t){t.updateFileNavigator()}})],QuestionFileModel.prototype,"pageSize",void 0),__decorate([Object(i.property)({defaultValue:!1})],QuestionFileModel.prototype,"containsMultiplyFiles",void 0),__decorate([Object(i.property)()],QuestionFileModel.prototype,"allowCameraAccess",void 0),__decorate([Object(i.property)({onSet:function(e,t){t.isLoadingFromJson||t.updateCurrentMode()}})],QuestionFileModel.prototype,"sourceType",void 0),__decorate([Object(i.property)()],QuestionFileModel.prototype,"canFlipCameraValue",void 0),__decorate([Object(i.property)({localizable:{defaultStr:"confirmRemoveFile"}})],QuestionFileModel.prototype,"confirmRemoveMessage",void 0),__decorate([Object(i.property)({localizable:{defaultStr:"confirmRemoveAllFiles"}})],QuestionFileModel.prototype,"confirmRemoveAllMessage",void 0),__decorate([Object(i.property)({localizable:{defaultStr:"noFileChosen"}})],QuestionFileModel.prototype,"noFileChosenCaption",void 0),__decorate([Object(i.property)({localizable:{defaultStr:"chooseFileCaption"}})],QuestionFileModel.prototype,"chooseButtonCaption",void 0),__decorate([Object(i.property)({localizable:{defaultStr:"takePhotoCaption"}})],QuestionFileModel.prototype,"takePhotoCaption",void 0),__decorate([Object(i.property)({localizable:{defaultStr:"replaceFileCaption"}})],QuestionFileModel.prototype,"replaceButtonCaption",void 0),__decorate([Object(i.property)({localizable:{defaultStr:"clearCaption"}})],QuestionFileModel.prototype,"clearButtonCaption",void 0),__decorate([Object(i.property)({localizable:{defaultStr:"removeFileCaption"}})],QuestionFileModel.prototype,"removeFileCaption",void 0),__decorate([Object(i.property)({localizable:{defaultStr:"loadingFile"}})],QuestionFileModel.prototype,"loadingFileTitle",void 0),__decorate([Object(i.property)({localizable:{defaultStr:"chooseFile"}})],QuestionFileModel.prototype,"chooseFileTitle",void 0),__decorate([Object(i.property)({localizable:{defaultStr:"fileOrPhotoPlaceholder"}})],QuestionFileModel.prototype,"fileOrPhotoPlaceholder",void 0),__decorate([Object(i.property)({localizable:{defaultStr:"photoPlaceholder"}})],QuestionFileModel.prototype,"photoPlaceholder",void 0),__decorate([Object(i.property)({localizable:{defaultStr:"filePlaceholder"}})],QuestionFileModel.prototype,"filePlaceholder",void 0),__decorate([Object(i.property)()],QuestionFileModel.prototype,"locRenderedPlaceholderValue",void 0),QuestionFileModel}(r.Question);i.Serializer.addClass("file",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"showPreview:boolean",default:!0},"allowMultiple:boolean",{name:"allowImagesPreview:boolean",default:!0,dependsOn:"showPreview",visibleIf:function(e){return!!e.showPreview}},"imageHeight","imageWidth","acceptedTypes",{name:"storeDataAsText:boolean",default:!0},{name:"waitForUpload:boolean",default:!1},{name:"maxSize:number",default:0},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"validators",visible:!1},{name:"needConfirmRemoveFile:boolean"},{name:"sourceType",choices:["file","camera","file-camera"],default:"file",category:"general",visible:!0,visibleIf:function(){return f.settings.supportCreatorV2}},{name:"fileOrPhotoPlaceholder:text",serializationProperty:"locFileOrPhotoPlaceholder",category:"general",visibleIf:function(){return f.settings.supportCreatorV2}},{name:"photoPlaceholder:text",serializationProperty:"locPhotoPlaceholder",category:"general",visibleIf:function(){return f.settings.supportCreatorV2}},{name:"filePlaceholder:text",serializationProperty:"locFilePlaceholder",category:"general",visibleIf:function(){return f.settings.supportCreatorV2}},{name:"allowCameraAccess:switch",category:"general",visible:!1}],function(){return new m("")},"question"),s.QuestionFactory.Instance.registerQuestion("file",function(e){return new m(e)});var v=function(){function FileLoader(e,t){this.fileQuestion=e,this.callback=t,this.loaded=[]}return FileLoader.prototype.load=function(e){var t=this,o=0;this.loaded=Array(e.length),e.forEach(function(n,r){t.fileQuestion.survey&&t.fileQuestion.survey.downloadFile(t.fileQuestion,t.fileQuestion.name,n,function(i,s){t.fileQuestion&&t.callback&&("success"===i?(t.loaded[r]={content:s,name:n.name,type:n.type},++o===e.length&&t.callback("loaded",t.loaded)):t.callback("error",t.loaded))})})},FileLoader.prototype.dispose=function(){this.fileQuestion=void 0,this.callback=void 0},FileLoader}()},"./src/question_html.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionHtmlModel",function(){return l});var n,r=o(/*! ./questionnonvalue */"./src/questionnonvalue.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=o(/*! ./questionfactory */"./src/questionfactory.ts"),a=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),l=function(e){function QuestionHtmlModel(t){var o=e.call(this,t)||this;return o.createLocalizableString("html",o).onGetTextCallback=function(e){return o.survey&&!o.ignoreHtmlProgressing?o.processHtml(e):e},o}return a(QuestionHtmlModel,e),QuestionHtmlModel.prototype.getType=function(){return"html"},Object.defineProperty(QuestionHtmlModel.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),QuestionHtmlModel.prototype.getProcessedText=function(t){return this.ignoreHtmlProgressing?t:e.prototype.getProcessedText.call(this,t)},Object.defineProperty(QuestionHtmlModel.prototype,"html",{get:function(){return this.getLocalizableStringText("html","")},set:function(e){this.setLocalizableStringText("html",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionHtmlModel.prototype,"locHtml",{get:function(){return this.getLocalizableString("html")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionHtmlModel.prototype,"processedHtml",{get:function(){return this.processHtml(this.html)},enumerable:!1,configurable:!0}),QuestionHtmlModel.prototype.processHtml=function(e){return this.survey?this.survey.processHtml(e,"html-question"):this.html},Object.defineProperty(QuestionHtmlModel.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),QuestionHtmlModel}(r.QuestionNonValue);i.Serializer.addClass("html",[{name:"html:html",serializationProperty:"locHtml"}],function(){return new l("")},"nonvalue"),s.QuestionFactory.Instance.registerQuestion("html",function(e){return new l(e)})},"./src/question_image.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionImageModel",function(){return h});var n,r=o(/*! ./questionnonvalue */"./src/questionnonvalue.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=o(/*! ./questionfactory */"./src/questionfactory.ts"),a=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),l=o(/*! ./utils/utils */"./src/utils/utils.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},c=["youtube.com","youtu.be"],p=[".mp4",".mov",".wmv",".flv",".avi",".mkv"],d="embed";function isUrlYoutubeVideo(e){if(!e)return!1;e=e.toLowerCase();for(var t=0;t<c.length;t++)if(-1!==e.indexOf(c[t]))return!0;return!1}var h=function(e){function QuestionImageModel(t){var o=e.call(this,t)||this;return o.createLocalizableString("imageLink",o,!1).onGetTextCallback=function(e){return getCorrectImageLink(e)},o.createLocalizableString("altText",o,!1),o.registerPropertyChangedHandlers(["contentMode","imageLink"],function(){return o.calculateRenderedMode()}),o}return u(QuestionImageModel,e),QuestionImageModel.prototype.getType=function(){return"image"},Object.defineProperty(QuestionImageModel.prototype,"isCompositeQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),QuestionImageModel.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.calculateRenderedMode()},Object.defineProperty(QuestionImageModel.prototype,"imageLink",{get:function(){return this.getLocalizableStringText("imageLink")},set:function(e){this.setLocalizableStringText("imageLink",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImageModel.prototype,"locImageLink",{get:function(){return this.getLocalizableString("imageLink")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImageModel.prototype,"altText",{get:function(){return this.getLocalizableStringText("altText")},set:function(e){this.setLocalizableStringText("altText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImageModel.prototype,"locAltText",{get:function(){return this.getLocalizableString("altText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImageModel.prototype,"imageHeight",{get:function(){return this.getPropertyValue("imageHeight")},set:function(e){this.setPropertyValue("imageHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImageModel.prototype,"renderedStyleHeight",{get:function(){return this.imageHeight?Object(l.getRenderedStyleSize)(this.imageHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImageModel.prototype,"renderedHeight",{get:function(){return this.imageHeight?Object(l.getRenderedSize)(this.imageHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImageModel.prototype,"imageWidth",{get:function(){return this.getPropertyValue("imageWidth")},set:function(e){this.setPropertyValue("imageWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImageModel.prototype,"renderedStyleWidth",{get:function(){return this.imageWidth?Object(l.getRenderedStyleSize)(this.imageWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImageModel.prototype,"renderedWidth",{get:function(){return this.imageWidth?Object(l.getRenderedSize)(this.imageWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImageModel.prototype,"imageFit",{get:function(){return this.getPropertyValue("imageFit")},set:function(e){this.setPropertyValue("imageFit",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImageModel.prototype,"contentMode",{get:function(){return this.getPropertyValue("contentMode")},set:function(e){this.setPropertyValue("contentMode",e),"video"===e&&(this.showLabel=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImageModel.prototype,"renderedMode",{get:function(){return this.getPropertyValue("renderedMode","image")},enumerable:!1,configurable:!0}),QuestionImageModel.prototype.getImageCss=function(){var e=this.getPropertyByName("imageHeight"),t=this.getPropertyByName("imageWidth"),o=e.isDefaultValue(this.imageHeight)&&t.isDefaultValue(this.imageWidth);return new a.CssClassBuilder().append(this.cssClasses.image).append(this.cssClasses.adaptive,o).toString()},QuestionImageModel.prototype.onLoadHandler=function(){this.contentNotLoaded=!1},QuestionImageModel.prototype.onErrorHandler=function(){this.contentNotLoaded=!0},QuestionImageModel.prototype.setRenderedMode=function(e){this.setPropertyValue("renderedMode",e)},QuestionImageModel.prototype.calculateRenderedMode=function(){"auto"!==this.contentMode?this.setRenderedMode(this.contentMode):this.isYoutubeVideo()?this.setRenderedMode("youtube"):this.isVideo()?this.setRenderedMode("video"):this.setRenderedMode("image")},QuestionImageModel.prototype.isYoutubeVideo=function(){return isUrlYoutubeVideo(this.imageLink)},QuestionImageModel.prototype.isVideo=function(){var e=this.imageLink;if(!e)return!1;e=e.toLowerCase();for(var t=0;t<p.length;t++)if(e.endsWith(p[t]))return!0;return!1},__decorate([Object(i.property)({defaultValue:!1})],QuestionImageModel.prototype,"contentNotLoaded",void 0),QuestionImageModel}(r.QuestionNonValue);function getCorrectImageLink(e){if(!e||!isUrlYoutubeVideo(e)||e.toLocaleLowerCase().indexOf(d)>-1)return e;for(var t="",o=e.length-1;o>=0&&"="!==e[o]&&"/"!==e[o];o--)t=e[o]+t;return"https://www.youtube.com/"+d+"/"+t}i.Serializer.addClass("image",[{name:"imageLink:file",serializationProperty:"locImageLink"},{name:"altText",serializationProperty:"locAltText",alternativeName:"text",category:"general"},{name:"contentMode",default:"auto",choices:["auto","image","video","youtube"]},{name:"imageFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"imageHeight",default:"150"},{name:"imageWidth",default:"200"}],function(){return new h("")},"nonvalue"),s.QuestionFactory.Instance.registerQuestion("image",function(e){return new h(e)})},"./src/question_imagepicker.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"ImageItemValue",function(){return h}),o.d(t,"QuestionImagePickerModel",function(){return g});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./questionfactory */"./src/questionfactory.ts"),s=o(/*! ./question_baseselect */"./src/question_baseselect.ts"),a=o(/*! ./itemvalue */"./src/itemvalue.ts"),l=o(/*! ./helpers */"./src/helpers.ts"),u=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),c=o(/*! ./settings */"./src/settings.ts"),p=o(/*! ./utils/utils */"./src/utils/utils.ts"),d=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},h=function(e){function ImageItemValue(t,o,n){void 0===o&&(o=null),void 0===n&&(n="imageitemvalue");var r=e.call(this,t,o,n)||this;return r.typeName=n,r.createLocalizableString("imageLink",r,!1),r}return d(ImageItemValue,e),ImageItemValue.prototype.getType=function(){return this.typeName?this.typeName:"itemvalue"},Object.defineProperty(ImageItemValue.prototype,"imageLink",{get:function(){return this.getLocalizableStringText("imageLink")},set:function(e){this.setLocalizableStringText("imageLink",e)},enumerable:!1,configurable:!0}),Object.defineProperty(ImageItemValue.prototype,"locImageLink",{get:function(){return this.getLocalizableString("imageLink")},enumerable:!1,configurable:!0}),ImageItemValue.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},ImageItemValue.prototype.getMarkdownHtml=function(e,t){return this.locOwner?this.locOwner.getMarkdownHtml(e,t):void 0},ImageItemValue.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},ImageItemValue.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},ImageItemValue.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},ImageItemValue.prototype.onErrorHandler=function(){this.contentNotLoaded=!0},Object.defineProperty(ImageItemValue.prototype,"contentNotLoaded",{get:function(){return this.locOwner instanceof g&&"video"==this.locOwner.contentMode?this.videoNotLoaded:this.imageNotLoaded},set:function(e){this.locOwner instanceof g&&"video"==this.locOwner.contentMode?this.videoNotLoaded=e:this.imageNotLoaded=e},enumerable:!1,configurable:!0}),__decorate([Object(r.property)({defaultValue:!1})],ImageItemValue.prototype,"videoNotLoaded",void 0),__decorate([Object(r.property)({defaultValue:!1})],ImageItemValue.prototype,"imageNotLoaded",void 0),ImageItemValue}(a.ItemValue),g=function(e){function QuestionImagePickerModel(t){var o=e.call(this,t)||this;return o.isResponsiveValue=!1,o.onContentLoaded=function(e,t){e.contentNotLoaded=!1;var n=t.target;"video"==o.contentMode?e.aspectRatio=n.videoWidth/n.videoHeight:e.aspectRatio=n.naturalWidth/n.naturalHeight,o._width&&o.processResponsiveness(0,o._width)},o.colCount=0,o.registerPropertyChangedHandlers(["minImageWidth","maxImageWidth","minImageHeight","maxImageHeight","visibleChoices","colCount","isResponsiveValue"],function(){o._width&&o.processResponsiveness(0,o._width)}),o.registerPropertyChangedHandlers(["imageWidth","imageHeight"],function(){o.calcIsResponsive()}),o.calcIsResponsive(),o}return d(QuestionImagePickerModel,e),QuestionImagePickerModel.prototype.getType=function(){return"imagepicker"},QuestionImagePickerModel.prototype.supportGoNextPageAutomatic=function(){return!this.multiSelect},Object.defineProperty(QuestionImagePickerModel.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),QuestionImagePickerModel.prototype.getItemValueType=function(){return"imageitemvalue"},Object.defineProperty(QuestionImagePickerModel.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),QuestionImagePickerModel.prototype.supportOther=function(){return!1},QuestionImagePickerModel.prototype.supportNone=function(){return!1},QuestionImagePickerModel.prototype.isAnswerCorrect=function(){return this.multiSelect?l.Helpers.isArrayContainsEqual(this.value,this.correctAnswer):e.prototype.isAnswerCorrect.call(this)},Object.defineProperty(QuestionImagePickerModel.prototype,"multiSelect",{get:function(){return this.getPropertyValue("multiSelect")},set:function(e){this.setPropertyValue("multiSelect",e)},enumerable:!1,configurable:!0}),QuestionImagePickerModel.prototype.isItemSelected=function(e){var t=this.value;if(this.isValueEmpty(t)||!e.imageLink||e.contentNotLoaded)return!1;if(!this.multiSelect)return this.isTwoValueEquals(t,e.value);if(!Array.isArray(t))return!1;for(var o=0;o<t.length;o++)if(this.isTwoValueEquals(t[o],e.value))return!0;return!1},QuestionImagePickerModel.prototype.getItemEnabled=function(t){return!!t.imageLink&&!t.contentNotLoaded&&e.prototype.getItemEnabled.call(this,t)},QuestionImagePickerModel.prototype.clearIncorrectValues=function(){if(this.multiSelect){var t=this.value;if(t){if(!Array.isArray(t)||0==t.length){this.clearValue();return}for(var o=[],n=0;n<t.length;n++)this.hasUnknownValue(t[n],!0)||o.push(t[n]);o.length!=t.length&&(0==o.length?this.clearValue():this.value=o)}}else e.prototype.clearIncorrectValues.call(this)},QuestionImagePickerModel.prototype.getDisplayValueCore=function(t,o){return this.multiSelect||Array.isArray(o)?this.getDisplayArrayValue(t,o):e.prototype.getDisplayValueCore.call(this,t,o)},Object.defineProperty(QuestionImagePickerModel.prototype,"showLabel",{get:function(){return this.getPropertyValue("showLabel")},set:function(e){this.setPropertyValue("showLabel",e)},enumerable:!1,configurable:!0}),QuestionImagePickerModel.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),!this.isDesignMode&&this.multiSelect&&(this.createNewArray("renderedValue"),this.createNewArray("value")),this.calcIsResponsive()},QuestionImagePickerModel.prototype.getValueCore=function(){var t=e.prototype.getValueCore.call(this);return void 0!==t?t:this.multiSelect?[]:t},QuestionImagePickerModel.prototype.convertValToArrayForMultSelect=function(e){return!this.multiSelect||this.isValueEmpty(e)||Array.isArray(e)?e:[e]},QuestionImagePickerModel.prototype.renderedValueFromDataCore=function(e){return this.convertValToArrayForMultSelect(e)},QuestionImagePickerModel.prototype.rendredValueToDataCore=function(e){return this.convertValToArrayForMultSelect(e)},Object.defineProperty(QuestionImagePickerModel.prototype,"imageHeight",{get:function(){return this.getPropertyValue("imageHeight")},set:function(e){this.setPropertyValue("imageHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImagePickerModel.prototype,"renderedImageHeight",{get:function(){return(this.isResponsive?Math.floor(this.responsiveImageHeight):this.imageHeight)||150},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImagePickerModel.prototype,"imageWidth",{get:function(){return this.getPropertyValue("imageWidth")},set:function(e){this.setPropertyValue("imageWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImagePickerModel.prototype,"renderedImageWidth",{get:function(){return(this.isResponsive?Math.floor(this.responsiveImageWidth):this.imageWidth)||200},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImagePickerModel.prototype,"imageFit",{get:function(){return this.getPropertyValue("imageFit")},set:function(e){this.setPropertyValue("imageFit",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImagePickerModel.prototype,"contentMode",{get:function(){return this.getPropertyValue("contentMode")},set:function(e){this.setPropertyValue("contentMode",e),"video"===e&&(this.showLabel=!0)},enumerable:!1,configurable:!0}),QuestionImagePickerModel.prototype.convertDefaultValue=function(e){return e},Object.defineProperty(QuestionImagePickerModel.prototype,"inputType",{get:function(){return this.multiSelect?"checkbox":"radio"},enumerable:!1,configurable:!0}),QuestionImagePickerModel.prototype.isFootChoice=function(e,t){return!1},QuestionImagePickerModel.prototype.getSelectBaseRootCss=function(){return new u.CssClassBuilder().append(e.prototype.getSelectBaseRootCss.call(this)).append(this.cssClasses.rootColumn,1==this.getCurrentColCount()).toString()},Object.defineProperty(QuestionImagePickerModel.prototype,"isResponsive",{get:function(){return this.isResponsiveValue&&this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionImagePickerModel.prototype,"exactSizesAreEmpty",{get:function(){var e=this;return!["imageHeight","imageWidth"].some(function(t){return void 0!==e[t]&&null!==e[t]})},enumerable:!1,configurable:!0}),QuestionImagePickerModel.prototype.calcIsResponsive=function(){this.isResponsiveValue=this.exactSizesAreEmpty},QuestionImagePickerModel.prototype.getObservedElementSelector=function(){return Object(p.classesToSelector)(this.cssClasses.root)},QuestionImagePickerModel.prototype.supportResponsiveness=function(){return!0},QuestionImagePickerModel.prototype.needResponsiveness=function(){return this.supportResponsiveness()&&this.isDefaultV2Theme},QuestionImagePickerModel.prototype.getCurrentColCount=function(){return void 0===this.responsiveColCount||0===this.colCount?this.colCount:this.responsiveColCount},QuestionImagePickerModel.prototype.processResponsiveness=function(e,t){this._width=t=Math.floor(t);var calcAvailableColumnsCount=function(e,t,o){var n=Math.floor(e/(t+o));return(n+1)*(t+o)-o<=e&&n++,n};if(this.isResponsive){var o,n=this.choices.length+(this.isDesignMode?1:0),r=this.gapBetweenItems||0,i=this.minImageWidth,s=this.maxImageWidth,a=this.maxImageHeight,l=this.minImageHeight,u=this.colCount;if(0===u){if((r+i)*n-r>t){var c=calcAvailableColumnsCount(t,i,r);o=Math.floor((t-r*(c-1))/c)}else o=Math.floor((t-r*(n-1))/n)}else{var p=calcAvailableColumnsCount(t,i,r);p<u?(this.responsiveColCount=p>=1?p:1,u=this.responsiveColCount):this.responsiveColCount=u,o=Math.floor((t-r*(u-1))/u)}o=Math.max(i,Math.min(o,s));var d=Number.MIN_VALUE;this.choices.forEach(function(e){var t=o/e.aspectRatio;d=t>d?t:d}),d>a?d=a:d<l&&(d=l);var h=this.responsiveImageWidth,g=this.responsiveImageHeight;return this.responsiveImageWidth=o,this.responsiveImageHeight=d,h!==this.responsiveImageWidth||g!==this.responsiveImageHeight}return!1},QuestionImagePickerModel.prototype.triggerResponsiveness=function(t){void 0===t&&(t=!0),t&&this.reCalcGapBetweenItemsCallback&&this.reCalcGapBetweenItemsCallback(),e.prototype.triggerResponsiveness.call(this,t)},QuestionImagePickerModel.prototype.afterRender=function(t){var o=this;e.prototype.afterRender.call(this,t);var n=this.getObservedElementSelector(),r=t&&n?t.querySelector(n):void 0;r&&(this.reCalcGapBetweenItemsCallback=function(){o.gapBetweenItems=Math.ceil(Number.parseFloat(window.getComputedStyle(r).gap))||16},this.reCalcGapBetweenItemsCallback())},__decorate([Object(r.property)({})],QuestionImagePickerModel.prototype,"responsiveImageHeight",void 0),__decorate([Object(r.property)({})],QuestionImagePickerModel.prototype,"responsiveImageWidth",void 0),__decorate([Object(r.property)({})],QuestionImagePickerModel.prototype,"isResponsiveValue",void 0),__decorate([Object(r.property)({})],QuestionImagePickerModel.prototype,"maxImageWidth",void 0),__decorate([Object(r.property)({})],QuestionImagePickerModel.prototype,"minImageWidth",void 0),__decorate([Object(r.property)({})],QuestionImagePickerModel.prototype,"maxImageHeight",void 0),__decorate([Object(r.property)({})],QuestionImagePickerModel.prototype,"minImageHeight",void 0),__decorate([Object(r.property)({})],QuestionImagePickerModel.prototype,"responsiveColCount",void 0),QuestionImagePickerModel}(s.QuestionCheckboxBase);r.Serializer.addClass("imageitemvalue",[{name:"imageLink:file",serializationProperty:"locImageLink"}],function(e){return new h(e)},"itemvalue"),r.Serializer.addClass("responsiveImageSize",[],void 0,"number"),r.Serializer.addClass("imagepicker",[{name:"showOtherItem",visible:!1},{name:"otherText",visible:!1},{name:"showNoneItem",visible:!1},{name:"noneText",visible:!1},{name:"optionsCaption",visible:!1},{name:"otherErrorText",visible:!1},{name:"storeOthersAsComment",visible:!1},{name:"contentMode",default:"image",choices:["image","video"]},{name:"imageFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"imageHeight:number",minValue:0},{name:"imageWidth:number",minValue:0},{name:"minImageWidth:responsiveImageSize",default:200,minValue:0,visibleIf:function(){return c.settings.supportCreatorV2}},{name:"minImageHeight:responsiveImageSize",default:133,minValue:0,visibleIf:function(){return c.settings.supportCreatorV2}},{name:"maxImageWidth:responsiveImageSize",default:400,minValue:0,visibleIf:function(){return c.settings.supportCreatorV2}},{name:"maxImageHeight:responsiveImageSize",default:266,minValue:0,visibleIf:function(){return c.settings.supportCreatorV2}}],function(){return new g("")},"checkboxbase"),r.Serializer.addProperty("imagepicker",{name:"showLabel:boolean",default:!1}),r.Serializer.addProperty("imagepicker",{name:"colCount:number",default:0,choices:[0,1,2,3,4,5]}),r.Serializer.addProperty("imagepicker",{name:"multiSelect:boolean",default:!1}),r.Serializer.addProperty("imagepicker",{name:"choices:imageitemvalue[]"}),i.QuestionFactory.Instance.registerQuestion("imagepicker",function(e){return new g(e)})},"./src/question_matrix.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"MatrixRowModel",function(){return m}),o.d(t,"MatrixCells",function(){return v}),o.d(t,"QuestionMatrixModel",function(){return b});var n,r=o(/*! ./helpers */"./src/helpers.ts"),i=o(/*! ./itemvalue */"./src/itemvalue.ts"),s=o(/*! ./martixBase */"./src/martixBase.ts"),a=o(/*! ./jsonobject */"./src/jsonobject.ts"),l=o(/*! ./base */"./src/base.ts"),u=o(/*! ./surveyStrings */"./src/surveyStrings.ts"),c=o(/*! ./error */"./src/error.ts"),p=o(/*! ./questionfactory */"./src/questionfactory.ts"),d=o(/*! ./localizablestring */"./src/localizablestring.ts"),h=o(/*! ./question_dropdown */"./src/question_dropdown.ts"),g=o(/*! ./settings */"./src/settings.ts"),f=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),y=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),m=function(e){function MatrixRowModel(t,o,n,r){var i=e.call(this)||this;return i.fullName=o,i.item=t,i.data=n,i.value=r,i.cellClick=function(e){i.value=e.value},i.registerPropertyChangedHandlers(["value"],function(){i.data&&i.data.onMatrixRowChanged(i)}),i}return y(MatrixRowModel,e),Object.defineProperty(MatrixRowModel.prototype,"name",{get:function(){return this.item.value},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixRowModel.prototype,"text",{get:function(){return this.item.text},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixRowModel.prototype,"locText",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixRowModel.prototype,"value",{get:function(){return this.getPropertyValue("value")},set:function(e){e=this.data.getCorrectedRowValue(e),this.setPropertyValue("value",e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixRowModel.prototype,"rowClasses",{get:function(){var e=this.data.cssClasses,t=!!this.data.getErrorByType("requiredinallrowserror");return new f.CssClassBuilder().append(e.row).append(e.rowError,t&&this.isValueEmpty(this.value)).toString()},enumerable:!1,configurable:!0}),MatrixRowModel}(l.Base),v=function(){function MatrixCells(e){this.cellsOwner=e,this.values={}}return Object.defineProperty(MatrixCells.prototype,"isEmpty",{get:function(){return 0==Object.keys(this.values).length},enumerable:!1,configurable:!0}),MatrixCells.prototype.valuesChanged=function(){this.onValuesChanged&&this.onValuesChanged()},MatrixCells.prototype.setCellText=function(e,t,o){if(e=this.getCellRowColumnValue(e,this.rows),t=this.getCellRowColumnValue(t,this.columns),e&&t){if(o)this.values[e]||(this.values[e]={}),this.values[e][t]||(this.values[e][t]=this.createString()),this.values[e][t].text=o;else if(this.values[e]&&this.values[e][t]){var n=this.values[e][t];n.text="",n.isEmpty&&(delete this.values[e][t],0==Object.keys(this.values[e]).length&&delete this.values[e])}this.valuesChanged()}},MatrixCells.prototype.setDefaultCellText=function(e,t){this.setCellText(g.settings.matrix.defaultRowName,e,t)},MatrixCells.prototype.getCellLocText=function(e,t){return(e=this.getCellRowColumnValue(e,this.rows),t=this.getCellRowColumnValue(t,this.columns),e&&t&&this.values[e]&&this.values[e][t])?this.values[e][t]:null},MatrixCells.prototype.getDefaultCellLocText=function(e,t){return this.getCellLocText(g.settings.matrix.defaultRowName,e)},MatrixCells.prototype.getCellDisplayLocText=function(e,t){var o=this.getCellLocText(e,t);return o&&!o.isEmpty||(o=this.getCellLocText(g.settings.matrix.defaultRowName,t))&&!o.isEmpty?o:("number"==typeof t&&(t=t>=0&&t<this.columns.length?this.columns[t]:null),t&&t.locText)?t.locText:null},MatrixCells.prototype.getCellText=function(e,t){var o=this.getCellLocText(e,t);return o?o.calculatedText:null},MatrixCells.prototype.getDefaultCellText=function(e){var t=this.getCellLocText(g.settings.matrix.defaultRowName,e);return t?t.calculatedText:null},MatrixCells.prototype.getCellDisplayText=function(e,t){var o=this.getCellDisplayLocText(e,t);return o?o.calculatedText:null},Object.defineProperty(MatrixCells.prototype,"rows",{get:function(){return this.cellsOwner?this.cellsOwner.getRows():[]},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixCells.prototype,"columns",{get:function(){return this.cellsOwner?this.cellsOwner.getColumns():[]},enumerable:!1,configurable:!0}),MatrixCells.prototype.getCellRowColumnValue=function(e,t){if(null==e)return null;if("number"==typeof e){if(e<0||e>=t.length)return null;e=t[e].value}return e.value?e.value:e},MatrixCells.prototype.getJson=function(){if(this.isEmpty)return null;var e={};for(var t in this.values){var o={},n=this.values[t];for(var r in n)o[r]=n[r].getJson();e[t]=o}return e},MatrixCells.prototype.setJson=function(e){if(this.values={},e){for(var t in e)if("pos"!=t){var o=e[t];for(var n in this.values[t]={},o)if("pos"!=n){var r=this.createString();r.setJson(o[n]),this.values[t][n]=r}}}this.valuesChanged()},MatrixCells.prototype.locStrsChanged=function(){if(!this.isEmpty)for(var e in this.values){var t=this.values[e];for(var o in t)t[o].strChanged()}},MatrixCells.prototype.createString=function(){return new d.LocalizableString(this.cellsOwner,!0)},MatrixCells}(),b=function(e){function QuestionMatrixModel(t){var o=e.call(this,t)||this;return o.isRowChanging=!1,o.emptyLocalizableString=new d.LocalizableString(o),o.cellsValue=new v(o),o.cellsValue.onValuesChanged=function(){o.updateHasCellText(),o.propertyValueChanged("cells",o.cells,o.cells)},o.registerPropertyChangedHandlers(["columns"],function(){o.onColumnsChanged()}),o.registerPropertyChangedHandlers(["rows"],function(){o.filterItems()||o.onRowsChanged()}),o.registerPropertyChangedHandlers(["hideIfRowsEmpty"],function(){o.updateVisibilityBasedOnRows()}),o}return y(QuestionMatrixModel,e),QuestionMatrixModel.prototype.getType=function(){return"matrix"},Object.defineProperty(QuestionMatrixModel.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixModel.prototype,"isAllRowRequired",{get:function(){return this.getPropertyValue("isAllRowRequired")},set:function(e){this.setPropertyValue("isAllRowRequired",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixModel.prototype,"hasRows",{get:function(){return this.rows.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixModel.prototype,"rowsOrder",{get:function(){return this.getPropertyValue("rowsOrder")},set:function(e){(e=e.toLowerCase())!=this.rowsOrder&&(this.setPropertyValue("rowsOrder",e),this.onRowsChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixModel.prototype,"hideIfRowsEmpty",{get:function(){return this.getPropertyValue("hideIfRowsEmpty")},set:function(e){this.setPropertyValue("hideIfRowsEmpty",e)},enumerable:!1,configurable:!0}),QuestionMatrixModel.prototype.getRows=function(){return this.rows},QuestionMatrixModel.prototype.getColumns=function(){return this.visibleColumns},QuestionMatrixModel.prototype.addColumn=function(e,t){var o=new i.ItemValue(e,t);return this.columns.push(o),o},QuestionMatrixModel.prototype.getItemClass=function(e,t){var o=e.value==t.value,n=this.isReadOnly,r=!o&&!n;return new f.CssClassBuilder().append(this.cssClasses.cell,this.hasCellText).append(this.hasCellText?this.cssClasses.cellText:this.cssClasses.label).append(this.cssClasses.itemOnError,!this.hasCellText&&this.hasCssError()).append(this.hasCellText?this.cssClasses.cellTextSelected:this.cssClasses.itemChecked,o).append(this.hasCellText?this.cssClasses.cellTextDisabled:this.cssClasses.itemDisabled,n).append(this.cssClasses.itemHover,r&&!this.hasCellText).toString()},Object.defineProperty(QuestionMatrixModel.prototype,"itemSvgIcon",{get:function(){return this.cssClasses.itemSvgIconId},enumerable:!1,configurable:!0}),QuestionMatrixModel.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.cells.locStrsChanged()},QuestionMatrixModel.prototype.getQuizQuestionCount=function(){for(var e=0,t=0;t<this.rows.length;t++)!this.isValueEmpty(this.correctAnswer[this.rows[t].value])&&e++;return e},QuestionMatrixModel.prototype.getCorrectAnswerCount=function(){for(var e=0,t=this.value,o=0;o<this.rows.length;o++){var n=this.rows[o].value;!this.isValueEmpty(t[n])&&this.isTwoValueEquals(this.correctAnswer[n],t[n])&&e++}return e},QuestionMatrixModel.prototype.getVisibleRows=function(){var e=[],t=this.value;t||(t={});for(var o=this.filteredRows?this.filteredRows:this.rows,n=0;n<o.length;n++){var r=o[n];this.isValueEmpty(r.value)||e.push(this.createMatrixRow(r,this.id+"_"+r.value.toString().replace(/\s/g,"_"),t[r.value]))}return this.generatedVisibleRows=e,e},QuestionMatrixModel.prototype.sortVisibleRows=function(e){return this.survey&&this.survey.isDesignMode?e:"random"===this.rowsOrder.toLowerCase()?r.Helpers.randomizeArray(e):e},QuestionMatrixModel.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.rows=this.sortVisibleRows(this.rows)},QuestionMatrixModel.prototype.isNewValueCorrect=function(e){return r.Helpers.isValueObject(e,!0)},QuestionMatrixModel.prototype.processRowsOnSet=function(e){return this.sortVisibleRows(e)},Object.defineProperty(QuestionMatrixModel.prototype,"visibleRows",{get:function(){return this.getVisibleRows()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixModel.prototype,"cells",{get:function(){return this.cellsValue},set:function(e){this.cells.setJson(e&&e.getJson?e.getJson():null)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixModel.prototype,"hasCellText",{get:function(){return this.getPropertyValue("hasCellText",!1)},enumerable:!1,configurable:!0}),QuestionMatrixModel.prototype.updateHasCellText=function(){this.setPropertyValue("hasCellText",!this.cells.isEmpty)},QuestionMatrixModel.prototype.setCellText=function(e,t,o){this.cells.setCellText(e,t,o)},QuestionMatrixModel.prototype.getCellText=function(e,t){return this.cells.getCellText(e,t)},QuestionMatrixModel.prototype.setDefaultCellText=function(e,t){this.cells.setDefaultCellText(e,t)},QuestionMatrixModel.prototype.getDefaultCellText=function(e){return this.cells.getDefaultCellText(e)},QuestionMatrixModel.prototype.getCellDisplayText=function(e,t){return this.cells.getCellDisplayText(e,t)},QuestionMatrixModel.prototype.getCellDisplayLocText=function(e,t){return this.cells.getCellDisplayLocText(e,t)||this.emptyLocalizableString},QuestionMatrixModel.prototype.supportGoNextPageAutomatic=function(){return!0===this.isMouseDown&&this.hasValuesInAllRows()},QuestionMatrixModel.prototype.onCheckForErrors=function(t,o){e.prototype.onCheckForErrors.call(this,t,o),(!o||this.hasCssError())&&this.hasErrorInRows()&&t.push(new c.RequiredInAllRowsError(null,this))},QuestionMatrixModel.prototype.hasErrorInRows=function(){return!!this.isAllRowRequired&&!this.hasValuesInAllRows()},QuestionMatrixModel.prototype.hasValuesInAllRows=function(){var e=this.generatedVisibleRows;if(e||(e=this.visibleRows),!e)return!0;for(var t=0;t<e.length;t++)if(this.isValueEmpty(e[t].value))return!1;return!0},QuestionMatrixModel.prototype.getIsAnswered=function(){return e.prototype.getIsAnswered.call(this)&&this.hasValuesInAllRows()},QuestionMatrixModel.prototype.createMatrixRow=function(e,t,o){var n=new m(e,t,this,o);return this.onMatrixRowCreated(n),n},QuestionMatrixModel.prototype.onMatrixRowCreated=function(e){},QuestionMatrixModel.prototype.setQuestionValue=function(t,o){if(void 0===o&&(o=!0),e.prototype.setQuestionValue.call(this,t,this.isRowChanging||o),this.generatedVisibleRows&&0!=this.generatedVisibleRows.length){this.isRowChanging=!0;var n=this.value;if(n||(n={}),0==this.rows.length)this.generatedVisibleRows[0].value=n;else for(var r=0;r<this.generatedVisibleRows.length;r++){var i=n[this.generatedVisibleRows[r].name];this.isValueEmpty(i)&&(i=null),this.generatedVisibleRows[r].value=i}this.updateIsAnswered(),this.isRowChanging=!1}},QuestionMatrixModel.prototype.getDisplayValueCore=function(e,t){var o={};for(var n in t){var r=e?i.ItemValue.getTextOrHtmlByValue(this.rows,n):n;r||(r=n);var s=i.ItemValue.getTextOrHtmlByValue(this.columns,t[n]);s||(s=t[n]),o[r]=s}return o},QuestionMatrixModel.prototype.getPlainData=function(t){var o=this;void 0===t&&(t={includeEmpty:!0});var n=e.prototype.getPlainData.call(this,t);if(n){var r=this.createValueCopy();n.isNode=!0,n.data=Object.keys(r||{}).map(function(e){var n=o.rows.filter(function(t){return t.value===e})[0],s={name:e,title:n?n.text:"row",value:r[e],displayValue:i.ItemValue.getTextOrHtmlByValue(o.visibleColumns,r[e]),getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!1},a=i.ItemValue.getItemByValue(o.visibleColumns,r[e]);return a&&(t.calculations||[]).forEach(function(e){s[e.propertyName]=a[e.propertyName]}),s})}return n},QuestionMatrixModel.prototype.addConditionObjectsByContext=function(e,t){for(var o=0;o<this.rows.length;o++){var n=this.rows[o];n.value&&e.push({name:this.getValueName()+"."+n.value,text:this.processedTitle+"."+n.calculatedText,question:this})}},QuestionMatrixModel.prototype.getConditionJson=function(t,o){if(void 0===t&&(t=null),void 0===o&&(o=null),!o)return e.prototype.getConditionJson.call(this);var n=new h.QuestionDropdownModel(o);n.choices=this.columns;var r=new a.JsonObject().toJsonObject(n);return r.type=n.getType(),r},QuestionMatrixModel.prototype.clearValueIfInvisibleCore=function(t){e.prototype.clearValueIfInvisibleCore.call(this,t),this.hasRows&&this.clearInvisibleValuesInRows()},QuestionMatrixModel.prototype.getFirstInputElementId=function(){var t=this.generatedVisibleRows;return(t||(t=this.visibleRows),t.length>0&&this.visibleColumns.length>0)?this.inputId+"_"+t[0].name+"_0":e.prototype.getFirstInputElementId.call(this)},QuestionMatrixModel.prototype.onMatrixRowChanged=function(e){if(!this.isRowChanging){if(this.isRowChanging=!0,this.hasRows){var t=this.value;t||(t={}),t[e.name]=e.value,this.setNewValue(t)}else this.setNewValue(e.value);this.isRowChanging=!1}},QuestionMatrixModel.prototype.getCorrectedRowValue=function(e){for(var t=0;t<this.columns.length;t++)if(e===this.columns[t].value)return e;for(var t=0;t<this.columns.length;t++)if(this.isTwoValueEquals(e,this.columns[t].value))return this.columns[t].value;return e},QuestionMatrixModel.prototype.getSearchableItemValueKeys=function(e){e.push("columns"),e.push("rows")},Object.defineProperty(QuestionMatrixModel.prototype,"SurveyModel",{get:function(){return this.survey},enumerable:!1,configurable:!0}),QuestionMatrixModel.prototype.getColumnHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName({column:e},"column-header")},QuestionMatrixModel.prototype.getColumnHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData({column:e},"column-header")},QuestionMatrixModel.prototype.getRowHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName({row:e},"row-header")},QuestionMatrixModel.prototype.getRowHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData({row:e},"row-header")},QuestionMatrixModel}(s.QuestionMatrixBaseModel);a.Serializer.addClass("matrix",["rowTitleWidth",{name:"columns:itemvalue[]",uniqueProperty:"value",baseValue:function(){return u.surveyLocalization.getString("matrix_column")}},{name:"rows:itemvalue[]",uniqueProperty:"value",baseValue:function(){return u.surveyLocalization.getString("matrix_row")}},{name:"cells:cells",serializationProperty:"cells"},{name:"rowsOrder",default:"initial",choices:["initial","random"]},"isAllRowRequired:boolean","hideIfRowsEmpty:boolean"],function(){return new b("")},"matrixbase"),p.QuestionFactory.Instance.registerQuestion("matrix",function(e){var t=new b(e);return t.rows=p.QuestionFactory.DefaultRows,t.columns=p.QuestionFactory.DefaultColums,t})},"./src/question_matrixdropdown.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"MatrixDropdownRowModel",function(){return c}),o.d(t,"QuestionMatrixDropdownModel",function(){return p});var n,r=o(/*! ./question_matrixdropdownbase */"./src/question_matrixdropdownbase.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=o(/*! ./itemvalue */"./src/itemvalue.ts"),a=o(/*! ./questionfactory */"./src/questionfactory.ts"),l=o(/*! ./helpers */"./src/helpers.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),c=function(e){function MatrixDropdownRowModel(t,o,n,r){var i=e.call(this,n,r)||this;return i.name=t,i.item=o,i.buildCells(r),i}return u(MatrixDropdownRowModel,e),Object.defineProperty(MatrixDropdownRowModel.prototype,"rowName",{get:function(){return this.name},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownRowModel.prototype,"text",{get:function(){return this.item.text},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownRowModel.prototype,"locText",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),MatrixDropdownRowModel}(r.MatrixDropdownRowModelBase),p=function(e){function QuestionMatrixDropdownModel(t){var o=e.call(this,t)||this;return o.createLocalizableString("totalText",o,!0),o.registerPropertyChangedHandlers(["rows"],function(){o.clearGeneratedRows(),o.resetRenderedTable(),o.filterItems()||o.onRowsChanged(),o.clearIncorrectValues()}),o.registerPropertyChangedHandlers(["hideIfRowsEmpty"],function(){o.updateVisibilityBasedOnRows()}),o}return u(QuestionMatrixDropdownModel,e),QuestionMatrixDropdownModel.prototype.getType=function(){return"matrixdropdown"},Object.defineProperty(QuestionMatrixDropdownModel.prototype,"totalText",{get:function(){return this.getLocalizableStringText("totalText","")},set:function(e){this.setLocalizableStringText("totalText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModel.prototype,"locTotalText",{get:function(){return this.getLocalizableString("totalText")},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModel.prototype.getFooterText=function(){return this.locTotalText},QuestionMatrixDropdownModel.prototype.getRowTitleWidth=function(){return this.rowTitleWidth},Object.defineProperty(QuestionMatrixDropdownModel.prototype,"hideIfRowsEmpty",{get:function(){return this.getPropertyValue("hideIfRowsEmpty")},set:function(e){this.setPropertyValue("hideIfRowsEmpty",e)},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModel.prototype.getDisplayValueCore=function(e,t){if(!t)return t;var o=this.visibleRows,n={};if(!o)return n;for(var r=0;r<o.length;r++){var i=o[r].rowName,a=t[i];if(a){if(e){var l=s.ItemValue.getTextOrHtmlByValue(this.rows,i);l&&(i=l)}n[i]=this.getRowDisplayValue(e,o[r],a)}}return n},QuestionMatrixDropdownModel.prototype.getConditionObjectRowName=function(e){return"."+this.rows[e].value},QuestionMatrixDropdownModel.prototype.getConditionObjectRowText=function(e){return"."+this.rows[e].calculatedText},QuestionMatrixDropdownModel.prototype.getConditionObjectsRowIndeces=function(){for(var e=[],t=0;t<this.rows.length;t++)e.push(t);return e},QuestionMatrixDropdownModel.prototype.isNewValueCorrect=function(e){return l.Helpers.isValueObject(e,!0)},QuestionMatrixDropdownModel.prototype.clearIncorrectValues=function(){var t=this.value;if(t){var o=null,n=!1,r=this.filteredRows?this.filteredRows:this.rows;for(var i in t)s.ItemValue.getItemByValue(r,i)?(null==o&&(o={}),o[i]=t[i]):n=!0;n&&(this.value=o),e.prototype.clearIncorrectValues.call(this)}},QuestionMatrixDropdownModel.prototype.clearValueIfInvisibleCore=function(t){e.prototype.clearValueIfInvisibleCore.call(this,t),this.clearInvisibleValuesInRows()},QuestionMatrixDropdownModel.prototype.generateRows=function(){var e=[],t=this.filteredRows?this.filteredRows:this.rows;if(!t||0===t.length)return e;var o=this.value;o||(o={});for(var n=0;n<t.length;n++)this.isValueEmpty(t[n].value)||e.push(this.createMatrixRow(t[n],o[t[n].value]));return e},QuestionMatrixDropdownModel.prototype.createMatrixRow=function(e,t){return new c(e.value,e,this,t)},QuestionMatrixDropdownModel.prototype.getSearchableItemValueKeys=function(e){e.push("rows")},QuestionMatrixDropdownModel.prototype.updateProgressInfoByValues=function(e){var t=this.value;t||(t={});for(var o=0;o<this.rows.length;o++){var n=t[this.rows[o].value];this.updateProgressInfoByRow(e,n||{})}},QuestionMatrixDropdownModel}(r.QuestionMatrixDropdownModelBase);i.Serializer.addClass("matrixdropdown",[{name:"rows:itemvalue[]",uniqueProperty:"value"},"rowsVisibleIf:condition","rowTitleWidth",{name:"totalText",serializationProperty:"locTotalText"},"hideIfRowsEmpty:boolean"],function(){return new p("")},"matrixdropdownbase"),a.QuestionFactory.Instance.registerQuestion("matrixdropdown",function(e){var t=new p(e);return t.choices=[1,2,3,4,5],t.rows=a.QuestionFactory.DefaultRows,r.QuestionMatrixDropdownModelBase.addDefaultColumns(t),t})},"./src/question_matrixdropdownbase.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"MatrixDropdownCell",function(){return b}),o.d(t,"MatrixDropdownTotalCell",function(){return C}),o.d(t,"MatrixDropdownRowModelBase",function(){return P}),o.d(t,"MatrixDropdownTotalRowModel",function(){return M}),o.d(t,"QuestionMatrixDropdownModelBase",function(){return x});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./martixBase */"./src/martixBase.ts"),s=o(/*! ./helpers */"./src/helpers.ts"),a=o(/*! ./base */"./src/base.ts"),l=o(/*! ./survey-element */"./src/survey-element.ts"),u=o(/*! ./textPreProcessor */"./src/textPreProcessor.ts"),c=o(/*! ./itemvalue */"./src/itemvalue.ts"),p=o(/*! ./questionfactory */"./src/questionfactory.ts"),d=o(/*! ./functionsfactory */"./src/functionsfactory.ts"),h=o(/*! ./settings */"./src/settings.ts"),g=o(/*! ./error */"./src/error.ts"),f=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),y=o(/*! ./question_matrixdropdowncolumn */"./src/question_matrixdropdowncolumn.ts"),m=o(/*! ./question_matrixdropdownrendered */"./src/question_matrixdropdownrendered.ts"),v=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),b=function(){function MatrixDropdownCell(e,t,o){this.column=e,this.row=t,this.data=o,this.questionValue=this.createQuestion(e,t,o),this.questionValue.updateCustomWidget()}return MatrixDropdownCell.prototype.locStrsChanged=function(){this.question.locStrsChanged()},MatrixDropdownCell.prototype.createQuestion=function(e,t,o){var n=o.createQuestion(this.row,this.column);return n.validateValueCallback=function(){return o.validateCell(t,e.name,t.value)},r.CustomPropertiesCollection.getProperties(e.getType()).forEach(function(t){var o=t.name;void 0!==e[o]&&(n[o]=e[o])}),n},Object.defineProperty(MatrixDropdownCell.prototype,"question",{get:function(){return this.questionValue},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownCell.prototype,"value",{get:function(){return this.question.value},set:function(e){this.question.value=e},enumerable:!1,configurable:!0}),MatrixDropdownCell.prototype.runCondition=function(e,t){this.question.runCondition(e,t)},MatrixDropdownCell}(),C=function(e){function MatrixDropdownTotalCell(t,o,n){var r=e.call(this,t,o,n)||this;return r.column=t,r.row=o,r.data=n,r.updateCellQuestion(),r}return v(MatrixDropdownTotalCell,e),MatrixDropdownTotalCell.prototype.createQuestion=function(e,t,o){var n=r.Serializer.createClass("expression");return n.setSurveyImpl(t),n},MatrixDropdownTotalCell.prototype.locStrsChanged=function(){this.updateCellQuestion(),e.prototype.locStrsChanged.call(this)},MatrixDropdownTotalCell.prototype.updateCellQuestion=function(){this.question.locCalculation(),this.column.updateCellQuestion(this.question,null,function(e){delete e.defaultValue}),this.question.expression=this.getTotalExpression(),this.question.format=this.column.totalFormat,this.question.currency=this.column.totalCurrency,this.question.displayStyle=this.column.totalDisplayStyle,this.question.maximumFractionDigits=this.column.totalMaximumFractionDigits,this.question.minimumFractionDigits=this.column.totalMinimumFractionDigits,this.question.unlocCalculation(),this.question.runIfReadOnly=!0},MatrixDropdownTotalCell.prototype.getTotalExpression=function(){if(this.column.totalExpression)return this.column.totalExpression;if("none"==this.column.totalType)return"''";var e=this.column.totalType+"InArray";return d.FunctionFactory.Instance.hasFunction(e)?e+"({self}, '"+this.column.name+"')":""},MatrixDropdownTotalCell}(b),w=function(e){function MatrixDropdownRowTextProcessor(t,o,n){var r=e.call(this,o)||this;return r.row=t,r.variableName=o,r.parentTextProcessor=n,r}return v(MatrixDropdownRowTextProcessor,e),MatrixDropdownRowTextProcessor.prototype.getParentTextProcessor=function(){return this.parentTextProcessor},Object.defineProperty(MatrixDropdownRowTextProcessor.prototype,"survey",{get:function(){return this.row.getSurvey()},enumerable:!1,configurable:!0}),MatrixDropdownRowTextProcessor.prototype.getValues=function(){return this.row.value},MatrixDropdownRowTextProcessor.prototype.getQuestionByName=function(e){return this.row.getQuestionByName(e)},MatrixDropdownRowTextProcessor.prototype.onCustomProcessText=function(e){return e.name==P.IndexVariableName?(e.isExists=!0,e.value=this.row.rowIndex,!0):e.name==P.RowValueVariableName&&(e.isExists=!0,e.value=this.row.rowName,!0)},MatrixDropdownRowTextProcessor}(u.QuestionTextProcessor),P=function(){function MatrixDropdownRowModelBase(e,t){var o=this;this.isSettingValue=!1,this.detailPanelValue=null,this.cells=[],this.isCreatingDetailPanel=!1,this.data=e,this.subscribeToChanges(t),this.textPreProcessor=new w(this,MatrixDropdownRowModelBase.RowVariableName,e?e.getParentTextProcessor():null),this.showHideDetailPanelClick=function(){if(o.getSurvey().isDesignMode)return!0;o.showHideDetailPanel()},this.idValue=MatrixDropdownRowModelBase.getId()}return MatrixDropdownRowModelBase.getId=function(){return"srow_"+MatrixDropdownRowModelBase.idCounter++},Object.defineProperty(MatrixDropdownRowModelBase.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownRowModelBase.prototype,"rowName",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownRowModelBase.prototype,"text",{get:function(){return this.rowName},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownRowModelBase.prototype,"value",{get:function(){for(var e={},t=this.questions,o=0;o<t.length;o++){var n=t[o];n.isEmpty()||(e[n.getValueName()]=n.value),n.comment&&this.getSurvey()&&this.getSurvey().storeOthersAsComment&&(e[n.getValueName()+a.Base.commentSuffix]=n.comment)}return e},set:function(e){this.isSettingValue=!0,this.subscribeToChanges(e);for(var t=this.questions,o=0;o<t.length;o++){var n=t[o],r=this.getCellValue(e,n.getValueName()),i=n.comment,s=e?e[n.getValueName()+a.Base.commentSuffix]:"";void 0==s&&(s=""),n.updateValueFromSurvey(r),(s||this.isTwoValueEquals(i,n.comment))&&n.updateCommentFromSurvey(s),n.onSurveyValueChanged(r)}this.isSettingValue=!1},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownRowModelBase.prototype,"locText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownRowModelBase.prototype,"hasPanel",{get:function(){return!!this.data&&this.data.hasDetailPanel(this)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownRowModelBase.prototype,"detailPanel",{get:function(){return this.detailPanelValue},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownRowModelBase.prototype,"detailPanelId",{get:function(){return this.detailPanel?this.detailPanel.id:""},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownRowModelBase.prototype,"isDetailPanelShowing",{get:function(){return!!this.data&&this.data.getIsDetailPanelShowing(this)},enumerable:!1,configurable:!0}),MatrixDropdownRowModelBase.prototype.setIsDetailPanelShowing=function(e){!e&&this.detailPanel&&this.detailPanel.onHidingContent(),this.data&&this.data.setIsDetailPanelShowing(this,e),this.onDetailPanelShowingChanged&&this.onDetailPanelShowingChanged()},MatrixDropdownRowModelBase.prototype.showHideDetailPanel=function(){this.isDetailPanelShowing?this.hideDetailPanel():this.showDetailPanel()},MatrixDropdownRowModelBase.prototype.showDetailPanel=function(){this.ensureDetailPanel(),this.detailPanelValue&&this.setIsDetailPanelShowing(!0)},MatrixDropdownRowModelBase.prototype.hideDetailPanel=function(e){void 0===e&&(e=!1),this.setIsDetailPanelShowing(!1),e&&(this.detailPanelValue=null)},MatrixDropdownRowModelBase.prototype.ensureDetailPanel=function(){if(!this.isCreatingDetailPanel&&!this.detailPanelValue&&this.hasPanel&&this.data){this.isCreatingDetailPanel=!0,this.detailPanelValue=this.data.createRowDetailPanel(this);var e=this.detailPanelValue.questions,t=this.data.getRowValue(this.data.getRowIndex(this));if(!s.Helpers.isValueEmpty(t))for(var o=0;o<e.length;o++){var n=e[o].getValueName();s.Helpers.isValueEmpty(t[n])||(e[o].value=t[n])}this.detailPanelValue.setSurveyImpl(this),this.isCreatingDetailPanel=!1}},MatrixDropdownRowModelBase.prototype.getAllValues=function(){return this.value},MatrixDropdownRowModelBase.prototype.getFilteredValues=function(){var e=this.data?this.data.getDataFilteredValues():{},t=this.validationValues;if(t)for(var o in t)e[o]=t[o];return e.row=this.getAllValues(),e},MatrixDropdownRowModelBase.prototype.getFilteredProperties=function(){return{survey:this.getSurvey(),row:this}},MatrixDropdownRowModelBase.prototype.runCondition=function(e,t){this.data&&(e[MatrixDropdownRowModelBase.OwnerVariableName]=this.data.value),e[MatrixDropdownRowModelBase.IndexVariableName]=this.rowIndex,e[MatrixDropdownRowModelBase.RowValueVariableName]=this.rowName;var o=s.Helpers.createCopy(t);o[MatrixDropdownRowModelBase.RowVariableName]=this;for(var n=0;n<this.cells.length;n++)e[MatrixDropdownRowModelBase.RowVariableName]=this.value,this.cells[n].runCondition(e,o);this.detailPanel&&this.detailPanel.runCondition(e,o)},MatrixDropdownRowModelBase.prototype.clearValue=function(){for(var e=this.questions,t=0;t<e.length;t++)e[t].clearValue()},MatrixDropdownRowModelBase.prototype.onAnyValueChanged=function(e,t){for(var o=this.questions,n=0;n<o.length;n++)o[n].onAnyValueChanged(e,t)},MatrixDropdownRowModelBase.prototype.getDataValueCore=function(e,t){var o=this.getSurvey();return o?o.getDataValueCore(e,t):e[t]},MatrixDropdownRowModelBase.prototype.getValue=function(e){var t=this.getQuestionByName(e);return t?t.value:null},MatrixDropdownRowModelBase.prototype.setValue=function(e,t){this.setValueCore(e,t,!1)},MatrixDropdownRowModelBase.prototype.getVariable=function(e){},MatrixDropdownRowModelBase.prototype.setVariable=function(e,t){},MatrixDropdownRowModelBase.prototype.getComment=function(e){var t=this.getQuestionByName(e);return t?t.comment:""},MatrixDropdownRowModelBase.prototype.setComment=function(e,t,o){this.setValueCore(e,t,!0)},MatrixDropdownRowModelBase.prototype.findQuestionByName=function(e){if(e){var t=MatrixDropdownRowModelBase.RowVariableName+".";if(0===e.indexOf(t))return this.getQuestionByName(e.substring(t.length));var o=this.getSurvey();return o?o.getQuestionByName(e):null}},MatrixDropdownRowModelBase.prototype.setValueCore=function(e,t,o){if(!this.isSettingValue){this.updateQuestionsValue(e,t,o);var n=this.value,r=o?e+a.Base.commentSuffix:e,i=this.getQuestionByName(e),s=this.data.onRowChanging(this,r,n);if(i&&!this.isTwoValueEquals(s,t)&&(this.isSettingValue=!0,o?i.comment=s:i.value=s,this.isSettingValue=!1,n=this.value),!(this.data.isValidateOnValueChanging&&this.hasQuestonError(i))){var l=null==t&&!i||o&&!t&&!!i&&i.autoOtherMode;this.data.onRowChanged(this,r,n,l),r&&this.runTriggers(M.RowVariableName+"."+r,n),this.onAnyValueChanged(MatrixDropdownRowModelBase.RowVariableName,"")}}},MatrixDropdownRowModelBase.prototype.updateQuestionsValue=function(e,t,o){if(this.detailPanel){var n=this.getQuestionByColumnName(e),r=this.detailPanel.getQuestionByName(e);if(n&&r){var i=this.isTwoValueEquals(t,o?n.comment:n.value)?r:n;this.isSettingValue=!0,o?i.comment=t:i.value=t,this.isSettingValue=!1}}},MatrixDropdownRowModelBase.prototype.runTriggers=function(e,t){e&&this.questions.forEach(function(o){return o.runTriggers(e,t)})},MatrixDropdownRowModelBase.prototype.hasQuestonError=function(e){if(!e)return!1;if(e.hasErrors(!0,{isOnValueChanged:!this.data.isValidateOnValueChanging}))return!0;if(e.isEmpty())return!1;var t=this.getCellByColumnName(e.name);return!!t&&!!t.column&&!!t.column.isUnique&&this.data.checkIfValueInRowDuplicated(this,e)},Object.defineProperty(MatrixDropdownRowModelBase.prototype,"isEmpty",{get:function(){var e=this.value;if(s.Helpers.isValueEmpty(e))return!0;for(var t in e)if(void 0!==e[t]&&null!==e[t])return!1;return!0},enumerable:!1,configurable:!0}),MatrixDropdownRowModelBase.prototype.getQuestionByColumn=function(e){var t=this.getCellByColumn(e);return t?t.question:null},MatrixDropdownRowModelBase.prototype.getCellByColumn=function(e){for(var t=0;t<this.cells.length;t++)if(this.cells[t].column==e)return this.cells[t];return null},MatrixDropdownRowModelBase.prototype.getCellByColumnName=function(e){for(var t=0;t<this.cells.length;t++)if(this.cells[t].column.name==e)return this.cells[t];return null},MatrixDropdownRowModelBase.prototype.getQuestionByColumnName=function(e){var t=this.getCellByColumnName(e);return t?t.question:null},Object.defineProperty(MatrixDropdownRowModelBase.prototype,"questions",{get:function(){for(var e=[],t=0;t<this.cells.length;t++)e.push(this.cells[t].question);for(var o=this.detailPanel?this.detailPanel.questions:[],t=0;t<o.length;t++)e.push(o[t]);return e},enumerable:!1,configurable:!0}),MatrixDropdownRowModelBase.prototype.getQuestionByName=function(e){return this.getQuestionByColumnName(e)||(this.detailPanel?this.detailPanel.getQuestionByName(e):null)},MatrixDropdownRowModelBase.prototype.getQuestionsByName=function(e){var t=[],o=this.getQuestionByColumnName(e);return o&&t.push(o),this.detailPanel&&(o=this.detailPanel.getQuestionByName(e))&&t.push(o),t},MatrixDropdownRowModelBase.prototype.getSharedQuestionByName=function(e){return this.data?this.data.getSharedQuestionByName(e,this):null},MatrixDropdownRowModelBase.prototype.clearIncorrectValues=function(e){for(var t in e){var o=this.getQuestionByName(t);if(o){var n=o.value;o.clearIncorrectValues(),this.isTwoValueEquals(n,o.value)||this.setValue(t,o.value)}else!this.getSharedQuestionByName(t)&&0>t.indexOf(h.settings.matrix.totalsSuffix)&&this.setValue(t,null)}},MatrixDropdownRowModelBase.prototype.getLocale=function(){return this.data?this.data.getLocale():""},MatrixDropdownRowModelBase.prototype.getMarkdownHtml=function(e,t){return this.data?this.data.getMarkdownHtml(e,t):void 0},MatrixDropdownRowModelBase.prototype.getRenderer=function(e){return this.data?this.data.getRenderer(e):null},MatrixDropdownRowModelBase.prototype.getRendererContext=function(e){return this.data?this.data.getRendererContext(e):e},MatrixDropdownRowModelBase.prototype.getProcessedText=function(e){return this.data?this.data.getProcessedText(e):e},MatrixDropdownRowModelBase.prototype.locStrsChanged=function(){for(var e=0;e<this.cells.length;e++)this.cells[e].locStrsChanged();this.detailPanel&&this.detailPanel.locStrsChanged()},MatrixDropdownRowModelBase.prototype.updateCellQuestionOnColumnChanged=function(e,t,o){var n=this.getCellByColumn(e);n&&this.updateCellOnColumnChanged(n,t,o)},MatrixDropdownRowModelBase.prototype.updateCellQuestionOnColumnItemValueChanged=function(e,t,o,n,r,i){var s=this.getCellByColumn(e);s&&this.updateCellOnColumnItemValueChanged(s,t,o,n,r,i)},MatrixDropdownRowModelBase.prototype.onQuestionReadOnlyChanged=function(e){for(var t=this.questions,o=0;o<t.length;o++){var n=t[o];n.setPropertyValue("isReadOnly",n.isReadOnly)}this.detailPanel&&(this.detailPanel.readOnly=e)},MatrixDropdownRowModelBase.prototype.hasErrors=function(e,t,o){var n=!1,r=this.cells;if(!r)return n;this.validationValues=t.validationValues;for(var i=0;i<r.length;i++)if(r[i]){var s=r[i].question;s&&s.visible&&(s.onCompletedAsyncValidators=function(e){o()},t&&!0===t.isOnValueChanged&&s.isEmpty()||(n=s.hasErrors(e,t)||n))}if(this.hasPanel){this.ensureDetailPanel();var a=this.detailPanel.hasErrors(e,!1,t);!t.hideErroredPanel&&a&&e&&(t.isSingleDetailPanel&&(t.hideErroredPanel=!0),this.showDetailPanel()),n=a||n}return this.validationValues=void 0,n},MatrixDropdownRowModelBase.prototype.updateCellOnColumnChanged=function(e,t,o){e.question[t]=o},MatrixDropdownRowModelBase.prototype.updateCellOnColumnItemValueChanged=function(e,t,o,n,r,i){var s=e.question[t];if(Array.isArray(s)){var a="value"===n?i:o.value,l=c.ItemValue.getItemByValue(s,a);l&&(l[n]=r)}},MatrixDropdownRowModelBase.prototype.buildCells=function(e){this.isSettingValue=!0;for(var t=this.data.columns,o=0;o<t.length;o++){var n=t[o],r=this.createCell(n);this.cells.push(r);var i=this.getCellValue(e,n.name);if(!s.Helpers.isValueEmpty(i)){r.question.value=i;var l=n.name+a.Base.commentSuffix;e&&!s.Helpers.isValueEmpty(e[l])&&(r.question.comment=e[l])}}this.isSettingValue=!1},MatrixDropdownRowModelBase.prototype.isTwoValueEquals=function(e,t){return s.Helpers.isTwoValueEquals(e,t,!1,!0,!1)},MatrixDropdownRowModelBase.prototype.getCellValue=function(e,t){return this.editingObj?r.Serializer.getObjPropertyValue(this.editingObj,t):e?e[t]:void 0},MatrixDropdownRowModelBase.prototype.createCell=function(e){return new b(e,this,this.data)},MatrixDropdownRowModelBase.prototype.getSurveyData=function(){return this},MatrixDropdownRowModelBase.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},MatrixDropdownRowModelBase.prototype.getTextProcessor=function(){return this.textPreProcessor},Object.defineProperty(MatrixDropdownRowModelBase.prototype,"rowIndex",{get:function(){return this.data?this.data.getRowIndex(this)+1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownRowModelBase.prototype,"editingObj",{get:function(){return this.editingObjValue},enumerable:!1,configurable:!0}),MatrixDropdownRowModelBase.prototype.dispose=function(){this.editingObj&&(this.editingObj.onPropertyChanged.remove(this.onEditingObjPropertyChanged),this.editingObjValue=null)},MatrixDropdownRowModelBase.prototype.subscribeToChanges=function(e){var t=this;e&&e.getType&&e.onPropertyChanged&&e!==this.editingObj&&(this.editingObjValue=e,this.onEditingObjPropertyChanged=function(e,o){t.updateOnSetValue(o.name,o.newValue)},this.editingObj.onPropertyChanged.add(this.onEditingObjPropertyChanged))},MatrixDropdownRowModelBase.prototype.updateOnSetValue=function(e,t){this.isSettingValue=!0;for(var o=this.getQuestionsByName(e),n=0;n<o.length;n++)o[n].value=t;this.isSettingValue=!1},MatrixDropdownRowModelBase.RowVariableName="row",MatrixDropdownRowModelBase.OwnerVariableName="self",MatrixDropdownRowModelBase.IndexVariableName="rowIndex",MatrixDropdownRowModelBase.RowValueVariableName="rowValue",MatrixDropdownRowModelBase.idCounter=1,MatrixDropdownRowModelBase}(),M=function(e){function MatrixDropdownTotalRowModel(t){var o=e.call(this,t,null)||this;return o.buildCells(null),o}return v(MatrixDropdownTotalRowModel,e),MatrixDropdownTotalRowModel.prototype.createCell=function(e){return new C(e,this,this.data)},MatrixDropdownTotalRowModel.prototype.setValue=function(e,t){this.data&&!this.isSettingValue&&this.data.onTotalValueChanged()},MatrixDropdownTotalRowModel.prototype.runCondition=function(t,o){var n,r=0;do n=s.Helpers.getUnbindValue(this.value),e.prototype.runCondition.call(this,t,o),r++;while(!s.Helpers.isTwoValueEquals(n,this.value)&&r<3)},MatrixDropdownTotalRowModel.prototype.updateCellOnColumnChanged=function(e,t,o){e.updateCellQuestion()},MatrixDropdownTotalRowModel}(P),x=function(e){function QuestionMatrixDropdownModelBase(t){var o=e.call(this,t)||this;return o.isRowChanging=!1,o.lockResetRenderedTable=!1,o.isDoingonAnyValueChanged=!1,o.createItemValues("choices"),o.createLocalizableString("placeholder",o,!1,!0),o.createLocalizableString("keyDuplicationError",o,!1,!0),o.detailPanelValue=o.createNewDetailPanel(),o.detailPanel.selectedElementInDesign=o,o.detailPanel.renderWidth="100%",o.detailPanel.isInteractiveDesignElement=!1,o.detailPanel.showTitle=!1,o.registerPropertyChangedHandlers(["columns","cellType"],function(){o.updateColumnsAndRows()}),o.registerPropertyChangedHandlers(["placeholder","columnColCount","rowTitleWidth","choices"],function(){o.clearRowsAndResetRenderedTable()}),o.registerPropertyChangedHandlers(["columnLayout","addRowLocation","hideColumnsIfEmpty","showHeader","minRowCount","isReadOnly","rowCount","hasFooter","detailPanelMode"],function(){o.resetRenderedTable()}),o.registerPropertyChangedHandlers(["isMobile"],function(){o.resetRenderedTable()}),o}return v(QuestionMatrixDropdownModelBase,e),Object.defineProperty(QuestionMatrixDropdownModelBase,"defaultCellType",{get:function(){return h.settings.matrix.defaultCellType},set:function(e){h.settings.matrix.defaultCellType=e},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.addDefaultColumns=function(e){for(var t=p.QuestionFactory.DefaultColums,o=0;o<t.length;o++)e.addColumn(t[o])},QuestionMatrixDropdownModelBase.prototype.createColumnValues=function(){var e=this;return this.createNewArray("columns",function(t){t.colOwner=e,e.onAddColumn&&e.onAddColumn(t),e.survey&&e.survey.matrixColumnAdded(e,t)},function(t){t.colOwner=null,e.onRemoveColumn&&e.onRemoveColumn(t)})},QuestionMatrixDropdownModelBase.prototype.getType=function(){return"matrixdropdownbase"},QuestionMatrixDropdownModelBase.prototype.dispose=function(){e.prototype.dispose.call(this),this.clearGeneratedRows()},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"isRowsDynamic",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"isUpdateLocked",{get:function(){return this.isLoadingFromJson||this.isUpdating},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.beginUpdate=function(){this.isUpdating=!0},QuestionMatrixDropdownModelBase.prototype.endUpdate=function(){this.isUpdating=!1,this.updateColumnsAndRows()},QuestionMatrixDropdownModelBase.prototype.updateColumnsAndRows=function(){this.updateColumnsIndexes(this.columns),this.updateColumnsCellType(),this.generatedTotalRow=null,this.clearRowsAndResetRenderedTable()},QuestionMatrixDropdownModelBase.prototype.itemValuePropertyChanged=function(t,o,n,r){e.prototype.itemValuePropertyChanged.call(this,t,o,n,r),"choices"===t.ownerPropertyName&&this.clearRowsAndResetRenderedTable()},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"columnLayout",{get:function(){return this.getPropertyValue("columnLayout")},set:function(e){this.setPropertyValue("columnLayout",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"columnsLocation",{get:function(){return this.columnLayout},set:function(e){this.columnLayout=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"detailErrorLocation",{get:function(){return this.getPropertyValue("detailErrorLocation")},set:function(e){this.setPropertyValue("detailErrorLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"cellErrorLocation",{get:function(){return this.getPropertyValue("cellErrorLocation")},set:function(e){this.setPropertyValue("cellErrorLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.getChildErrorLocation=function(t){var o=t.parent?this.detailErrorLocation:this.cellErrorLocation;return"default"!==o?o:e.prototype.getChildErrorLocation.call(this,t)},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"isColumnLayoutHorizontal",{get:function(){return!!this.isMobile||"vertical"!=this.columnLayout},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"isUniqueCaseSensitive",{get:function(){return void 0!==this.isUniqueCaseSensitiveValue?this.isUniqueCaseSensitiveValue:h.settings.comparator.caseSensitive},set:function(e){this.isUniqueCaseSensitiveValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"detailPanelMode",{get:function(){return this.getPropertyValue("detailPanelMode")},set:function(e){this.setPropertyValue("detailPanelMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"detailPanel",{get:function(){return this.detailPanelValue},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.getPanel=function(){return this.detailPanel},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"detailElements",{get:function(){return this.detailPanel.elements},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.createNewDetailPanel=function(){return r.Serializer.createClass("panel")},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"hasRowText",{get:function(){return!0},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.getFooterText=function(){return null},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"canAddRow",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"canRemoveRows",{get:function(){return!1},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.canRemoveRow=function(e){return!0},QuestionMatrixDropdownModelBase.prototype.onPointerDown=function(e,t){},QuestionMatrixDropdownModelBase.prototype.onRowsChanged=function(){this.resetRenderedTable(),e.prototype.onRowsChanged.call(this)},QuestionMatrixDropdownModelBase.prototype.onStartRowAddingRemoving=function(){this.lockResetRenderedTable=!0,this.setValueChangedDirectly()},QuestionMatrixDropdownModelBase.prototype.onEndRowAdding=function(){if(this.lockResetRenderedTable=!1,this.renderedTable){if(this.renderedTable.isRequireReset())this.resetRenderedTable();else{var e=this.visibleRows.length-1;this.renderedTable.onAddedRow(this.visibleRows[e],e)}}},QuestionMatrixDropdownModelBase.prototype.onEndRowRemoving=function(e){this.lockResetRenderedTable=!1,this.renderedTable.isRequireReset()?this.resetRenderedTable():e&&this.renderedTable.onRemovedRow(e)},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"renderedTableValue",{get:function(){return this.getPropertyValue("renderedTable",null)},set:function(e){this.setPropertyValue("renderedTable",e)},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.clearRowsAndResetRenderedTable=function(){this.clearGeneratedRows(),this.resetRenderedTable(),this.fireCallback(this.columnsChangedCallback)},QuestionMatrixDropdownModelBase.prototype.resetRenderedTable=function(){this.lockResetRenderedTable||this.isUpdateLocked||(this.renderedTableValue=null,this.fireCallback(this.onRenderedTableResetCallback))},QuestionMatrixDropdownModelBase.prototype.clearGeneratedRows=function(){if(this.generatedVisibleRows){for(var t=0;t<this.generatedVisibleRows.length;t++)this.generatedVisibleRows[t].dispose();e.prototype.clearGeneratedRows.call(this)}},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"isRendredTableCreated",{get:function(){return!!this.renderedTableValue},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"renderedTable",{get:function(){return!this.renderedTableValue&&(this.renderedTableValue=this.createRenderedTable(),this.onRenderedTableCreatedCallback&&this.onRenderedTableCreatedCallback(this.renderedTableValue)),this.renderedTableValue},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.createRenderedTable=function(){return new m.QuestionMatrixDropdownRenderedTable(this)},QuestionMatrixDropdownModelBase.prototype.onMatrixRowCreated=function(e){if(this.survey)for(var t={rowValue:e.value,row:e,column:null,columnName:null,cell:null,cellQuestion:null,value:null},o=0;o<this.visibleColumns.length;o++){t.column=this.visibleColumns[o],t.columnName=t.column.name;var n=e.cells[o];t.cell=n,t.cellQuestion=n.question,t.value=n.value,this.onCellCreatedCallback&&this.onCellCreatedCallback(t),this.survey.matrixCellCreated(this,t)}},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"cellType",{get:function(){return this.getPropertyValue("cellType",h.settings.matrix.defaultCellType)},set:function(e){e=e.toLowerCase(),this.setPropertyValue("cellType",e)},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.updateColumnsCellType=function(){for(var e=0;e<this.columns.length;e++)this.columns[e].defaultCellTypeChanged()},QuestionMatrixDropdownModelBase.prototype.updateColumnsIndexes=function(e){for(var t=0;t<e.length;t++)e[t].setIndex(t)},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"columnColCount",{get:function(){return this.getPropertyValue("columnColCount")},set:function(e){e<0||e>4||this.setPropertyValue("columnColCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"horizontalScroll",{get:function(){return this.getPropertyValue("horizontalScroll")},set:function(e){this.setPropertyValue("horizontalScroll",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"allowAdaptiveActions",{get:function(){return this.getPropertyValue("allowAdaptiveActions")},set:function(e){this.setPropertyValue("allowAdaptiveActions",e),this.detailPanel&&(this.detailPanel.allowAdaptiveActions=e)},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.getRequiredText=function(){return this.survey?this.survey.requiredText:""},QuestionMatrixDropdownModelBase.prototype.hasChoices=function(){return this.choices.length>0},QuestionMatrixDropdownModelBase.prototype.onColumnPropertyChanged=function(e,t,o){if(this.updateHasFooter(),this.generatedVisibleRows){for(var n=0;n<this.generatedVisibleRows.length;n++)this.generatedVisibleRows[n].updateCellQuestionOnColumnChanged(e,t,o);this.generatedTotalRow&&this.generatedTotalRow.updateCellQuestionOnColumnChanged(e,t,o),this.onColumnsChanged(),"isRequired"==t&&this.resetRenderedTable()}},QuestionMatrixDropdownModelBase.prototype.onColumnItemValuePropertyChanged=function(e,t,o,n,r,i){if(this.generatedVisibleRows)for(var s=0;s<this.generatedVisibleRows.length;s++)this.generatedVisibleRows[s].updateCellQuestionOnColumnItemValueChanged(e,t,o,n,r,i)},QuestionMatrixDropdownModelBase.prototype.onShowInMultipleColumnsChanged=function(e){this.resetTableAndRows()},QuestionMatrixDropdownModelBase.prototype.onColumnVisibilityChanged=function(e){this.resetTableAndRows()},QuestionMatrixDropdownModelBase.prototype.onColumnCellTypeChanged=function(e){this.resetTableAndRows()},QuestionMatrixDropdownModelBase.prototype.resetTableAndRows=function(){this.clearGeneratedRows(),this.resetRenderedTable()},QuestionMatrixDropdownModelBase.prototype.getRowTitleWidth=function(){return""},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"hasFooter",{get:function(){return this.getPropertyValue("hasFooter",!1)},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.getAddRowLocation=function(){return"default"},QuestionMatrixDropdownModelBase.prototype.getShowColumnsIfEmpty=function(){return!1},QuestionMatrixDropdownModelBase.prototype.updateShowTableAndAddRow=function(){this.renderedTable&&this.renderedTable.updateShowTableAndAddRow()},QuestionMatrixDropdownModelBase.prototype.updateHasFooter=function(){this.setPropertyValue("hasFooter",this.hasTotal)},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"hasTotal",{get:function(){for(var e=0;e<this.columns.length;e++)if(this.columns[e].hasTotal)return!0;return!1},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.getCellType=function(){return this.cellType},QuestionMatrixDropdownModelBase.prototype.getCustomCellType=function(e,t,o){if(!this.survey)return o;var n={rowValue:t.value,row:t,column:e,columnName:e.name,cellType:o};return this.survey.matrixCellCreating(this,n),n.cellType},QuestionMatrixDropdownModelBase.prototype.getConditionJson=function(t,o){if(void 0===t&&(t=null),void 0===o&&(o=null),!o)return e.prototype.getConditionJson.call(this);for(var n="",r=o.length-1;r>=0&&"."!=o[r];r--)n=o[r]+n;var i=this.getColumnByName(n);if(!i)return null;var s=i.createCellQuestion(null);return s?s.getConditionJson(t):null},QuestionMatrixDropdownModelBase.prototype.clearIncorrectValues=function(){var e=this.visibleRows;if(e)for(var t=0;t<e.length;t++)e[t].clearIncorrectValues(this.getRowValue(t))},QuestionMatrixDropdownModelBase.prototype.clearErrors=function(){e.prototype.clearErrors.call(this),this.runFuncForCellQuestions(function(e){e.clearErrors()})},QuestionMatrixDropdownModelBase.prototype.localeChanged=function(){e.prototype.localeChanged.call(this),this.runFuncForCellQuestions(function(e){e.localeChanged()})},QuestionMatrixDropdownModelBase.prototype.runFuncForCellQuestions=function(e){if(this.generatedVisibleRows)for(var t=0;t<this.generatedVisibleRows.length;t++)for(var o=this.generatedVisibleRows[t],n=0;n<o.cells.length;n++)e(o.cells[n].question)},QuestionMatrixDropdownModelBase.prototype.runCondition=function(t,o){e.prototype.runCondition.call(this,t,o);var n,r=0;do n=s.Helpers.getUnbindValue(this.totalValue),this.runCellsCondition(t,o),this.runTotalsCondition(t,o),r++;while(!s.Helpers.isTwoValueEquals(n,this.totalValue)&&r<3)},QuestionMatrixDropdownModelBase.prototype.runTriggers=function(t,o){e.prototype.runTriggers.call(this,t,o),this.runFuncForCellQuestions(function(e){e.runTriggers(t,o)})},QuestionMatrixDropdownModelBase.prototype.shouldRunColumnExpression=function(){return!1},QuestionMatrixDropdownModelBase.prototype.runCellsCondition=function(e,t){if(this.generatedVisibleRows){for(var o=this.getRowConditionValues(e),n=this.generatedVisibleRows,r=0;r<n.length;r++)n[r].runCondition(o,t);this.checkColumnsVisibility(),this.checkColumnsRenderedRequired()}},QuestionMatrixDropdownModelBase.prototype.checkColumnsVisibility=function(){if(!this.isDesignMode){for(var e=!1,t=0;t<this.visibleColumns.length;t++){var o=this.visibleColumns[t];(o.visibleIf||o.isFilteredMultipleColumns)&&(e=this.isColumnVisibilityChanged(o)||e)}e&&this.resetRenderedTable()}},QuestionMatrixDropdownModelBase.prototype.checkColumnsRenderedRequired=function(){for(var e=this.generatedVisibleRows,t=0;t<this.visibleColumns.length;t++){var o=this.visibleColumns[t];if(o.requiredIf){for(var n=e.length>0,r=0;r<e.length;r++)if(!e[r].cells[t].question.isRequired){n=!1;break}o.updateIsRenderedRequired(n)}}},QuestionMatrixDropdownModelBase.prototype.isColumnVisibilityChanged=function(e){for(var t=e.isColumnVisible,o=e.isFilteredMultipleColumns,n=o?e.getVisibleChoicesInCell:[],r=[],i=!1,a=this.generatedVisibleRows,l=0;l<a.length;l++){var u=a[l].cells[e.index],c=null==u?void 0:u.question;if(c&&c.isVisible){if(i=!0,o)this.updateNewVisibleChoices(c,r);else break}}return e.hasVisibleCell=i,!!o&&(e.setVisibleChoicesInCell(r),!s.Helpers.isArraysEqual(n,r,!0,!1,!1))||t!=e.isVisible},QuestionMatrixDropdownModelBase.prototype.updateNewVisibleChoices=function(e,t){var o=e.visibleChoices;if(Array.isArray(o))for(var n=0;n<o.length;n++){var r=o[n];0>t.indexOf(r.value)&&t.push(r.value)}},QuestionMatrixDropdownModelBase.prototype.runTotalsCondition=function(e,t){this.generatedTotalRow&&this.generatedTotalRow.runCondition(this.getRowConditionValues(e),t)},QuestionMatrixDropdownModelBase.prototype.getRowConditionValues=function(e){var t=e;t||(t={});var o={};return this.isValueEmpty(this.totalValue)||(o=JSON.parse(JSON.stringify(this.totalValue))),t.row={},t.totalRow=o,t},QuestionMatrixDropdownModelBase.prototype.IsMultiplyColumn=function(e){return e.isShowInMultipleColumns&&!this.isMobile},QuestionMatrixDropdownModelBase.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this);for(var t=this.columns,o=0;o<t.length;o++)t[o].locStrsChanged();var n=this.generatedVisibleRows;if(n){for(var o=0;o<n.length;o++)n[o].locStrsChanged();this.generatedTotalRow&&this.generatedTotalRow.locStrsChanged()}},QuestionMatrixDropdownModelBase.prototype.getColumnByName=function(e){for(var t=0;t<this.columns.length;t++)if(this.columns[t].name==e)return this.columns[t];return null},QuestionMatrixDropdownModelBase.prototype.getColumnName=function(e){return this.getColumnByName(e)},QuestionMatrixDropdownModelBase.prototype.getColumnWidth=function(e){var t;return e.minWidth?e.minWidth:this.columnMinWidth?this.columnMinWidth:(null===(t=h.settings.matrix.columnWidthsByType[e.cellType])||void 0===t?void 0:t.minWidth)||""},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"choices",{get:function(){return this.getPropertyValue("choices")},set:function(e){this.setPropertyValue("choices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"placeholder",{get:function(){return this.getLocalizableStringText("placeholder")},set:function(e){this.setLocalizableStringText("placeholder",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"locPlaceholder",{get:function(){return this.getLocalizableString("placeholder")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"optionsCaption",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"keyDuplicationError",{get:function(){return this.getLocalizableStringText("keyDuplicationError")},set:function(e){this.setLocalizableStringText("keyDuplicationError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"locKeyDuplicationError",{get:function(){return this.getLocalizableString("keyDuplicationError")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"storeOthersAsComment",{get:function(){return!!this.survey&&this.survey.storeOthersAsComment},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.addColumn=function(e,t){void 0===t&&(t=null);var o=new y.MatrixDropdownColumn(e,t);return this.columns.push(o),o},QuestionMatrixDropdownModelBase.prototype.getVisibleRows=function(){var e=this;return this.isUpdateLocked?null:(this.generatedVisibleRows||(this.generatedVisibleRows=this.generateRows(),this.generatedVisibleRows.forEach(function(t){return e.onMatrixRowCreated(t)}),this.data&&this.runCellsCondition(this.data.getFilteredValues(),this.data.getFilteredProperties()),this.updateValueOnRowsGeneration(this.generatedVisibleRows),this.updateIsAnswered()),this.generatedVisibleRows)},QuestionMatrixDropdownModelBase.prototype.updateValueOnRowsGeneration=function(e){for(var t=this.createNewValue(!0),o=this.createNewValue(),n=0;n<e.length;n++){var r=e[n];if(!r.editingObj){var i=this.getRowValue(n),s=r.value;this.isTwoValueEquals(i,s)||(o=this.getNewValueOnRowChanged(r,"",s,!1,o).value)}}this.isTwoValueEquals(t,o)||(this.isRowChanging=!0,this.setNewValue(o),this.isRowChanging=!1)},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"totalValue",{get:function(){return this.hasTotal&&this.visibleTotalRow?this.visibleTotalRow.value:{}},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.getVisibleTotalRow=function(){if(this.isUpdateLocked)return null;if(this.hasTotal){if(!this.generatedTotalRow&&(this.generatedTotalRow=this.generateTotalRow(),this.data)){var e={survey:this.survey};this.runTotalsCondition(this.data.getAllValues(),e)}}else this.generatedTotalRow=null;return this.generatedTotalRow},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"visibleTotalRow",{get:function(){return this.getVisibleTotalRow()},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.updateColumnsIndexes(this.columns),this.clearGeneratedRows(),this.generatedTotalRow=null,this.updateHasFooter()},QuestionMatrixDropdownModelBase.prototype.getRowValue=function(e){if(e<0)return null;var t=this.visibleRows;if(e>=t.length)return null;var o=this.createNewValue();return this.getRowValueCore(t[e],o)},QuestionMatrixDropdownModelBase.prototype.checkIfValueInRowDuplicated=function(e,t){if(!this.generatedVisibleRows)return!1;for(var o=!1,n=0;n<this.generatedVisibleRows.length;n++){var r=this.generatedVisibleRows[n];if(e!==r&&s.Helpers.isTwoValueEquals(r.getValue(t.name),t.value,!0,this.isUniqueCaseSensitive)){o=!0;break}}return o?this.addDuplicationError(t):t.clearErrors(),o},QuestionMatrixDropdownModelBase.prototype.setRowValue=function(e,t){if(e<0)return null;var o=this.visibleRows;if(e>=o.length)return null;o[e].value=t,this.onRowChanged(o[e],"",t,!1)},QuestionMatrixDropdownModelBase.prototype.generateRows=function(){return null},QuestionMatrixDropdownModelBase.prototype.generateTotalRow=function(){return new M(this)},QuestionMatrixDropdownModelBase.prototype.createNewValue=function(e){void 0===e&&(e=!1);var t=this.value?this.createValueCopy():{};return e&&this.isMatrixValueEmpty(t)?null:t},QuestionMatrixDropdownModelBase.prototype.getRowValueCore=function(e,t,o){void 0===o&&(o=!1);var n=t&&t[e.rowName]?t[e.rowName]:null;return!n&&o&&(n={},t&&(t[e.rowName]=n)),n},QuestionMatrixDropdownModelBase.prototype.getRowObj=function(e){var t=this.getRowValueCore(e,this.value);return t&&t.getType?t:null},QuestionMatrixDropdownModelBase.prototype.getRowDisplayValue=function(e,t,o){if(!o||t.editingObj)return o;for(var n=Object.keys(o),r=0;r<n.length;r++){var i=n[r],s=t.getQuestionByName(i);if(s||(s=this.getSharedQuestionByName(i,t)),s){var a=s.getDisplayValue(e,o[i]);e&&s.title&&s.title!==i?(o[s.title]=a,delete o[i]):o[i]=a}}return o},QuestionMatrixDropdownModelBase.prototype.getPlainData=function(t){var o=this;void 0===t&&(t={includeEmpty:!0});var n=e.prototype.getPlainData.call(this,t);return n&&(n.isNode=!0,n.data=this.visibleRows.map(function(e){var n={name:e.rowName,title:e.text,value:e.value,displayValue:o.getRowDisplayValue(!1,e,e.value),getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!0,data:e.cells.map(function(e){return e.question.getPlainData(t)}).filter(function(e){return!!e})};return(t.calculations||[]).forEach(function(t){n[t.propertyName]=e[t.propertyName]}),n})),n},QuestionMatrixDropdownModelBase.prototype.addConditionObjectsByContext=function(e,t){var o=!!t&&(!0===t||this.columns.indexOf(t)>-1),n=this.getConditionObjectsRowIndeces();o&&n.push(-1);for(var r=0;r<n.length;r++){var i=n[r],s=i>-1?this.getConditionObjectRowName(i):"row";if(s)for(var a=i>-1?this.getConditionObjectRowText(i):"row",l=i>-1||!0===t,u=l&&-1===i?".":"",c=(l?this.getValueName():"")+u+s+".",p=(l?this.processedTitle:"")+u+a+".",d=0;d<this.columns.length;d++){var h=this.columns[d];if(-1!==i||t!==h){var g={name:c+h.name,text:p+h.fullTitle,question:this};-1===i&&!0===t&&(g.context=this),e.push(g)}}}},QuestionMatrixDropdownModelBase.prototype.onHidingContent=function(){e.prototype.onHidingContent.call(this);var t=[];this.collectNestedQuestions(t,!0),t.forEach(function(e){return e.onHidingContent()})},QuestionMatrixDropdownModelBase.prototype.getIsReadyNestedQuestions=function(){if(!this.generatedVisibleRows)return[];var e=[];return this.collectNestedQuestonsInRows(this.generatedVisibleRows,e,!1),this.generatedTotalRow&&this.collectNestedQuestonsInRows([this.generatedTotalRow],e,!1),e},QuestionMatrixDropdownModelBase.prototype.collectNestedQuestionsCore=function(e,t){this.collectNestedQuestonsInRows(this.visibleRows,e,t)},QuestionMatrixDropdownModelBase.prototype.collectNestedQuestonsInRows=function(e,t,o){e.forEach(function(e){e.questions.forEach(function(e){return e.collectNestedQuestions(t,o)})})},QuestionMatrixDropdownModelBase.prototype.getConditionObjectRowName=function(e){return""},QuestionMatrixDropdownModelBase.prototype.getConditionObjectRowText=function(e){return this.getConditionObjectRowName(e)},QuestionMatrixDropdownModelBase.prototype.getConditionObjectsRowIndeces=function(){return[]},QuestionMatrixDropdownModelBase.prototype.getProgressInfo=function(){if(this.generatedVisibleRows)return l.SurveyElement.getProgressInfoByElements(this.getCellQuestions(),this.isRequired);var e=a.Base.createProgressInfo();return this.updateProgressInfoByValues(e),0===e.requiredQuestionCount&&this.isRequired&&(e.requiredQuestionCount=1,e.requiredAnsweredQuestionCount=this.isEmpty()?0:1),e},QuestionMatrixDropdownModelBase.prototype.updateProgressInfoByValues=function(e){},QuestionMatrixDropdownModelBase.prototype.updateProgressInfoByRow=function(e,t){for(var o=0;o<this.columns.length;o++){var n=this.columns[o];if(n.templateQuestion.hasInput){e.questionCount+=1,e.requiredQuestionCount+=n.isRequired;var r=!s.Helpers.isValueEmpty(t[n.name]);e.answeredQuestionCount+=r?1:0,e.requiredAnsweredQuestionCount+=r&&n.isRequired?1:0}}},QuestionMatrixDropdownModelBase.prototype.getCellQuestions=function(){var e=[];return this.runFuncForCellQuestions(function(t){e.push(t)}),e},QuestionMatrixDropdownModelBase.prototype.onBeforeValueChanged=function(e){},QuestionMatrixDropdownModelBase.prototype.onSetQuestionValue=function(){if(!this.isRowChanging&&(this.onBeforeValueChanged(this.value),this.generatedVisibleRows&&0!=this.generatedVisibleRows.length)){this.isRowChanging=!0;for(var e=this.createNewValue(),t=0;t<this.generatedVisibleRows.length;t++){var o=this.generatedVisibleRows[t];this.generatedVisibleRows[t].value=this.getRowValueCore(o,e)}this.isRowChanging=!1}},QuestionMatrixDropdownModelBase.prototype.setQuestionValue=function(t){e.prototype.setQuestionValue.call(this,t,!1),this.onSetQuestionValue(),this.updateIsAnswered()},QuestionMatrixDropdownModelBase.prototype.supportGoNextPageAutomatic=function(){var e=this.generatedVisibleRows;if(e||(e=this.visibleRows),!e)return!0;for(var t=0;t<e.length;t++){var o=this.generatedVisibleRows[t].cells;if(o)for(var n=0;n<o.length;n++){var r=o[n].question;if(r&&(!r.supportGoNextPageAutomatic()||!r.value))return!1}}return!0},QuestionMatrixDropdownModelBase.prototype.getContainsErrors=function(){return e.prototype.getContainsErrors.call(this)||this.checkForAnswersOrErrors(function(e){return e.containsErrors},!1)},QuestionMatrixDropdownModelBase.prototype.getIsAnswered=function(){return e.prototype.getIsAnswered.call(this)&&this.checkForAnswersOrErrors(function(e){return e.isAnswered},!0)},QuestionMatrixDropdownModelBase.prototype.checkForAnswersOrErrors=function(e,t){void 0===t&&(t=!1);var o=this.generatedVisibleRows;if(!o)return!1;for(var n=0;n<o.length;n++){var r=o[n].cells;if(r){for(var i=0;i<r.length;i++)if(r[i]){var s=r[i].question;if(s&&s.isVisible){if(e(s)){if(!t)return!0}else if(t)return!1}}}}return!!t},QuestionMatrixDropdownModelBase.prototype.hasErrors=function(t,o){void 0===t&&(t=!0),void 0===o&&(o=null);var n=this.hasErrorInRows(t,o),r=this.isValueDuplicated();return e.prototype.hasErrors.call(this,t,o)||n||r},QuestionMatrixDropdownModelBase.prototype.getIsRunningValidators=function(){if(e.prototype.getIsRunningValidators.call(this))return!0;if(!this.generatedVisibleRows)return!1;for(var t=0;t<this.generatedVisibleRows.length;t++){var o=this.generatedVisibleRows[t].cells;if(o){for(var n=0;n<o.length;n++)if(o[n]){var r=o[n].question;if(r&&r.isRunningValidators)return!0}}}return!1},QuestionMatrixDropdownModelBase.prototype.getAllErrors=function(){var t=e.prototype.getAllErrors.call(this),o=this.generatedVisibleRows;if(null===o)return t;for(var n=0;n<o.length;n++)for(var r=o[n],i=0;i<r.cells.length;i++){var s=r.cells[i].question.getAllErrors();s&&s.length>0&&(t=t.concat(s))}return t},QuestionMatrixDropdownModelBase.prototype.hasErrorInRows=function(e,t){var o=this,n=this.generatedVisibleRows;this.generatedVisibleRows||(n=this.visibleRows);var r=!1;if(t||(t={}),!n)return t;t.validationValues=this.getDataFilteredValues(),t.isSingleDetailPanel="underRowSingle"===this.detailPanelMode;for(var i=0;i<n.length;i++)r=n[i].hasErrors(e,t,function(){o.raiseOnCompletedAsyncValidators()})||r;return r},QuestionMatrixDropdownModelBase.prototype.isValueDuplicated=function(){if(!this.generatedVisibleRows)return!1;for(var e=this.getUniqueColumns(),t=!1,o=0;o<e.length;o++)t=this.isValueInColumnDuplicated(e[o])||t;return t},QuestionMatrixDropdownModelBase.prototype.isValueInColumnDuplicated=function(e){for(var t=[],o=!1,n=0;n<this.generatedVisibleRows.length;n++)o=this.isValueDuplicatedInRow(this.generatedVisibleRows[n],e,t)||o;return o},QuestionMatrixDropdownModelBase.prototype.getUniqueColumns=function(){for(var e=[],t=0;t<this.columns.length;t++)this.columns[t].isUnique&&e.push(this.columns[t]);return e},QuestionMatrixDropdownModelBase.prototype.isValueDuplicatedInRow=function(e,t,o){var n=e.getQuestionByColumn(t);if(!n||n.isEmpty())return!1;for(var r=n.value,i=0;i<o.length;i++)if(s.Helpers.isTwoValueEquals(r,o[i],!0,this.isUniqueCaseSensitive))return this.addDuplicationError(n),!0;return o.push(r),!1},QuestionMatrixDropdownModelBase.prototype.addDuplicationError=function(e){e.errors.find(function(e){return"keyduplicationerror"===e.getErrorType()})||e.addError(new g.KeyDuplicationError(this.keyDuplicationError,this))},QuestionMatrixDropdownModelBase.prototype.getFirstQuestionToFocus=function(e){return this.getFirstCellQuestion(e)},QuestionMatrixDropdownModelBase.prototype.getFirstInputElementId=function(){var t=this.getFirstCellQuestion(!1);return t?t.inputId:e.prototype.getFirstInputElementId.call(this)},QuestionMatrixDropdownModelBase.prototype.getFirstErrorInputElementId=function(){var t=this.getFirstCellQuestion(!0);return t?t.inputId:e.prototype.getFirstErrorInputElementId.call(this)},QuestionMatrixDropdownModelBase.prototype.getFirstCellQuestion=function(e){if(!this.generatedVisibleRows)return null;for(var t=0;t<this.generatedVisibleRows.length;t++)for(var o=this.generatedVisibleRows[t].cells,n=0;n<o.length;n++)if(!e||o[n].question.currentErrorCount>0)return o[n].question;return null},QuestionMatrixDropdownModelBase.prototype.onReadOnlyChanged=function(){if(e.prototype.onReadOnlyChanged.call(this),this.generateRows)for(var t=0;t<this.visibleRows.length;t++)this.visibleRows[t].onQuestionReadOnlyChanged(this.isReadOnly)},QuestionMatrixDropdownModelBase.prototype.createQuestion=function(e,t){return this.createQuestionCore(e,t)},QuestionMatrixDropdownModelBase.prototype.createQuestionCore=function(e,t){var o=t.createCellQuestion(e);return o.setSurveyImpl(e),o.setParentQuestion(this),o.inMatrixMode=!0,o},QuestionMatrixDropdownModelBase.prototype.deleteRowValue=function(e,t){return e?(delete e[t.rowName],this.isObject(e)&&0==Object.keys(e).length?null:e):e},QuestionMatrixDropdownModelBase.prototype.onAnyValueChanged=function(e,t){if(!this.isUpdateLocked&&!this.isDoingonAnyValueChanged&&this.generatedVisibleRows){this.isDoingonAnyValueChanged=!0;for(var o=this.visibleRows,n=0;n<o.length;n++)o[n].onAnyValueChanged(e,t);var r=this.visibleTotalRow;r&&r.onAnyValueChanged(e,t),this.isDoingonAnyValueChanged=!1}},QuestionMatrixDropdownModelBase.prototype.isObject=function(e){return null!==e&&"object"==typeof e},QuestionMatrixDropdownModelBase.prototype.getOnCellValueChangedOptions=function(e,t,o){return{row:e,columnName:t,rowValue:o,value:o?o[t]:null,getCellQuestion:function(t){return e.getQuestionByName(t)},cellQuestion:e.getQuestionByName(t),column:this.getColumnByName(t)}},QuestionMatrixDropdownModelBase.prototype.onCellValueChanged=function(e,t,o){if(this.survey){var n=this.getOnCellValueChangedOptions(e,t,o);this.onCellValueChangedCallback&&this.onCellValueChangedCallback(n),this.survey.matrixCellValueChanged(this,n)}},QuestionMatrixDropdownModelBase.prototype.validateCell=function(e,t,o){if(this.survey){var n=this.getOnCellValueChangedOptions(e,t,o);return this.survey.matrixCellValidate(this,n)}},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"isValidateOnValueChanging",{get:function(){return!!this.survey&&this.survey.isValidateOnValueChanging},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.onRowChanging=function(e,t,o){if(!this.survey&&!this.cellValueChangingCallback)return o?o[t]:null;var n=this.getOnCellValueChangedOptions(e,t,o),r=this.getRowValueCore(e,this.createNewValue(),!0);return n.oldValue=r?r[t]:null,this.cellValueChangingCallback&&(n.value=this.cellValueChangingCallback(e,t,n.value,n.oldValue)),this.survey&&this.survey.matrixCellValueChanging(this,n),n.value},QuestionMatrixDropdownModelBase.prototype.onRowChanged=function(e,t,o,n){var r=t?this.getRowObj(e):null;if(r){var i=null;o&&!n&&(i=o[t]),this.isRowChanging=!0,r[t]=i,this.isRowChanging=!1,this.onCellValueChanged(e,t,r)}else{var s=this.createNewValue(!0),a=this.getNewValueOnRowChanged(e,t,o,n,this.createNewValue());if(this.isTwoValueEquals(s,a.value))return;this.isRowChanging=!0,this.setNewValue(a.value),this.isRowChanging=!1,t&&this.onCellValueChanged(e,t,a.rowValue)}},QuestionMatrixDropdownModelBase.prototype.getNewValueOnRowChanged=function(e,t,o,n,r){var i=this.getRowValueCore(e,r,!0);n&&delete i[t];for(var s=0;s<e.cells.length;s++){var a=e.cells[s].question.getValueName();delete i[a]}if(o)for(var a in o=JSON.parse(JSON.stringify(o)))this.isValueEmpty(o[a])||(i[a]=o[a]);return this.isObject(i)&&0===Object.keys(i).length&&(r=this.deleteRowValue(r,e)),{value:r,rowValue:i}},QuestionMatrixDropdownModelBase.prototype.getRowIndex=function(e){return this.generatedVisibleRows?this.visibleRows.indexOf(e):-1},QuestionMatrixDropdownModelBase.prototype.getElementsInDesign=function(t){var o;return void 0===t&&(t=!1),o="none"==this.detailPanelMode?e.prototype.getElementsInDesign.call(this,t):t?[this.detailPanel]:this.detailElements,this.columns.concat(o)},QuestionMatrixDropdownModelBase.prototype.hasDetailPanel=function(e){return"none"!=this.detailPanelMode&&(!!this.isDesignMode||(this.onHasDetailPanelCallback?this.onHasDetailPanelCallback(e):this.detailElements.length>0))},QuestionMatrixDropdownModelBase.prototype.getIsDetailPanelShowing=function(e){if("none"==this.detailPanelMode)return!1;if(this.isDesignMode){var t=0==this.visibleRows.indexOf(e);return t&&!e.detailPanel&&e.showDetailPanel(),t}return this.getPropertyValue("isRowShowing"+e.id,!1)},QuestionMatrixDropdownModelBase.prototype.setIsDetailPanelShowing=function(e,t){if(t!=this.getIsDetailPanelShowing(e)&&(this.setPropertyValue("isRowShowing"+e.id,t),this.updateDetailPanelButtonCss(e),this.renderedTable&&this.renderedTable.onDetailPanelChangeVisibility(e,t),t&&"underRowSingle"===this.detailPanelMode))for(var o=this.visibleRows,n=0;n<o.length;n++)o[n].id!==e.id&&o[n].isDetailPanelShowing&&o[n].hideDetailPanel()},QuestionMatrixDropdownModelBase.prototype.getDetailPanelButtonCss=function(e){var t=new f.CssClassBuilder().append(this.getPropertyValue("detailButtonCss"+e.id));return t.append(this.cssClasses.detailButton,""===t.toString()).toString()},QuestionMatrixDropdownModelBase.prototype.getDetailPanelIconCss=function(e){var t=new f.CssClassBuilder().append(this.getPropertyValue("detailIconCss"+e.id));return t.append(this.cssClasses.detailIcon,""===t.toString()).toString()},QuestionMatrixDropdownModelBase.prototype.getDetailPanelIconId=function(e){return this.getIsDetailPanelShowing(e)?this.cssClasses.detailIconExpandedId:this.cssClasses.detailIconId},QuestionMatrixDropdownModelBase.prototype.updateDetailPanelButtonCss=function(e){var t=this.cssClasses,o=this.getIsDetailPanelShowing(e),n=new f.CssClassBuilder().append(t.detailIcon).append(t.detailIconExpanded,o);this.setPropertyValue("detailIconCss"+e.id,n.toString());var r=new f.CssClassBuilder().append(t.detailButton).append(t.detailButtonExpanded,o);this.setPropertyValue("detailButtonCss"+e.id,r.toString())},QuestionMatrixDropdownModelBase.prototype.createRowDetailPanel=function(e){var t=this;if(this.isDesignMode)return this.detailPanel;var o=this.createNewDetailPanel();o.readOnly=this.isReadOnly,o.setSurveyImpl(e);var n=this.detailPanel.toJSON();return new r.JsonObject().toObject(n,o),o.renderWidth="100%",o.updateCustomWidgets(),this.onCreateDetailPanelCallback&&this.onCreateDetailPanelCallback(e,o),o.questions.forEach(function(e){return e.setParentQuestion(t)}),o},QuestionMatrixDropdownModelBase.prototype.getSharedQuestionByName=function(e,t){if(!this.survey||!this.valueName)return null;var o=this.getRowIndex(t);return o<0?null:this.survey.getQuestionByValueNameFromArray(this.valueName,e,o)},QuestionMatrixDropdownModelBase.prototype.onTotalValueChanged=function(){this.data&&this.visibleTotalRow&&!this.isUpdateLocked&&!this.isSett&&this.data.setValue(this.getValueName()+h.settings.matrix.totalsSuffix,this.totalValue,!1)},QuestionMatrixDropdownModelBase.prototype.getDataFilteredValues=function(){return this.data?this.data.getFilteredValues():{}},QuestionMatrixDropdownModelBase.prototype.getParentTextProcessor=function(){if(!this.parentQuestion||!this.parent)return null;var e=this.parent.data;return e&&e.getTextProcessor?e.getTextProcessor():null},QuestionMatrixDropdownModelBase.prototype.getQuestionFromArray=function(e,t){return t>=this.visibleRows.length?null:this.visibleRows[t].getQuestionByName(e)},QuestionMatrixDropdownModelBase.prototype.isMatrixValueEmpty=function(e){if(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if(this.isObject(e[t])&&Object.keys(e[t]).length>0)return!1;return!0}return 0==Object.keys(e).length}},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"SurveyModel",{get:function(){return this.survey},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.getCellTemplateData=function(e){return this.SurveyModel.getMatrixCellTemplateData(e)},QuestionMatrixDropdownModelBase.prototype.getCellWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,e.row instanceof M?"row-footer":"cell")},QuestionMatrixDropdownModelBase.prototype.getCellWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,e.row instanceof M?"row-footer":"cell")},QuestionMatrixDropdownModelBase.prototype.getColumnHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,"column-header")},QuestionMatrixDropdownModelBase.prototype.getColumnHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,"column-header")},QuestionMatrixDropdownModelBase.prototype.getRowHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,"row-header")},QuestionMatrixDropdownModelBase.prototype.getRowHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,"row-header")},Object.defineProperty(QuestionMatrixDropdownModelBase.prototype,"showHorizontalScroll",{get:function(){return!this.isDefaultV2Theme&&this.horizontalScroll},enumerable:!1,configurable:!0}),QuestionMatrixDropdownModelBase.prototype.getRootCss=function(){return new f.CssClassBuilder().append(e.prototype.getRootCss.call(this)).append(this.cssClasses.rootScroll,this.horizontalScroll).toString()},QuestionMatrixDropdownModelBase}(i.QuestionMatrixBaseModel);r.Serializer.addClass("matrixdropdownbase",[{name:"columns:matrixdropdowncolumns",className:"matrixdropdowncolumn"},{name:"columnLayout",alternativeName:"columnsLocation",default:"horizontal",choices:["horizontal","vertical"]},{name:"detailElements",visible:!1,isLightSerializable:!1},{name:"detailPanelMode",choices:["none","underRow","underRowSingle"],default:"none"},{name:"cellErrorLocation",default:"default",choices:["default","top","bottom"]},{name:"detailErrorLocation",default:"default",choices:["default","top","bottom"],visibleIf:function(e){return!!e&&"none"!=e.detailPanelMode}},"horizontalScroll:boolean",{name:"choices:itemvalue[]",uniqueProperty:"value"},{name:"placeholder",alternativeName:"optionsCaption",serializationProperty:"locPlaceholder"},{name:"keyDuplicationError",serializationProperty:"locKeyDuplicationError"},{name:"cellType",default:"dropdown",choices:function(){return y.MatrixDropdownColumn.getColumnTypes()}},{name:"columnColCount",default:0,choices:[0,1,2,3,4]},"columnMinWidth",{name:"allowAdaptiveActions:boolean",default:!1,visible:!1}],function(){return new x("")},"matrixbase")},"./src/question_matrixdropdowncolumn.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"matrixDropdownColumnTypes",function(){return u}),o.d(t,"MatrixDropdownColumn",function(){return c});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./base */"./src/base.ts"),s=o(/*! ./question_expression */"./src/question_expression.ts"),a=o(/*! ./settings */"./src/settings.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});function onUpdateSelectBaseCellQuestion(e,t,o,n){e.storeOthersAsComment=!!o&&o.storeOthersAsComment,(!e.choices||0==e.choices.length)&&e.choicesByUrl.isEmpty&&(e.choices=o.choices),e.choicesByUrl.isEmpty||e.choicesByUrl.run(n.getTextProcessor())}var u={dropdown:{onCellQuestionUpdate:function(e,t,o,n){onUpdateSelectBaseCellQuestion(e,t,o,n),e.locPlaceholder&&e.locPlaceholder.isEmpty&&!o.locPlaceholder.isEmpty&&(e.optionsCaption=o.optionsCaption)}},checkbox:{onCellQuestionUpdate:function(e,t,o,n){onUpdateSelectBaseCellQuestion(e,t,o,n),e.colCount=t.colCount>-1?t.colCount:o.columnColCount}},radiogroup:{onCellQuestionUpdate:function(e,t,o,n){onUpdateSelectBaseCellQuestion(e,t,o,n),e.colCount=t.colCount>-1?t.colCount:o.columnColCount}},tagbox:{},text:{},comment:{},boolean:{onCellQuestionUpdate:function(e,t,o,n){e.renderAs=t.renderAs}},expression:{},rating:{}},c=function(e){function MatrixDropdownColumn(t,o){void 0===o&&(o=null);var n=e.call(this)||this;return n.colOwnerValue=null,n.indexValue=-1,n._hasVisibleCell=!0,n.previousChoicesId=void 0,n.createLocalizableString("totalFormat",n),n.createLocalizableString("cellHint",n),n.registerPropertyChangedHandlers(["showInMultipleColumns"],function(){n.doShowInMultipleColumnsChanged()}),n.registerPropertyChangedHandlers(["visible"],function(){n.doColumnVisibilityChanged()}),n.updateTemplateQuestion(),n.name=t,o?n.title=o:n.templateQuestion.locTitle.strChanged(),n}return l(MatrixDropdownColumn,e),MatrixDropdownColumn.getColumnTypes=function(){var e=[];for(var t in u)e.push(t);return e},MatrixDropdownColumn.prototype.getOriginalObj=function(){return this.templateQuestion},MatrixDropdownColumn.prototype.getClassNameProperty=function(){return"cellType"},MatrixDropdownColumn.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.colOwner?this.colOwner.survey:null},MatrixDropdownColumn.prototype.endLoadingFromJson=function(){var t=this;e.prototype.endLoadingFromJson.call(this),this.templateQuestion.autoOtherMode=this.isShowInMultipleColumns,this.templateQuestion.endLoadingFromJson(),this.templateQuestion.onGetSurvey=function(){return t.getSurvey()}},MatrixDropdownColumn.prototype.getDynamicPropertyName=function(){return"cellType"},MatrixDropdownColumn.prototype.getDynamicType=function(){return"default"===this.cellType?"question":this.calcCellQuestionType(null)},Object.defineProperty(MatrixDropdownColumn.prototype,"colOwner",{get:function(){return this.colOwnerValue},set:function(e){this.colOwnerValue=e,e&&(this.updateTemplateQuestion(),this.setParentQuestionToTemplate(this.templateQuestion))},enumerable:!1,configurable:!0}),MatrixDropdownColumn.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.locTitle.strChanged()},MatrixDropdownColumn.prototype.addUsedLocales=function(t){e.prototype.addUsedLocales.call(this,t),this.templateQuestion.addUsedLocales(t)},Object.defineProperty(MatrixDropdownColumn.prototype,"index",{get:function(){return this.indexValue},enumerable:!1,configurable:!0}),MatrixDropdownColumn.prototype.setIndex=function(e){this.indexValue=e},MatrixDropdownColumn.prototype.getType=function(){return"matrixdropdowncolumn"},Object.defineProperty(MatrixDropdownColumn.prototype,"cellType",{get:function(){return this.getPropertyValue("cellType")},set:function(e){e=e.toLocaleLowerCase(),this.updateTemplateQuestion(e),this.setPropertyValue("cellType",e),this.colOwner&&this.colOwner.onColumnCellTypeChanged(this)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"templateQuestion",{get:function(){return this.templateQuestionValue},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"value",{get:function(){return this.templateQuestion.name},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"isVisible",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"isColumnVisible",{get:function(){return!!this.isDesignMode||this.visible&&this.hasVisibleCell},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"visible",{get:function(){return this.getPropertyValue("visible")},set:function(e){this.setPropertyValue("visible",e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"hasVisibleCell",{get:function(){return this._hasVisibleCell},set:function(e){this._hasVisibleCell=e},enumerable:!1,configurable:!0}),MatrixDropdownColumn.prototype.getVisibleMultipleChoices=function(){var e=this.templateQuestion.visibleChoices;if(!Array.isArray(e))return[];if(!Array.isArray(this._visiblechoices))return e;for(var t=[],o=0;o<e.length;o++){var n=e[o];this._visiblechoices.indexOf(n.value)>-1&&t.push(n)}return t},Object.defineProperty(MatrixDropdownColumn.prototype,"getVisibleChoicesInCell",{get:function(){if(Array.isArray(this._visiblechoices))return this._visiblechoices;var e=this.templateQuestion.visibleChoices;return Array.isArray(e)?e:[]},enumerable:!1,configurable:!0}),MatrixDropdownColumn.prototype.setVisibleChoicesInCell=function(e){this._visiblechoices=e},Object.defineProperty(MatrixDropdownColumn.prototype,"isFilteredMultipleColumns",{get:function(){if(!this.showInMultipleColumns)return!1;var e=this.templateQuestion.choices;if(!Array.isArray(e))return!1;for(var t=0;t<e.length;t++)if(e[t].visibleIf)return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"name",{get:function(){return this.templateQuestion.name},set:function(e){this.templateQuestion.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"title",{get:function(){return this.templateQuestion.title},set:function(e){this.templateQuestion.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"locTitle",{get:function(){return this.templateQuestion.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"fullTitle",{get:function(){return this.locTitle.textOrHtml},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"isRequired",{get:function(){return this.templateQuestion.isRequired},set:function(e){this.templateQuestion.isRequired=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"isRenderedRequired",{get:function(){return this.getPropertyValue("isRenderedRequired",this.isRequired)},set:function(e){this.setPropertyValue("isRenderedRequired",e)},enumerable:!1,configurable:!0}),MatrixDropdownColumn.prototype.updateIsRenderedRequired=function(e){this.isRenderedRequired=e||this.isRequired},Object.defineProperty(MatrixDropdownColumn.prototype,"requiredText",{get:function(){return this.isRenderedRequired&&this.getSurvey()?this.getSurvey().requiredText:this.templateQuestion.requiredText},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"requiredErrorText",{get:function(){return this.templateQuestion.requiredErrorText},set:function(e){this.templateQuestion.requiredErrorText=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"locRequiredErrorText",{get:function(){return this.templateQuestion.locRequiredErrorText},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"readOnly",{get:function(){return this.templateQuestion.readOnly},set:function(e){this.templateQuestion.readOnly=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"hasOther",{get:function(){return this.templateQuestion.hasOther},set:function(e){this.templateQuestion.hasOther=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"visibleIf",{get:function(){return this.templateQuestion.visibleIf},set:function(e){this.templateQuestion.visibleIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"enableIf",{get:function(){return this.templateQuestion.enableIf},set:function(e){this.templateQuestion.enableIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"requiredIf",{get:function(){return this.templateQuestion.requiredIf},set:function(e){this.templateQuestion.requiredIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"resetValueIf",{get:function(){return this.templateQuestion.resetValueIf},set:function(e){this.templateQuestion.resetValueIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"defaultValueExpression",{get:function(){return this.templateQuestion.defaultValueExpression},set:function(e){this.templateQuestion.defaultValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"setValueIf",{get:function(){return this.templateQuestion.setValueIf},set:function(e){this.templateQuestion.setValueIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"setValueExpession",{get:function(){return this.templateQuestion.setValueExpession},set:function(e){this.templateQuestion.setValueExpession=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"isUnique",{get:function(){return this.getPropertyValue("isUnique")},set:function(e){this.setPropertyValue("isUnique",e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"showInMultipleColumns",{get:function(){return this.getPropertyValue("showInMultipleColumns")},set:function(e){this.setPropertyValue("showInMultipleColumns",e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"isSupportMultipleColumns",{get:function(){return["checkbox","radiogroup"].indexOf(this.cellType)>-1},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"isShowInMultipleColumns",{get:function(){return this.showInMultipleColumns&&this.isSupportMultipleColumns},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"validators",{get:function(){return this.templateQuestion.validators},set:function(e){this.templateQuestion.validators=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"totalType",{get:function(){return this.getPropertyValue("totalType")},set:function(e){this.setPropertyValue("totalType",e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"totalExpression",{get:function(){return this.getPropertyValue("totalExpression")},set:function(e){this.setPropertyValue("totalExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"hasTotal",{get:function(){return"none"!=this.totalType||!!this.totalExpression},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"totalFormat",{get:function(){return this.getLocalizableStringText("totalFormat","")},set:function(e){this.setLocalizableStringText("totalFormat",e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"locTotalFormat",{get:function(){return this.getLocalizableString("totalFormat")},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"cellHint",{get:function(){return this.getLocalizableStringText("cellHint","")},set:function(e){this.setLocalizableStringText("cellHint",e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"locCellHint",{get:function(){return this.getLocalizableString("cellHint")},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"renderAs",{get:function(){return this.getPropertyValue("renderAs")},set:function(e){this.setPropertyValue("renderAs",e),this.templateQuestion&&(this.templateQuestion.renderAs=e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"totalMaximumFractionDigits",{get:function(){return this.getPropertyValue("totalMaximumFractionDigits")},set:function(e){e<-1||e>20||this.setPropertyValue("totalMaximumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"totalMinimumFractionDigits",{get:function(){return this.getPropertyValue("totalMinimumFractionDigits")},set:function(e){e<-1||e>20||this.setPropertyValue("totalMinimumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"totalDisplayStyle",{get:function(){return this.getPropertyValue("totalDisplayStyle")},set:function(e){this.setPropertyValue("totalDisplayStyle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"totalCurrency",{get:function(){return this.getPropertyValue("totalCurrency")},set:function(e){0>Object(s.getCurrecyCodes)().indexOf(e)||this.setPropertyValue("totalCurrency",e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth","")},set:function(e){this.setPropertyValue("minWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"width",{get:function(){return this.templateQuestion.width},set:function(e){this.templateQuestion.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDropdownColumn.prototype,"colCount",{get:function(){return this.getPropertyValue("colCount")},set:function(e){e<-1||e>4||this.setPropertyValue("colCount",e)},enumerable:!1,configurable:!0}),MatrixDropdownColumn.prototype.getLocale=function(){return this.colOwner?this.colOwner.getLocale():""},MatrixDropdownColumn.prototype.getMarkdownHtml=function(e,t){return this.colOwner?this.colOwner.getMarkdownHtml(e,t):void 0},MatrixDropdownColumn.prototype.getRenderer=function(e){return this.colOwner?this.colOwner.getRenderer(e):null},MatrixDropdownColumn.prototype.getRendererContext=function(e){return this.colOwner?this.colOwner.getRendererContext(e):e},MatrixDropdownColumn.prototype.getProcessedText=function(e){return this.colOwner?this.colOwner.getProcessedText(e):e},MatrixDropdownColumn.prototype.createCellQuestion=function(e){var t=this.calcCellQuestionType(e),o=this.createNewQuestion(t);return this.callOnCellQuestionUpdate(o,e),o},MatrixDropdownColumn.prototype.startLoadingFromJson=function(t){e.prototype.startLoadingFromJson.call(this,t),t&&!t.cellType&&t.choices&&(t.cellType=this.colOwner.getCellType())},MatrixDropdownColumn.prototype.updateCellQuestion=function(e,t,o){void 0===o&&(o=null),this.setQuestionProperties(e,o)},MatrixDropdownColumn.prototype.callOnCellQuestionUpdate=function(e,t){var o=u[e.getType()];o&&o.onCellQuestionUpdate&&o.onCellQuestionUpdate(e,this,this.colOwner,t)},MatrixDropdownColumn.prototype.defaultCellTypeChanged=function(){this.updateTemplateQuestion()},MatrixDropdownColumn.prototype.calcCellQuestionType=function(e){var t=this.getDefaultCellQuestionType();return e&&this.colOwner&&(t=this.colOwner.getCustomCellType(this,e,t)),t},MatrixDropdownColumn.prototype.getDefaultCellQuestionType=function(e){return(e||(e=this.cellType),"default"!==e)?e:this.colOwner?this.colOwner.getCellType():a.settings.matrix.defaultCellType},MatrixDropdownColumn.prototype.updateTemplateQuestion=function(e){var t=this,o=this.getDefaultCellQuestionType(e),n=this.templateQuestion?this.templateQuestion.getType():"";o!==n&&(this.templateQuestion&&this.removeProperties(n),this.templateQuestionValue=this.createNewQuestion(o),this.templateQuestion.locOwner=this,this.addProperties(o),this.templateQuestion.onPropertyChanged.add(function(e,o){t.propertyValueChanged(o.name,o.oldValue,o.newValue)}),this.templateQuestion.onItemValuePropertyChanged.add(function(e,o){t.doItemValuePropertyChanged(o.propertyName,o.obj,o.name,o.newValue,o.oldValue)}),this.templateQuestion.isContentElement=!0,this.isLoadingFromJson||(this.templateQuestion.onGetSurvey=function(){return t.getSurvey()}),this.templateQuestion.locTitle.strChanged())},MatrixDropdownColumn.prototype.createNewQuestion=function(e){var t=r.Serializer.createClass(e);return t||(t=r.Serializer.createClass("text")),t.loadingOwner=this,t.isEditableTemplateElement=!0,t.autoOtherMode=this.isShowInMultipleColumns,this.setQuestionProperties(t),this.setParentQuestionToTemplate(t),t},MatrixDropdownColumn.prototype.setParentQuestionToTemplate=function(e){this.colOwner&&this.colOwner.isQuestion&&e.setParentQuestion(this.colOwner)},MatrixDropdownColumn.prototype.setQuestionProperties=function(e,t){var o=this;if(void 0===t&&(t=null),this.templateQuestion){var n=new r.JsonObject().toJsonObject(this.templateQuestion,!0);t&&t(n),n.type=e.getType(),"default"===this.cellType&&this.colOwner&&this.colOwner.hasChoices()&&delete n.choices,delete n.itemComponent,this.jsonObj&&Object.keys(this.jsonObj).forEach(function(e){n[e]=o.jsonObj[e]}),new r.JsonObject().toObject(n,e),e.isContentElement=this.templateQuestion.isContentElement,this.previousChoicesId=void 0,e.loadedChoicesFromServerCallback=function(){if(o.isShowInMultipleColumns&&(!o.previousChoicesId||o.previousChoicesId===e.id)){o.previousChoicesId=e.id;var t=e.visibleChoices;o.templateQuestion.choices=t,o.propertyValueChanged("choices",t,t)}}}},MatrixDropdownColumn.prototype.propertyValueChanged=function(t,o,n){e.prototype.propertyValueChanged.call(this,t,o,n),"isRequired"===t&&this.updateIsRenderedRequired(n),this.colOwner&&!this.isLoadingFromJson&&(this.isShowInMultipleColumns&&["visibleChoices","choices"].indexOf(t)>-1&&this.colOwner.onShowInMultipleColumnsChanged(this),r.Serializer.hasOriginalProperty(this,t)&&this.colOwner.onColumnPropertyChanged(this,t,n))},MatrixDropdownColumn.prototype.doItemValuePropertyChanged=function(e,t,o,n,i){r.Serializer.hasOriginalProperty(t,o)&&null!=this.colOwner&&!this.isLoadingFromJson&&this.colOwner.onColumnItemValuePropertyChanged(this,e,t,o,n,i)},MatrixDropdownColumn.prototype.doShowInMultipleColumnsChanged=function(){null!=this.colOwner&&this.colOwner.onShowInMultipleColumnsChanged(this),this.templateQuestion&&(this.templateQuestion.autoOtherMode=this.isShowInMultipleColumns)},MatrixDropdownColumn.prototype.doColumnVisibilityChanged=function(){null==this.colOwner||this.isDesignMode||this.colOwner.onColumnVisibilityChanged(this)},MatrixDropdownColumn.prototype.getProperties=function(e){return r.Serializer.getDynamicPropertiesByObj(this,e)},MatrixDropdownColumn.prototype.removeProperties=function(e){for(var t=this.getProperties(e),o=0;o<t.length;o++){var n=t[o];delete this[n.name],n.serializationProperty&&delete this[n.serializationProperty]}},MatrixDropdownColumn.prototype.addProperties=function(e){for(var t=this.templateQuestion,o=this.getProperties(e),n=0;n<o.length;n++){var r=o[n];this.addProperty(t,r.name,!1),r.serializationProperty&&this.addProperty(t,r.serializationProperty,!0),r.alternativeName&&this.addProperty(t,r.alternativeName,!1)}},MatrixDropdownColumn.prototype.addProperty=function(e,t,o){var n={configurable:!0,get:function(){return e[t]}};o||(n.set=function(o){e[t]=o}),Object.defineProperty(this,t,n)},MatrixDropdownColumn}(i.Base);r.Serializer.addClass("matrixdropdowncolumn",[{name:"!name",isUnique:!0},{name:"title",serializationProperty:"locTitle",dependsOn:"name",onPropertyEditorUpdate:function(e,t){e&&t&&(t.placeholder=e.name)}},{name:"cellHint",serializationProperty:"locCellHint",visible:!1},{name:"cellType",default:"default",choices:function(){var e=c.getColumnTypes();return e.splice(0,0,"default"),e}},{name:"colCount",default:-1,choices:[-1,0,1,2,3,4]},"isRequired:boolean","isUnique:boolean",{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},"readOnly:boolean",{name:"minWidth",onPropertyEditorUpdate:function(e,t){e&&t&&(t.value=e.minWidth)}},"width",{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},"visibleIf:condition","enableIf:condition","requiredIf:condition","resetValueIf:condition","setValueIf:condition",{name:"setValueExpression:expression",visibleIf:function(e){return!!e.setValueIf}},{name:"showInMultipleColumns:boolean",dependsOn:"cellType",visibleIf:function(e){return e.isSupportMultipleColumns}},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"},{name:"totalType",default:"none",choices:["none","sum","count","min","max","avg"]},"totalExpression:expression",{name:"totalFormat",serializationProperty:"locTotalFormat"},{name:"totalDisplayStyle",default:"none",choices:["none","decimal","currency","percent"]},{name:"totalCurrency",choices:function(){return Object(s.getCurrecyCodes)()},default:"USD"},{name:"totalMaximumFractionDigits:number",default:-1},{name:"totalMinimumFractionDigits:number",default:-1},{name:"renderAs",default:"default",visible:!1}],function(){return new c("")})},"./src/question_matrixdropdownrendered.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionMatrixDropdownRenderedCell",function(){return h}),o.d(t,"QuestionMatrixDropdownRenderedRow",function(){return g}),o.d(t,"QuestionMatrixDropdownRenderedErrorRow",function(){return f}),o.d(t,"QuestionMatrixDropdownRenderedTable",function(){return y});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./base */"./src/base.ts"),s=o(/*! ./itemvalue */"./src/itemvalue.ts"),a=o(/*! ./actions/action */"./src/actions/action.ts"),l=o(/*! ./actions/adaptive-container */"./src/actions/adaptive-container.ts"),u=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),c=o(/*! ./actions/container */"./src/actions/container.ts"),p=o(/*! ./settings */"./src/settings.ts"),d=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},__spreadArray=function(e,t){for(var o=0,n=t.length,r=e.length;o<n;o++,r++)e[r]=t[o];return e},h=function(){function QuestionMatrixDropdownRenderedCell(){this.minWidth="",this.width="",this.colSpans=1,this.isActionsCell=!1,this.isErrorsCell=!1,this.isDragHandlerCell=!1,this.classNameValue="",this.idValue=QuestionMatrixDropdownRenderedCell.counter++}return Object.defineProperty(QuestionMatrixDropdownRenderedCell.prototype,"hasQuestion",{get:function(){return!!this.question&&!this.isErrorsCell},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedCell.prototype,"hasTitle",{get:function(){return!!this.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedCell.prototype,"hasPanel",{get:function(){return!!this.panel},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedCell.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedCell.prototype,"item",{get:function(){return this.itemValue},set:function(e){this.itemValue=e,e&&(e.hideCaption=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedCell.prototype,"isChoice",{get:function(){return!!this.item},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedCell.prototype,"isItemChoice",{get:function(){return this.isChoice&&!this.isOtherChoice},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedCell.prototype,"choiceValue",{get:function(){return this.isChoice?this.item.value:null},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedCell.prototype,"isCheckbox",{get:function(){return this.isItemChoice&&this.question.isDescendantOf("checkbox")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedCell.prototype,"isRadio",{get:function(){return this.isItemChoice&&this.question.isDescendantOf("radiogroup")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedCell.prototype,"isFirstChoice",{get:function(){return 0===this.choiceIndex},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedCell.prototype,"className",{get:function(){var e=new u.CssClassBuilder().append(this.classNameValue);return this.hasQuestion&&e.append(this.question.cssClasses.hasError,this.question.errors.length>0).append(this.question.cssClasses.answered,this.question.isAnswered),e.toString()},set:function(e){this.classNameValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedCell.prototype,"headers",{get:function(){if(this.cell&&this.cell.column){if(" "===this.cell.column.cellHint)return"";if(this.cell.column.cellHint)return this.cell.column.locCellHint.renderedHtml;if(this.matrix.IsMultiplyColumn(this.cell.column))return this.item?this.item.locText.renderedHtml:""}return this.hasQuestion&&this.question.isVisible?this.question.locTitle.renderedHtml:this.hasTitle&&this.locTitle.renderedHtml||""},enumerable:!1,configurable:!0}),QuestionMatrixDropdownRenderedCell.prototype.getTitle=function(){return this.matrix&&this.matrix.showHeader?this.headers:""},QuestionMatrixDropdownRenderedCell.prototype.calculateFinalClassName=function(e){var t=this.cell.question.cssClasses,o=new u.CssClassBuilder().append(t.itemValue,!!t).append(t.asCell,!!t);return o.append(e.cell,o.isEmpty()&&!!e).append(e.choiceCell,this.isChoice).toString()},QuestionMatrixDropdownRenderedCell.prototype.focusIn=function(){this.question&&this.question.focusIn()},QuestionMatrixDropdownRenderedCell.counter=1,QuestionMatrixDropdownRenderedCell}(),g=function(e){function QuestionMatrixDropdownRenderedRow(t,o){void 0===o&&(o=!1);var n=e.call(this)||this;return n.cssClasses=t,n.isDetailRow=o,n.isErrorsRow=!1,n.cells=[],n.idValue=QuestionMatrixDropdownRenderedRow.counter++,n}return d(QuestionMatrixDropdownRenderedRow,e),Object.defineProperty(QuestionMatrixDropdownRenderedRow.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedRow.prototype,"attributes",{get:function(){return this.row?{"data-sv-drop-target-matrix-row":this.row.id}:{}},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedRow.prototype,"className",{get:function(){return new u.CssClassBuilder().append(this.cssClasses.row).append(this.cssClasses.detailRow,this.isDetailRow).append(this.cssClasses.ghostRow,this.isGhostRow).append(this.cssClasses.rowAdditional,this.isAdditionalClasses).toString()},enumerable:!1,configurable:!0}),QuestionMatrixDropdownRenderedRow.counter=1,__decorate([Object(r.property)({defaultValue:!1})],QuestionMatrixDropdownRenderedRow.prototype,"isGhostRow",void 0),__decorate([Object(r.property)({defaultValue:!1})],QuestionMatrixDropdownRenderedRow.prototype,"isAdditionalClasses",void 0),__decorate([Object(r.property)({defaultValue:!0})],QuestionMatrixDropdownRenderedRow.prototype,"visible",void 0),QuestionMatrixDropdownRenderedRow}(i.Base),f=function(e){function QuestionMatrixDropdownRenderedErrorRow(t){var o=e.call(this,t)||this;return o.isErrorsRow=!0,o}return d(QuestionMatrixDropdownRenderedErrorRow,e),Object.defineProperty(QuestionMatrixDropdownRenderedErrorRow.prototype,"attributes",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedErrorRow.prototype,"className",{get:function(){return new u.CssClassBuilder().append(this.cssClasses.row).append(this.cssClasses.errorRow).toString()},enumerable:!1,configurable:!0}),QuestionMatrixDropdownRenderedErrorRow.prototype.onAfterCreated=function(){var e=this,callback=function(){e.visible=e.cells.some(function(e){return e.question&&e.question.hasVisibleErrors})};this.cells.forEach(function(e){e.question&&e.question.registerFunctionOnPropertyValueChanged("hasVisibleErrors",callback)}),callback()},QuestionMatrixDropdownRenderedErrorRow}(g),y=function(e){function QuestionMatrixDropdownRenderedTable(t){var o=e.call(this)||this;return o.matrix=t,o.renderedRowsChangedCallback=function(){},o.hasActionCellInRowsValues={},o.build(),o}return d(QuestionMatrixDropdownRenderedTable,e),Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"showTable",{get:function(){return this.getPropertyValue("showTable",!0)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"showHeader",{get:function(){return this.getPropertyValue("showHeader")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"showAddRow",{get:function(){return this.getPropertyValue("showAddRow",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"showAddRowOnTop",{get:function(){return this.getPropertyValue("showAddRowOnTop",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"showAddRowOnBottom",{get:function(){return this.getPropertyValue("showAddRowOnBottom",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"showFooter",{get:function(){return this.matrix.hasFooter&&this.matrix.isColumnLayoutHorizontal},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"hasFooter",{get:function(){return!!this.footerRow},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"hasRemoveRows",{get:function(){return this.hasRemoveRowsValue},enumerable:!1,configurable:!0}),QuestionMatrixDropdownRenderedTable.prototype.isRequireReset=function(){return this.hasRemoveRows!=this.matrix.canRemoveRows||!this.matrix.isColumnLayoutHorizontal},Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"headerRow",{get:function(){return this.headerRowValue},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"footerRow",{get:function(){return this.footerRowValue},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"allowRowsDragAndDrop",{get:function(){return this.matrix.allowRowsDragAndDrop&&this.matrix.isColumnLayoutHorizontal},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"showCellErrorsTop",{get:function(){return"top"===this.matrix.getErrorLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"showCellErrorsBottom",{get:function(){return"bottom"===this.matrix.getErrorLocation()},enumerable:!1,configurable:!0}),QuestionMatrixDropdownRenderedTable.prototype.build=function(){this.hasRemoveRowsValue=this.matrix.canRemoveRows,this.matrix.visibleRows,this.cssClasses=this.matrix.cssClasses,this.buildRowsActions(),this.buildHeader(),this.buildRows(),this.buildFooter(),this.updateShowTableAndAddRow()},QuestionMatrixDropdownRenderedTable.prototype.updateShowTableAndAddRow=function(){var e=this.rows.length>0||this.matrix.isDesignMode||!this.matrix.getShowColumnsIfEmpty();this.setPropertyValue("showTable",e);var t=this.matrix.canAddRow&&e,o=t,n=t;o&&(o="default"===this.matrix.getAddRowLocation()?!this.matrix.isColumnLayoutHorizontal:"bottom"!==this.matrix.getAddRowLocation()),n&&"topBottom"!==this.matrix.getAddRowLocation()&&(n=!o),this.setPropertyValue("showAddRow",this.matrix.canAddRow),this.setPropertyValue("showAddRowOnTop",o),this.setPropertyValue("showAddRowOnBottom",n)},QuestionMatrixDropdownRenderedTable.prototype.onAddedRow=function(e,t){if(!(this.getRenderedDataRowCount()>=this.matrix.visibleRows.length)){var o=this.getRenderedRowIndexByIndex(t);this.rowsActions.splice(t,0,this.buildRowActions(e)),this.addHorizontalRow(this.rows,e,1==this.matrix.visibleRows.length&&!this.matrix.showHeader,o),this.updateShowTableAndAddRow()}},QuestionMatrixDropdownRenderedTable.prototype.getRenderedRowIndexByIndex=function(e){for(var t=0,o=0,n=0;n<this.rows.length;n++){if(o===e){(this.rows[n].isErrorsRow||this.rows[n].isDetailRow)&&t++;break}t++,!this.rows[n].isErrorsRow&&!this.rows[n].isDetailRow&&o++}return o<e?this.rows.length:t},QuestionMatrixDropdownRenderedTable.prototype.getRenderedDataRowCount=function(){for(var e=0,t=0;t<this.rows.length;t++)!this.rows[t].isErrorsRow&&!this.rows[t].isDetailRow&&e++;return e},QuestionMatrixDropdownRenderedTable.prototype.onRemovedRow=function(e){var t=this.getRenderedRowIndex(e);if(!(t<0)){this.rowsActions.splice(t,1);var o=1;t<this.rows.length-1&&this.showCellErrorsBottom&&this.rows[t+1].isErrorsRow&&o++,t<this.rows.length-1&&(this.rows[t+1].isDetailRow||this.showCellErrorsBottom&&t+1<this.rows.length-1&&this.rows[t+2].isDetailRow)&&o++,t>0&&this.showCellErrorsTop&&this.rows[t-1].isErrorsRow&&(t--,o++),this.rows.splice(t,o),this.updateShowTableAndAddRow()}},QuestionMatrixDropdownRenderedTable.prototype.onDetailPanelChangeVisibility=function(e,t){var o=this.getRenderedRowIndex(e);if(!(o<0)){var n=o;this.showCellErrorsBottom&&n++;var r=n<this.rows.length-1&&this.rows[n+1].isDetailRow?n+1:-1;if((!t||!(r>-1))&&(t||!(r<0))){if(t){var i=this.createDetailPanelRow(e,this.rows[o]);this.rows.splice(n+1,0,i)}else this.rows.splice(r,1)}}},QuestionMatrixDropdownRenderedTable.prototype.getRenderedRowIndex=function(e){for(var t=0;t<this.rows.length;t++)if(this.rows[t].row==e)return t;return -1},QuestionMatrixDropdownRenderedTable.prototype.buildRowsActions=function(){this.rowsActions=[];for(var e=this.matrix.visibleRows,t=0;t<e.length;t++)this.rowsActions.push(this.buildRowActions(e[t]))},QuestionMatrixDropdownRenderedTable.prototype.createRenderedRow=function(e,t){return void 0===t&&(t=!1),new g(e,t)},QuestionMatrixDropdownRenderedTable.prototype.createErrorRenderedRow=function(e){return new f(e)},QuestionMatrixDropdownRenderedTable.prototype.buildHeader=function(){var e=this.matrix.isColumnLayoutHorizontal&&this.matrix.showHeader||this.matrix.hasRowText&&!this.matrix.isColumnLayoutHorizontal;if(this.setPropertyValue("showHeader",e),e){if(this.headerRowValue=this.createRenderedRow(this.cssClasses),this.allowRowsDragAndDrop&&this.headerRow.cells.push(this.createHeaderCell(null,"action")),this.hasActionCellInRows("start")&&this.headerRow.cells.push(this.createHeaderCell(null,"action")),this.matrix.hasRowText&&this.matrix.showHeader&&this.headerRow.cells.push(this.createHeaderCell(null)),this.matrix.isColumnLayoutHorizontal)for(var t=0;t<this.matrix.visibleColumns.length;t++){var o=this.matrix.visibleColumns[t];o.isColumnVisible&&(this.matrix.IsMultiplyColumn(o)?this.createMutlipleColumnsHeader(o):this.headerRow.cells.push(this.createHeaderCell(o)))}else{for(var n=this.matrix.visibleRows,t=0;t<n.length;t++){var r=this.createTextCell(n[t].locText);this.setHeaderCellCssClasses(r),r.row=n[t],this.headerRow.cells.push(r)}if(this.matrix.hasFooter){var r=this.createTextCell(this.matrix.getFooterText());this.setHeaderCellCssClasses(r),this.headerRow.cells.push(r)}}this.hasActionCellInRows("end")&&this.headerRow.cells.push(this.createHeaderCell(null,"action"))}},QuestionMatrixDropdownRenderedTable.prototype.buildFooter=function(){if(this.showFooter){this.footerRowValue=this.createRenderedRow(this.cssClasses),this.allowRowsDragAndDrop&&this.footerRow.cells.push(this.createHeaderCell(null)),this.hasActionCellInRows("start")&&this.footerRow.cells.push(this.createHeaderCell(null)),this.matrix.hasRowText&&this.footerRow.cells.push(this.createTextCell(this.matrix.getFooterText()));for(var e=this.matrix.visibleTotalRow.cells,t=0;t<e.length;t++){var o=e[t];if(o.column.isColumnVisible){if(this.matrix.IsMultiplyColumn(o.column))this.createMutlipleColumnsFooter(this.footerRow,o);else{var n=this.createEditCell(o);o.column&&this.setHeaderCellWidth(o.column,n),this.footerRow.cells.push(n)}}}this.hasActionCellInRows("end")&&this.footerRow.cells.push(this.createHeaderCell(null))}},QuestionMatrixDropdownRenderedTable.prototype.buildRows=function(){var e=this.matrix.isColumnLayoutHorizontal?this.buildHorizontalRows():this.buildVerticalRows();this.rows=e},QuestionMatrixDropdownRenderedTable.prototype.hasActionCellInRows=function(e){return void 0===this.hasActionCellInRowsValues[e]&&(this.hasActionCellInRowsValues[e]=this.hasActionsCellInLocaltion(e)),this.hasActionCellInRowsValues[e]},QuestionMatrixDropdownRenderedTable.prototype.hasActionsCellInLocaltion=function(e){var t=this;return"end"==e&&!!this.hasRemoveRows||this.matrix.visibleRows.some(function(o,n){return!t.isValueEmpty(t.getRowActions(n,e))})},QuestionMatrixDropdownRenderedTable.prototype.canRemoveRow=function(e){return this.matrix.canRemoveRow(e)},QuestionMatrixDropdownRenderedTable.prototype.buildHorizontalRows=function(){for(var e=this.matrix.visibleRows,t=[],o=0;o<e.length;o++)this.addHorizontalRow(t,e[o],0==o&&!this.matrix.showHeader);return t},QuestionMatrixDropdownRenderedTable.prototype.addHorizontalRow=function(e,t,o,n){void 0===n&&(n=-1);var r=this.createHorizontalRow(t,o),i=this.createErrorRow(r);if(r.row=t,n<0&&(n=e.length),this.matrix.isMobile){for(var s=[],a=0;a<r.cells.length;a++)this.showCellErrorsTop&&!i.cells[a].isEmpty&&s.push(i.cells[a]),s.push(r.cells[a]),this.showCellErrorsBottom&&!i.cells[a].isEmpty&&s.push(i.cells[a]);r.cells=s,e.splice(n,0,r)}else e.splice.apply(e,__spreadArray([n,0],this.showCellErrorsTop?[i,r]:[r,i])),n++;t.isDetailPanelShowing&&e.splice(n+1,0,this.createDetailPanelRow(t,r))},QuestionMatrixDropdownRenderedTable.prototype.getRowDragCell=function(e){var t=new h;return t.isDragHandlerCell=!0,t.className=this.getActionsCellClassName(t),t.row=this.matrix.visibleRows[e],t},QuestionMatrixDropdownRenderedTable.prototype.getActionsCellClassName=function(e){return void 0===e&&(e=null),new u.CssClassBuilder().append(this.cssClasses.actionsCell).append(this.cssClasses.actionsCellDrag,null==e?void 0:e.isDragHandlerCell).append(this.cssClasses.verticalCell,!this.matrix.isColumnLayoutHorizontal).toString()},QuestionMatrixDropdownRenderedTable.prototype.getRowActionsCell=function(e,t){var o=this.getRowActions(e,t);if(!this.isValueEmpty(o)){var n=new h,r=this.matrix.allowAdaptiveActions?new l.AdaptiveActionContainer:new c.ActionContainer;this.matrix.survey&&this.matrix.survey.getCss().actionBar&&(r.cssClasses=this.matrix.survey.getCss().actionBar),r.setItems(o);var i=new s.ItemValue(r);return n.item=i,n.isActionsCell=!0,n.isDragHandlerCell=!1,n.className=this.getActionsCellClassName(n),n.row=this.matrix.visibleRows[e],n}return null},QuestionMatrixDropdownRenderedTable.prototype.getRowActions=function(e,t){var o=this.rowsActions[e];return Array.isArray(o)?o.filter(function(e){return e.location||(e.location="start"),e.location===t}):[]},QuestionMatrixDropdownRenderedTable.prototype.buildRowActions=function(e){var t=[];return this.setDefaultRowActions(e,t),this.matrix.survey&&(t=this.matrix.survey.getUpdatedMatrixRowActions(this.matrix,e,t)),t},Object.defineProperty(QuestionMatrixDropdownRenderedTable.prototype,"showRemoveButtonAsIcon",{get:function(){return p.settings.matrix.renderRemoveAsIcon&&this.matrix.survey&&"sd-root-modern"===this.matrix.survey.css.root},enumerable:!1,configurable:!0}),QuestionMatrixDropdownRenderedTable.prototype.setDefaultRowActions=function(e,t){var o=this.matrix;this.hasRemoveRows&&this.canRemoveRow(e)&&(this.showRemoveButtonAsIcon?t.push(new a.Action({id:"remove-row",iconName:"icon-delete",iconSize:"auto",component:"sv-action-bar-item",innerCss:new u.CssClassBuilder().append(this.matrix.cssClasses.button).append(this.matrix.cssClasses.buttonRemove).toString(),location:"end",showTitle:!1,title:o.removeRowText,enabled:!o.isInputReadOnly,data:{row:e,question:o},action:function(){o.removeRowUI(e)}})):t.push(new a.Action({id:"remove-row",location:"end",enabled:!this.matrix.isInputReadOnly,component:"sv-matrix-remove-button",data:{row:e,question:this.matrix}}))),e.hasPanel&&t.push(new a.Action({id:"show-detail",title:this.matrix.getLocalizationString("editText"),showTitle:!1,location:"start",component:"sv-matrix-detail-button",data:{row:e,question:this.matrix}}))},QuestionMatrixDropdownRenderedTable.prototype.createErrorRow=function(e){for(var t=this.createErrorRenderedRow(this.cssClasses),o=0;o<e.cells.length;o++){var n=e.cells[o];n.hasQuestion?this.matrix.IsMultiplyColumn(n.cell.column)?n.isFirstChoice?t.cells.push(this.createErrorCell(n.cell)):t.cells.push(this.createEmptyCell(!0)):t.cells.push(this.createErrorCell(n.cell)):t.cells.push(this.createEmptyCell(!0))}return t.onAfterCreated(),t},QuestionMatrixDropdownRenderedTable.prototype.createHorizontalRow=function(e,t){var o=this.createRenderedRow(this.cssClasses);if(this.allowRowsDragAndDrop){var n=this.matrix.visibleRows.indexOf(e);o.cells.push(this.getRowDragCell(n))}if(this.addRowActionsCell(e,o,"start"),this.matrix.hasRowText){var r=this.createTextCell(e.locText);r.row=e,o.cells.push(r),this.setHeaderCellWidth(null,r),r.className=new u.CssClassBuilder().append(r.className).append(this.cssClasses.rowTextCell).append(this.cssClasses.columnTitleCell,!this.matrix.isColumnLayoutHorizontal).append(this.cssClasses.detailRowText,e.hasPanel).toString()}for(var i=0;i<e.cells.length;i++){var s=e.cells[i];if(s.column.isColumnVisible){if(this.matrix.IsMultiplyColumn(s.column))this.createMutlipleEditCells(o,s);else{s.column.isShowInMultipleColumns&&s.question.visibleChoices.map(function(e){return e.hideCaption=!1});var r=this.createEditCell(s);o.cells.push(r),t&&this.setHeaderCellWidth(s.column,r)}}}return this.addRowActionsCell(e,o,"end"),o},QuestionMatrixDropdownRenderedTable.prototype.addRowActionsCell=function(e,t,o){var n=this.matrix.visibleRows.indexOf(e);if(this.hasActionCellInRows(o)){var r=this.getRowActionsCell(n,o);if(r)t.cells.push(r);else{var i=new h;i.isEmpty=!0,t.cells.push(i)}}},QuestionMatrixDropdownRenderedTable.prototype.createDetailPanelRow=function(e,t){var o=this.matrix.isDesignMode,n=this.createRenderedRow(this.cssClasses,!0);n.row=e;var r=new h;this.matrix.hasRowText&&(r.colSpans=2),r.isEmpty=!0,o||n.cells.push(r);var i=null;this.hasActionCellInRows("end")&&((i=new h).isEmpty=!0);var s=new h;return s.panel=e.detailPanel,s.colSpans=t.cells.length-(o?0:r.colSpans)-(i?i.colSpans:0),s.className=this.cssClasses.detailPanelCell,n.cells.push(s),i&&n.cells.push(i),"function"==typeof this.matrix.onCreateDetailPanelRenderedRowCallback&&this.matrix.onCreateDetailPanelRenderedRowCallback(n),n},QuestionMatrixDropdownRenderedTable.prototype.buildVerticalRows=function(){for(var e=this.matrix.columns,t=[],o=0;o<e.length;o++){var n=e[o];if(n.isColumnVisible){if(this.matrix.IsMultiplyColumn(n))this.createMutlipleVerticalRows(t,n,o);else{var r=this.createVerticalRow(n,o),i=this.createErrorRow(r);this.showCellErrorsTop?(t.push(i),t.push(r)):(t.push(r),t.push(i))}}}return this.hasActionCellInRows("end")&&t.push(this.createEndVerticalActionRow()),t},QuestionMatrixDropdownRenderedTable.prototype.createMutlipleVerticalRows=function(e,t,o){var n=this.getMultipleColumnChoices(t);if(n)for(var r=0;r<n.length;r++){var i=this.createVerticalRow(t,o,n[r],r),s=this.createErrorRow(i);this.showCellErrorsTop?(e.push(s),e.push(i)):(e.push(i),e.push(s))}},QuestionMatrixDropdownRenderedTable.prototype.createVerticalRow=function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=-1);var r=this.createRenderedRow(this.cssClasses);if(this.matrix.showHeader){var i=o?o.locText:e.locTitle,s=this.createTextCell(i);s.column=e,s.className=new u.CssClassBuilder().append(s.className).append(this.cssClasses.rowTextCell).append(this.cssClasses.columnTitleCell).toString(),o||this.setRequriedToHeaderCell(e,s),r.cells.push(s)}for(var a=this.matrix.visibleRows,l=0;l<a.length;l++){var c=o,p=n>=0?n:l,d=a[l].cells[t],h=o?d.question.visibleChoices:void 0;h&&p<h.length&&(c=h[p]);var g=this.createEditCell(d,c);g.item=c,g.choiceIndex=p,r.cells.push(g)}return this.matrix.hasTotal&&r.cells.push(this.createEditCell(this.matrix.visibleTotalRow.cells[t])),r},QuestionMatrixDropdownRenderedTable.prototype.createEndVerticalActionRow=function(){var e=this.createRenderedRow(this.cssClasses);this.matrix.showHeader&&e.cells.push(this.createEmptyCell());for(var t=this.matrix.visibleRows,o=0;o<t.length;o++)e.cells.push(this.getRowActionsCell(o,"end"));return this.matrix.hasTotal&&e.cells.push(this.createEmptyCell()),e},QuestionMatrixDropdownRenderedTable.prototype.createMutlipleEditCells=function(e,t,o){void 0===o&&(o=!1);var n=o?this.getMultipleColumnChoices(t.column):t.question.visibleChoices;if(n)for(var r=0;r<n.length;r++){var i=this.createEditCell(t,o?void 0:n[r]);o||(this.setItemCellCssClasses(i),i.choiceIndex=r),e.cells.push(i)}},QuestionMatrixDropdownRenderedTable.prototype.setItemCellCssClasses=function(e){e.className=new u.CssClassBuilder().append(this.cssClasses.itemCell).append(this.cssClasses.radioCell,e.isRadio).append(this.cssClasses.checkboxCell,e.isCheckbox).toString()},QuestionMatrixDropdownRenderedTable.prototype.createEditCell=function(e,t){void 0===t&&(t=void 0);var o=new h;return o.cell=e,o.row=e.row,o.question=e.question,o.matrix=this.matrix,o.item=t,o.isOtherChoice=!!t&&!!e.question&&e.question.otherItem===t,o.className=o.calculateFinalClassName(this.cssClasses),o},QuestionMatrixDropdownRenderedTable.prototype.createErrorCell=function(e,t){void 0===t&&(t=void 0);var o=new h;return o.question=e.question,o.row=e.row,o.matrix=this.matrix,o.isErrorsCell=!0,o.className=new u.CssClassBuilder().append(this.cssClasses.cell).append(this.cssClasses.errorsCell).append(this.cssClasses.errorsCellTop,this.showCellErrorsTop).append(this.cssClasses.errorsCellBottom,this.showCellErrorsBottom).toString(),o},QuestionMatrixDropdownRenderedTable.prototype.createMutlipleColumnsFooter=function(e,t){this.createMutlipleEditCells(e,t,!0)},QuestionMatrixDropdownRenderedTable.prototype.createMutlipleColumnsHeader=function(e){var t=this.getMultipleColumnChoices(e);if(t)for(var o=0;o<t.length;o++){var n=this.createTextCell(t[o].locText);this.setHeaderCell(e,n),this.setHeaderCellCssClasses(n),this.headerRow.cells.push(n)}},QuestionMatrixDropdownRenderedTable.prototype.getMultipleColumnChoices=function(e){var t=e.templateQuestion.choices;return t&&Array.isArray(t)&&0==t.length?this.matrix.choices:(t=e.getVisibleMultipleChoices())&&Array.isArray(t)?t:null},QuestionMatrixDropdownRenderedTable.prototype.setHeaderCellCssClasses=function(e,t){e.className=new u.CssClassBuilder().append(this.cssClasses.headerCell).append(this.cssClasses.columnTitleCell,this.matrix.isColumnLayoutHorizontal).append(this.cssClasses.emptyCell,!!e.isEmpty).append(this.cssClasses.cell+"--"+t,!!t).toString()},QuestionMatrixDropdownRenderedTable.prototype.createHeaderCell=function(e,t){void 0===t&&(t=null);var o=e?this.createTextCell(e.locTitle):this.createEmptyCell();return o.column=e,this.setHeaderCell(e,o),t||(t=e&&"default"!==e.cellType?e.cellType:this.matrix.cellType),this.setHeaderCellCssClasses(o,t),o},QuestionMatrixDropdownRenderedTable.prototype.setHeaderCell=function(e,t){this.setHeaderCellWidth(e,t),this.setRequriedToHeaderCell(e,t)},QuestionMatrixDropdownRenderedTable.prototype.setHeaderCellWidth=function(e,t){t.minWidth=null!=e?this.matrix.getColumnWidth(e):this.matrix.getRowTitleWidth(),t.width=null!=e?e.width:this.matrix.getRowTitleWidth()},QuestionMatrixDropdownRenderedTable.prototype.setRequriedToHeaderCell=function(e,t){e&&e.isRequired&&this.matrix.survey&&(t.requiredText=this.matrix.survey.requiredText)},QuestionMatrixDropdownRenderedTable.prototype.createRemoveRowCell=function(e){var t=new h;return t.row=e,t.isRemoveRow=this.canRemoveRow(e),this.cssClasses.cell&&(t.className=this.cssClasses.cell),t},QuestionMatrixDropdownRenderedTable.prototype.createTextCell=function(e){var t=new h;return t.locTitle=e,e&&e.strChanged(),this.cssClasses.cell&&(t.className=this.cssClasses.cell),t},QuestionMatrixDropdownRenderedTable.prototype.createEmptyCell=function(e){void 0===e&&(e=!1);var t=this.createTextCell(null);return t.isEmpty=!0,t.className=new u.CssClassBuilder().append(this.cssClasses.cell).append(this.cssClasses.emptyCell).append(this.cssClasses.errorsCell,e).toString(),t},__decorate([Object(r.propertyArray)({onPush:function(e,t,o){o.renderedRowsChangedCallback()}})],QuestionMatrixDropdownRenderedTable.prototype,"rows",void 0),QuestionMatrixDropdownRenderedTable}(i.Base)},"./src/question_matrixdynamic.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"MatrixDynamicRowModel",function(){return f}),o.d(t,"QuestionMatrixDynamicModel",function(){return y});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./questionfactory */"./src/questionfactory.ts"),s=o(/*! ./question_matrixdropdownbase */"./src/question_matrixdropdownbase.ts"),a=o(/*! ./error */"./src/error.ts"),l=o(/*! ./settings */"./src/settings.ts"),u=o(/*! ./utils/utils */"./src/utils/utils.ts"),c=o(/*! ./dragdrop/matrix-rows */"./src/dragdrop/matrix-rows.ts"),p=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),d=o(/*! ./question_matrixdropdownrendered */"./src/question_matrixdropdownrendered.ts"),h=o(/*! ./utils/dragOrClickHelper */"./src/utils/dragOrClickHelper.ts"),g=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),f=function(e){function MatrixDynamicRowModel(t,o,n){var r=e.call(this,o,n)||this;return r.index=t,r.buildCells(n),r}return g(MatrixDynamicRowModel,e),Object.defineProperty(MatrixDynamicRowModel.prototype,"rowName",{get:function(){return this.id},enumerable:!1,configurable:!0}),Object.defineProperty(MatrixDynamicRowModel.prototype,"shortcutText",{get:function(){var e=this.data.visibleRows.indexOf(this)+1,t=this.cells.length>1?this.cells[1].questionValue:void 0,o=this.cells.length>0?this.cells[0].questionValue:void 0;return t&&t.value||o&&o.value||""+e},enumerable:!1,configurable:!0}),MatrixDynamicRowModel}(s.MatrixDropdownRowModelBase),y=function(e){function QuestionMatrixDynamicModel(t){var o=e.call(this,t)||this;return o.rowCounter=0,o.initialRowCount=2,o.setRowCountValueFromData=!1,o.startDragMatrixRow=function(e,t){o.dragDropMatrixRows.startDrag(e,o.draggedRow,o,e.target)},o.createLocalizableString("confirmDeleteText",o,!1,"confirmDelete"),o.createLocalizableString("addRowText",o).onGetTextCallback=function(e){return e||o.defaultAddRowText},o.createLocalizableString("removeRowText",o,!1,"removeRow"),o.createLocalizableString("emptyRowsText",o,!1,!0),o.registerPropertyChangedHandlers(["hideColumnsIfEmpty","allowAddRows"],function(){o.updateShowTableAndAddRow()}),o.registerPropertyChangedHandlers(["allowRowsDragAndDrop"],function(){o.clearRowsAndResetRenderedTable()}),o.dragOrClickHelper=new h.DragOrClickHelper(o.startDragMatrixRow),o}return g(QuestionMatrixDynamicModel,e),QuestionMatrixDynamicModel.prototype.setSurveyImpl=function(t,o){e.prototype.setSurveyImpl.call(this,t,o),this.dragDropMatrixRows=new c.DragDropMatrixRows(this.survey,null,!0)},QuestionMatrixDynamicModel.prototype.isBanStartDrag=function(e){var t=e.target;return"true"===t.getAttribute("contenteditable")||"INPUT"===t.nodeName||!this.isDragHandleAreaValid(t)},QuestionMatrixDynamicModel.prototype.isDragHandleAreaValid=function(e){return"icon"!==this.survey.matrixDragHandleArea||e.classList.contains(this.cssClasses.dragElementDecorator)},QuestionMatrixDynamicModel.prototype.onPointerDown=function(e,t){!(!t||!this.allowRowsDragAndDrop||this.isBanStartDrag(e))&&(t.isDetailPanelShowing||(this.draggedRow=t,this.dragOrClickHelper.onPointerDown(e)))},QuestionMatrixDynamicModel.prototype.getType=function(){return"matrixdynamic"},Object.defineProperty(QuestionMatrixDynamicModel.prototype,"isRowsDynamic",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"confirmDelete",{get:function(){return this.getPropertyValue("confirmDelete")},set:function(e){this.setPropertyValue("confirmDelete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"isValueArray",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"keyName",{get:function(){return this.getPropertyValue("keyName","")},set:function(e){this.setPropertyValue("keyName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"defaultRowValue",{get:function(){return this.getPropertyValue("defaultRowValue")},set:function(e){this.setPropertyValue("defaultRowValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"defaultValueFromLastRow",{get:function(){return this.getPropertyValue("defaultValueFromLastRow")},set:function(e){this.setPropertyValue("defaultValueFromLastRow",e)},enumerable:!1,configurable:!0}),QuestionMatrixDynamicModel.prototype.isDefaultValueEmpty=function(){return e.prototype.isDefaultValueEmpty.call(this)&&this.isValueEmpty(this.defaultRowValue)},QuestionMatrixDynamicModel.prototype.valueFromData=function(t){if(this.minRowCount<1)return e.prototype.valueFromData.call(this,t);Array.isArray(t)||(t=[]);for(var o=t.length;o<this.minRowCount;o++)t.push({});return t},QuestionMatrixDynamicModel.prototype.isNewValueCorrect=function(e){return Array.isArray(e)},QuestionMatrixDynamicModel.prototype.setDefaultValue=function(){if(this.isValueEmpty(this.defaultRowValue)||!this.isValueEmpty(this.defaultValue)){e.prototype.setDefaultValue.call(this);return}if(this.isEmpty()&&0!=this.rowCount){for(var t=[],o=0;o<this.rowCount;o++)t.push(this.defaultRowValue);this.value=t}},QuestionMatrixDynamicModel.prototype.moveRowByIndex=function(e,t){var o=this.createNewValue();if(!(!Array.isArray(o)&&Math.max(e,t)>=o.length)){var n=o[e];o.splice(e,1),o.splice(t,0,n),this.value=o}},QuestionMatrixDynamicModel.prototype.clearOnDrop=function(){this.isEditingSurveyElement||this.resetRenderedTable()},QuestionMatrixDynamicModel.prototype.initDataUI=function(){this.generatedVisibleRows||this.visibleRows},Object.defineProperty(QuestionMatrixDynamicModel.prototype,"rowCount",{get:function(){return this.rowCountValue},set:function(e){if(!(e<0)&&!(e>l.settings.matrix.maxRowCount)){this.setRowCountValueFromData=!1;var t=this.rowCountValue;if(this.rowCountValue=e,this.value&&this.value.length>e){var o=this.value;o.splice(e),this.value=o}if(this.isUpdateLocked){this.initialRowCount=e;return}if(this.generatedVisibleRows||0==t){this.generatedVisibleRows||(this.generatedVisibleRows=[]),this.generatedVisibleRows.splice(e);for(var n=t;n<e;n++){var r=this.createMatrixRow(this.getValueForNewRow());this.generatedVisibleRows.push(r),this.onMatrixRowCreated(r)}this.runCondition(this.getDataFilteredValues(),this.getDataFilteredProperties())}this.onRowsChanged()}},enumerable:!1,configurable:!0}),QuestionMatrixDynamicModel.prototype.updateProgressInfoByValues=function(e){var t=this.value;Array.isArray(t)||(t=[]);for(var o=0;o<this.rowCount;o++){var n=o<t.length?t[o]:{};this.updateProgressInfoByRow(e,n)}},QuestionMatrixDynamicModel.prototype.getValueForNewRow=function(){var e=null;return this.onGetValueForNewRowCallBack&&(e=this.onGetValueForNewRowCallBack(this)),e},Object.defineProperty(QuestionMatrixDynamicModel.prototype,"allowRowsDragAndDrop",{get:function(){return!this.readOnly&&this.getPropertyValue("allowRowsDragAndDrop")},set:function(e){this.setPropertyValue("allowRowsDragAndDrop",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"iconDragElement",{get:function(){return this.cssClasses.iconDragElement},enumerable:!1,configurable:!0}),QuestionMatrixDynamicModel.prototype.createRenderedTable=function(){return new m(this)},Object.defineProperty(QuestionMatrixDynamicModel.prototype,"rowCountValue",{get:function(){return this.getPropertyValue("rowCount")},set:function(e){this.setPropertyValue("rowCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"minRowCount",{get:function(){return this.getPropertyValue("minRowCount")},set:function(e){e<0&&(e=0),this.setPropertyValue("minRowCount",e),e>this.maxRowCount&&(this.maxRowCount=e),this.rowCount<e&&(this.rowCount=e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"maxRowCount",{get:function(){return this.getPropertyValue("maxRowCount")},set:function(e){!(e<=0)&&(e>l.settings.matrix.maxRowCount&&(e=l.settings.matrix.maxRowCount),e!=this.maxRowCount&&(this.setPropertyValue("maxRowCount",e),e<this.minRowCount&&(this.minRowCount=e),this.rowCount>e&&(this.rowCount=e)))},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"allowAddRows",{get:function(){return this.getPropertyValue("allowAddRows")},set:function(e){this.setPropertyValue("allowAddRows",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"allowRemoveRows",{get:function(){return this.getPropertyValue("allowRemoveRows")},set:function(e){this.setPropertyValue("allowRemoveRows",e),this.isUpdateLocked||this.resetRenderedTable()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"canAddRow",{get:function(){return this.allowAddRows&&!this.isReadOnly&&this.rowCount<this.maxRowCount},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"canRemoveRows",{get:function(){var e=this.allowRemoveRows&&!this.isReadOnly&&this.rowCount>this.minRowCount;return this.canRemoveRowsCallback?this.canRemoveRowsCallback(e):e},enumerable:!1,configurable:!0}),QuestionMatrixDynamicModel.prototype.canRemoveRow=function(e){return!this.survey||this.survey.matrixAllowRemoveRow(this,e.index,e)},QuestionMatrixDynamicModel.prototype.addRowUI=function(){this.addRow(!0)},QuestionMatrixDynamicModel.prototype.getQuestionToFocusOnAddingRow=function(){for(var e=this.visibleRows[this.visibleRows.length-1],t=0;t<e.cells.length;t++){var o=e.cells[t].question;if(o&&o.isVisible&&!o.isReadOnly)return o}return null},QuestionMatrixDynamicModel.prototype.addRow=function(e){var t=this.rowCount,o=this.canAddRow,n={question:this,canAddRow:o,allow:o};if(this.survey&&this.survey.matrixBeforeRowAdded(n),(o!==n.allow?n.allow:o!==n.canAddRow?n.canAddRow:o)&&(this.onStartRowAddingRemoving(),this.addRowCore(),this.onEndRowAdding(),this.detailPanelShowOnAdding&&this.visibleRows.length>0&&this.visibleRows[this.visibleRows.length-1].showDetailPanel(),e&&t!==this.rowCount)){var r=this.getQuestionToFocusOnAddingRow();r&&r.focus()}},Object.defineProperty(QuestionMatrixDynamicModel.prototype,"detailPanelShowOnAdding",{get:function(){return this.getPropertyValue("detailPanelShowOnAdding")},set:function(e){this.setPropertyValue("detailPanelShowOnAdding",e)},enumerable:!1,configurable:!0}),QuestionMatrixDynamicModel.prototype.hasRowsAsItems=function(){return!1},QuestionMatrixDynamicModel.prototype.unbindValue=function(){this.clearGeneratedRows(),this.clearPropertyValue("value"),this.rowCountValue=0,e.prototype.unbindValue.call(this)},QuestionMatrixDynamicModel.prototype.isValueSurveyElement=function(t){return this.isEditingSurveyElement||e.prototype.isValueSurveyElement.call(this,t)},QuestionMatrixDynamicModel.prototype.addRowCore=function(){var e=this.rowCount;this.rowCount=this.rowCount+1;var t=this.getDefaultRowValue(!0),o=null;if(this.isValueEmpty(t)||(o=this.createNewValue()).length!=this.rowCount||(o[o.length-1]=t,this.value=o),this.data&&(this.runCellsCondition(this.getDataFilteredValues(),this.getDataFilteredProperties()),this.isValueEmpty(t))){var n=this.visibleRows[this.rowCount-1];this.isValueEmpty(n.value)||(o||(o=this.createNewValue()),this.isValueSurveyElement(o)||this.isTwoValueEquals(o[o.length-1],n.value)||(o[o.length-1]=n.value,this.value=o))}this.survey&&e+1==this.rowCount&&(this.survey.matrixRowAdded(this,this.visibleRows[this.visibleRows.length-1]),this.onRowsChanged())},QuestionMatrixDynamicModel.prototype.getDefaultRowValue=function(e){for(var t=null,o=0;o<this.columns.length;o++){var n=this.columns[o].templateQuestion;n&&!this.isValueEmpty(n.getDefaultValue())&&((t=t||{})[this.columns[o].name]=n.getDefaultValue())}if(!this.isValueEmpty(this.defaultRowValue))for(var r in this.defaultRowValue)(t=t||{})[r]=this.defaultRowValue[r];if(e&&this.defaultValueFromLastRow){var i=this.value;if(i&&Array.isArray(i)&&i.length>=this.rowCount-1){var s=i[this.rowCount-2];for(var r in s)(t=t||{})[r]=s[r]}}return t},QuestionMatrixDynamicModel.prototype.removeRowUI=function(e){if(e&&e.rowName){var t=this.visibleRows.indexOf(e);if(t<0)return;e=t}this.removeRow(e)},QuestionMatrixDynamicModel.prototype.isRequireConfirmOnRowDelete=function(e){if(!this.confirmDelete||e<0||e>=this.rowCount)return!1;var t=this.createNewValue();return!this.isValueEmpty(t)&&!!Array.isArray(t)&&!(e>=t.length)&&!this.isValueEmpty(t[e])},QuestionMatrixDynamicModel.prototype.removeRow=function(e,t){var o=this;if(this.canRemoveRows&&!(e<0)&&!(e>=this.rowCount)){var n=this.visibleRows&&e<this.visibleRows.length?this.visibleRows[e]:null;if(void 0===t&&(t=this.isRequireConfirmOnRowDelete(e)),t){Object(u.confirmActionAsync)(this.confirmDeleteText,function(){o.removeRowAsync(e,n)});return}this.removeRowAsync(e,n)}},QuestionMatrixDynamicModel.prototype.removeRowAsync=function(e,t){(!t||!this.survey||this.survey.matrixRowRemoving(this,e,t))&&(this.onStartRowAddingRemoving(),this.removeRowCore(e),this.onEndRowRemoving(t))},QuestionMatrixDynamicModel.prototype.removeRowCore=function(e){var t=this.generatedVisibleRows?this.generatedVisibleRows[e]:null;if(this.generatedVisibleRows&&e<this.generatedVisibleRows.length&&this.generatedVisibleRows.splice(e,1),this.rowCountValue--,this.value){var o=[];(o=Array.isArray(this.value)&&e<this.value.length?this.createValueCopy():this.createNewValue()).splice(e,1),o=this.deleteRowValue(o,null),this.isRowChanging=!0,this.value=o,this.isRowChanging=!1}this.onRowsChanged(),this.survey&&this.survey.matrixRowRemoved(this,e,t)},Object.defineProperty(QuestionMatrixDynamicModel.prototype,"confirmDeleteText",{get:function(){return this.getLocalizableStringText("confirmDeleteText")},set:function(e){this.setLocalizableStringText("confirmDeleteText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"locConfirmDeleteText",{get:function(){return this.getLocalizableString("confirmDeleteText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"addRowText",{get:function(){return this.getLocalizableStringText("addRowText",this.defaultAddRowText)},set:function(e){this.setLocalizableStringText("addRowText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"locAddRowText",{get:function(){return this.getLocalizableString("addRowText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"defaultAddRowText",{get:function(){return this.getLocalizationString(this.isColumnLayoutHorizontal?"addRow":"addColumn")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"addRowLocation",{get:function(){return this.getPropertyValue("addRowLocation")},set:function(e){this.setPropertyValue("addRowLocation",e)},enumerable:!1,configurable:!0}),QuestionMatrixDynamicModel.prototype.getAddRowLocation=function(){return this.addRowLocation},Object.defineProperty(QuestionMatrixDynamicModel.prototype,"hideColumnsIfEmpty",{get:function(){return this.getPropertyValue("hideColumnsIfEmpty")},set:function(e){this.setPropertyValue("hideColumnsIfEmpty",e)},enumerable:!1,configurable:!0}),QuestionMatrixDynamicModel.prototype.getShowColumnsIfEmpty=function(){return this.hideColumnsIfEmpty},Object.defineProperty(QuestionMatrixDynamicModel.prototype,"removeRowText",{get:function(){return this.getLocalizableStringText("removeRowText")},set:function(e){this.setLocalizableStringText("removeRowText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"locRemoveRowText",{get:function(){return this.getLocalizableString("removeRowText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"emptyRowsText",{get:function(){return this.getLocalizableStringText("emptyRowsText")},set:function(e){this.setLocalizableStringText("emptyRowsText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMatrixDynamicModel.prototype,"locEmptyRowsText",{get:function(){return this.getLocalizableString("emptyRowsText")},enumerable:!1,configurable:!0}),QuestionMatrixDynamicModel.prototype.getDisplayValueCore=function(e,t){if(!t||!Array.isArray(t))return t;for(var o=this.getUnbindValue(t),n=this.visibleRows,r=0;r<n.length&&r<o.length;r++){var i=o[r];i&&(o[r]=this.getRowDisplayValue(e,n[r],i))}return o},QuestionMatrixDynamicModel.prototype.getConditionObjectRowName=function(e){return"["+e.toString()+"]"},QuestionMatrixDynamicModel.prototype.getConditionObjectsRowIndeces=function(){for(var e=[],t=Math.max(this.rowCount,1),o=0;o<Math.min(l.settings.matrix.maxRowCountInCondition,t);o++)e.push(o);return e},QuestionMatrixDynamicModel.prototype.supportGoNextPageAutomatic=function(){return!1},Object.defineProperty(QuestionMatrixDynamicModel.prototype,"hasRowText",{get:function(){return!1},enumerable:!1,configurable:!0}),QuestionMatrixDynamicModel.prototype.onCheckForErrors=function(t,o){e.prototype.onCheckForErrors.call(this,t,o),!o&&this.hasErrorInMinRows()&&t.push(new a.MinRowCountError(this.minRowCount,this))},QuestionMatrixDynamicModel.prototype.hasErrorInMinRows=function(){if(this.minRowCount<=0||!this.isRequired||!this.generatedVisibleRows)return!1;for(var e=0,t=0;t<this.generatedVisibleRows.length;t++)!this.generatedVisibleRows[t].isEmpty&&e++;return e<this.minRowCount},QuestionMatrixDynamicModel.prototype.getUniqueColumns=function(){var t=e.prototype.getUniqueColumns.call(this);if(this.keyName){var o=this.getColumnByName(this.keyName);o&&0>t.indexOf(o)&&t.push(o)}return t},QuestionMatrixDynamicModel.prototype.generateRows=function(){var e=[];if(0===this.rowCount)return e;for(var t=this.createNewValue(),o=0;o<this.rowCount;o++)e.push(this.createMatrixRow(this.getRowValueByIndex(t,o)));return this.isValueEmpty(this.getDefaultRowValue(!1))||(this.value=t),e},QuestionMatrixDynamicModel.prototype.createMatrixRow=function(e){return new f(this.rowCounter++,this,e)},QuestionMatrixDynamicModel.prototype.getInsertedDeletedIndex=function(e,t){for(var o=Math.min(e.length,t.length),n=0;n<o;n++)if(t[n]!==e[n].editingObj)return n;return o},QuestionMatrixDynamicModel.prototype.isEditingObjectValueChanged=function(){var e=this.value;if(!this.generatedVisibleRows||!this.isValueSurveyElement(e))return!1;var t=this.lastDeletedRow;this.lastDeletedRow=void 0;var o=this.generatedVisibleRows;if(!Array.isArray(e)||Math.abs(o.length-e.length)>1)return!1;var n=this.getInsertedDeletedIndex(o,e);if(o.length>e.length){this.lastDeletedRow=o[n];var r=o[n];o.splice(n,1),this.isRendredTableCreated&&this.renderedTable.onRemovedRow(r)}else{var i=void 0;i=t&&t.editingObj===e[n]?t:this.createMatrixRow(e[n]),o.splice(n,0,i),t||this.onMatrixRowCreated(i),this.isRendredTableCreated&&this.renderedTable.onAddedRow(i,n)}return this.setPropertyValueDirectly("rowCount",e.length),!0},QuestionMatrixDynamicModel.prototype.onBeforeValueChanged=function(e){if(e&&Array.isArray(e)){var t=e.length;if(!(t==this.rowCount||!this.setRowCountValueFromData&&t<this.initialRowCount||this.isEditingObjectValueChanged())&&(this.setRowCountValueFromData=!0,this.rowCountValue=t,this.generatedVisibleRows)){if(t==this.generatedVisibleRows.length+1){this.onStartRowAddingRemoving();var o=this.getRowValueByIndex(e,t-1),n=this.createMatrixRow(o);this.generatedVisibleRows.push(n),this.onMatrixRowCreated(n),this.onEndRowAdding()}else this.clearGeneratedRows(),this.generatedVisibleRows=this.visibleRows,this.onRowsChanged();this.setRowCountValueFromData=!1}}},QuestionMatrixDynamicModel.prototype.createNewValue=function(){var e=this.createValueCopy();e&&Array.isArray(e)||(e=[]),e.length>this.rowCount&&e.splice(this.rowCount);var t=this.getDefaultRowValue(!1);t=t||{};for(var o=e.length;o<this.rowCount;o++)e.push(this.getUnbindValue(t));return e},QuestionMatrixDynamicModel.prototype.deleteRowValue=function(e,t){for(var o=!0,n=0;n<e.length;n++)if(this.isObject(e[n])&&Object.keys(e[n]).length>0){o=!1;break}return o?null:e},QuestionMatrixDynamicModel.prototype.getRowValueByIndex=function(e,t){return Array.isArray(e)&&t>=0&&t<e.length?e[t]:null},QuestionMatrixDynamicModel.prototype.getRowValueCore=function(e,t,o){if(void 0===o&&(o=!1),!this.generatedVisibleRows)return{};var n=this.getRowValueByIndex(t,this.generatedVisibleRows.indexOf(e));return!n&&o&&(n={}),n},QuestionMatrixDynamicModel.prototype.getAddRowButtonCss=function(e){return void 0===e&&(e=!1),new p.CssClassBuilder().append(this.cssClasses.button).append(this.cssClasses.buttonAdd).append(this.cssClasses.emptyRowsButton,e).toString()},QuestionMatrixDynamicModel.prototype.getRemoveRowButtonCss=function(){return new p.CssClassBuilder().append(this.cssClasses.button).append(this.cssClasses.buttonRemove).toString()},QuestionMatrixDynamicModel.prototype.getRootCss=function(){var t;return new p.CssClassBuilder().append(e.prototype.getRootCss.call(this)).append(this.cssClasses.empty,!(null===(t=this.renderedTable)||void 0===t?void 0:t.showTable)).toString()},QuestionMatrixDynamicModel}(s.QuestionMatrixDropdownModelBase),m=function(e){function QuestionMatrixDynamicRenderedTable(){return null!==e&&e.apply(this,arguments)||this}return g(QuestionMatrixDynamicRenderedTable,e),QuestionMatrixDynamicRenderedTable.prototype.setDefaultRowActions=function(t,o){e.prototype.setDefaultRowActions.call(this,t,o)},QuestionMatrixDynamicRenderedTable}(d.QuestionMatrixDropdownRenderedTable);r.Serializer.addClass("matrixdynamic",[{name:"rowsVisibleIf:condition",visible:!1},{name:"allowAddRows:boolean",default:!0},{name:"allowRemoveRows:boolean",default:!0},{name:"rowCount:number",default:2,minValue:0,isBindable:!0},{name:"minRowCount:number",default:0,minValue:0},{name:"maxRowCount:number",default:l.settings.matrix.maxRowCount},{name:"keyName"},"defaultRowValue:rowvalue","defaultValueFromLastRow:boolean",{name:"confirmDelete:boolean"},{name:"confirmDeleteText",dependsOn:"confirmDelete",visibleIf:function(e){return!e||e.confirmDelete},serializationProperty:"locConfirmDeleteText"},{name:"addRowLocation",default:"default",choices:["default","top","bottom","topBottom"]},{name:"addRowText",serializationProperty:"locAddRowText"},{name:"removeRowText",serializationProperty:"locRemoveRowText"},"hideColumnsIfEmpty:boolean",{name:"emptyRowsText:text",serializationProperty:"locEmptyRowsText",dependsOn:"hideColumnsIfEmpty",visibleIf:function(e){return!e||e.hideColumnsIfEmpty}},{name:"detailPanelShowOnAdding:boolean",dependsOn:"detailPanelMode",visibleIf:function(e){return"none"!==e.detailPanelMode}},"allowRowsDragAndDrop:switch"],function(){return new y("")},"matrixdropdownbase"),i.QuestionFactory.Instance.registerQuestion("matrixdynamic",function(e){var t=new y(e);return t.choices=[1,2,3,4,5],s.QuestionMatrixDropdownModelBase.addDefaultColumns(t),t})},"./src/question_multipletext.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"MultipleTextEditorModel",function(){return g}),o.d(t,"MultipleTextItemModel",function(){return f}),o.d(t,"QuestionMultipleTextModel",function(){return y}),o.d(t,"MutlipleTextRow",function(){return m}),o.d(t,"MutlipleTextErrorRow",function(){return v}),o.d(t,"MultipleTextCell",function(){return b}),o.d(t,"MultipleTextErrorCell",function(){return C});var n,r=o(/*! ./base */"./src/base.ts"),i=o(/*! ./survey-element */"./src/survey-element.ts"),s=o(/*! ./question */"./src/question.ts"),a=o(/*! ./question_text */"./src/question_text.ts"),l=o(/*! ./jsonobject */"./src/jsonobject.ts"),u=o(/*! ./questionfactory */"./src/questionfactory.ts"),c=o(/*! ./helpers */"./src/helpers.ts"),p=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),d=o(/*! ./settings */"./src/settings.ts"),h=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},g=function(e){function MultipleTextEditorModel(){return null!==e&&e.apply(this,arguments)||this}return h(MultipleTextEditorModel,e),Object.defineProperty(MultipleTextEditorModel.prototype,"a11y_input_ariaLabel",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextEditorModel.prototype,"a11y_input_ariaLabelledBy",{get:function(){return null},enumerable:!1,configurable:!0}),MultipleTextEditorModel}(a.QuestionTextModel),f=function(e){function MultipleTextItemModel(t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n=e.call(this)||this;return n.focusIn=function(){n.editor.focusIn()},n.editorValue=n.createEditor(t),n.editor.questionTitleTemplateCallback=function(){return""},n.editor.titleLocation="left",o&&(n.title=o),n}return h(MultipleTextItemModel,e),MultipleTextItemModel.prototype.getType=function(){return"multipletextitem"},Object.defineProperty(MultipleTextItemModel.prototype,"id",{get:function(){return this.editor.id},enumerable:!1,configurable:!0}),MultipleTextItemModel.prototype.getOriginalObj=function(){return this.editor},Object.defineProperty(MultipleTextItemModel.prototype,"name",{get:function(){return this.editor.name},set:function(e){this.editor.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"question",{get:function(){return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"editor",{get:function(){return this.editorValue},enumerable:!1,configurable:!0}),MultipleTextItemModel.prototype.createEditor=function(e){return new g(e)},MultipleTextItemModel.prototype.addUsedLocales=function(t){e.prototype.addUsedLocales.call(this,t),this.editor.addUsedLocales(t)},MultipleTextItemModel.prototype.localeChanged=function(){e.prototype.localeChanged.call(this),this.editor.localeChanged()},MultipleTextItemModel.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.editor.locStrsChanged()},MultipleTextItemModel.prototype.setData=function(e){this.data=e,e&&(this.editor.defaultValue=e.getItemDefaultValue(this.name),this.editor.setSurveyImpl(this),this.editor.parent=e,this.editor.setParentQuestion(e))},Object.defineProperty(MultipleTextItemModel.prototype,"isRequired",{get:function(){return this.editor.isRequired},set:function(e){this.editor.isRequired=e},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"inputType",{get:function(){return this.editor.inputType},set:function(e){this.editor.inputType=e},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"title",{get:function(){return this.editor.title},set:function(e){this.editor.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"locTitle",{get:function(){return this.editor.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"fullTitle",{get:function(){return this.editor.fullTitle},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"maxLength",{get:function(){return this.editor.maxLength},set:function(e){this.editor.maxLength=e},enumerable:!1,configurable:!0}),MultipleTextItemModel.prototype.getMaxLength=function(){var e=this.getSurvey();return c.Helpers.getMaxLength(this.maxLength,e?e.maxTextLength:-1)},Object.defineProperty(MultipleTextItemModel.prototype,"placeholder",{get:function(){return this.editor.placeholder},set:function(e){this.editor.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"locPlaceholder",{get:function(){return this.editor.locPlaceholder},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"placeHolder",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"locPlaceHolder",{get:function(){return this.locPlaceholder},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"requiredErrorText",{get:function(){return this.editor.requiredErrorText},set:function(e){this.editor.requiredErrorText=e},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"locRequiredErrorText",{get:function(){return this.editor.locRequiredErrorText},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"size",{get:function(){return this.editor.size},set:function(e){this.editor.size=e},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"minValueExpression",{get:function(){return this.editor.minValueExpression},set:function(e){this.editor.minValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"maxValueExpression",{get:function(){return this.editor.maxValueExpression},set:function(e){this.editor.maxValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(MultipleTextItemModel.prototype,"validators",{get:function(){return this.editor.validators},set:function(e){this.editor.validators=e},enumerable:!1,configurable:!0}),MultipleTextItemModel.prototype.getValidators=function(){return this.validators},Object.defineProperty(MultipleTextItemModel.prototype,"value",{get:function(){return this.data?this.data.getMultipleTextValue(this.name):null},set:function(e){null!=this.data&&this.data.setMultipleTextValue(this.name,e)},enumerable:!1,configurable:!0}),MultipleTextItemModel.prototype.isEmpty=function(){return this.editor.isEmpty()},MultipleTextItemModel.prototype.onValueChanged=function(e){this.valueChangedCallback&&this.valueChangedCallback(e)},MultipleTextItemModel.prototype.getSurveyData=function(){return this},MultipleTextItemModel.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},MultipleTextItemModel.prototype.getTextProcessor=function(){return this.data?this.data.getTextProcessor():null},MultipleTextItemModel.prototype.getValue=function(e){return this.data?this.data.getMultipleTextValue(e):null},MultipleTextItemModel.prototype.setValue=function(e,t){this.data&&this.data.setMultipleTextValue(e,t)},MultipleTextItemModel.prototype.getVariable=function(e){},MultipleTextItemModel.prototype.setVariable=function(e,t){},MultipleTextItemModel.prototype.getComment=function(e){return null},MultipleTextItemModel.prototype.setComment=function(e,t){},MultipleTextItemModel.prototype.getAllValues=function(){return this.data?this.data.getAllValues():this.value},MultipleTextItemModel.prototype.getFilteredValues=function(){return this.getAllValues()},MultipleTextItemModel.prototype.getFilteredProperties=function(){return{survey:this.getSurvey()}},MultipleTextItemModel.prototype.findQuestionByName=function(e){var t=this.getSurvey();return t?t.getQuestionByName(e):null},MultipleTextItemModel.prototype.getValidatorTitle=function(){return this.title},Object.defineProperty(MultipleTextItemModel.prototype,"validatedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),MultipleTextItemModel.prototype.getDataFilteredValues=function(){return this.getFilteredValues()},MultipleTextItemModel.prototype.getDataFilteredProperties=function(){return this.getFilteredProperties()},MultipleTextItemModel}(r.Base),y=function(e){function QuestionMultipleTextModel(t){var o=e.call(this,t)||this;return o.isMultipleItemValueChanging=!1,o.createNewArray("items",function(e){e.setData(o),o.survey&&o.survey.multipleTextItemAdded(o,e)}),o.registerPropertyChangedHandlers(["items","colCount","itemErrorLocation"],function(){o.calcVisibleRows()}),o.registerPropertyChangedHandlers(["itemSize"],function(){o.updateItemsSize()}),o}return h(QuestionMultipleTextModel,e),QuestionMultipleTextModel.addDefaultItems=function(e){for(var t=u.QuestionFactory.DefaultMutlipleTextItems,o=0;o<t.length;o++)e.addItem(t[o])},QuestionMultipleTextModel.prototype.getType=function(){return"multipletext"},QuestionMultipleTextModel.prototype.setSurveyImpl=function(t,o){e.prototype.setSurveyImpl.call(this,t,o);for(var n=0;n<this.items.length;n++)this.items[n].setData(this)},Object.defineProperty(QuestionMultipleTextModel.prototype,"isAllowTitleLeft",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMultipleTextModel.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMultipleTextModel.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMultipleTextModel.prototype,"id",{get:function(){return this.getPropertyValue("id")},set:function(e){var t;null===(t=this.items)||void 0===t||t.map(function(t,o){return t.editor.id=e+"_"+o}),this.setPropertyValue("id",e)},enumerable:!1,configurable:!0}),QuestionMultipleTextModel.prototype.onSurveyLoad=function(){this.editorsOnSurveyLoad(),e.prototype.onSurveyLoad.call(this)},QuestionMultipleTextModel.prototype.setQuestionValue=function(t,o){void 0===o&&(o=!0),e.prototype.setQuestionValue.call(this,t,o),this.performForEveryEditor(function(e){e.editor.updateValueFromSurvey(e.value)}),this.updateIsAnswered()},QuestionMultipleTextModel.prototype.onSurveyValueChanged=function(t){e.prototype.onSurveyValueChanged.call(this,t),this.performForEveryEditor(function(e){e.editor.onSurveyValueChanged(e.value)})},QuestionMultipleTextModel.prototype.updateItemsSize=function(){this.performForEveryEditor(function(e){e.editor.updateInputSize()})},QuestionMultipleTextModel.prototype.editorsOnSurveyLoad=function(){this.performForEveryEditor(function(e){e.editor.onSurveyLoad()})},QuestionMultipleTextModel.prototype.performForEveryEditor=function(e){for(var t=0;t<this.items.length;t++){var o=this.items[t];o.editor&&e(o)}},Object.defineProperty(QuestionMultipleTextModel.prototype,"items",{get:function(){return this.getPropertyValue("items")},set:function(e){this.setPropertyValue("items",e)},enumerable:!1,configurable:!0}),QuestionMultipleTextModel.prototype.addItem=function(e,t){void 0===t&&(t=null);var o=this.createTextItem(e,t);return this.items.push(o),o},QuestionMultipleTextModel.prototype.getItemByName=function(e){for(var t=0;t<this.items.length;t++)if(this.items[t].name==e)return this.items[t];return null},QuestionMultipleTextModel.prototype.addConditionObjectsByContext=function(e,t){for(var o=0;o<this.items.length;o++){var n=this.items[o];e.push({name:this.getValueName()+"."+n.name,text:this.processedTitle+"."+n.fullTitle,question:this})}},QuestionMultipleTextModel.prototype.collectNestedQuestionsCore=function(e,t){this.items.forEach(function(o){return o.editor.collectNestedQuestions(e,t)})},QuestionMultipleTextModel.prototype.getConditionJson=function(t,o){if(void 0===t&&(t=null),void 0===o&&(o=null),!o)return e.prototype.getConditionJson.call(this);var n=this.getItemByName(o);if(!n)return null;var r=new l.JsonObject().toJsonObject(n);return r.type="text",r},QuestionMultipleTextModel.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this);for(var t=0;t<this.items.length;t++)this.items[t].locStrsChanged()},QuestionMultipleTextModel.prototype.localeChanged=function(){e.prototype.localeChanged.call(this);for(var t=0;t<this.items.length;t++)this.items[t].localeChanged()},Object.defineProperty(QuestionMultipleTextModel.prototype,"itemErrorLocation",{get:function(){return this.getPropertyValue("itemErrorLocation")},set:function(e){this.setPropertyValue("itemErrorLocation",e)},enumerable:!1,configurable:!0}),QuestionMultipleTextModel.prototype.getQuestionErrorLocation=function(){return"default"!==this.itemErrorLocation?this.itemErrorLocation:this.getErrorLocation()},Object.defineProperty(QuestionMultipleTextModel.prototype,"showItemErrorOnTop",{get:function(){return"top"==this.getQuestionErrorLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMultipleTextModel.prototype,"showItemErrorOnBottom",{get:function(){return"bottom"==this.getQuestionErrorLocation()},enumerable:!1,configurable:!0}),QuestionMultipleTextModel.prototype.getChildErrorLocation=function(e){return this.getQuestionErrorLocation()},QuestionMultipleTextModel.prototype.isNewValueCorrect=function(e){return c.Helpers.isValueObject(e,!0)},QuestionMultipleTextModel.prototype.supportGoNextPageAutomatic=function(){for(var e=0;e<this.items.length;e++)if(this.items[e].isEmpty())return!1;return!0},Object.defineProperty(QuestionMultipleTextModel.prototype,"colCount",{get:function(){return this.getPropertyValue("colCount")},set:function(e){e<1||e>5||this.setPropertyValue("colCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionMultipleTextModel.prototype,"itemSize",{get:function(){return this.getPropertyValue("itemSize")},set:function(e){this.setPropertyValue("itemSize",e)},enumerable:!1,configurable:!0}),QuestionMultipleTextModel.prototype.onRowCreated=function(e){return e},QuestionMultipleTextModel.prototype.calcVisibleRows=function(){for(var e,t,o=this.colCount,n=this.items,r=0,i=[],s=0;s<n.length;s++)0==r&&(e=this.onRowCreated(new m),t=this.onRowCreated(new v),this.showItemErrorOnTop?(i.push(t),i.push(e)):(i.push(e),i.push(t))),e.cells.push(new b(n[s],this)),t.cells.push(new C(n[s],this)),(++r>=o||s==n.length-1)&&(r=0,t.onAfterCreated());this.rows=i},QuestionMultipleTextModel.prototype.getRows=function(){return c.Helpers.isValueEmpty(this.rows)&&this.calcVisibleRows(),this.rows},QuestionMultipleTextModel.prototype.onValueChanged=function(){e.prototype.onValueChanged.call(this),this.onItemValueChanged()},QuestionMultipleTextModel.prototype.createTextItem=function(e,t){return new f(e,t)},QuestionMultipleTextModel.prototype.onItemValueChanged=function(){if(!this.isMultipleItemValueChanging)for(var e=0;e<this.items.length;e++){var t=null;this.value&&this.items[e].name in this.value&&(t=this.value[this.items[e].name]),this.items[e].onValueChanged(t)}},QuestionMultipleTextModel.prototype.runCondition=function(t,o){e.prototype.runCondition.call(this,t,o),this.items.forEach(function(e){return e.editor.runCondition(t,o)})},QuestionMultipleTextModel.prototype.getIsRunningValidators=function(){if(e.prototype.getIsRunningValidators.call(this))return!0;for(var t=0;t<this.items.length;t++)if(this.items[t].editor.isRunningValidators)return!0;return!1},QuestionMultipleTextModel.prototype.hasErrors=function(t,o){var n=this;void 0===t&&(t=!0),void 0===o&&(o=null);for(var r=!1,i=0;i<this.items.length;i++)this.items[i].editor.onCompletedAsyncValidators=function(e){n.raiseOnCompletedAsyncValidators()},o&&!0===o.isOnValueChanged&&this.items[i].editor.isEmpty()||(r=this.items[i].editor.hasErrors(t,o)||r);return e.prototype.hasErrors.call(this,t)||r},QuestionMultipleTextModel.prototype.getAllErrors=function(){for(var t=e.prototype.getAllErrors.call(this),o=0;o<this.items.length;o++){var n=this.items[o].editor.getAllErrors();n&&n.length>0&&(t=t.concat(n))}return t},QuestionMultipleTextModel.prototype.clearErrors=function(){e.prototype.clearErrors.call(this);for(var t=0;t<this.items.length;t++)this.items[t].editor.clearErrors()},QuestionMultipleTextModel.prototype.getContainsErrors=function(){var t=e.prototype.getContainsErrors.call(this);if(t)return t;for(var o=this.items,n=0;n<o.length;n++)if(o[n].editor.containsErrors)return!0;return!1},QuestionMultipleTextModel.prototype.getIsAnswered=function(){if(!e.prototype.getIsAnswered.call(this))return!1;for(var t=0;t<this.items.length;t++){var o=this.items[t].editor;if(o.isVisible&&!o.isAnswered)return!1}return!0},QuestionMultipleTextModel.prototype.getProgressInfo=function(){for(var e=[],t=0;t<this.items.length;t++)e.push(this.items[t].editor);return i.SurveyElement.getProgressInfoByElements(e,this.isRequired)},QuestionMultipleTextModel.prototype.getDisplayValueCore=function(e,t){if(!t)return t;for(var o={},n=0;n<this.items.length;n++){var r=this.items[n],i=t[r.name];if(!c.Helpers.isValueEmpty(i)){var s=r.name;e&&r.title&&(s=r.title),o[s]=r.editor.getDisplayValue(e,i)}}return o},QuestionMultipleTextModel.prototype.allowMobileInDesignMode=function(){return!0},QuestionMultipleTextModel.prototype.getMultipleTextValue=function(e){return this.value?this.value[e]:null},QuestionMultipleTextModel.prototype.setMultipleTextValue=function(e,t){this.isMultipleItemValueChanging=!0,this.isValueEmpty(t)&&(t=void 0);var o=this.value;o||(o={}),o[e]=t,this.setNewValue(o),this.isMultipleItemValueChanging=!1},QuestionMultipleTextModel.prototype.getItemDefaultValue=function(e){return this.defaultValue?this.defaultValue[e]:null},QuestionMultipleTextModel.prototype.getTextProcessor=function(){return this.textProcessor},QuestionMultipleTextModel.prototype.getAllValues=function(){return this.data?this.data.getAllValues():null},QuestionMultipleTextModel.prototype.getIsRequiredText=function(){return this.survey?this.survey.requiredText:""},QuestionMultipleTextModel.prototype.addElement=function(e,t){},QuestionMultipleTextModel.prototype.removeElement=function(e){return!1},QuestionMultipleTextModel.prototype.getQuestionTitleLocation=function(){return"left"},QuestionMultipleTextModel.prototype.getQuestionStartIndex=function(){return this.getStartIndex()},QuestionMultipleTextModel.prototype.getChildrenLayoutType=function(){return"row"},QuestionMultipleTextModel.prototype.elementWidthChanged=function(e){},Object.defineProperty(QuestionMultipleTextModel.prototype,"elements",{get:function(){return[]},enumerable:!1,configurable:!0}),QuestionMultipleTextModel.prototype.indexOf=function(e){return -1},QuestionMultipleTextModel.prototype.ensureRowsVisibility=function(){},QuestionMultipleTextModel.prototype.validateContainerOnly=function(){},QuestionMultipleTextModel.prototype.getItemLabelCss=function(e){return new p.CssClassBuilder().append(this.cssClasses.itemLabel).append(this.cssClasses.itemLabelAnswered,e.editor.isAnswered).append(this.cssClasses.itemLabelAllowFocus,!this.isDesignMode).append(this.cssClasses.itemLabelOnError,e.editor.errors.length>0).toString()},QuestionMultipleTextModel.prototype.getItemCss=function(){return new p.CssClassBuilder().append(this.cssClasses.item).toString()},QuestionMultipleTextModel.prototype.getItemTitleCss=function(){return new p.CssClassBuilder().append(this.cssClasses.itemTitle).toString()},__decorate([Object(l.propertyArray)()],QuestionMultipleTextModel.prototype,"rows",void 0),QuestionMultipleTextModel}(s.Question),m=function(e){function MutlipleTextRow(){var t=null!==e&&e.apply(this,arguments)||this;return t.isVisible=!0,t.cells=[],t}return h(MutlipleTextRow,e),__decorate([Object(l.property)()],MutlipleTextRow.prototype,"isVisible",void 0),__decorate([Object(l.propertyArray)()],MutlipleTextRow.prototype,"cells",void 0),MutlipleTextRow}(r.Base),v=function(e){function MutlipleTextErrorRow(){return null!==e&&e.apply(this,arguments)||this}return h(MutlipleTextErrorRow,e),MutlipleTextErrorRow.prototype.onAfterCreated=function(){var e=this,callback=function(){e.isVisible=e.cells.some(function(e){var t,o;return(null===(t=e.item)||void 0===t?void 0:t.editor)&&(null===(o=e.item)||void 0===o?void 0:o.editor.hasVisibleErrors)})};this.cells.forEach(function(e){var t,o;(null===(t=e.item)||void 0===t?void 0:t.editor)&&(null===(o=e.item)||void 0===o||o.editor.registerFunctionOnPropertyValueChanged("hasVisibleErrors",callback))}),callback()},MutlipleTextErrorRow}(m),b=function(){function MultipleTextCell(e,t){this.item=e,this.question=t,this.isErrorsCell=!1}return MultipleTextCell.prototype.getClassName=function(){return new p.CssClassBuilder().append(this.question.cssClasses.cell).toString()},Object.defineProperty(MultipleTextCell.prototype,"className",{get:function(){return this.getClassName()},enumerable:!1,configurable:!0}),MultipleTextCell}(),C=function(e){function MultipleTextErrorCell(){var t=null!==e&&e.apply(this,arguments)||this;return t.isErrorsCell=!0,t}return h(MultipleTextErrorCell,e),MultipleTextErrorCell.prototype.getClassName=function(){return new p.CssClassBuilder().append(e.prototype.getClassName.call(this)).append(this.question.cssClasses.cellError).append(this.question.cssClasses.cellErrorTop,this.question.showItemErrorOnTop).append(this.question.cssClasses.cellErrorBottom,this.question.showItemErrorOnBottom).toString()},MultipleTextErrorCell}(b);l.Serializer.addClass("multipletextitem",[{name:"!name",isUnique:!0},"isRequired:boolean",{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder"},{name:"inputType",default:"text",choices:d.settings.questions.inputTypes},{name:"title",serializationProperty:"locTitle"},{name:"maxLength:number",default:-1},{name:"size:number",minValue:0},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"minValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return Object(a.isMinMaxType)(e)}},{name:"maxValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return Object(a.isMinMaxType)(e)}},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"}],function(){return new f("")}),l.Serializer.addClass("multipletext",[{name:"!items:textitems",className:"multipletextitem"},{name:"itemSize:number",minValue:0},{name:"colCount:number",default:1,choices:[1,2,3,4,5]},{name:"itemErrorLocation",default:"default",choices:["default","top","bottom"],visible:!1}],function(){return new y("")},"question"),u.QuestionFactory.Instance.registerQuestion("multipletext",function(e){var t=new y(e);return y.addDefaultItems(t),t})},"./src/question_paneldynamic.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionPanelDynamicItem",function(){return C}),o.d(t,"QuestionPanelDynamicTemplateSurveyImpl",function(){return w}),o.d(t,"QuestionPanelDynamicModel",function(){return P});var n,r=o(/*! ./helpers */"./src/helpers.ts"),i=o(/*! ./survey-element */"./src/survey-element.ts"),s=o(/*! ./localizablestring */"./src/localizablestring.ts"),a=o(/*! ./textPreProcessor */"./src/textPreProcessor.ts"),l=o(/*! ./question */"./src/question.ts"),u=o(/*! ./jsonobject */"./src/jsonobject.ts"),c=o(/*! ./questionfactory */"./src/questionfactory.ts"),p=o(/*! ./error */"./src/error.ts"),d=o(/*! ./settings */"./src/settings.ts"),h=o(/*! ./utils/utils */"./src/utils/utils.ts"),g=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),f=o(/*! ./actions/action */"./src/actions/action.ts"),y=o(/*! ./base */"./src/base.ts"),m=o(/*! ./actions/adaptive-container */"./src/actions/adaptive-container.ts"),v=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},__spreadArray=function(e,t){for(var o=0,n=t.length,r=e.length;o<n;o++,r++)e[r]=t[o];return e},b=function(e){function QuestionPanelDynamicItemTextProcessor(t,o,n){var r=e.call(this,n)||this;return r.data=t,r.panelItem=o,r.variableName=n,r.sharedQuestions={},r}return v(QuestionPanelDynamicItemTextProcessor,e),Object.defineProperty(QuestionPanelDynamicItemTextProcessor.prototype,"survey",{get:function(){return this.panelItem.getSurvey()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicItemTextProcessor.prototype,"panel",{get:function(){return this.panelItem.panel},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicItemTextProcessor.prototype,"panelIndex",{get:function(){return this.data?this.data.getItemIndex(this.panelItem):-1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicItemTextProcessor.prototype,"visiblePanelIndex",{get:function(){return this.data?this.data.getVisibleItemIndex(this.panelItem):-1},enumerable:!1,configurable:!0}),QuestionPanelDynamicItemTextProcessor.prototype.getValues=function(){return this.panelItem.getAllValues()},QuestionPanelDynamicItemTextProcessor.prototype.getQuestionByName=function(t){var o=e.prototype.getQuestionByName.call(this,t);if(o)return o;var n=this.panelIndex,r=(o=n>-1?this.data.getSharedQuestionFromArray(t,n):void 0)?o.name:t;return this.sharedQuestions[r]=t,o},QuestionPanelDynamicItemTextProcessor.prototype.getQuestionDisplayText=function(t){var o=this.sharedQuestions[t.name];if(!o)return e.prototype.getQuestionDisplayText.call(this,t);var n=this.panelItem.getValue(o);return t.getDisplayValue(!0,n)},QuestionPanelDynamicItemTextProcessor.prototype.onCustomProcessText=function(e){if(e.name==C.IndexVariableName){var t=this.panelIndex;if(t>-1)return e.isExists=!0,e.value=t+1,!0}if(e.name==C.VisibleIndexVariableName){var t=this.visiblePanelIndex;if(t>-1)return e.isExists=!0,e.value=t+1,!0}if(0==e.name.toLowerCase().indexOf(C.ParentItemVariableName+".")){var o=this.data;if(o&&o.parentQuestion&&o.parent&&o.parent.data){var n=new QuestionPanelDynamicItemTextProcessor(o.parentQuestion,o.parent.data,C.ItemVariableName),r=C.ItemVariableName+e.name.substring(C.ParentItemVariableName.length),i=n.processValue(r,e.returnDisplayValue);e.isExists=i.isExists,e.value=i.value}return!0}return!1},QuestionPanelDynamicItemTextProcessor}(a.QuestionTextProcessor),C=function(){function QuestionPanelDynamicItem(e,t){this.data=e,this.panelValue=t,this.textPreProcessor=new b(e,this,QuestionPanelDynamicItem.ItemVariableName),this.setSurveyImpl()}return Object.defineProperty(QuestionPanelDynamicItem.prototype,"panel",{get:function(){return this.panelValue},enumerable:!1,configurable:!0}),QuestionPanelDynamicItem.prototype.setSurveyImpl=function(){this.panel.setSurveyImpl(this)},QuestionPanelDynamicItem.prototype.getValue=function(e){return this.getAllValues()[e]},QuestionPanelDynamicItem.prototype.setValue=function(e,t){var o=this.data.getPanelItemData(this),n=o?o[e]:void 0;if(!r.Helpers.isTwoValueEquals(t,n,!1,!0,!1)){this.data.setPanelItemData(this,e,r.Helpers.getUnbindValue(t));for(var i=this.panel.questions,s=QuestionPanelDynamicItem.ItemVariableName+"."+e,a=0;a<i.length;a++){var l=i[a];l.getValueName()!==e&&l.checkBindings(e,t),l.runTriggers(s,t)}}},QuestionPanelDynamicItem.prototype.getVariable=function(e){},QuestionPanelDynamicItem.prototype.setVariable=function(e,t){},QuestionPanelDynamicItem.prototype.getComment=function(e){return this.getValue(e+d.settings.commentSuffix)||""},QuestionPanelDynamicItem.prototype.setComment=function(e,t,o){this.setValue(e+d.settings.commentSuffix,t)},QuestionPanelDynamicItem.prototype.findQuestionByName=function(e){if(e){var t=QuestionPanelDynamicItem.ItemVariableName+".";if(0===e.indexOf(t))return this.panel.getQuestionByName(e.substring(t.length));var o=this.getSurvey();return o?o.getQuestionByName(e):null}},QuestionPanelDynamicItem.prototype.getAllValues=function(){return this.data.getPanelItemData(this)},QuestionPanelDynamicItem.prototype.getFilteredValues=function(){var e={},t=this.data&&this.data.getRootData()?this.data.getRootData().getFilteredValues():{};for(var o in t)e[o]=t[o];if(e[QuestionPanelDynamicItem.ItemVariableName]=this.getAllValues(),this.data){var n=QuestionPanelDynamicItem.IndexVariableName,r=QuestionPanelDynamicItem.VisibleIndexVariableName;delete e[n],delete e[r],e[n.toLowerCase()]=this.data.getItemIndex(this),e[r.toLowerCase()]=this.data.getVisibleItemIndex(this);var i=this.data;i&&i.parentQuestion&&i.parent&&(e[QuestionPanelDynamicItem.ParentItemVariableName]=i.parent.getValue())}return e},QuestionPanelDynamicItem.prototype.getFilteredProperties=function(){return this.data&&this.data.getRootData()?this.data.getRootData().getFilteredProperties():{survey:this.getSurvey()}},QuestionPanelDynamicItem.prototype.getSurveyData=function(){return this},QuestionPanelDynamicItem.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},QuestionPanelDynamicItem.prototype.getTextProcessor=function(){return this.textPreProcessor},QuestionPanelDynamicItem.ItemVariableName="panel",QuestionPanelDynamicItem.ParentItemVariableName="parentpanel",QuestionPanelDynamicItem.IndexVariableName="panelIndex",QuestionPanelDynamicItem.VisibleIndexVariableName="visiblePanelIndex",QuestionPanelDynamicItem}(),w=function(){function QuestionPanelDynamicTemplateSurveyImpl(e){this.data=e}return QuestionPanelDynamicTemplateSurveyImpl.prototype.getSurveyData=function(){return null},QuestionPanelDynamicTemplateSurveyImpl.prototype.getSurvey=function(){return this.data.getSurvey()},QuestionPanelDynamicTemplateSurveyImpl.prototype.getTextProcessor=function(){return null},QuestionPanelDynamicTemplateSurveyImpl}(),P=function(e){function QuestionPanelDynamicModel(t){var o=e.call(this,t)||this;return o.isAddingNewPanels=!1,o.isSetPanelItemData={},o.createNewArray("panels",function(e){o.onPanelAdded(e)},function(e){o.onPanelRemoved(e)}),o.createNewArray("visiblePanels"),o.templateValue=o.createAndSetupNewPanelObject(),o.template.renderWidth="100%",o.template.selectedElementInDesign=o,o.template.addElementCallback=function(e){o.addOnPropertyChangedCallback(e),o.rebuildPanels()},o.template.removeElementCallback=function(){o.rebuildPanels()},o.createLocalizableString("confirmDeleteText",o,!1,"confirmDelete"),o.createLocalizableString("keyDuplicationError",o,!1,!0),o.createLocalizableString("panelAddText",o,!1,"addPanel"),o.createLocalizableString("panelRemoveText",o,!1,"removePanel"),o.createLocalizableString("panelPrevText",o,!1,"pagePrevText"),o.createLocalizableString("panelNextText",o,!1,"pageNextText"),o.createLocalizableString("noEntriesText",o,!1,"noEntriesText"),o.createLocalizableString("templateTabTitle",o,!0,"panelDynamicTabTextFormat"),o.registerPropertyChangedHandlers(["panelsState"],function(){o.setPanelsState()}),o.registerPropertyChangedHandlers(["isMobile"],function(){o.updateFooterActions()}),o.registerPropertyChangedHandlers(["allowAddPanel"],function(){o.updateNoEntriesTextDefaultLoc()}),o}return v(QuestionPanelDynamicModel,e),Object.defineProperty(QuestionPanelDynamicModel.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.getFirstQuestionToFocus=function(e){for(var t=0;t<this.visiblePanels.length;t++){var o=this.visiblePanels[t].getFirstQuestionToFocus(e);if(o)return o}return null},QuestionPanelDynamicModel.prototype.setSurveyImpl=function(t,o){e.prototype.setSurveyImpl.call(this,t,o),this.setTemplatePanelSurveyImpl(),this.setPanelsSurveyImpl()},QuestionPanelDynamicModel.prototype.assignOnPropertyChangedToTemplate=function(){for(var e=this.template.elements,t=0;t<e.length;t++)this.addOnPropertyChangedCallback(e[t])},QuestionPanelDynamicModel.prototype.addOnPropertyChangedCallback=function(e){var t=this;e.isQuestion&&e.setParentQuestion(this),e.onPropertyChanged.add(function(e,o){t.onTemplateElementPropertyChanged(e,o)}),e.isPanel&&(e.addElementCallback=function(e){t.addOnPropertyChangedCallback(e)})},QuestionPanelDynamicModel.prototype.onTemplateElementPropertyChanged=function(e,t){if(!this.isLoadingFromJson&&!this.useTemplatePanel&&0!=this.panels.length&&u.Serializer.findProperty(e.getType(),t.name))for(var o=this.panels,n=0;n<o.length;n++){var r=o[n].getQuestionByName(e.name);r&&r[t.name]!==t.newValue&&(r[t.name]=t.newValue)}},Object.defineProperty(QuestionPanelDynamicModel.prototype,"useTemplatePanel",{get:function(){return this.isDesignMode&&!this.isContentElement},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.getType=function(){return"paneldynamic"},QuestionPanelDynamicModel.prototype.clearOnDeletingContainer=function(){this.panels.forEach(function(e){e.clearOnDeletingContainer()})},Object.defineProperty(QuestionPanelDynamicModel.prototype,"isAllowTitleLeft",{get:function(){return!1},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.removeElement=function(e){return this.template.removeElement(e)},Object.defineProperty(QuestionPanelDynamicModel.prototype,"template",{get:function(){return this.templateValue},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.getPanel=function(){return this.template},Object.defineProperty(QuestionPanelDynamicModel.prototype,"templateElements",{get:function(){return this.template.elements},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"templateTitle",{get:function(){return this.template.title},set:function(e){this.template.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"locTemplateTitle",{get:function(){return this.template.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"templateTabTitle",{get:function(){return this.locTemplateTabTitle.text},set:function(e){this.locTemplateTabTitle.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"locTemplateTabTitle",{get:function(){return this.getLocalizableString("templateTabTitle")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"templateDescription",{get:function(){return this.template.description},set:function(e){this.template.description=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"locTemplateDescription",{get:function(){return this.template.locDescription},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"templateVisibleIf",{get:function(){return this.template.visibleIf},set:function(e){this.template.visibleIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"items",{get:function(){for(var e=[],t=0;t<this.panels.length;t++)e.push(this.panels[t].data);return e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"panels",{get:function(){return this.getPropertyValue("panels")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"visiblePanels",{get:function(){return this.getPropertyValue("visiblePanels")},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.onPanelAdded=function(e){if(this.onPanelRemovedCore(e),e.visible){for(var t=0,o=this.panels,n=0;n<o.length&&o[n]!==e;n++)o[n].visible&&t++;this.visiblePanels.splice(t,0,e),this.addTabFromToolbar(e,t),this.currentPanel||(this.currentPanel=e)}},QuestionPanelDynamicModel.prototype.onPanelRemoved=function(e){var t=this.onPanelRemovedCore(e);if(this.currentPanel===e){var o=this.visiblePanels;t>=o.length&&(t=o.length-1),this.currentPanel=t>=0?o[t]:null}},QuestionPanelDynamicModel.prototype.onPanelRemovedCore=function(e){var t=this.visiblePanels,o=t.indexOf(e);return o>-1&&(t.splice(o,1),this.removeTabFromToolbar(e)),o},Object.defineProperty(QuestionPanelDynamicModel.prototype,"currentIndex",{get:function(){return this.isRenderModeList?-1:this.useTemplatePanel?0:this.visiblePanels.indexOf(this.currentPanel)},set:function(e){e<0||this.visiblePanelCount<1||(e>=this.visiblePanelCount&&(e=this.visiblePanelCount-1),this.currentPanel=this.visiblePanels[e])},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"currentPanel",{get:function(){if(this.isDesignMode)return this.template;if(this.isRenderModeList||this.useTemplatePanel)return null;var e=this.getPropertyValue("currentPanel",null);return!e&&this.visiblePanelCount>0&&(e=this.visiblePanels[0],this.currentPanel=e),e},set:function(e){if(!this.isRenderModeList&&!this.useTemplatePanel){var t=this.getPropertyValue("currentPanel");e&&0>this.visiblePanels.indexOf(e)||e===t||(t&&t.onHidingContent(),this.setPropertyValue("currentPanel",e),this.updateFooterActions(),this.updateTabToolbarItemsPressedState(),this.fireCallback(this.currentIndexChangedCallback))}},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.onHidingContent=function(){e.prototype.onHidingContent.call(this),this.currentPanel?this.currentPanel.onHidingContent():this.visiblePanels.forEach(function(e){return e.onHidingContent()})},Object.defineProperty(QuestionPanelDynamicModel.prototype,"confirmDelete",{get:function(){return this.getPropertyValue("confirmDelete")},set:function(e){this.setPropertyValue("confirmDelete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"keyName",{get:function(){return this.getPropertyValue("keyName","")},set:function(e){this.setPropertyValue("keyName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"confirmDeleteText",{get:function(){return this.getLocalizableStringText("confirmDeleteText")},set:function(e){this.setLocalizableStringText("confirmDeleteText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"locConfirmDeleteText",{get:function(){return this.getLocalizableString("confirmDeleteText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"keyDuplicationError",{get:function(){return this.getLocalizableStringText("keyDuplicationError")},set:function(e){this.setLocalizableStringText("keyDuplicationError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"locKeyDuplicationError",{get:function(){return this.getLocalizableString("keyDuplicationError")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"panelPrevText",{get:function(){return this.getLocalizableStringText("panelPrevText")},set:function(e){this.setLocalizableStringText("panelPrevText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"locPanelPrevText",{get:function(){return this.getLocalizableString("panelPrevText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"panelNextText",{get:function(){return this.getLocalizableStringText("panelNextText")},set:function(e){this.setLocalizableStringText("panelNextText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"locPanelNextText",{get:function(){return this.getLocalizableString("panelNextText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"panelAddText",{get:function(){return this.getLocalizableStringText("panelAddText")},set:function(e){this.setLocalizableStringText("panelAddText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"locPanelAddText",{get:function(){return this.getLocalizableString("panelAddText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"panelRemoveText",{get:function(){return this.getLocalizableStringText("panelRemoveText")},set:function(e){this.setLocalizableStringText("panelRemoveText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"locPanelRemoveText",{get:function(){return this.getLocalizableString("panelRemoveText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"isProgressTopShowing",{get:function(){return"progressTop"===this.renderMode||"progressTopBottom"===this.renderMode},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"isProgressBottomShowing",{get:function(){return"progressBottom"===this.renderMode||"progressTopBottom"===this.renderMode},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"isPrevButtonVisible",{get:function(){return this.currentIndex>0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"isPrevButtonShowing",{get:function(){return this.isPrevButtonVisible},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"isNextButtonVisible",{get:function(){return this.currentIndex>=0&&this.currentIndex<this.visiblePanelCount-1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"isNextButtonShowing",{get:function(){return this.isNextButtonVisible},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"isRangeShowing",{get:function(){return this.showRangeInProgress&&this.currentIndex>=0&&this.visiblePanelCount>1},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.getElementsInDesign=function(e){return void 0===e&&(e=!1),e?[this.template]:this.templateElements},QuestionPanelDynamicModel.prototype.prepareValueForPanelCreating=function(){this.addingNewPanelsValue=this.value,this.isAddingNewPanels=!0,this.isNewPanelsValueChanged=!1},QuestionPanelDynamicModel.prototype.setValueAfterPanelsCreating=function(){this.isAddingNewPanels=!1,this.isNewPanelsValueChanged&&(this.isValueChangingInternally=!0,this.value=this.addingNewPanelsValue,this.isValueChangingInternally=!1)},QuestionPanelDynamicModel.prototype.getValueCore=function(){return this.isAddingNewPanels?this.addingNewPanelsValue:e.prototype.getValueCore.call(this)},QuestionPanelDynamicModel.prototype.setValueCore=function(t){this.isAddingNewPanels?(this.isNewPanelsValueChanged=!0,this.addingNewPanelsValue=t):e.prototype.setValueCore.call(this,t)},QuestionPanelDynamicModel.prototype.setIsMobile=function(t){e.prototype.setIsMobile.call(this,t),(this.panels||[]).forEach(function(e){return e.getQuestions(!0).forEach(function(e){e.setIsMobile(t)})})},QuestionPanelDynamicModel.prototype.themeChanged=function(t){e.prototype.themeChanged.call(this,t),(this.panels||[]).forEach(function(e){return e.getQuestions(!0).forEach(function(e){e.themeChanged(t)})})},Object.defineProperty(QuestionPanelDynamicModel.prototype,"panelCount",{get:function(){return this.isLoadingFromJson||this.useTemplatePanel?this.getPropertyValue("panelCount"):this.panels.length},set:function(e){if(!(e<0)){if(this.isLoadingFromJson||this.useTemplatePanel){this.setPropertyValue("panelCount",e);return}if(e!=this.panels.length&&!this.useTemplatePanel){this.updateBindings("panelCount",e),this.prepareValueForPanelCreating();for(var t=this.panelCount;t<e;t++){var o=this.createNewPanel();this.panels.push(o),"list"==this.renderMode&&"default"!=this.panelsState&&("expand"===this.panelsState?o.expand():o.title&&o.collapse())}e<this.panelCount&&this.panels.splice(e,this.panelCount-e),this.setValueAfterPanelsCreating(),this.setValueBasedOnPanelCount(),this.reRunCondition(),this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback)}}},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"visiblePanelCount",{get:function(){return this.visiblePanels.length},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"panelsState",{get:function(){return this.getPropertyValue("panelsState")},set:function(e){this.setPropertyValue("panelsState",e)},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.setTemplatePanelSurveyImpl=function(){this.template.setSurveyImpl(this.useTemplatePanel?this.surveyImpl:new w(this))},QuestionPanelDynamicModel.prototype.setPanelsSurveyImpl=function(){for(var e=0;e<this.panels.length;e++){var t=this.panels[e];t!=this.template&&t.setSurveyImpl(t.data)}},QuestionPanelDynamicModel.prototype.setPanelsState=function(){if(!this.useTemplatePanel&&"list"==this.renderMode&&this.templateTitle)for(var e=0;e<this.panels.length;e++){var t=this.panelsState;"firstExpanded"===t&&(t=0===e?"expanded":"collapsed"),this.panels[e].state=t}},QuestionPanelDynamicModel.prototype.setValueBasedOnPanelCount=function(){var e=this.value;if(e&&Array.isArray(e)||(e=[]),e.length!=this.panelCount){for(var t=e.length;t<this.panelCount;t++)e.push({});e.length>this.panelCount&&e.splice(this.panelCount,e.length-this.panelCount),this.isValueChangingInternally=!0,this.value=e,this.isValueChangingInternally=!1}},Object.defineProperty(QuestionPanelDynamicModel.prototype,"minPanelCount",{get:function(){return this.getPropertyValue("minPanelCount")},set:function(e){e<0&&(e=0),e!=this.minPanelCount&&(this.setPropertyValue("minPanelCount",e),e>this.maxPanelCount&&(this.maxPanelCount=e),this.panelCount<e&&(this.panelCount=e))},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"maxPanelCount",{get:function(){return this.getPropertyValue("maxPanelCount")},set:function(e){!(e<=0)&&(e>d.settings.panel.maxPanelCount&&(e=d.settings.panel.maxPanelCount),e!=this.maxPanelCount&&(this.setPropertyValue("maxPanelCount",e),e<this.minPanelCount&&(this.minPanelCount=e),this.panelCount>e&&(this.panelCount=e)))},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"allowAddPanel",{get:function(){return this.getPropertyValue("allowAddPanel")},set:function(e){this.setPropertyValue("allowAddPanel",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"allowRemovePanel",{get:function(){return this.getPropertyValue("allowRemovePanel")},set:function(e){this.setPropertyValue("allowRemovePanel",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"templateTitleLocation",{get:function(){return this.getPropertyValue("templateTitleLocation")},set:function(e){this.setPropertyValue("templateTitleLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"templateErrorLocation",{get:function(){return this.getPropertyValue("templateErrorLocation")},set:function(e){this.setPropertyValue("templateErrorLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"showQuestionNumbers",{get:function(){return this.getPropertyValue("showQuestionNumbers")},set:function(e){this.setPropertyValue("showQuestionNumbers",e),!this.isLoadingFromJson&&this.survey&&this.survey.questionVisibilityChanged(this,this.visible)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"panelRemoveButtonLocation",{get:function(){return this.getPropertyValue("panelRemoveButtonLocation")},set:function(e){this.setPropertyValue("panelRemoveButtonLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"showRangeInProgress",{get:function(){return this.getPropertyValue("showRangeInProgress")},set:function(e){this.setPropertyValue("showRangeInProgress",e),this.updateFooterActions(),this.fireCallback(this.currentIndexChangedCallback)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"renderMode",{get:function(){return this.getPropertyValue("renderMode")},set:function(e){this.setPropertyValue("renderMode",e),this.updateFooterActions(),this.fireCallback(this.renderModeChangedCallback)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"tabAlign",{get:function(){return this.getPropertyValue("tabAlign")},set:function(e){this.setPropertyValue("tabAlign",e),this.isRenderModeTab&&(this.additionalTitleToolbar.containerCss=this.getAdditionalTitleToolbarCss())},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"isRenderModeList",{get:function(){return"list"===this.renderMode},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"isRenderModeTab",{get:function(){return"tab"===this.renderMode},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"hasTitleOnLeftTop",{get:function(){if(this.isRenderModeTab&&this.visiblePanelCount>0)return!0;if(!this.hasTitle)return!1;var e=this.getTitleLocation();return"left"===e||"top"===e},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.setVisibleIndex=function(t){if(!this.isVisible)return 0;for(var o="onSurvey"==this.showQuestionNumbers?t:0,n=0;n<this.visiblePanels.length;n++){var r=this.setPanelVisibleIndex(this.visiblePanels[n],o,"off"!=this.showQuestionNumbers);"onSurvey"==this.showQuestionNumbers&&(o+=r)}return e.prototype.setVisibleIndex.call(this,"onSurvey"!=this.showQuestionNumbers?t:-1),"onSurvey"!=this.showQuestionNumbers?1:o-t},QuestionPanelDynamicModel.prototype.setPanelVisibleIndex=function(e,t,o){return o?e.setVisibleIndex(t):(e.setVisibleIndex(-1),0)},Object.defineProperty(QuestionPanelDynamicModel.prototype,"canAddPanel",{get:function(){return!this.isDesignMode&&(!this.isDefaultV2Theme||!!this.legacyNavigation||!!this.isRenderModeList||!(this.currentIndex<this.visiblePanelCount-1))&&this.allowAddPanel&&!this.isReadOnly&&this.panelCount<this.maxPanelCount},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"canRemovePanel",{get:function(){return!this.isDesignMode&&this.allowRemovePanel&&!this.isReadOnly&&this.panelCount>this.minPanelCount},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.rebuildPanels=function(){if(!this.isLoadingFromJson){this.prepareValueForPanelCreating();var e,t=[];if(this.useTemplatePanel)new C(this,this.template),t.push(this.template);else for(var o=0;o<this.panelCount;o++)this.createNewPanel(),t.push(this.createNewPanel());(e=this.panels).splice.apply(e,__spreadArray([0,this.panels.length],t)),this.setValueAfterPanelsCreating(),this.setPanelsState(),this.reRunCondition(),this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.updateTabToolbar()}},Object.defineProperty(QuestionPanelDynamicModel.prototype,"defaultPanelValue",{get:function(){return this.getPropertyValue("defaultPanelValue")},set:function(e){this.setPropertyValue("defaultPanelValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"defaultValueFromLastPanel",{get:function(){return this.getPropertyValue("defaultValueFromLastPanel")},set:function(e){this.setPropertyValue("defaultValueFromLastPanel",e)},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.isDefaultValueEmpty=function(){return e.prototype.isDefaultValueEmpty.call(this)&&this.isValueEmpty(this.defaultPanelValue)},QuestionPanelDynamicModel.prototype.setDefaultValue=function(){if(this.isValueEmpty(this.defaultPanelValue)||!this.isValueEmpty(this.defaultValue)){e.prototype.setDefaultValue.call(this);return}if(this.isEmpty()&&0!=this.panelCount){for(var t=[],o=0;o<this.panelCount;o++)t.push(this.defaultPanelValue);this.value=t}},Object.defineProperty(QuestionPanelDynamicModel.prototype,"isValueArray",{get:function(){return!0},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.isEmpty=function(){var e=this.value;if(!e||!Array.isArray(e))return!0;for(var t=0;t<e.length;t++)if(!this.isRowEmpty(e[t]))return!1;return!0},QuestionPanelDynamicModel.prototype.getProgressInfo=function(){return i.SurveyElement.getProgressInfoByElements(this.visiblePanels,this.isRequired)},QuestionPanelDynamicModel.prototype.isRowEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},QuestionPanelDynamicModel.prototype.addPanelUI=function(){if(!this.canAddPanel||!this.canLeaveCurrentPanel())return null;var e=this.addPanel();return"list"===this.renderMode&&"default"!==this.panelsState&&e.expand(),e},QuestionPanelDynamicModel.prototype.addPanel=function(){this.panelCount++,this.isRenderModeList||(this.currentIndex=this.panelCount-1);var e=this.value,t=!1;return!this.isValueEmpty(this.defaultPanelValue)&&e&&Array.isArray(e)&&e.length==this.panelCount&&(t=!0,this.copyValue(e[e.length-1],this.defaultPanelValue)),this.defaultValueFromLastPanel&&e&&Array.isArray(e)&&e.length>1&&e.length==this.panelCount&&(t=!0,this.copyValue(e[e.length-1],e[e.length-2])),t&&(this.value=e),this.survey&&this.survey.dynamicPanelAdded(this),this.panels[this.panelCount-1]},QuestionPanelDynamicModel.prototype.canLeaveCurrentPanel=function(){return!("list"!==this.renderMode&&this.currentPanel&&this.currentPanel.hasErrors(!0,!0))},QuestionPanelDynamicModel.prototype.copyValue=function(e,t){for(var o in t)e[o]=t[o]},QuestionPanelDynamicModel.prototype.removePanelUI=function(e){var t=this;this.canRemovePanel&&(this.confirmDelete?Object(h.confirmActionAsync)(this.confirmDeleteText,function(){t.removePanel(e)}):this.removePanel(e))},QuestionPanelDynamicModel.prototype.goToNextPanel=function(){return!(this.currentIndex<0)&&!!this.canLeaveCurrentPanel()&&(this.currentIndex++,!0)},QuestionPanelDynamicModel.prototype.goToPrevPanel=function(){!(this.currentIndex<0)&&this.currentIndex--},QuestionPanelDynamicModel.prototype.removePanel=function(e){var t=this.getVisualPanelIndex(e);if(!(t<0)&&!(t>=this.visiblePanelCount)){var o=this.visiblePanels[t],n=this.panels.indexOf(o);if(!(n<0)&&(!this.survey||this.survey.dynamicPanelRemoving(this,n,o))){this.panels.splice(n,1),this.updateBindings("panelCount",this.panelCount);var e=this.value;e&&Array.isArray(e)&&!(n>=e.length)&&(this.isValueChangingInternally=!0,e.splice(n,1),this.value=e,this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.survey&&this.survey.dynamicPanelRemoved(this,n,o),this.isValueChangingInternally=!1)}}},QuestionPanelDynamicModel.prototype.getVisualPanelIndex=function(e){if(r.Helpers.isNumber(e))return e;for(var t=this.visiblePanels,o=0;o<t.length;o++)if(t[o]===e||t[o].data===e)return o;return -1},QuestionPanelDynamicModel.prototype.getPanelIndexById=function(e){for(var t=0;t<this.panels.length;t++)if(this.panels[t].id===e)return t;return -1},QuestionPanelDynamicModel.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this);for(var t=this.panels,o=0;o<t.length;o++)t[o].locStrsChanged();this.additionalTitleToolbar&&this.additionalTitleToolbar.locStrsChanged()},QuestionPanelDynamicModel.prototype.clearIncorrectValues=function(){for(var e=0;e<this.panels.length;e++)this.clearIncorrectValuesInPanel(e)},QuestionPanelDynamicModel.prototype.clearErrors=function(){e.prototype.clearErrors.call(this);for(var t=0;t<this.panels.length;t++)this.panels[t].clearErrors()},QuestionPanelDynamicModel.prototype.getQuestionFromArray=function(e,t){return t>=this.panelCount?null:this.panels[t].getQuestionByName(e)},QuestionPanelDynamicModel.prototype.clearIncorrectValuesInPanel=function(e){var t=this.panels[e];t.clearIncorrectValues();var o=this.value,n=o&&e<o.length?o[e]:null;if(n){var r=!1;for(var i in n)!(this.getSharedQuestionFromArray(i,e)||t.getQuestionByName(i))&&(this.iscorrectValueWithPostPrefix(t,i,d.settings.commentSuffix)||this.iscorrectValueWithPostPrefix(t,i,d.settings.matrix.totalsSuffix)||(delete n[i],r=!0));r&&(o[e]=n,this.value=o)}},QuestionPanelDynamicModel.prototype.iscorrectValueWithPostPrefix=function(e,t,o){return t.indexOf(o)===t.length-o.length&&!!e.getQuestionByName(t.substring(0,t.indexOf(o)))},QuestionPanelDynamicModel.prototype.getSharedQuestionFromArray=function(e,t){return this.survey&&this.valueName?this.survey.getQuestionByValueNameFromArray(this.valueName,e,t):null},QuestionPanelDynamicModel.prototype.addConditionObjectsByContext=function(e,t){for(var o=!!t&&(!0===t||this.template.questions.indexOf(t)>-1),n=[],r=this.template.questions,i=0;i<r.length;i++)r[i].addConditionObjectsByContext(n,t);for(var s=0;s<d.settings.panel.maxPanelCountInCondition;s++)for(var a="["+s+"].",l=this.getValueName()+a,u=this.processedTitle+a,i=0;i<n.length;i++)e.push({name:l+n[i].name,text:u+n[i].text,question:n[i].question});if(o){for(var l=!0===t?this.getValueName()+".":"",u=!0===t?this.processedTitle+".":"",i=0;i<n.length;i++)if(n[i].question!=t){var c={name:l+C.ItemVariableName+"."+n[i].name,text:u+C.ItemVariableName+"."+n[i].text,question:n[i].question};!0===t&&(c.context=this),e.push(c)}}},QuestionPanelDynamicModel.prototype.collectNestedQuestionsCore=function(e,t){var o=t?this.visiblePanels:this.panels;Array.isArray(o)&&o.forEach(function(o){o.questions.forEach(function(o){return o.collectNestedQuestions(e,t)})})},QuestionPanelDynamicModel.prototype.getConditionJson=function(t,o){if(void 0===t&&(t=null),void 0===o&&(o=null),!o)return e.prototype.getConditionJson.call(this,t,o);var n=o,r=o.indexOf(".");r>-1&&(n=o.substring(0,r),o=o.substring(r+1));var i=this.template.getQuestionByName(n);return i?i.getConditionJson(t,o):null},QuestionPanelDynamicModel.prototype.onReadOnlyChanged=function(){var t=this.isReadOnly;this.template.readOnly=t;for(var o=0;o<this.panels.length;o++)this.panels[o].readOnly=t;this.updateNoEntriesTextDefaultLoc(),this.updateFooterActions(),e.prototype.onReadOnlyChanged.call(this)},QuestionPanelDynamicModel.prototype.updateNoEntriesTextDefaultLoc=function(){var e=this.getLocalizableString("noEntriesText");e&&(e.localizationName=this.isReadOnly||!this.allowAddPanel?"noEntriesReadonlyText":"noEntriesText",e.strChanged())},QuestionPanelDynamicModel.prototype.onSurveyLoad=function(){if(this.template.readOnly=this.isReadOnly,this.template.onSurveyLoad(),this.getPropertyValue("panelCount")>0&&(this.panelCount=this.getPropertyValue("panelCount")),this.useTemplatePanel&&this.rebuildPanels(),this.setPanelsSurveyImpl(),this.setPanelsState(),this.assignOnPropertyChangedToTemplate(),this.survey)for(var t=0;t<this.panelCount;t++)this.survey.dynamicPanelAdded(this);this.updateIsReady(),(this.isReadOnly||!this.allowAddPanel)&&this.updateNoEntriesTextDefaultLoc(),e.prototype.onSurveyLoad.call(this)},QuestionPanelDynamicModel.prototype.onFirstRendering=function(){this.template.onFirstRendering();for(var t=0;t<this.panels.length;t++)this.panels[t].onFirstRendering();e.prototype.onFirstRendering.call(this)},QuestionPanelDynamicModel.prototype.localeChanged=function(){e.prototype.localeChanged.call(this);for(var t=0;t<this.panels.length;t++)this.panels[t].localeChanged()},QuestionPanelDynamicModel.prototype.runCondition=function(t,o){e.prototype.runCondition.call(this,t,o),this.runPanelsCondition(this.panels,t,o)},QuestionPanelDynamicModel.prototype.runTriggers=function(t,o){e.prototype.runTriggers.call(this,t,o),this.visiblePanels.forEach(function(e){e.questions.forEach(function(e){return e.runTriggers(t,o)})})},QuestionPanelDynamicModel.prototype.reRunCondition=function(){this.data&&this.runCondition(this.getDataFilteredValues(),this.getDataFilteredProperties())},QuestionPanelDynamicModel.prototype.runPanelsCondition=function(e,t,o){var n={};t&&t instanceof Object&&(n=JSON.parse(JSON.stringify(t))),this.parentQuestion&&this.parent&&(n[C.ParentItemVariableName]=this.parent.getValue()),this.isValueChangingInternally=!0;for(var i=0;i<e.length;i++){var s=e[i],a=this.getPanelItemData(s.data),l=r.Helpers.createCopy(n),u=C.ItemVariableName;l[u]=a,l[C.IndexVariableName.toLowerCase()]=i;var c=r.Helpers.createCopy(o);c[u]=s,s.runCondition(l,c)}this.isValueChangingInternally=!1},QuestionPanelDynamicModel.prototype.onAnyValueChanged=function(t,o){e.prototype.onAnyValueChanged.call(this,t,o);for(var n=0;n<this.panels.length;n++)this.panels[n].onAnyValueChanged(t,o),this.panels[n].onAnyValueChanged(C.ItemVariableName,"")},QuestionPanelDynamicModel.prototype.hasKeysDuplicated=function(e,t){void 0===t&&(t=null);for(var o,n=[],r=0;r<this.panels.length;r++)o=this.isValueDuplicated(this.panels[r],n,t,e)||o;return o},QuestionPanelDynamicModel.prototype.updatePanelsContainsErrors=function(){for(var e=this.changingValueQuestion.parent;e;)e.updateContainsErrors(),e=e.parent;this.updateContainsErrors()},QuestionPanelDynamicModel.prototype.hasErrors=function(t,o){if(void 0===t&&(t=!0),void 0===o&&(o=null),this.isValueChangingInternally)return!1;var n=!1;if(this.changingValueQuestion){var n=this.changingValueQuestion.hasErrors(t,o);n=this.hasKeysDuplicated(t,o)||n,this.updatePanelsContainsErrors()}else n=this.hasErrorInPanels(t,o);return e.prototype.hasErrors.call(this,t,o)||n},QuestionPanelDynamicModel.prototype.getContainsErrors=function(){var t=e.prototype.getContainsErrors.call(this);if(t)return t;for(var o=this.panels,n=0;n<o.length;n++)if(o[n].containsErrors)return!0;return!1},QuestionPanelDynamicModel.prototype.getIsAnswered=function(){if(!e.prototype.getIsAnswered.call(this))return!1;for(var t=this.visiblePanels,o=0;o<t.length;o++){var n=[];t[o].addQuestionsToList(n,!0);for(var r=0;r<n.length;r++)if(!n[r].isAnswered)return!1}return!0},QuestionPanelDynamicModel.prototype.clearValueOnHidding=function(t){if(!t){if(this.survey&&"none"===this.survey.getQuestionClearIfInvisible("onHidden"))return;this.clearValueInPanelsIfInvisible("onHiddenContainer")}e.prototype.clearValueOnHidding.call(this,t)},QuestionPanelDynamicModel.prototype.clearValueIfInvisible=function(t){void 0===t&&(t="onHidden");var o="onHidden"===t?"onHiddenContainer":t;this.clearValueInPanelsIfInvisible(o),e.prototype.clearValueIfInvisible.call(this,t)},QuestionPanelDynamicModel.prototype.clearValueInPanelsIfInvisible=function(e){for(var t=0;t<this.panels.length;t++){var o=this.panels[t].questions;this.isSetPanelItemData={};for(var n=0;n<o.length;n++){var r=o[n];r.clearValueIfInvisible(e),this.isSetPanelItemData[r.getValueName()]=this.maxCheckCount+1}}this.isSetPanelItemData={}},QuestionPanelDynamicModel.prototype.getIsRunningValidators=function(){if(e.prototype.getIsRunningValidators.call(this))return!0;for(var t=0;t<this.panels.length;t++)for(var o=this.panels[t].questions,n=0;n<o.length;n++)if(o[n].isRunningValidators)return!0;return!1},QuestionPanelDynamicModel.prototype.getAllErrors=function(){for(var t=e.prototype.getAllErrors.call(this),o=this.visiblePanels,n=0;n<o.length;n++)for(var r=o[n].questions,i=0;i<r.length;i++){var s=r[i].getAllErrors();s&&s.length>0&&(t=t.concat(s))}return t},QuestionPanelDynamicModel.prototype.getDisplayValueCore=function(e,t){var o=this.getUnbindValue(t);if(!o||!Array.isArray(o))return o;for(var n=0;n<this.panels.length&&n<o.length;n++){var r=o[n];r&&(o[n]=this.getPanelDisplayValue(n,r,e))}return o},QuestionPanelDynamicModel.prototype.getPanelDisplayValue=function(e,t,o){if(!t)return t;for(var n=this.panels[e],r=Object.keys(t),i=0;i<r.length;i++){var s=r[i],a=n.getQuestionByValueName(s);if(a||(a=this.getSharedQuestionFromArray(s,e)),a){var l=a.getDisplayValue(o,t[s]);t[s]=l,o&&a.title&&a.title!==s&&(t[a.title]=l,delete t[s])}}return t},QuestionPanelDynamicModel.prototype.hasErrorInPanels=function(e,t){for(var o=!1,n=this.visiblePanels,r=[],i=0;i<n.length;i++)this.setOnCompleteAsyncInPanel(n[i]);for(var i=0;i<n.length;i++){var s=n[i].hasErrors(e,!!t&&t.focuseOnFirstError,t);s=this.isValueDuplicated(n[i],r,t,e)||s,this.isRenderModeList||!s||o||(this.currentIndex=i),o=s||o}return o},QuestionPanelDynamicModel.prototype.setOnCompleteAsyncInPanel=function(e){for(var t=this,o=e.questions,n=0;n<o.length;n++)o[n].onCompletedAsyncValidators=function(e){t.raiseOnCompletedAsyncValidators()}},QuestionPanelDynamicModel.prototype.isValueDuplicated=function(e,t,o,n){if(!this.keyName)return!1;var r=e.getQuestionByValueName(this.keyName);if(!r||r.isEmpty())return!1;var i=r.value;this.changingValueQuestion&&r!=this.changingValueQuestion&&r.hasErrors(n,o);for(var s=0;s<t.length;s++)if(i==t[s])return n&&r.addError(new p.KeyDuplicationError(this.keyDuplicationError,this)),o&&!o.firstErrorQuestion&&(o.firstErrorQuestion=r),!0;return t.push(i),!1},QuestionPanelDynamicModel.prototype.getPanelActions=function(e){var t=this,o=e.footerActions;return"right"!==this.panelRemoveButtonLocation&&o.push(new f.Action({id:"remove-panel-"+e.id,component:"sv-paneldynamic-remove-btn",visible:new y.ComputedUpdater(function(){return[t.canRemovePanel,"collapsed"!==e.state,"right"!==t.panelRemoveButtonLocation].every(function(e){return!0===e})}),data:{question:this,panel:e}})),this.survey&&(o=this.survey.getUpdatedPanelFooterActions(e,o,this)),o},QuestionPanelDynamicModel.prototype.createNewPanel=function(){var e=this,t=this.createAndSetupNewPanelObject(),o=this.template.toJSON();new u.JsonObject().toObject(o,t),t.renderWidth="100%",t.updateCustomWidgets(),new C(this,t),this.isDesignMode||this.isReadOnly||this.isValueEmpty(t.getValue())||this.runPanelsCondition([t],this.getDataFilteredValues(),this.getDataFilteredProperties()),t.onFirstRendering();for(var n=t.questions,r=0;r<n.length;r++)n[r].setParentQuestion(this);return t.locStrsChanged(),t.onGetFooterActionsCallback=function(){return e.getPanelActions(t)},t.onGetFooterToolbarCssCallback=function(){return e.cssClasses.panelFooter},t.registerPropertyChangedHandlers(["visible"],function(){t.visible?e.onPanelAdded(t):e.onPanelRemoved(t),e.updateFooterActions()}),t},QuestionPanelDynamicModel.prototype.createAndSetupNewPanelObject=function(){var e=this,t=this.createNewPanelObject();return t.isInteractiveDesignElement=!1,t.setParentQuestion(this),t.onGetQuestionTitleLocation=function(){return e.getTemplateQuestionTitleLocation()},t},QuestionPanelDynamicModel.prototype.getTemplateQuestionTitleLocation=function(){return"default"!=this.templateTitleLocation?this.templateTitleLocation:this.getTitleLocationCore()},QuestionPanelDynamicModel.prototype.getChildErrorLocation=function(t){return"default"!==this.templateErrorLocation?this.templateErrorLocation:e.prototype.getChildErrorLocation.call(this,t)},QuestionPanelDynamicModel.prototype.createNewPanelObject=function(){return u.Serializer.createClass("panel")},QuestionPanelDynamicModel.prototype.setPanelCountBasedOnValue=function(){if(!this.isValueChangingInternally&&!this.useTemplatePanel){var e=this.value,t=e&&Array.isArray(e)?e.length:0;0==t&&this.getPropertyValue("panelCount")>0&&(t=this.getPropertyValue("panelCount")),this.settingPanelCountBasedOnValue=!0,this.panelCount=t,this.settingPanelCountBasedOnValue=!1}},QuestionPanelDynamicModel.prototype.setQuestionValue=function(t){if(!this.settingPanelCountBasedOnValue){e.prototype.setQuestionValue.call(this,t,!1),this.setPanelCountBasedOnValue();for(var o=0;o<this.panels.length;o++)this.panelUpdateValueFromSurvey(this.panels[o]);this.updateIsAnswered()}},QuestionPanelDynamicModel.prototype.onSurveyValueChanged=function(t){if(!(void 0===t&&this.isAllPanelsEmpty())){e.prototype.onSurveyValueChanged.call(this,t);for(var o=0;o<this.panels.length;o++)this.panelSurveyValueChanged(this.panels[o]);void 0===t&&this.setValueBasedOnPanelCount(),this.updateIsReady()}},QuestionPanelDynamicModel.prototype.isAllPanelsEmpty=function(){for(var e=0;e<this.panels.length;e++)if(!r.Helpers.isValueEmpty(this.panels[e].getValue()))return!1;return!0},QuestionPanelDynamicModel.prototype.panelUpdateValueFromSurvey=function(e){for(var t=e.questions,o=this.getPanelItemData(e.data),n=0;n<t.length;n++){var r=t[n];r.updateValueFromSurvey(o[r.getValueName()]),r.updateCommentFromSurvey(o[r.getValueName()+d.settings.commentSuffix]),r.initDataUI()}},QuestionPanelDynamicModel.prototype.panelSurveyValueChanged=function(e){for(var t=e.questions,o=this.getPanelItemData(e.data),n=0;n<t.length;n++){var r=t[n];r.onSurveyValueChanged(o[r.getValueName()])}},QuestionPanelDynamicModel.prototype.onSetData=function(){e.prototype.onSetData.call(this),this.useTemplatePanel&&(this.setTemplatePanelSurveyImpl(),this.rebuildPanels())},QuestionPanelDynamicModel.prototype.isNewValueCorrect=function(e){return Array.isArray(e)},QuestionPanelDynamicModel.prototype.getItemIndex=function(e){var t=this.items.indexOf(e);return t>-1?t:this.items.length},QuestionPanelDynamicModel.prototype.getVisibleItemIndex=function(e){for(var t=this.visiblePanels,o=0;o<t.length;o++)if(t[o].data===e)return o;return t.length},QuestionPanelDynamicModel.prototype.getPanelItemData=function(e){var t=this.items,o=t.indexOf(e),n=this.value;return(o<0&&Array.isArray(n)&&n.length>t.length&&(o=t.length),o<0||!n||!Array.isArray(n)||n.length<=o)?{}:n[o]},QuestionPanelDynamicModel.prototype.setPanelItemData=function(e,t,o){if(!(this.isSetPanelItemData[t]>this.maxCheckCount)){this.isSetPanelItemData[t]||(this.isSetPanelItemData[t]=0),this.isSetPanelItemData[t]++;var n=this.items,r=n.indexOf(e);r<0&&(r=n.length);var i=this.getUnbindValue(this.value);if(i&&Array.isArray(i)||(i=[]),i.length<=r)for(var s=i.length;s<=r;s++)i.push({});if(i[r]||(i[r]={}),this.isValueEmpty(o)?delete i[r][t]:i[r][t]=o,r>=0&&r<this.panels.length&&(this.changingValueQuestion=this.panels[r].getQuestionByValueName(t)),this.value=i,this.changingValueQuestion=null,this.survey){var a={question:this,panel:e.panel,name:t,itemIndex:r,itemValue:i[r],value:o};this.survey.dynamicPanelItemValueChanged(this,a)}this.isSetPanelItemData[t]--,this.isSetPanelItemData[t]-1&&delete this.isSetPanelItemData[t]}},QuestionPanelDynamicModel.prototype.getRootData=function(){return this.data},QuestionPanelDynamicModel.prototype.getPlainData=function(t){void 0===t&&(t={includeEmpty:!0});var o=e.prototype.getPlainData.call(this,t);return o&&(o.isNode=!0,o.data=this.panels.map(function(e,o){var n={name:e.name||o,title:e.title||"Panel",value:e.getValue(),displayValue:e.getValue(),getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!0,data:e.questions.map(function(e){return e.getPlainData(t)}).filter(function(e){return!!e})};return(t.calculations||[]).forEach(function(t){n[t.propertyName]=e[t.propertyName]}),n})),o},QuestionPanelDynamicModel.prototype.updateElementCss=function(t){e.prototype.updateElementCss.call(this,t);for(var o=0;o<this.panels.length;o++)this.panels[o].updateElementCss(t)},Object.defineProperty(QuestionPanelDynamicModel.prototype,"progressText",{get:function(){var e=this.visiblePanelCount;return this.getLocalizationFormatString("panelDynamicProgressText",this.currentIndex+1,e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"progress",{get:function(){return(this.currentIndex+1)/this.visiblePanelCount*100+"%"},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.getRootCss=function(){return new g.CssClassBuilder().append(e.prototype.getRootCss.call(this)).append(this.cssClasses.empty,this.getShowNoEntriesPlaceholder()).toString()},Object.defineProperty(QuestionPanelDynamicModel.prototype,"cssHeader",{get:function(){var e=this.isRenderModeTab&&!!this.panelCount;return new g.CssClassBuilder().append(this.cssClasses.header).append(this.cssClasses.headerTop,this.hasTitleOnTop||e).append(this.cssClasses.headerTab,e).toString()},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.getPanelWrapperCss=function(){return new g.CssClassBuilder().append(this.cssClasses.panelWrapper).append(this.cssClasses.panelWrapperInRow,"right"===this.panelRemoveButtonLocation).toString()},QuestionPanelDynamicModel.prototype.getPanelRemoveButtonCss=function(){return new g.CssClassBuilder().append(this.cssClasses.button).append(this.cssClasses.buttonRemove).append(this.cssClasses.buttonRemoveRight,"right"===this.panelRemoveButtonLocation).toString()},QuestionPanelDynamicModel.prototype.getAddButtonCss=function(){return new g.CssClassBuilder().append(this.cssClasses.button).append(this.cssClasses.buttonAdd).append(this.cssClasses.buttonAdd+"--list-mode","list"===this.renderMode).toString()},QuestionPanelDynamicModel.prototype.getPrevButtonCss=function(){return new g.CssClassBuilder().append(this.cssClasses.buttonPrev).append(this.cssClasses.buttonPrevDisabled,!this.isPrevButtonVisible).toString()},QuestionPanelDynamicModel.prototype.getNextButtonCss=function(){return new g.CssClassBuilder().append(this.cssClasses.buttonNext).append(this.cssClasses.buttonNextDisabled,!this.isNextButtonVisible).toString()},Object.defineProperty(QuestionPanelDynamicModel.prototype,"noEntriesText",{get:function(){return this.getLocalizableStringText("noEntriesText")},set:function(e){this.setLocalizableStringText("noEntriesText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"locNoEntriesText",{get:function(){return this.getLocalizableString("noEntriesText")},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.getShowNoEntriesPlaceholder=function(){return!!this.cssClasses.noEntriesPlaceholder&&!this.isDesignMode&&0===this.visiblePanelCount},QuestionPanelDynamicModel.prototype.needResponsiveWidth=function(){var e=this.getPanel();return!!(e&&e.needResponsiveWidth())},QuestionPanelDynamicModel.prototype.getAdditionalTitleToolbar=function(){return this.isRenderModeTab?(this.additionalTitleToolbarValue||(this.additionalTitleToolbarValue=new m.AdaptiveActionContainer,this.additionalTitleToolbarValue.dotsItem.popupModel.showPointer=!1,this.additionalTitleToolbarValue.dotsItem.popupModel.verticalPosition="bottom",this.additionalTitleToolbarValue.dotsItem.popupModel.horizontalPosition="center",this.updateElementCss(!1)),this.additionalTitleToolbarValue):null},Object.defineProperty(QuestionPanelDynamicModel.prototype,"footerToolbar",{get:function(){return this.footerToolbarValue||this.initFooterToolbar(),this.footerToolbarValue},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.updateFooterActions=function(){this.updateFooterActionsCallback&&this.updateFooterActionsCallback()},QuestionPanelDynamicModel.prototype.initFooterToolbar=function(){var e=this;this.footerToolbarValue=this.createActionContainer();var t=[],o=new f.Action({id:"sv-pd-prev-btn",title:this.panelPrevText,action:function(){e.goToPrevPanel()}}),n=new f.Action({id:"sv-pd-next-btn",title:this.panelNextText,action:function(){e.goToNextPanel()}}),r=new f.Action({id:"sv-pd-add-btn",component:"sv-paneldynamic-add-btn",data:{question:this}}),i=new f.Action({id:"sv-prev-btn-icon",component:"sv-paneldynamic-prev-btn",data:{question:this}}),s=new f.Action({id:"sv-pd-progress-text",component:"sv-paneldynamic-progress-text",data:{question:this}}),a=new f.Action({id:"sv-pd-next-btn-icon",component:"sv-paneldynamic-next-btn",data:{question:this}});t.push(o,n,r,i,s,a),this.updateFooterActionsCallback=function(){var t=e.legacyNavigation,l=e.isRenderModeList,u=e.isMobile,c=!t&&!l;o.visible=c&&e.currentIndex>0,n.visible=c&&e.currentIndex<e.visiblePanelCount-1,n.needSpace=u&&n.visible&&o.visible,r.visible=e.canAddPanel,r.needSpace=e.isMobile&&!n.visible&&o.visible,s.visible=!e.isRenderModeList&&!u,s.needSpace=!t&&!e.isMobile;var p=t&&!l;i.visible=p,a.visible=p,i.needSpace=p},this.updateFooterActionsCallback(),this.footerToolbarValue.setItems(t)},QuestionPanelDynamicModel.prototype.createTabByPanel=function(e,t){var o=this;if(this.isRenderModeTab){var n=new s.LocalizableString(e,!0);n.onGetTextCallback=function(n){if(!o.survey)return n;var r={title:n,panel:e,visiblePanelIndex:t};return o.survey.dynamicPanelGetTabTitle(o,r),r.title},n.sharedData=this.locTemplateTabTitle;var r=this.getPanelIndexById(e.id)===this.currentIndex,i=new f.Action({id:e.id,pressed:r,locTitle:n,disableHide:r,action:function(){o.currentIndex=o.getPanelIndexById(i.id)}});return i}},QuestionPanelDynamicModel.prototype.getAdditionalTitleToolbarCss=function(e){var t=null!=e?e:this.cssClasses;return new g.CssClassBuilder().append(t.tabsRoot).append(t.tabsLeft,"left"===this.tabAlign).append(t.tabsRight,"right"===this.tabAlign).append(t.tabsCenter,"center"===this.tabAlign).toString()},QuestionPanelDynamicModel.prototype.updateTabToolbarItemsPressedState=function(){if(this.isRenderModeTab&&!(this.currentIndex<0)&&!(this.currentIndex>=this.visiblePanelCount)){var e=this.visiblePanels[this.currentIndex];this.additionalTitleToolbar.renderedActions.forEach(function(t){var o=t.id===e.id;t.pressed=o,t.disableHide=o,"popup"===t.mode&&t.disableHide&&t.raiseUpdate()})}},QuestionPanelDynamicModel.prototype.updateTabToolbar=function(){var e=this;if(this.isRenderModeTab){for(var t=[],o=this.visiblePanels,_loop_1=function(r){n.visiblePanels.forEach(function(n){return t.push(e.createTabByPanel(o[r],r))})},n=this,r=0;r<o.length;r++)_loop_1(r);this.additionalTitleToolbar.setItems(t)}},QuestionPanelDynamicModel.prototype.addTabFromToolbar=function(e,t){if(this.isRenderModeTab){var o=this.createTabByPanel(e,t);this.additionalTitleToolbar.actions.splice(t,0,o),this.updateTabToolbarItemsPressedState()}},QuestionPanelDynamicModel.prototype.removeTabFromToolbar=function(e){if(this.isRenderModeTab){var t=this.additionalTitleToolbar.getActionById(e.id);t&&(this.additionalTitleToolbar.actions.splice(this.additionalTitleToolbar.actions.indexOf(t),1),this.updateTabToolbarItemsPressedState())}},Object.defineProperty(QuestionPanelDynamicModel.prototype,"showLegacyNavigation",{get:function(){return!this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionPanelDynamicModel.prototype,"showNavigation",{get:function(){return this.visiblePanelCount>0&&!this.showLegacyNavigation&&!!this.cssClasses.footer},enumerable:!1,configurable:!0}),QuestionPanelDynamicModel.prototype.showSeparator=function(e){return this.isRenderModeList&&e<this.visiblePanelCount-1},QuestionPanelDynamicModel.prototype.calcCssClasses=function(t){var o=e.prototype.calcCssClasses.call(this,t),n=this.additionalTitleToolbar;return n&&(n.containerCss=this.getAdditionalTitleToolbarCss(o),n.cssClasses=o.tabs,n.dotsItem.cssClasses=o.tabs,n.dotsItem.popupModel.contentComponentData.model.cssClasses=t.list),o},QuestionPanelDynamicModel.maxCheckCount=3,__decorate([Object(u.property)({defaultValue:!1,onSet:function(e,t){t.updateFooterActions()}})],QuestionPanelDynamicModel.prototype,"legacyNavigation",void 0),QuestionPanelDynamicModel}(l.Question);u.Serializer.addClass("paneldynamic",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"templateElements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"templateTitle:text",serializationProperty:"locTemplateTitle"},{name:"templateTabTitle",serializationProperty:"locTemplateTabTitle",visibleIf:function(e){return"tab"===e.renderMode}},{name:"templateDescription:text",serializationProperty:"locTemplateDescription"},{name:"minWidth",defaultFunc:function(){return"auto"}},{name:"noEntriesText:text",serializationProperty:"locNoEntriesText"},{name:"allowAddPanel:boolean",default:!0},{name:"allowRemovePanel:boolean",default:!0},{name:"panelCount:number",isBindable:!0,default:0,choices:[0,1,2,3,4,5,6,7,8,9,10]},{name:"minPanelCount:number",default:0,minValue:0},{name:"maxPanelCount:number",default:d.settings.panel.maxPanelCount},"defaultPanelValue:panelvalue","defaultValueFromLastPanel:boolean",{name:"panelsState",default:"default",choices:["default","collapsed","expanded","firstExpanded"]},{name:"keyName"},{name:"keyDuplicationError",serializationProperty:"locKeyDuplicationError"},{name:"confirmDelete:boolean"},{name:"confirmDeleteText",serializationProperty:"locConfirmDeleteText"},{name:"panelAddText",serializationProperty:"locPanelAddText"},{name:"panelRemoveText",serializationProperty:"locPanelRemoveText"},{name:"panelPrevText",serializationProperty:"locPanelPrevText"},{name:"panelNextText",serializationProperty:"locPanelNextText"},{name:"showQuestionNumbers",default:"off",choices:["off","onPanel","onSurvey"]},{name:"showRangeInProgress:boolean",default:!0},{name:"renderMode",default:"list",choices:["list","progressTop","progressBottom","progressTopBottom","tab"]},{name:"tabAlign",default:"center",choices:["center","left","right"],visibleIf:function(e){return"tab"===e.renderMode}},{name:"templateTitleLocation",default:"default",choices:["default","top","bottom","left"]},{name:"templateErrorLocation",default:"default",choices:["default","top","bottom"]},{name:"templateVisibleIf:expression",category:"logic"},{name:"panelRemoveButtonLocation",default:"bottom",choices:["bottom","right"]}],function(){return new P("")},"question"),c.QuestionFactory.Instance.registerQuestion("paneldynamic",function(e){return new P(e)})},"./src/question_radiogroup.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionRadiogroupModel",function(){return c});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./questionfactory */"./src/questionfactory.ts"),s=o(/*! ./question_baseselect */"./src/question_baseselect.ts"),a=o(/*! ./actions/action */"./src/actions/action.ts"),l=o(/*! ./base */"./src/base.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),c=function(e){function QuestionRadiogroupModel(t){return e.call(this,t)||this}return u(QuestionRadiogroupModel,e),QuestionRadiogroupModel.prototype.getDefaultItemComponent=function(){return"survey-radiogroup-item"},QuestionRadiogroupModel.prototype.getType=function(){return"radiogroup"},QuestionRadiogroupModel.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},Object.defineProperty(QuestionRadiogroupModel.prototype,"selectedItem",{get:function(){return this.getSingleSelectedItem()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRadiogroupModel.prototype,"showClearButton",{get:function(){return this.getPropertyValue("showClearButton")},set:function(e){this.setPropertyValue("showClearButton",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRadiogroupModel.prototype,"canShowClearButton",{get:function(){return this.showClearButton&&!this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRadiogroupModel.prototype,"clearButtonCaption",{get:function(){return this.getLocalizationString("clearCaption")},enumerable:!1,configurable:!0}),QuestionRadiogroupModel.prototype.supportGoNextPageAutomatic=function(){return!0===this.isMouseDown},QuestionRadiogroupModel.prototype.setNewComment=function(t){this.isMouseDown=!0,e.prototype.setNewComment.call(this,t),this.isMouseDown=!1},Object.defineProperty(QuestionRadiogroupModel.prototype,"showClearButtonInContent",{get:function(){return!this.isDefaultV2Theme&&this.canShowClearButton},enumerable:!1,configurable:!0}),QuestionRadiogroupModel.prototype.clickItemHandler=function(e){this.renderedValue=e.value},QuestionRadiogroupModel.prototype.getDefaultTitleActions=function(){var e=this,t=[];if(this.isDefaultV2Theme&&!this.isDesignMode){var o=new a.Action({title:this.clearButtonCaption,id:"sv-clr-btn-"+this.id,action:function(){e.clearValue()},innerCss:this.cssClasses.clearButton,visible:new l.ComputedUpdater(function(){return e.canShowClearButton})});t.push(o)}return t},Object.defineProperty(QuestionRadiogroupModel.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRadiogroupModel.prototype,"a11y_input_ariaRole",{get:function(){return"radiogroup"},enumerable:!1,configurable:!0}),QuestionRadiogroupModel}(s.QuestionCheckboxBase);r.Serializer.addClass("radiogroup",[{name:"showClearButton:boolean",default:!1},{name:"separateSpecialChoices",visible:!0},{name:"itemComponent",visible:!1,default:"survey-radiogroup-item"}],function(){return new c("")},"checkboxbase"),i.QuestionFactory.Instance.registerQuestion("radiogroup",function(e){var t=new c(e);return t.choices=i.QuestionFactory.DefaultChoices,t})},"./src/question_ranking.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionRankingModel",function(){return f});var n,r=o(/*! ./dragdrop/ranking-choices */"./src/dragdrop/ranking-choices.ts"),i=o(/*! ./dragdrop/ranking-select-to-rank */"./src/dragdrop/ranking-select-to-rank.ts"),s=o(/*! ./itemvalue */"./src/itemvalue.ts"),a=o(/*! ./jsonobject */"./src/jsonobject.ts"),l=o(/*! ./questionfactory */"./src/questionfactory.ts"),u=o(/*! ./question_checkbox */"./src/question_checkbox.ts"),c=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),p=o(/*! ./utils/devices */"./src/utils/devices.ts"),d=o(/*! ./helpers */"./src/helpers.ts"),h=o(/*! ../src/settings */"./src/settings.ts"),g=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},f=function(e){function QuestionRankingModel(t){var o=e.call(this,t)||this;return o.domNode=null,o.onVisibleChoicesChanged=function(){if(e.prototype.onVisibleChoicesChanged.call(o),1===o.visibleChoices.length){o.value=[],o.value.push(o.visibleChoices[0].value),o.updateRankingChoices();return}if(o.isEmpty()||o.selectToRankEnabled){o.updateRankingChoices();return}o.visibleChoices.length>o.value.length&&o.addToValueByVisibleChoices(),o.visibleChoices.length<o.value.length&&o.removeFromValueByVisibleChoices(),o.updateRankingChoices()},o.localeChanged=function(){e.prototype.localeChanged.call(o),o.updateRankingChoices()},o.handlePointerDown=function(e,t,n){var r=e.target;o.isDragStartNodeValid(r)&&o.allowStartDrag&&o.canStartDragDueMaxSelectedChoices(r)&&o.canStartDragDueItemEnabled(t)&&o.dragDropRankingChoices.startDrag(e,t,o,n)},o.handleKeydown=function(e,t){if(!o.isDesignMode){var n=e.key,r=o.rankingChoices.indexOf(t);if(o.selectToRankEnabled){o.handleKeydownSelectToRank(e,t);return}"ArrowUp"===n&&r&&(o.handleArrowKeys(r,t,!1),e.preventDefault()),"ArrowDown"===n&&r!==o.rankingChoices.length-1&&(o.handleArrowKeys(r,t,!0),e.preventDefault())}},o.handleArrowKeys=function(e,t,n){var r=n?1:-1,i=o.rankingChoices;i.splice(e,1),i.splice(e+r,0,t),o.setValue(),setTimeout(function(){o.focusItem(e+r)},1)},o.focusItem=function(e,t){if(o.selectToRankEnabled&&t){var n=o.domNode.querySelectorAll("[data-ranking='"+t+"'] ."+o.cssClasses.item);n[e].focus()}else{var n=o.domNode.querySelectorAll("."+o.cssClasses.item);n[e].focus()}},o.setValue=function(){var e=[];o.rankingChoices.forEach(function(t){e.push(t.value)}),o.value=e},o.createNewArray("rankingChoices"),o.registerFunctionOnPropertyValueChanged("selectToRankEnabled",function(){o.clearValue(),o.setDragDropRankingChoices(),o.updateRankingChoices()}),o}return g(QuestionRankingModel,e),QuestionRankingModel.prototype.getDefaultItemComponent=function(){return""},QuestionRankingModel.prototype.getType=function(){return"ranking"},QuestionRankingModel.prototype.getItemTabIndex=function(e){if(!this.isDesignMode&&!e.disabled)return 0},Object.defineProperty(QuestionRankingModel.prototype,"rootClass",{get:function(){return new c.CssClassBuilder().append(this.cssClasses.root).append(this.cssClasses.rootMobileMod,p.IsMobile).append(this.cssClasses.rootDisabled,this.isReadOnly).append(this.cssClasses.rootDesignMode,!!this.isDesignMode).append(this.cssClasses.itemOnError,this.hasCssError()).append(this.cssClasses.rootDragHandleAreaIcon,"icon"===h.settings.rankingDragHandleArea).append(this.cssClasses.rootSelectToRankMod,this.selectToRankEnabled).append(this.cssClasses.rootSelectToRankAlignHorizontal,this.selectToRankEnabled&&"horizontal"===this.selectToRankAreasLayout).append(this.cssClasses.rootSelectToRankAlignVertical,this.selectToRankEnabled&&"vertical"===this.selectToRankAreasLayout).toString()},enumerable:!1,configurable:!0}),QuestionRankingModel.prototype.getItemClassCore=function(t,o){var n=this.rankingChoices.indexOf(t),r=this.rankingChoices.indexOf(this.currentDropTarget);return new c.CssClassBuilder().append(e.prototype.getItemClassCore.call(this,t,o)).append(this.cssClasses.itemGhostMod,this.currentDropTarget===t).append("sv-dragdrop-movedown",n===r+1&&"down"===this.dropTargetNodeMove).append("sv-dragdrop-moveup",n===r-1&&"up"===this.dropTargetNodeMove).toString()},QuestionRankingModel.prototype.getContainerClasses=function(e){var t=!1,o="to"===e,n="from"===e;return o?t=0===this.rankingChoices.length:n&&(t=0===this.unRankingChoices.length),new c.CssClassBuilder().append(this.cssClasses.container).append(this.cssClasses.containerToMode,o).append(this.cssClasses.containerFromMode,n).append(this.cssClasses.containerEmptyMode,t).toString()},QuestionRankingModel.prototype.isItemCurrentDropTarget=function(e){return this.dragDropRankingChoices.dropTarget===e},Object.defineProperty(QuestionRankingModel.prototype,"ghostPositionCssClass",{get:function(){return"top"===this.ghostPosition?this.cssClasses.dragDropGhostPositionTop:"bottom"===this.ghostPosition?this.cssClasses.dragDropGhostPositionBottom:""},enumerable:!1,configurable:!0}),QuestionRankingModel.prototype.getItemIndexClasses=function(e){var t;return t=this.selectToRankEnabled?-1!==this.unRankingChoices.indexOf(e):this.isEmpty(),new c.CssClassBuilder().append(this.cssClasses.itemIndex).append(this.cssClasses.itemIndexEmptyMode,t).toString()},QuestionRankingModel.prototype.getNumberByIndex=function(e){return this.isEmpty()?"":e+1+""},QuestionRankingModel.prototype.setSurveyImpl=function(t,o){e.prototype.setSurveyImpl.call(this,t,o),this.setDragDropRankingChoices(),this.updateRankingChoices()},QuestionRankingModel.prototype.isAnswerCorrect=function(){return d.Helpers.isArraysEqual(this.value,this.correctAnswer,!1)},Object.defineProperty(QuestionRankingModel.prototype,"requireStrictCompare",{get:function(){return!0},enumerable:!1,configurable:!0}),QuestionRankingModel.prototype.onSurveyValueChanged=function(t){e.prototype.onSurveyValueChanged.call(this,t),this.isLoadingFromJson||this.updateRankingChoices()},QuestionRankingModel.prototype.addToValueByVisibleChoices=function(){var e=this.value.slice();this.visibleChoices.forEach(function(t){-1===e.indexOf(t.value)&&e.push(t.value)}),this.value=e},QuestionRankingModel.prototype.removeFromValueByVisibleChoices=function(){for(var e=this.value.slice(),t=this.visibleChoices,o=this.value.length-1;o>=0;o--)s.ItemValue.getItemByValue(t,this.value[o])||e.splice(o,1);this.value=e},Object.defineProperty(QuestionRankingModel.prototype,"rankingChoices",{get:function(){return this.getPropertyValue("rankingChoices",[])},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRankingModel.prototype,"unRankingChoices",{get:function(){var e=[],t=this.rankingChoices;return this.visibleChoices.forEach(function(t){e.push(t)}),t.forEach(function(t){e.forEach(function(o,n){o.value===t.value&&e.splice(n,1)})}),e},enumerable:!1,configurable:!0}),QuestionRankingModel.prototype.updateRankingChoices=function(e){var t=this;if(void 0===e&&(e=!1),this.selectToRankEnabled){this.updateRankingChoicesSelectToRankMode(e);return}var o=[];if(e&&this.setPropertyValue("rankingChoices",[]),this.isEmpty()){this.setPropertyValue("rankingChoices",this.visibleChoices);return}this.value.forEach(function(e){t.visibleChoices.forEach(function(t){t.value===e&&o.push(t)})}),this.setPropertyValue("rankingChoices",o)},QuestionRankingModel.prototype.updateRankingChoicesSelectToRankMode=function(e){var t=this;if(this.isEmpty()){this.setPropertyValue("rankingChoices",[]);return}var o=[];this.value.forEach(function(e){t.visibleChoices.forEach(function(t){t.value===e&&o.push(t)})}),this.setPropertyValue("rankingChoices",o)},QuestionRankingModel.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.setDragDropRankingChoices()},QuestionRankingModel.prototype.setDragDropRankingChoices=function(){this.dragDropRankingChoices=this.createDragDropRankingChoices()},QuestionRankingModel.prototype.createDragDropRankingChoices=function(){return this.selectToRankEnabled?new i.DragDropRankingSelectToRank(this.survey,null,this.longTap):new r.DragDropRankingChoices(this.survey,null,this.longTap)},QuestionRankingModel.prototype.isDragStartNodeValid=function(e){return"icon"!==h.settings.rankingDragHandleArea||e.classList.contains(this.cssClasses.itemIconHoverMod)},Object.defineProperty(QuestionRankingModel.prototype,"allowStartDrag",{get:function(){return!this.isReadOnly&&!this.isDesignMode},enumerable:!1,configurable:!0}),QuestionRankingModel.prototype.canStartDragDueMaxSelectedChoices=function(e){return!this.selectToRankEnabled||!e.closest("[data-ranking='from-container']")||this.checkMaxSelectedChoicesUnreached()},QuestionRankingModel.prototype.canStartDragDueItemEnabled=function(e){return e.enabled},QuestionRankingModel.prototype.checkMaxSelectedChoicesUnreached=function(){if(this.maxSelectedChoices<1)return!0;var e=this.value;return(Array.isArray(e)?e.length:0)<this.maxSelectedChoices},QuestionRankingModel.prototype.afterRenderQuestionElement=function(t){this.domNode=t,e.prototype.afterRenderQuestionElement.call(this,t)},QuestionRankingModel.prototype.beforeDestroyQuestionElement=function(t){e.prototype.beforeDestroyQuestionElement.call(this,t)},QuestionRankingModel.prototype.supportSelectAll=function(){return!1},QuestionRankingModel.prototype.supportOther=function(){return!1},QuestionRankingModel.prototype.supportNone=function(){return!1},QuestionRankingModel.prototype.handleKeydownSelectToRank=function(e,t){if(!this.isDesignMode){var o,n=e.key;if(" "===n||"ArrowUp"===n||"ArrowDown"===n){var r=this.dragDropRankingChoices,i=this.rankingChoices,s=-1!==i.indexOf(t),a=(s?i:this.unRankingChoices).indexOf(t);if(!(a<0)){if(" "===n&&!s){o=0,r.selectToRank(this,a,o),this.setValueAfterKeydown(o,"to-container");return}if(s){if(" "===n){r.unselectFromRank(this,a),o=this.unRankingChoices.indexOf(t),this.setValueAfterKeydown(o,"from-container");return}var l="ArrowUp"===n?-1:"ArrowDown"===n?1:0;0!==l&&((o=a+l)<0||o>=i.length||(r.reorderRankedItem(this,a,o),this.setValueAfterKeydown(o,"to-container")))}}}}},QuestionRankingModel.prototype.setValueAfterKeydown=function(e,t){var o=this;this.setValue(),setTimeout(function(){o.focusItem(e,t)},1),event.preventDefault()},QuestionRankingModel.prototype.getIconHoverCss=function(){return new c.CssClassBuilder().append(this.cssClasses.itemIcon).append(this.cssClasses.itemIconHoverMod).toString()},QuestionRankingModel.prototype.getIconFocusCss=function(){return new c.CssClassBuilder().append(this.cssClasses.itemIcon).append(this.cssClasses.itemIconFocusMod).toString()},Object.defineProperty(QuestionRankingModel.prototype,"longTap",{get:function(){return this.getPropertyValue("longTap")},set:function(e){this.setPropertyValue("longTap",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRankingModel.prototype,"selectToRankEnabled",{get:function(){return this.getPropertyValue("selectToRankEnabled",!1)},set:function(e){this.setPropertyValue("selectToRankEnabled",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRankingModel.prototype,"selectToRankAreasLayout",{get:function(){return p.IsMobile?"vertical":this.getPropertyValue("selectToRankAreasLayout","horizontal")},set:function(e){this.setPropertyValue("selectToRankAreasLayout",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRankingModel.prototype,"useFullItemSizeForShortcut",{get:function(){return this.getPropertyValue("useFullItemSizeForShortcut")},set:function(e){this.setPropertyValue("useFullItemSizeForShortcut",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRankingModel.prototype,"dragDropSvgIcon",{get:function(){return this.cssClasses.dragDropSvgIconId||"#icon-drag-n-drop"},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRankingModel.prototype,"arrowsSvgIcon",{get:function(){return this.cssClasses.arrowsSvgIconId||"#icon-ranking-arrows"},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRankingModel.prototype,"dashSvgIcon",{get:function(){return this.cssClasses.dashSvgIconId||"#icon-ranking-dash"},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRankingModel.prototype,"isNewA11yStructure",{get:function(){return!1},enumerable:!1,configurable:!0}),__decorate([Object(a.property)({defaultValue:null})],QuestionRankingModel.prototype,"currentDropTarget",void 0),__decorate([Object(a.property)({defaultValue:null})],QuestionRankingModel.prototype,"dropTargetNodeMove",void 0),__decorate([Object(a.property)({localizable:{defaultStr:"selectToRankEmptyRankedAreaText"}})],QuestionRankingModel.prototype,"selectToRankEmptyRankedAreaText",void 0),__decorate([Object(a.property)({localizable:{defaultStr:"selectToRankEmptyUnrankedAreaText"}})],QuestionRankingModel.prototype,"selectToRankEmptyUnrankedAreaText",void 0),QuestionRankingModel}(u.QuestionCheckboxModel);a.Serializer.addClass("ranking",[{name:"showOtherItem",visible:!1,isSerializable:!1},{name:"otherText",visible:!1,isSerializable:!1},{name:"otherErrorText",visible:!1,isSerializable:!1},{name:"storeOthersAsComment",visible:!1,isSerializable:!1},{name:"showNoneItem",visible:!1,isSerializable:!1},{name:"noneText",visible:!1,isSerializable:!1},{name:"showSelectAllItem",visible:!1,isSerializable:!1},{name:"selectAllText",visible:!1,isSerializable:!1},{name:"colCount:number",visible:!1,isSerializable:!1},{name:"separateSpecialChoices",visible:!1,isSerializable:!1},{name:"longTap",default:!0,visible:!1,isSerializable:!1},{name:"selectToRankEnabled:switch",default:!1,visible:!0,isSerializable:!0},{name:"selectToRankAreasLayout",default:"horizontal",choices:["horizontal","vertical"],dependsOn:"selectToRankEnabled",visibleIf:function(e){return!!e.selectToRankEnabled},visible:!0,isSerializable:!0},{name:"maxSelectedChoices:number",visible:!0,default:0,dependsOn:"selectToRankEnabled",visibleIf:function(e){return!!e.selectToRankEnabled},isSerializable:!0},{name:"minSelectedChoices:number",visible:!0,default:0,dependsOn:"selectToRankEnabled",visibleIf:function(e){return!!e.selectToRankEnabled},isSerializable:!0},{name:"itemComponent",visible:!1,default:""}],function(){return new f("")},"checkbox"),l.QuestionFactory.Instance.registerQuestion("ranking",function(e){var t=new f(e);return t.choices=l.QuestionFactory.DefaultChoices,t})},"./src/question_rating.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"RenderedRatingItem",function(){return f}),o.d(t,"QuestionRatingModel",function(){return y});var n,r=o(/*! ./itemvalue */"./src/itemvalue.ts"),i=o(/*! ./question */"./src/question.ts"),s=o(/*! ./jsonobject */"./src/jsonobject.ts"),a=o(/*! ./questionfactory */"./src/questionfactory.ts"),l=o(/*! ./settings */"./src/settings.ts"),u=o(/*! ./surveyStrings */"./src/surveyStrings.ts"),c=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),p=o(/*! ./base */"./src/base.ts"),d=o(/*! ./utils/utils */"./src/utils/utils.ts"),h=o(/*! ./utils/devices */"./src/utils/devices.ts"),g=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},f=function(e){function RenderedRatingItem(t,o){void 0===o&&(o=null);var n=e.call(this)||this;return n.itemValue=t,n.locString=o,n.locText.onStringChanged.add(n.onStringChangedCallback.bind(n)),n.onStringChangedCallback(),n}return g(RenderedRatingItem,e),RenderedRatingItem.prototype.onStringChangedCallback=function(){this.text=this.itemValue.text},Object.defineProperty(RenderedRatingItem.prototype,"value",{get:function(){return this.itemValue.getPropertyValue("value")},enumerable:!1,configurable:!0}),Object.defineProperty(RenderedRatingItem.prototype,"locText",{get:function(){return this.locString||this.itemValue.locText},enumerable:!1,configurable:!0}),__decorate([Object(s.property)({defaultValue:""})],RenderedRatingItem.prototype,"highlight",void 0),__decorate([Object(s.property)({defaultValue:""})],RenderedRatingItem.prototype,"text",void 0),__decorate([Object(s.property)()],RenderedRatingItem.prototype,"style",void 0),RenderedRatingItem}(p.Base),y=function(e){function QuestionRatingModel(t){var o=e.call(this,t)||this;return o._syncPropertiesChanging=!1,o.createItemValues("rateValues"),o.createRenderedRateItems(),o.createLocalizableString("ratingOptionsCaption",o,!1,!0),o.registerFunctionOnPropertiesValueChanged(["rateMin","rateMax","minRateDescription","maxRateDescription","rateStep","displayRateDescriptionsAsExtremeItems"],function(){return o.createRenderedRateItems()}),o.registerFunctionOnPropertiesValueChanged(["rateType"],function(){o.setIconsToRateValues(),o.createRenderedRateItems(),o.updateRateCount()}),o.registerFunctionOnPropertiesValueChanged(["rateValues"],function(){o.autoGenerate=!1,o.setIconsToRateValues(),o.createRenderedRateItems()}),o.registerFunctionOnPropertiesValueChanged(["rateColorMode","scaleColorMode"],function(){o.updateColors(o.survey.themeVariables)}),o.registerFunctionOnPropertiesValueChanged(["autoGenerate"],function(){o.autoGenerate||0!==o.rateValues.length||o.setPropertyValue("rateValues",o.visibleRateValues),o.autoGenerate&&(o.rateValues.length=0,o.updateRateMax()),o.createRenderedRateItems()}),o.createLocalizableString("minRateDescription",o,!0),o.createLocalizableString("maxRateDescription",o,!0),o.initPropertyDependencies(),o}return g(QuestionRatingModel,e),QuestionRatingModel.prototype.setIconsToRateValues=function(){var e=this;"smileys"==this.rateType&&this.rateValues.map(function(t){return t.icon=e.getItemSmiley(t)})},QuestionRatingModel.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.hasMinRateDescription=!!this.minRateDescription,this.hasMaxRateDescription=!!this.maxRateDescription,void 0!==this.jsonObj.rateMin&&void 0!==this.jsonObj.rateCount&&void 0===this.jsonObj.rateMax&&this.updateRateMax(),void 0!==this.jsonObj.rateMax&&void 0!==this.jsonObj.rateCount&&void 0===this.jsonObj.rateMin&&this.updateRateMin(),void 0===this.jsonObj.autoGenerate&&void 0!==this.jsonObj.rateValues&&(this.autoGenerate=!this.jsonObj.rateValues.length),this.updateRateCount(),this.setIconsToRateValues(),this.createRenderedRateItems()},QuestionRatingModel.prototype.registerSychProperties=function(e,t){var o=this;this.registerFunctionOnPropertiesValueChanged(e,function(){o._syncPropertiesChanging||(o._syncPropertiesChanging=!0,t(),o._syncPropertiesChanging=!1)})},QuestionRatingModel.prototype.useRateValues=function(){return!!this.rateValues.length&&!this.autoGenerate},QuestionRatingModel.prototype.updateRateMax=function(){this.rateMax=this.rateMin+this.rateStep*(this.rateCount-1)},QuestionRatingModel.prototype.updateRateMin=function(){this.rateMin=this.rateMax-this.rateStep*(this.rateCount-1)},QuestionRatingModel.prototype.updateRateCount=function(){var e=0;(e=this.useRateValues()?this.rateValues.length:Math.trunc((this.rateMax-this.rateMin)/(this.rateStep||1))+1)>10&&"smileys"==this.rateDisplayMode&&(e=10),this.rateCount=e,this.rateValues.length>e&&this.rateValues.splice(e,this.rateValues.length-e)},QuestionRatingModel.prototype.initPropertyDependencies=function(){var e=this;this.registerSychProperties(["rateCount"],function(){if(e.useRateValues()){if(e.rateCount<e.rateValues.length)e.rateCount>=10&&"smileys"==e.rateDisplayMode||e.rateValues.splice(e.rateCount,e.rateValues.length-e.rateCount);else for(var t=e.rateValues.length;t<e.rateCount;t++)e.rateValues.push(new r.ItemValue(u.surveyLocalization.getString("choices_Item")+(t+1)))}else e.rateMax=e.rateMin+e.rateStep*(e.rateCount-1)}),this.registerSychProperties(["rateMin","rateMax","rateStep","rateValues"],function(){e.updateRateCount()})},Object.defineProperty(QuestionRatingModel.prototype,"showSelectedItemLocText",{get:function(){return!this.readOnly&&!this.inputHasValue&&!!this.selectedItemLocText},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"selectedItemLocText",{get:function(){var e,t=this;return!this.readOnly&&(null===(e=this.visibleRateValues.filter(function(e){return e.value==t.value})[0])||void 0===e?void 0:e.locText)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"rateValues",{get:function(){return this.getPropertyValue("rateValues")},set:function(e){this.setPropertyValue("rateValues",e),this.createRenderedRateItems()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"rateMin",{get:function(){return this.getPropertyValue("rateMin")},set:function(e){this.setPropertyValue("rateMin",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"rateMax",{get:function(){return this.getPropertyValue("rateMax")},set:function(e){this.setPropertyValue("rateMax",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"rateStep",{get:function(){return this.getPropertyValue("rateStep")},set:function(e){this.setPropertyValue("rateStep",e)},enumerable:!1,configurable:!0}),QuestionRatingModel.prototype.updateColors=function(e){"monochrome"!==this.colorMode&&"undefined"!=typeof document&&document&&(QuestionRatingModel.colorsCalculated||(QuestionRatingModel.badColor=getRGBColor("--sjs-special-red","--sd-rating-bad-color"),QuestionRatingModel.normalColor=getRGBColor("--sjs-special-yellow","--sd-rating-normal-color"),QuestionRatingModel.goodColor=getRGBColor("--sjs-special-green","--sd-rating-good-color"),QuestionRatingModel.badColorLight=getRGBColor("--sjs-special-red-light","--sd-rating-bad-color-light"),QuestionRatingModel.normalColorLight=getRGBColor("--sjs-special-yellow-light","--sd-rating-normal-color-light"),QuestionRatingModel.goodColorLight=getRGBColor("--sjs-special-green-light","--sd-rating-good-color-light"),this.colorsCalculated=!0));function getRGBColor(t,o){var n=!!e&&e[t];if(!n){var r=getComputedStyle(document.documentElement);n=r.getPropertyValue&&r.getPropertyValue(o)}if(!n)return null;var i=document.createElement("canvas").getContext("2d");i.fillStyle=n;var s=i.fillStyle;if(s.startsWith("rgba"))return s.substring(5,s.length-1).split(",").map(function(e){return+e.trim()});var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s);return a?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),1]:null}},QuestionRatingModel.prototype.getDisplayValueCore=function(t,o){return this.useRateValues?r.ItemValue.getTextOrHtmlByValue(this.visibleRateValues,o)||o:e.prototype.getDisplayValueCore.call(this,t,o)},Object.defineProperty(QuestionRatingModel.prototype,"visibleRateValues",{get:function(){return this.renderedRateItems.map(function(e){return e.itemValue})},enumerable:!1,configurable:!0}),QuestionRatingModel.prototype.itemValuePropertyChanged=function(t,o,n,r){this.useRateValues()||void 0===r||(this.autoGenerate=!1),e.prototype.itemValuePropertyChanged.call(this,t,o,n,r)},QuestionRatingModel.prototype.createRenderedRateItems=function(){var e=this,t=[];if(this.useRateValues())t=this.rateValues;else{for(var o=[],n=this.rateMin,i=this.rateStep;n<=this.rateMax&&o.length<l.settings.ratingMaximumRateValueCount;){var s=new r.ItemValue(n);s.locOwner=this,s.ownerPropertyName="rateValues",o.push(s),n=this.correctValue(n+i,i)}t=o}"smileys"==this.rateType&&t.length>10&&(t=t.slice(0,10)),this.renderedRateItems=t.map(function(o,n){var r=null;return e.displayRateDescriptionsAsExtremeItems&&(0==n&&(r=new f(o,e.minRateDescription&&e.locMinRateDescription||o.locText)),n==t.length-1&&(r=new f(o,e.maxRateDescription&&e.locMaxRateDescription||o.locText))),r||(r=new f(o)),r})},QuestionRatingModel.prototype.correctValue=function(e,t){if(!e||Math.round(e)==e)return e;for(var o=0;Math.round(t)!=t;)t*=10,o++;return parseFloat(e.toFixed(o))},QuestionRatingModel.prototype.getType=function(){return"rating"},QuestionRatingModel.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},QuestionRatingModel.prototype.getInputId=function(e){return this.inputId+"_"+e},QuestionRatingModel.prototype.supportGoNextPageAutomatic=function(){return!0===this.isMouseDown},QuestionRatingModel.prototype.supportOther=function(){return!1},QuestionRatingModel.prototype.getPlainDataCalculatedValue=function(t){var o=e.prototype.getPlainDataCalculatedValue.call(this,t);if(void 0!==o||!this.useRateValues||this.isEmpty())return o;var n=r.ItemValue.getItemByValue(this.visibleRateValues,this.value);return n?n[t]:void 0},Object.defineProperty(QuestionRatingModel.prototype,"minRateDescription",{get:function(){return this.getLocalizableStringText("minRateDescription")},set:function(e){this.setLocalizableStringText("minRateDescription",e),this.hasMinRateDescription=!!this.minRateDescription},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"locMinRateDescription",{get:function(){return this.getLocalizableString("minRateDescription")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"maxRateDescription",{get:function(){return this.getLocalizableStringText("maxRateDescription")},set:function(e){this.setLocalizableStringText("maxRateDescription",e),this.hasMaxRateDescription=!!this.maxRateDescription},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"locMaxRateDescription",{get:function(){return this.getLocalizableString("maxRateDescription")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"hasMinLabel",{get:function(){return!this.displayRateDescriptionsAsExtremeItems&&!!this.hasMinRateDescription},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"hasMaxLabel",{get:function(){return!this.displayRateDescriptionsAsExtremeItems&&!!this.hasMaxRateDescription},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"rateDisplayMode",{get:function(){return this.rateType},set:function(e){this.rateType=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"isStar",{get:function(){return"stars"==this.rateType},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"isSmiley",{get:function(){return"smileys"==this.rateType},enumerable:!1,configurable:!0}),QuestionRatingModel.prototype.getDefaultItemComponent=function(){return"dropdown"==this.renderAs?"":this.isStar?"sv-rating-item-star":this.isSmiley?"sv-rating-item-smiley":"sv-rating-item"},Object.defineProperty(QuestionRatingModel.prototype,"itemComponent",{get:function(){return this.getPropertyValue("itemComponent",this.getDefaultItemComponent())},set:function(e){this.setPropertyValue("itemComponent",e)},enumerable:!1,configurable:!0}),QuestionRatingModel.prototype.valueToData=function(e){if(this.useRateValues()){var t=r.ItemValue.getItemByValue(this.rateValues,e);return t?t.value:e}return isNaN(e)?e:parseFloat(e)},QuestionRatingModel.prototype.setValueFromClick=function(e){this.value===parseFloat(e)?this.clearValue():this.value=e;for(var t=0;t<this.renderedRateItems.length;t++)this.renderedRateItems[t].highlight="none"},QuestionRatingModel.prototype.onItemMouseIn=function(e){if(!h.IsTouch&&!this.isReadOnly&&e.itemValue.isEnabled&&!this.isDesignMode){var t=!0,o=null!=this.value;if("stars"!==this.rateType){e.highlight="highlighted";return}for(var n=0;n<this.renderedRateItems.length;n++)this.renderedRateItems[n].highlight=t&&!o&&"highlighted"||!t&&o&&"unhighlighted"||"none",this.renderedRateItems[n]==e&&(t=!1),this.renderedRateItems[n].itemValue.value==this.value&&(o=!1)}},QuestionRatingModel.prototype.onItemMouseOut=function(e){h.IsTouch||this.renderedRateItems.forEach(function(e){return e.highlight="none"})},Object.defineProperty(QuestionRatingModel.prototype,"itemSmallMode",{get:function(){return this.inMatrixMode&&"small"==l.settings.matrix.rateSize},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"ratingRootCss",{get:function(){var e=("buttons"==this.displayMode||this.survey&&this.survey.isDesignMode)&&this.cssClasses.rootWrappable?this.cssClasses.rootWrappable:this.cssClasses.root;return new c.CssClassBuilder().append(e).append(this.cssClasses.itemSmall,this.itemSmallMode&&"labels"!=this.rateType).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"itemStarIcon",{get:function(){return this.itemSmallMode?"icon-rating-star-small":"icon-rating-star"},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"itemStarIconAlt",{get:function(){return this.itemStarIcon+"-2"},enumerable:!1,configurable:!0}),QuestionRatingModel.prototype.getItemSmiley=function(e){var t=["very-good","not-good","normal","good","average","excellent","poor","perfect","very-poor","terrible"].slice(0,this.useRateValues()?this.rateValues.length:this.rateMax-this.rateMin+1),o=["terrible","very-poor","poor","not-good","average","normal","good","very-good","excellent","perfect"].filter(function(e){return -1!=t.indexOf(e)});return this.useRateValues()?o[this.rateValues.indexOf(e)]:o[e.value-this.rateMin]},QuestionRatingModel.prototype.getItemSmileyIconName=function(e){return"icon-"+this.getItemSmiley(e)},QuestionRatingModel.prototype.getItemClassByText=function(e,t){return this.getItemClass(e)},QuestionRatingModel.prototype.getRenderedItemColor=function(e,t){var o=t?QuestionRatingModel.badColorLight:QuestionRatingModel.badColor,n=t?QuestionRatingModel.goodColorLight:QuestionRatingModel.goodColor,r=(this.rateCount-1)/2,i=t?QuestionRatingModel.normalColorLight:QuestionRatingModel.normalColor;if(e<r?n=i:(o=i,e-=r),!o||!n)return null;for(var s=[0,0,0,0],a=0;a<4;a++)s[a]=o[a]+(n[a]-o[a])*e/r,a<3&&(s[a]=Math.trunc(s[a]));return"rgba("+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+")"},QuestionRatingModel.prototype.getItemStyle=function(e,t){if(void 0===t&&(t="none"),"monochrome"===this.scaleColorMode&&"default"==this.rateColorMode)return{borderColor:null,fill:null,backgroundColor:null};var o=this.visibleRateValues.indexOf(e),n=this.getRenderedItemColor(o,!1);if(this.value==this.renderedRateItems[o].value)return{borderColor:n,fill:null,backgroundColor:n};var r=this.getRenderedItemColor(o,!0);return"highlighted"==t&&"colored"===this.scaleColorMode?{borderColor:n,fill:n,backgroundColor:r}:"colored"===this.scaleColorMode&&0==this.errors.length?{borderColor:n,fill:n,backgroundColor:null}:{borderColor:null,fill:null,backgroundColor:null}},QuestionRatingModel.prototype.getItemClass=function(e,t){var o=this;void 0===t&&(t="none");var n=this.value==e.value;this.isStar&&(n=this.useRateValues()?this.rateValues.indexOf(this.rateValues.filter(function(e){return e.value==o.value})[0])>=this.rateValues.indexOf(e):this.value>=e.value);var r=!(this.isReadOnly||!e.isEnabled)&&this.value!=e.value&&!(this.survey&&this.survey.isDesignMode),i=this.renderedRateItems.filter(function(t){return t.itemValue==e})[0],s=this.isStar&&(null==i?void 0:i.highlight)=="highlighted",a=this.isStar&&(null==i?void 0:i.highlight)=="unhighlighted",l=this.cssClasses.item,u=this.cssClasses.selected,p=this.cssClasses.itemDisabled,d=this.cssClasses.itemHover,h=this.cssClasses.itemOnError,g=null,f=null,y=null,m=null,v=null;this.isStar&&(l=this.cssClasses.itemStar,u=this.cssClasses.itemStarSelected,p=this.cssClasses.itemStarDisabled,d=this.cssClasses.itemStarHover,h=this.cssClasses.itemStarOnError,g=this.cssClasses.itemStarHighlighted,f=this.cssClasses.itemStarUnhighlighted,v=this.cssClasses.itemStarSmall),this.isSmiley&&(l=this.cssClasses.itemSmiley,u=this.cssClasses.itemSmileySelected,p=this.cssClasses.itemSmileyDisabled,d=this.cssClasses.itemSmileyHover,h=this.cssClasses.itemSmileyOnError,g=this.cssClasses.itemSmileyHighlighted,y=this.cssClasses.itemSmileyScaleColored,m=this.cssClasses.itemSmileyRateColored,v=this.cssClasses.itemSmileySmall);var b=!this.isStar&&!this.isSmiley&&(!this.displayRateDescriptionsAsExtremeItems||this.useRateValues()&&e!=this.rateValues[0]&&e!=this.rateValues[this.rateValues.length-1]||!this.useRateValues()&&e.value!=this.rateMin&&e.value!=this.rateMax)&&e.locText.calculatedText.length<=2&&Number.isInteger(Number(e.locText.calculatedText));return new c.CssClassBuilder().append(l).append(u,n).append(p,this.isReadOnly).append(d,r).append(g,s).append(y,"colored"==this.scaleColorMode).append(m,"scale"==this.rateColorMode&&n).append(f,a).append(h,this.hasCssError()).append(v,this.itemSmallMode).append(this.cssClasses.itemFixedSize,b).toString()},QuestionRatingModel.prototype.getControlClass=function(){return this.isEmpty(),new c.CssClassBuilder().append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isReadOnly).toString()},Object.defineProperty(QuestionRatingModel.prototype,"placeholder",{get:function(){return this.getLocalizableStringText("ratingOptionsCaption")},set:function(e){this.setLocalizableStringText("ratingOptionsCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"locPlaceholder",{get:function(){return this.getLocalizableString("ratingOptionsCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"allowClear",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"searchEnabled",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"renderedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),QuestionRatingModel.prototype.isItemSelected=function(e){return e.value==this.value},Object.defineProperty(QuestionRatingModel.prototype,"visibleChoices",{get:function(){return this.visibleRateValues},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"readOnlyText",{get:function(){return this.readOnly?this.displayValue||this.placeholder:this.isEmpty()?this.placeholder:""},enumerable:!1,configurable:!0}),QuestionRatingModel.prototype.needResponsiveWidth=function(){this.getPropertyValue("rateValues");var e=this.getPropertyValue("rateStep"),t=this.getPropertyValue("rateMax"),o=this.getPropertyValue("rateMin");return"dropdown"!=this.displayMode&&!!(this.hasMinRateDescription||this.hasMaxRateDescription||e&&(t-o)/e>9)},QuestionRatingModel.prototype.supportResponsiveness=function(){return!0},QuestionRatingModel.prototype.getCompactRenderAs=function(){return"buttons"==this.displayMode?"default":"dropdown"},QuestionRatingModel.prototype.getDesktopRenderAs=function(){return"dropdown"==this.displayMode?"dropdown":"default"},Object.defineProperty(QuestionRatingModel.prototype,"ariaExpanded",{get:function(){var e,t=null===(e=this.dropdownListModel)||void 0===e?void 0:e.popupModel;return t?t.isVisible?"true":"false":null},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionRatingModel.prototype,"dropdownListModel",{get:function(){return this.dropdownListModelValue},set:function(e){this.dropdownListModelValue=e,this.updateElementCss()},enumerable:!1,configurable:!0}),QuestionRatingModel.prototype.updateCssClasses=function(t,o){if(e.prototype.updateCssClasses.call(this,t,o),this.dropdownListModel){var n={};Object(d.mergeValues)(o.list,n),Object(d.mergeValues)(t.list,n),t.list=n}},QuestionRatingModel.prototype.calcCssClasses=function(t){var o=e.prototype.calcCssClasses.call(this,t);return this.dropdownListModel&&this.dropdownListModel.updateCssClasses(o.popup,o.list),o},QuestionRatingModel.prototype.themeChanged=function(e){this.colorsCalculated=!1,this.updateColors(e.cssVariables),this.createRenderedRateItems()},QuestionRatingModel.prototype.setSurveyImpl=function(t,o){e.prototype.setSurveyImpl.call(this,t,o),this.survey&&this.updateColors(this.survey.themeVariables)},QuestionRatingModel.prototype.dispose=function(){e.prototype.dispose.call(this),this.dropdownListModelValue&&this.dropdownListModelValue.dispose()},QuestionRatingModel.colorsCalculated=!1,__decorate([Object(s.property)({defaultValue:!1})],QuestionRatingModel.prototype,"inputHasValue",void 0),__decorate([Object(s.property)({defaultValue:!0})],QuestionRatingModel.prototype,"autoGenerate",void 0),__decorate([Object(s.property)({defaultValue:5})],QuestionRatingModel.prototype,"rateCount",void 0),__decorate([Object(s.propertyArray)()],QuestionRatingModel.prototype,"renderedRateItems",void 0),__decorate([Object(s.property)({defaultValue:!1})],QuestionRatingModel.prototype,"hasMinRateDescription",void 0),__decorate([Object(s.property)({defaultValue:!1})],QuestionRatingModel.prototype,"hasMaxRateDescription",void 0),__decorate([Object(s.property)({defaultValue:!1})],QuestionRatingModel.prototype,"displayRateDescriptionsAsExtremeItems",void 0),__decorate([Object(s.property)({defaultValue:"auto",onSet:function(e,t){t.isDesignMode||("dropdown"===e?t.renderAs="dropdown":t.renderAs="default")}})],QuestionRatingModel.prototype,"displayMode",void 0),__decorate([Object(s.property)({defaultValue:"labels"})],QuestionRatingModel.prototype,"rateType",void 0),__decorate([Object(s.property)({defaultValue:"monochrome"})],QuestionRatingModel.prototype,"scaleColorMode",void 0),__decorate([Object(s.property)({defaultValue:"scale"})],QuestionRatingModel.prototype,"rateColorMode",void 0),QuestionRatingModel}(i.Question);s.Serializer.addClass("rating",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"rateType",alternativeName:"rateDisplayMode",default:"labels",category:"rateValues",choices:["labels","stars","smileys"],visibleIndex:0},{name:"scaleColorMode",category:"rateValues",default:"monochrome",choices:["monochrome","colored"],visibleIf:function(e){return"smileys"==e.rateDisplayMode},visibleIndex:1},{name:"rateColorMode",category:"rateValues",default:"scale",choices:["default","scale"],visibleIf:function(e){return"smileys"==e.rateDisplayMode&&"monochrome"==e.scaleColorMode},visibleIndex:2},{name:"autoGenerate",category:"rateValues",default:!0,choices:[!0,!1],visibleIndex:4},{name:"rateCount:number",default:5,category:"rateValues",visibleIndex:3,onSettingValue:function(e,t){return t<2?2:t>l.settings.ratingMaximumRateValueCount&&t>e.rateValues.length?l.settings.ratingMaximumRateValueCount:t>10&&"smileys"==e.rateDisplayMode?10:t}},{name:"rateValues:itemvalue[]",baseValue:function(){return u.surveyLocalization.getString("choices_Item")},category:"rateValues",visibleIf:function(e){return!e.autoGenerate},visibleIndex:5},{name:"rateMin:number",default:1,onSettingValue:function(e,t){return t>e.rateMax-e.rateStep?e.rateMax-e.rateStep:t},visibleIf:function(e){return!!e.autoGenerate},visibleIndex:6},{name:"rateMax:number",default:5,onSettingValue:function(e,t){return t<e.rateMin+e.rateStep?e.rateMin+e.rateStep:t},visibleIf:function(e){return!!e.autoGenerate},visibleIndex:7},{name:"rateStep:number",default:1,minValue:.1,onSettingValue:function(e,t){return t<=0&&(t=1),t>e.rateMax-e.rateMin&&(t=e.rateMax-e.rateMin),t},visibleIf:function(e){return!!e.autoGenerate},visibleIndex:8},{name:"minRateDescription",alternativeName:"mininumRateDescription",serializationProperty:"locMinRateDescription",visibleIndex:17},{name:"maxRateDescription",alternativeName:"maximumRateDescription",serializationProperty:"locMaxRateDescription",visibleIndex:18},{name:"displayRateDescriptionsAsExtremeItems:boolean",default:!1,visibleIndex:19,visibleIf:function(e){return"labels"==e.rateType}},{name:"displayMode",default:"auto",choices:["auto","buttons","dropdown"],visibleIndex:20},{name:"itemComponent",visible:!1,defaultFunc:function(e){return e?(e.getOriginalObj&&(e=e.getOriginalObj()),e.getDefaultItemComponent()):"sv-rating-item"}}],function(){return new y("")},"question"),a.QuestionFactory.Instance.registerQuestion("rating",function(e){return new y(e)})},"./src/question_signaturepad.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionSignaturePadModel",function(){return p});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./questionfactory */"./src/questionfactory.ts"),s=o(/*! ./question */"./src/question.ts"),a=o(/*! signature_pad */"./node_modules/signature_pad/dist/signature_pad.js"),l=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),u=o(/*! ./console-warnings */"./src/console-warnings.ts"),c=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};function resizeCanvas(e){var t=e.getContext("2d"),o=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),n=e.width,r=e.height;e.width=n*o,e.height=r*o,e.style.width=n+"px",e.style.height=r+"px",t.scale(o,o)}var p=function(e){function QuestionSignaturePadModel(t){return e.call(this,t)||this}return c(QuestionSignaturePadModel,e),QuestionSignaturePadModel.prototype.getPenColorFromTheme=function(){var e=this.survey;return!!e&&!!e.themeVariables&&e.themeVariables["--sjs-primary-backcolor"]},QuestionSignaturePadModel.prototype.updateColors=function(e){var t=this.getPenColorFromTheme(),o=this.getPropertyByName("penColor");e.penColor=this.penColor||t||o.defaultValue||"#1ab394";var n=this.getPropertyByName("backgroundColor"),r=t?"transparent":void 0,i=this.backgroundImage?"transparent":this.backgroundColor;e.backgroundColor=i||r||n.defaultValue||"#ffffff"},QuestionSignaturePadModel.prototype.getCssRoot=function(t){return new l.CssClassBuilder().append(e.prototype.getCssRoot.call(this,t)).append(t.small,"300"===this.signatureWidth.toString()).toString()},QuestionSignaturePadModel.prototype.updateValue=function(){if(this.signaturePad){var e="jpeg"===this.dataFormat?"image/jpeg":"svg"===this.dataFormat?"image/svg+xml":"",t=this.signaturePad.toDataURL(e);this.value=t}},QuestionSignaturePadModel.prototype.getType=function(){return"signaturepad"},QuestionSignaturePadModel.prototype.afterRenderQuestionElement=function(t){t&&this.initSignaturePad(t),e.prototype.afterRenderQuestionElement.call(this,t)},QuestionSignaturePadModel.prototype.beforeDestroyQuestionElement=function(e){e&&this.destroySignaturePad(e)},QuestionSignaturePadModel.prototype.themeChanged=function(e){this.signaturePad&&this.updateColors(this.signaturePad)},QuestionSignaturePadModel.prototype.initSignaturePad=function(e){var t=this,o=e.getElementsByTagName("canvas")[0],n=new a.default(o,{backgroundColor:"#ffffff"});this.isInputReadOnly&&n.off(),this.readOnlyChangedCallback=function(){t.isInputReadOnly?n.off():n.on()},this.updateColors(n),n.addEventListener("beginStroke",function(){t.isDrawingValue=!0,o.focus()},{once:!1}),n.addEventListener("endStroke",function(){t.isDrawingValue=!1,t.updateValue()},{once:!1});var updateValueHandler=function(){var e=t.value;o.width=t.signatureWidth||300,o.height=t.signatureHeight||200,resizeCanvas(o),e?n.fromDataURL(e):n.clear()};updateValueHandler(),this.readOnlyChangedCallback(),this.signaturePad=n;var propertyChangedHandler=function(e,t){("signatureWidth"===t.name||"signatureHeight"===t.name||"value"===t.name)&&updateValueHandler()};this.onPropertyChanged.add(propertyChangedHandler),this.signaturePad.propertyChangedHandler=propertyChangedHandler},QuestionSignaturePadModel.prototype.destroySignaturePad=function(e){this.signaturePad&&(this.onPropertyChanged.remove(this.signaturePad.propertyChangedHandler),this.signaturePad.off()),this.readOnlyChangedCallback=null,this.signaturePad=null},Object.defineProperty(QuestionSignaturePadModel.prototype,"dataFormat",{get:function(){return this.getPropertyValue("dataFormat")},set:function(e){this.setPropertyValue("dataFormat",correctFormatData(e))},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSignaturePadModel.prototype,"signatureWidth",{get:function(){return this.getPropertyValue("signatureWidth")},set:function(e){this.setPropertyValue("signatureWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSignaturePadModel.prototype,"signatureHeight",{get:function(){return this.getPropertyValue("signatureHeight")},set:function(e){this.setPropertyValue("signatureHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSignaturePadModel.prototype,"height",{get:function(){return this.getPropertyValue("height")},set:function(e){this.setPropertyValue("height",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSignaturePadModel.prototype,"allowClear",{get:function(){return this.getPropertyValue("allowClear")},set:function(e){this.setPropertyValue("allowClear",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSignaturePadModel.prototype,"canShowClearButton",{get:function(){return!this.isInputReadOnly&&this.allowClear},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSignaturePadModel.prototype,"penColor",{get:function(){return this.getPropertyValue("penColor")},set:function(e){this.setPropertyValue("penColor",e),this.signaturePad&&this.updateColors(this.signaturePad)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSignaturePadModel.prototype,"backgroundColor",{get:function(){return this.getPropertyValue("backgroundColor")},set:function(e){this.setPropertyValue("backgroundColor",e),this.signaturePad&&this.updateColors(this.signaturePad)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSignaturePadModel.prototype,"backgroundImage",{get:function(){return this.getPropertyValue("backgroundImage")},set:function(e){this.setPropertyValue("backgroundImage",e),this.signaturePad&&this.updateColors(this.signaturePad)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionSignaturePadModel.prototype,"clearButtonCaption",{get:function(){return this.getLocalizationString("clearCaption")},enumerable:!1,configurable:!0}),QuestionSignaturePadModel.prototype.needShowPlaceholder=function(){var e=this.showPlaceholder,t=this.isDrawingValue,o=this.isEmpty();return e&&!t&&o},QuestionSignaturePadModel.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),300===this.signatureWidth&&this.width&&"number"==typeof this.width&&this.width&&(u.ConsoleWarnings.warn("Use signatureWidth property to set width for the signature pad"),this.signatureWidth=this.width,this.width=void 0),200===this.signatureHeight&&this.height&&(u.ConsoleWarnings.warn("Use signatureHeight property to set width for the signature pad"),this.signatureHeight=this.height,this.height=void 0)},__decorate([Object(r.property)({defaultValue:!1})],QuestionSignaturePadModel.prototype,"isDrawingValue",void 0),__decorate([Object(r.property)({})],QuestionSignaturePadModel.prototype,"showPlaceholder",void 0),__decorate([Object(r.property)({localizable:{defaultStr:"signaturePlaceHolder"}})],QuestionSignaturePadModel.prototype,"placeholder",void 0),QuestionSignaturePadModel}(s.Question);function correctFormatData(e){return e||(e="png"),"jpeg"!==(e=e.replace("image/","").replace("+xml",""))&&"svg"!==e&&(e="png"),e}r.Serializer.addClass("signaturepad",[{name:"signatureWidth:number",category:"general",default:300},{name:"signatureHeight:number",category:"general",default:200},{name:"height:number",category:"general",visible:!1},{name:"allowClear:boolean",category:"general",default:!0},{name:"showPlaceholder:boolean",category:"general",default:!0},{name:"placeholder:text",serializationProperty:"locPlaceholder",category:"general",dependsOn:"showPlaceholder",visibleIf:function(e){return e.showPlaceholder}},{name:"backgroundImage:file",category:"general"},{name:"penColor:color",category:"general"},{name:"backgroundColor:color",category:"general"},{name:"dataFormat",category:"general",default:"png",choices:[{value:"png",text:"PNG"},{value:"image/jpeg",text:"JPEG"},{value:"image/svg+xml",text:"SVG"}],onSettingValue:function(e,t){return correctFormatData(t)}},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1}],function(){return new p("")},"question"),i.QuestionFactory.Instance.registerQuestion("signaturepad",function(e){return new p(e)})},"./src/question_tagbox.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionTagboxModel",function(){return p});var n,r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=o(/*! ./questionfactory */"./src/questionfactory.ts"),s=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),a=o(/*! ./question_checkbox */"./src/question_checkbox.ts"),l=o(/*! ./dropdownMultiSelectListModel */"./src/dropdownMultiSelectListModel.ts"),u=o(/*! ./settings */"./src/settings.ts"),c=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},p=function(e){function QuestionTagboxModel(t){var o=e.call(this,t)||this;return o.itemDisplayNameMap={},o.onOpened=o.addEvent(),o.createLocalizableString("placeholder",o,!1,!0),o.createLocalizableString("clearCaption",o,!1,!0),o.registerPropertyChangedHandlers(["value","renderAs","showOtherItem","otherText","placeholder","choices","visibleChoices"],function(){o.updateReadOnlyText()}),o.updateReadOnlyText(),o}return c(QuestionTagboxModel,e),QuestionTagboxModel.prototype.locStrsChanged=function(){var t;e.prototype.locStrsChanged.call(this),this.updateReadOnlyText(),null===(t=this.dropdownListModel)||void 0===t||t.locStrsChanged()},QuestionTagboxModel.prototype.updateReadOnlyText=function(){this.readOnlyText=this.displayValue||this.placeholder},QuestionTagboxModel.prototype.getDefaultItemComponent=function(){return""},QuestionTagboxModel.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.dropdownListModel||(this.dropdownListModel=new l.DropdownMultiSelectListModel(this))},Object.defineProperty(QuestionTagboxModel.prototype,"placeholder",{get:function(){return this.getLocalizableStringText("placeholder")},set:function(e){this.setLocalizableStringText("placeholder",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTagboxModel.prototype,"locPlaceholder",{get:function(){return this.getLocalizableString("placeholder")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTagboxModel.prototype,"clearCaption",{get:function(){return this.getLocalizableStringText("clearCaption")},set:function(e){this.setLocalizableStringText("clearCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTagboxModel.prototype,"locClearCaption",{get:function(){return this.getLocalizableString("clearCaption")},enumerable:!1,configurable:!0}),QuestionTagboxModel.prototype.getType=function(){return"tagbox"},Object.defineProperty(QuestionTagboxModel.prototype,"ariaRole",{get:function(){return"combobox"},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTagboxModel.prototype,"popupModel",{get:function(){var e;return null===(e=this.dropdownListModel)||void 0===e?void 0:e.popupModel},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTagboxModel.prototype,"ariaExpanded",{get:function(){var e=this.popupModel;return e&&e.isVisible?"true":"false"},enumerable:!1,configurable:!0}),QuestionTagboxModel.prototype.getControlClass=function(){return new s.CssClassBuilder().append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isReadOnly).toString()},QuestionTagboxModel.prototype.onOpenedCallBack=function(){this.onOpened.fire(this,{question:this,choices:this.choices})},QuestionTagboxModel.prototype.hasUnknownValue=function(t,o,n,r){return!this.choicesLazyLoadEnabled&&e.prototype.hasUnknownValue.call(this,t,o,n,r)},QuestionTagboxModel.prototype.needConvertRenderedOtherToDataValue=function(){var t,o=null===(t=this.otherValue)||void 0===t?void 0:t.trim();return!!o&&e.prototype.hasUnknownValue.call(this,o,!0,!1)},QuestionTagboxModel.prototype.onVisibleChoicesChanged=function(){e.prototype.onVisibleChoicesChanged.call(this),this.popupModel&&this.dropdownListModel.updateItems()},QuestionTagboxModel.prototype.getItemIfChoicesNotContainThisValue=function(t,o){var n;return!this.choicesLazyLoadEnabled||(null===(n=this.dropdownListModel)||void 0===n?void 0:n.isAllDataLoaded)?e.prototype.getItemIfChoicesNotContainThisValue.call(this,t,o):this.createItemValue(t,o)},QuestionTagboxModel.prototype.validateItemValues=function(e){var t=this;this.updateItemDisplayNameMap();var o=this.renderedValue;if(e.length&&e.length===o.length)return e;var n=this.selectedItemValues;if(!e.length&&n&&n.length)return this.defaultSelectedItemValues=[].concat(n),n;var r=e.map(function(e){return e.value});return o.filter(function(e){return -1===r.indexOf(e)}).forEach(function(o){var n=t.getItemIfChoicesNotContainThisValue(o,t.itemDisplayNameMap[o]);n&&e.push(n)}),e.sort(function(e,t){return o.indexOf(e.value)-o.indexOf(t.value)}),e},QuestionTagboxModel.prototype.updateItemDisplayNameMap=function(){var e=this,func=function(t){e.itemDisplayNameMap[t.value]=t.text};(this.defaultSelectedItemValues||[]).forEach(func),(this.selectedItemValues||[]).forEach(func),this.visibleChoices.forEach(func)},QuestionTagboxModel.prototype.getFirstInputElementId=function(){return this.inputId+(this.searchEnabled?"_0":"")},QuestionTagboxModel.prototype.getInputId=function(){return this.inputId+"_0"},QuestionTagboxModel.prototype.dispose=function(){e.prototype.dispose.call(this),this.dropdownListModelValue&&this.dropdownListModelValue.dispose()},QuestionTagboxModel.prototype.clearValue=function(){e.prototype.clearValue.call(this),this.dropdownListModel.clear()},Object.defineProperty(QuestionTagboxModel.prototype,"showClearButton",{get:function(){return this.allowClear&&!this.isEmpty()&&(!this.isDesignMode||u.settings.supportCreatorV2)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTagboxModel.prototype,"isNewA11yStructure",{get:function(){return!1},enumerable:!1,configurable:!0}),__decorate([Object(r.property)({defaultValue:""})],QuestionTagboxModel.prototype,"readOnlyText",void 0),__decorate([Object(r.property)()],QuestionTagboxModel.prototype,"allowClear",void 0),__decorate([Object(r.property)({defaultValue:!0,onSet:function(e,t){t.dropdownListModel&&t.dropdownListModel.setSearchEnabled(e)}})],QuestionTagboxModel.prototype,"searchEnabled",void 0),__decorate([Object(r.property)({onSet:function(e,t){t.dropdownListModel&&t.dropdownListModel.setHideSelectedItems(e)}})],QuestionTagboxModel.prototype,"hideSelectedItems",void 0),__decorate([Object(r.property)()],QuestionTagboxModel.prototype,"choicesLazyLoadEnabled",void 0),__decorate([Object(r.property)({defaultValue:25})],QuestionTagboxModel.prototype,"choicesLazyLoadPageSize",void 0),__decorate([Object(r.property)({getDefaultValue:function(){return u.settings.tagboxCloseOnSelect}})],QuestionTagboxModel.prototype,"closeOnSelect",void 0),QuestionTagboxModel}(a.QuestionCheckboxModel);r.Serializer.addClass("tagbox",[{name:"placeholder",serializationProperty:"locPlaceholder"},{name:"allowClear:boolean",default:!0},{name:"searchEnabled:boolean",default:!0},{name:"choicesLazyLoadEnabled:boolean",default:!1,visible:!1},{name:"choicesLazyLoadPageSize:number",default:25,visible:!1},{name:"hideSelectedItems:boolean",default:!1},{name:"closeOnSelect:boolean"},{name:"itemComponent",visible:!1,default:""}],function(){return new p("")},"checkbox"),i.QuestionFactory.Instance.registerQuestion("tagbox",function(e){var t=new p(e);return t.choices=i.QuestionFactory.DefaultChoices,t})},"./src/question_text.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionTextModel",function(){return h}),o.d(t,"isMinMaxType",function(){return isMinMaxType});var n,r=o(/*! ./questionfactory */"./src/questionfactory.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=o(/*! ./localizablestring */"./src/localizablestring.ts"),a=o(/*! ./helpers */"./src/helpers.ts"),l=o(/*! ./validator */"./src/validator.ts"),u=o(/*! ./error */"./src/error.ts"),c=o(/*! ./settings */"./src/settings.ts"),p=o(/*! ./question_textbase */"./src/question_textbase.ts"),d=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),h=function(e){function QuestionTextModel(t){var o=e.call(this,t)||this;return o._isWaitingForEnter=!1,o.onCompositionUpdate=function(e){o.isInputTextUpdate&&setTimeout(function(){o.updateValueOnEvent(e)},1),o.updateRemainingCharacterCounter(e.target.value)},o.onKeyUp=function(e){o.isInputTextUpdate?o._isWaitingForEnter&&13!==e.keyCode||(o.updateValueOnEvent(e),o._isWaitingForEnter=!1):13===e.keyCode&&o.updateValueOnEvent(e),o.updateRemainingCharacterCounter(e.target.value)},o.onKeyDown=function(e){o.checkForUndo(e),o.isInputTextUpdate&&(o._isWaitingForEnter=229===e.keyCode),o.onTextKeyDownHandler(e)},o.onChange=function(e){e.target===c.settings.environment.root.activeElement?o.isInputTextUpdate&&o.updateValueOnEvent(e):o.updateValueOnEvent(e),o.updateRemainingCharacterCounter(e.target.value)},o.onBlur=function(e){o.updateValueOnEvent(e),o.updateRemainingCharacterCounter(e.target.value)},o.onFocus=function(e){o.updateRemainingCharacterCounter(e.target.value)},o.createLocalizableString("minErrorText",o,!0,"minError"),o.createLocalizableString("maxErrorText",o,!0,"maxError"),o.locDataListValue=new s.LocalizableStrings(o),o.locDataListValue.onValueChanged=function(e,t){o.propertyValueChanged("dataList",e,t)},o.registerPropertyChangedHandlers(["min","max","inputType","minValueExpression","maxValueExpression"],function(){o.setRenderedMinMax()}),o.registerPropertyChangedHandlers(["inputType","size"],function(){o.updateInputSize(),o.calcRenderedPlaceholder()}),o}return d(QuestionTextModel,e),QuestionTextModel.prototype.isTextValue=function(){return["text","number","password"].indexOf(this.inputType)>-1},QuestionTextModel.prototype.getType=function(){return"text"},QuestionTextModel.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.setRenderedMinMax(),this.updateInputSize()},Object.defineProperty(QuestionTextModel.prototype,"inputType",{get:function(){return this.getPropertyValue("inputType")},set:function(e){("datetime_local"===(e=e.toLowerCase())||"datetime"===e)&&(e="datetime-local"),this.setPropertyValue("inputType",e.toLowerCase()),this.isLoadingFromJson||(this.min=void 0,this.max=void 0,this.step=void 0)},enumerable:!1,configurable:!0}),QuestionTextModel.prototype.getMaxLength=function(){return"text"!==this.inputType?null:e.prototype.getMaxLength.call(this)},QuestionTextModel.prototype.runCondition=function(t,o){e.prototype.runCondition.call(this,t,o),(this.minValueExpression||this.maxValueExpression)&&this.setRenderedMinMax(t,o)},QuestionTextModel.prototype.isLayoutTypeSupported=function(e){return!0},Object.defineProperty(QuestionTextModel.prototype,"size",{get:function(){return this.getPropertyValue("size")},set:function(e){this.setPropertyValue("size",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"isTextInput",{get:function(){return["text","search","tel","url","email","password"].indexOf(this.inputType)>-1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"inputSize",{get:function(){return this.getPropertyValue("inputSize",0)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"renderedInputSize",{get:function(){return this.getPropertyValue("inputSize")||null},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"inputWidth",{get:function(){return this.getPropertyValue("inputWidth")},enumerable:!1,configurable:!0}),QuestionTextModel.prototype.updateInputSize=function(){var e=this.isTextInput&&this.size>0?this.size:0;this.isTextInput&&e<1&&this.parent&&this.parent.itemSize&&(e=this.parent.itemSize),this.setPropertyValue("inputSize",e),this.setPropertyValue("inputWidth",e>0?"auto":"")},Object.defineProperty(QuestionTextModel.prototype,"autocomplete",{get:function(){return this.getPropertyValue("autocomplete",null)},set:function(e){this.setPropertyValue("autocomplete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"min",{get:function(){return this.getPropertyValue("min")},set:function(e){if(this.isValueExpression(e)){this.minValueExpression=e.substring(1);return}this.setPropertyValue("min",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"max",{get:function(){return this.getPropertyValue("max")},set:function(e){if(this.isValueExpression(e)){this.maxValueExpression=e.substring(1);return}this.setPropertyValue("max",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"minValueExpression",{get:function(){return this.getPropertyValue("minValueExpression","")},set:function(e){this.setPropertyValue("minValueExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"maxValueExpression",{get:function(){return this.getPropertyValue("maxValueExpression","")},set:function(e){this.setPropertyValue("maxValueExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"renderedMin",{get:function(){return this.getPropertyValue("renderedMin")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"renderedMax",{get:function(){return this.getPropertyValue("renderedMax")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"minErrorText",{get:function(){return this.getLocalizableStringText("minErrorText")},set:function(e){this.setLocalizableStringText("minErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"locMinErrorText",{get:function(){return this.getLocalizableString("minErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"maxErrorText",{get:function(){return this.getLocalizableStringText("maxErrorText")},set:function(e){this.setLocalizableStringText("maxErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"locMaxErrorText",{get:function(){return this.getLocalizableString("maxErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"isMinMaxType",{get:function(){return isMinMaxType(this)},enumerable:!1,configurable:!0}),QuestionTextModel.prototype.onCheckForErrors=function(t,o){var n=this;if(e.prototype.onCheckForErrors.call(this,t,o),!o){if(this.isValueLessMin){var r=new u.CustomError(this.getMinMaxErrorText(this.minErrorText,this.getCalculatedMinMax(this.renderedMin)),this);r.onUpdateErrorTextCallback=function(e){e.text=n.getMinMaxErrorText(n.minErrorText,n.getCalculatedMinMax(n.renderedMin))},t.push(r)}if(this.isValueGreaterMax){var i=new u.CustomError(this.getMinMaxErrorText(this.maxErrorText,this.getCalculatedMinMax(this.renderedMax)),this);i.onUpdateErrorTextCallback=function(e){e.text=n.getMinMaxErrorText(n.maxErrorText,n.getCalculatedMinMax(n.renderedMax))},t.push(i)}var s=this.getValidatorTitle(),a=new l.EmailValidator;if("email"===this.inputType&&!this.validators.some(function(e){return"emailvalidator"===e.getType()})){var c=a.validate(this.value,s);c&&c.error&&t.push(c.error)}}},QuestionTextModel.prototype.canSetValueToSurvey=function(){if(!this.isMinMaxType)return!0;var e=!this.isValueLessMin&&!this.isValueGreaterMax;return"number"===this.inputType&&this.survey&&(this.survey.isValidateOnValueChanging||this.survey.isValidateOnValueChanged)&&this.hasErrors(),e},QuestionTextModel.prototype.convertFuncValuetoQuestionValue=function(e){return a.Helpers.convertValToQuestionVal(e,this.inputType)},QuestionTextModel.prototype.getMinMaxErrorText=function(e,t){if(a.Helpers.isValueEmpty(t))return e;var o=t.toString();return"date"===this.inputType&&t.toDateString&&(o=t.toDateString()),e.replace("{0}",o)},Object.defineProperty(QuestionTextModel.prototype,"isValueLessMin",{get:function(){return!this.isValueEmpty(this.renderedMin)&&!this.isEmpty()&&this.getCalculatedMinMax(this.value)<this.getCalculatedMinMax(this.renderedMin)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"isValueGreaterMax",{get:function(){return!this.isValueEmpty(this.renderedMax)&&!this.isEmpty()&&this.getCalculatedMinMax(this.value)>this.getCalculatedMinMax(this.renderedMax)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"isDateInputType",{get:function(){return"date"===this.inputType||"datetime-local"===this.inputType},enumerable:!1,configurable:!0}),QuestionTextModel.prototype.getCalculatedMinMax=function(e){return this.isValueEmpty(e)?e:this.isDateInputType?new Date(e):e},QuestionTextModel.prototype.setRenderedMinMax=function(e,t){var o=this;void 0===e&&(e=null),void 0===t&&(t=null),this.minValueRunner=this.getDefaultRunner(this.minValueRunner,this.minValueExpression),this.setValueAndRunExpression(this.minValueRunner,this.min,function(e){!e&&o.isDateInputType&&c.settings.minDate&&(e=c.settings.minDate),o.setPropertyValue("renderedMin",e)},e,t),this.maxValueRunner=this.getDefaultRunner(this.maxValueRunner,this.maxValueExpression),this.setValueAndRunExpression(this.maxValueRunner,this.max,function(e){!e&&o.isDateInputType&&(e=c.settings.maxDate?c.settings.maxDate:"2999-12-31"),o.setPropertyValue("renderedMax",e)},e,t)},Object.defineProperty(QuestionTextModel.prototype,"step",{get:function(){return this.getPropertyValue("step")},set:function(e){this.setPropertyValue("step",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"renderedStep",{get:function(){return this.isValueEmpty(this.step)?"number"!==this.inputType?void 0:"any":this.step},enumerable:!1,configurable:!0}),QuestionTextModel.prototype.supportGoNextPageAutomatic=function(){return!this.isSurveyInputTextUpdate&&0>["date","datetime-local"].indexOf(this.inputType)},QuestionTextModel.prototype.supportGoNextPageError=function(){return 0>["date","datetime-local"].indexOf(this.inputType)},Object.defineProperty(QuestionTextModel.prototype,"dataList",{get:function(){return this.locDataList.value},set:function(e){this.locDataList.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"locDataList",{get:function(){return this.locDataListValue},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextModel.prototype,"dataListId",{get:function(){return this.locDataList.hasValue()?this.id+"_datalist":void 0},enumerable:!1,configurable:!0}),QuestionTextModel.prototype.canRunValidators=function(e){return this.errors.length>0||!e||this.supportGoNextPageError()},QuestionTextModel.prototype.setNewValue=function(t){t=this.correctValueType(t),e.prototype.setNewValue.call(this,t)},QuestionTextModel.prototype.correctValueType=function(e){return e&&("number"==this.inputType||"range"==this.inputType)?a.Helpers.isNumber(e)?a.Helpers.getNumber(e):"":e},QuestionTextModel.prototype.hasPlaceholder=function(){return!this.isReadOnly&&"range"!==this.inputType},QuestionTextModel.prototype.isReadOnlyRenderDiv=function(){return this.isReadOnly&&"div"===c.settings.readOnly.textRenderMode},Object.defineProperty(QuestionTextModel.prototype,"inputStyle",{get:function(){var e={};return e.width=this.inputWidth,e},enumerable:!1,configurable:!0}),QuestionTextModel.prototype.updateValueOnEvent=function(e){var t=e.target.value;this.isTwoValueEquals(this.value,t)||(this.value=t)},QuestionTextModel}(p.QuestionTextBase),g=["number","range","date","datetime-local","month","time","week"];function isMinMaxType(e){var t=e?e.inputType:"";return!!t&&g.indexOf(t)>-1}function getWeekTimeNumber(e,t){var o=e.split(t);return 2===o.length&&a.Helpers.isNumber(o[0])&&a.Helpers.isNumber(o[1])?60*parseFloat(o[0])+parseFloat(o[1]):-1}function isMinBiggerWeekTime(e,t,o){var n=getWeekTimeNumber(e,o),r=getWeekTimeNumber(t,o);return!(n<0)&&!(r<0)&&n>r}function getCorrectMinMax(e,t,o,n){var r=n?o:t;if(!isMinMaxType(e)||a.Helpers.isValueEmpty(t)||a.Helpers.isValueEmpty(o))return r;if(0===e.inputType.indexOf("date")||"month"===e.inputType){var i="month"===e.inputType,s=new Date(i?t+"-1":t),l=new Date(i?o+"-1":o);if(!s||!l)return r;if(s>l)return n?t:o}if("week"===e.inputType||"time"===e.inputType)return isMinBiggerWeekTime(t,o,"week"===e.inputType?"-W":":")?n?t:o:r;if("number"===e.inputType){if(!a.Helpers.isNumber(t)||!a.Helpers.isNumber(o))return r;if(a.Helpers.getNumber(t)>a.Helpers.getNumber(o))return n?t:o}return"string"==typeof t||"string"==typeof o?r:t>o?n?t:o:r}function propertyEditorMinMaxUpdate(e,t){e&&e.inputType&&(t.inputType="range"!==e.inputType?e.inputType:"number",t.textUpdateMode="onBlur")}i.Serializer.addClass("text",[{name:"inputType",default:"text",choices:c.settings.questions.inputTypes},{name:"size:number",minValue:0,dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"textUpdateMode",default:"default",choices:["default","onBlur","onTyping"],dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"autocomplete",alternativeName:"autoComplete",choices:c.settings.questions.dataList},{name:"min",dependsOn:"inputType",visibleIf:function(e){return isMinMaxType(e)},onPropertyEditorUpdate:function(e,t){propertyEditorMinMaxUpdate(e,t)},onSettingValue:function(e,t){return getCorrectMinMax(e,t,e.max,!1)}},{name:"max",dependsOn:"inputType",nextToProperty:"*min",visibleIf:function(e){return isMinMaxType(e)},onSettingValue:function(e,t){return getCorrectMinMax(e,e.min,t,!0)},onPropertyEditorUpdate:function(e,t){propertyEditorMinMaxUpdate(e,t)}},{name:"minValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return isMinMaxType(e)}},{name:"maxValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return isMinMaxType(e)}},{name:"minErrorText",serializationProperty:"locMinErrorText",dependsOn:"inputType",visibleIf:function(e){return isMinMaxType(e)}},{name:"maxErrorText",serializationProperty:"locMaxErrorText",dependsOn:"inputType",visibleIf:function(e){return isMinMaxType(e)}},{name:"step:number",dependsOn:"inputType",visibleIf:function(e){return!!e&&("number"===e.inputType||"range"===e.inputType)}},{name:"maxLength:number",default:-1,dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder",dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"dataList:string[]",serializationProperty:"locDataList",dependsOn:"inputType",visibleIf:function(e){return!!e&&"text"===e.inputType}}],function(){return new h("")},"textbase"),r.QuestionFactory.Instance.registerQuestion("text",function(e){return new h(e)})},"./src/question_textbase.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"CharacterCounter",function(){return c}),o.d(t,"QuestionTextBase",function(){return p});var n,r=o(/*! ./question */"./src/question.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=o(/*! ./helpers */"./src/helpers.ts"),a=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),l=o(/*! ./base */"./src/base.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},c=function(e){function CharacterCounter(){return null!==e&&e.apply(this,arguments)||this}return u(CharacterCounter,e),CharacterCounter.prototype.updateRemainingCharacterCounter=function(e,t){this.remainingCharacterCounter=s.Helpers.getRemainingCharacterCounterText(e,t)},__decorate([Object(i.property)()],CharacterCounter.prototype,"remainingCharacterCounter",void 0),CharacterCounter}(l.Base),p=function(e){function QuestionTextBase(t){var o=e.call(this,t)||this;return o.characterCounter=new c,o.disableNativeUndoRedo=!1,o}return u(QuestionTextBase,e),QuestionTextBase.prototype.isTextValue=function(){return!0},Object.defineProperty(QuestionTextBase.prototype,"maxLength",{get:function(){return this.getPropertyValue("maxLength")},set:function(e){this.setPropertyValue("maxLength",e),this.updateRemainingCharacterCounter(this.value)},enumerable:!1,configurable:!0}),QuestionTextBase.prototype.getMaxLength=function(){return s.Helpers.getMaxLength(this.maxLength,this.survey?this.survey.maxTextLength:-1)},QuestionTextBase.prototype.updateRemainingCharacterCounter=function(e){this.characterCounter.updateRemainingCharacterCounter(e,this.getMaxLength())},Object.defineProperty(QuestionTextBase.prototype,"placeHolder",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextBase.prototype,"locPlaceHolder",{get:function(){return this.locPlaceholder},enumerable:!1,configurable:!0}),QuestionTextBase.prototype.getType=function(){return"textbase"},QuestionTextBase.prototype.isEmpty=function(){return e.prototype.isEmpty.call(this)||""===this.value},Object.defineProperty(QuestionTextBase.prototype,"textUpdateMode",{get:function(){return this.getPropertyValue("textUpdateMode")},set:function(e){this.setPropertyValue("textUpdateMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextBase.prototype,"isSurveyInputTextUpdate",{get:function(){return"default"==this.textUpdateMode?!!this.survey&&this.survey.isUpdateValueTextOnTyping:"onTyping"==this.textUpdateMode},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextBase.prototype,"renderedPlaceholder",{get:function(){return this.getPropertyValue("renderedPlaceholder")},enumerable:!1,configurable:!0}),QuestionTextBase.prototype.setRenderedPlaceholder=function(e){this.setPropertyValue("renderedPlaceholder",e)},QuestionTextBase.prototype.onReadOnlyChanged=function(){e.prototype.onReadOnlyChanged.call(this),this.calcRenderedPlaceholder()},QuestionTextBase.prototype.onSurveyLoad=function(){this.calcRenderedPlaceholder(),e.prototype.onSurveyLoad.call(this)},QuestionTextBase.prototype.localeChanged=function(){e.prototype.localeChanged.call(this),this.calcRenderedPlaceholder()},QuestionTextBase.prototype.setSurveyImpl=function(t,o){e.prototype.setSurveyImpl.call(this,t,o),this.calcRenderedPlaceholder()},QuestionTextBase.prototype.calcRenderedPlaceholder=function(){var e=this.placeHolder;e&&!this.hasPlaceholder()&&(e=void 0),this.setRenderedPlaceholder(e)},QuestionTextBase.prototype.hasPlaceholder=function(){return!this.isReadOnly},QuestionTextBase.prototype.setNewValue=function(t){e.prototype.setNewValue.call(this,t),this.updateRemainingCharacterCounter(t)},QuestionTextBase.prototype.setQuestionValue=function(t,o){void 0===o&&(o=!0),e.prototype.setQuestionValue.call(this,t,o),this.updateRemainingCharacterCounter(t)},QuestionTextBase.prototype.convertToCorrectValue=function(e){return Array.isArray(e)?e.join(this.getValueSeparator()):e},QuestionTextBase.prototype.getValueSeparator=function(){return", "},QuestionTextBase.prototype.checkForUndo=function(e){this.disableNativeUndoRedo&&this.isInputTextUpdate&&(e.ctrlKey||e.metaKey)&&-1!==[89,90].indexOf(e.keyCode)&&e.preventDefault()},QuestionTextBase.prototype.getControlClass=function(){return new a.CssClassBuilder().append(this.cssClasses.root).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isReadOnly).toString()},Object.defineProperty(QuestionTextBase.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),__decorate([Object(i.property)({localizable:!0,onSet:function(e,t){return t.calcRenderedPlaceholder()}})],QuestionTextBase.prototype,"placeholder",void 0),QuestionTextBase}(r.Question);i.Serializer.addClass("textbase",[],function(){return new p("")},"question")},"./src/questionfactory.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionFactory",function(){return i}),o.d(t,"ElementFactory",function(){return s});var n=o(/*! ./surveyStrings */"./src/surveyStrings.ts"),r=o(/*! ./jsonobject */"./src/jsonobject.ts"),i=function(){function QuestionFactory(){}return Object.defineProperty(QuestionFactory,"DefaultChoices",{get:function(){return[n.surveyLocalization.getString("choices_Item")+"1",n.surveyLocalization.getString("choices_Item")+"2",n.surveyLocalization.getString("choices_Item")+"3"]},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFactory,"DefaultColums",{get:function(){var e=n.surveyLocalization.getString("matrix_column")+" ";return[e+"1",e+"2",e+"3"]},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFactory,"DefaultRows",{get:function(){var e=n.surveyLocalization.getString("matrix_row")+" ";return[e+"1",e+"2"]},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionFactory,"DefaultMutlipleTextItems",{get:function(){var e=n.surveyLocalization.getString("multipletext_itemname");return[e+"1",e+"2"]},enumerable:!1,configurable:!0}),QuestionFactory.prototype.registerQuestion=function(e,t){s.Instance.registerElement(e,t)},QuestionFactory.prototype.registerCustomQuestion=function(e){s.Instance.registerCustomQuestion(e)},QuestionFactory.prototype.unregisterElement=function(e,t){void 0===t&&(t=!1),s.Instance.unregisterElement(e,t)},QuestionFactory.prototype.clear=function(){s.Instance.clear()},QuestionFactory.prototype.getAllTypes=function(){return s.Instance.getAllTypes()},QuestionFactory.prototype.createQuestion=function(e,t){return s.Instance.createElement(e,t)},QuestionFactory.Instance=new QuestionFactory,QuestionFactory}(),s=function(){function ElementFactory(){var e=this;this.creatorHash={},this.registerCustomQuestion=function(t){e.registerElement(t,function(e){var o=r.Serializer.createClass(t);return o&&(o.name=e),o})}}return ElementFactory.prototype.registerElement=function(e,t){this.creatorHash[e]=t},ElementFactory.prototype.clear=function(){this.creatorHash={}},ElementFactory.prototype.unregisterElement=function(e,t){void 0===t&&(t=!1),delete this.creatorHash[e],t&&r.Serializer.removeClass(e)},ElementFactory.prototype.getAllTypes=function(){var e=[];for(var t in this.creatorHash)e.push(t);return e.sort()},ElementFactory.prototype.createElement=function(e,t){var o=this.creatorHash[e];return o?o(t):null},ElementFactory.Instance=new ElementFactory,ElementFactory}()},"./src/questionnonvalue.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"QuestionNonValue",function(){return a});var n,r=o(/*! ./question */"./src/question.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),a=function(e){function QuestionNonValue(t){return e.call(this,t)||this}return s(QuestionNonValue,e),QuestionNonValue.prototype.getType=function(){return"nonvalue"},Object.defineProperty(QuestionNonValue.prototype,"hasInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionNonValue.prototype,"hasTitle",{get:function(){return!1},enumerable:!1,configurable:!0}),QuestionNonValue.prototype.getTitleLocation=function(){return""},Object.defineProperty(QuestionNonValue.prototype,"hasComment",{get:function(){return!1},enumerable:!1,configurable:!0}),QuestionNonValue.prototype.hasErrors=function(e,t){return void 0===e&&(e=!0),void 0===t&&(t=null),!1},QuestionNonValue.prototype.getAllErrors=function(){return[]},QuestionNonValue.prototype.supportGoNextPageAutomatic=function(){return!1},QuestionNonValue.prototype.addConditionObjectsByContext=function(e,t){},QuestionNonValue.prototype.getConditionJson=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=null),null},QuestionNonValue}(r.Question);i.Serializer.addClass("nonvalue",[{name:"title",visible:!1},{name:"description",visible:!1},{name:"valueName",visible:!1},{name:"enableIf",visible:!1},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"clearIfInvisible",visible:!1},{name:"isRequired",visible:!1,isSerializable:!1},{name:"requiredErrorText",visible:!1},{name:"readOnly",visible:!1},{name:"requiredIf",visible:!1},{name:"validators",visible:!1},{name:"titleLocation",visible:!1},{name:"showCommentArea",visible:!1},{name:"useDisplayValuesInDynamicTexts",alternativeName:"useDisplayValuesInTitle",visible:!1}],function(){return new a("")},"question")},"./src/rendererFactory.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"RendererFactory",function(){return n});var n=function(){function RendererFactory(){this.renderersHash={}}return RendererFactory.prototype.unregisterRenderer=function(e,t){delete this.renderersHash[e][t]},RendererFactory.prototype.registerRenderer=function(e,t,o){this.renderersHash[e]||(this.renderersHash[e]={}),this.renderersHash[e][t]=o},RendererFactory.prototype.getRenderer=function(e,t){return this.renderersHash[e]&&this.renderersHash[e][t]||"default"},RendererFactory.prototype.getRendererByQuestion=function(e){return this.getRenderer(e.getType(),e.renderAs)},RendererFactory.prototype.clear=function(){this.renderersHash={}},RendererFactory.Instance=new RendererFactory,RendererFactory}()},"./src/settings.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"settings",function(){return i});var n=o(/*! ./utils/utils */"./src/utils/utils.ts"),r=globalThis.document,i={designMode:{showEmptyDescriptions:!0,showEmptyTitles:!0},get allowShowEmptyDescriptionInDesignMode(){return this.designMode.showEmptyDescriptions},set allowShowEmptyDescriptionInDesignMode(val){this.designMode.showEmptyDescriptions=val},get allowShowEmptyTitleInDesignMode(){return this.designMode.showEmptyTitles},set allowShowEmptyTitleInDesignMode(val){this.designMode.showEmptyTitles=val},localization:{useLocalTimeZone:!0,storeDuplicatedTranslations:!1,defaultLocaleName:"default"},get useLocalTimeZone(){return this.localization.useLocalTimeZone},set useLocalTimeZone(val){this.localization.useLocalTimeZone=val},get storeDuplicatedTranslations(){return this.localization.storeDuplicatedTranslations},set storeDuplicatedTranslations(val){this.localization.storeDuplicatedTranslations=val},get defaultLocaleName(){return this.localization.defaultLocaleName},set defaultLocaleName(val){this.localization.defaultLocaleName=val},web:{encodeUrlParams:!0,cacheLoadedChoices:!0,disableQuestionWhileLoadingChoices:!1,surveyServiceUrl:"https://api.surveyjs.io/public/v1/Survey"},get webserviceEncodeParameters(){return this.web.encodeUrlParams},set webserviceEncodeParameters(val){this.web.encodeUrlParams=val},get useCachingForChoicesRestful(){return this.web.cacheLoadedChoices},set useCachingForChoicesRestful(val){this.web.cacheLoadedChoices=val},get useCachingForChoicesRestfull(){return this.web.cacheLoadedChoices},set useCachingForChoicesRestfull(val){this.web.cacheLoadedChoices=val},get disableOnGettingChoicesFromWeb(){return this.web.disableQuestionWhileLoadingChoices},set disableOnGettingChoicesFromWeb(val){this.web.disableQuestionWhileLoadingChoices=val},get surveyServiceUrl(){return this.web.surveyServiceUrl},set surveyServiceUrl(val){this.web.surveyServiceUrl=val},triggers:{changeNavigationButtonsOnComplete:!0,executeCompleteOnValueChanged:!1,executeSkipOnValueChanged:!0},get executeCompleteTriggerOnValueChanged(){return this.triggers.executeCompleteOnValueChanged},set executeCompleteTriggerOnValueChanged(val){this.triggers.executeCompleteOnValueChanged=val},get changeNavigationButtonsOnCompleteTrigger(){return this.triggers.changeNavigationButtonsOnComplete},set changeNavigationButtonsOnCompleteTrigger(val){this.triggers.changeNavigationButtonsOnComplete=val},get executeSkipTriggerOnValueChanged(){return this.triggers.executeSkipOnValueChanged},set executeSkipTriggerOnValueChanged(val){this.triggers.executeSkipOnValueChanged=val},serialization:{itemValueSerializeAsObject:!1,itemValueSerializeDisplayText:!1,localizableStringSerializeAsObject:!1},get itemValueAlwaysSerializeAsObject(){return this.serialization.itemValueSerializeAsObject},set itemValueAlwaysSerializeAsObject(val){this.serialization.itemValueSerializeAsObject=val},get itemValueAlwaysSerializeText(){return this.serialization.itemValueSerializeDisplayText},set itemValueAlwaysSerializeText(val){this.serialization.itemValueSerializeDisplayText=val},get serializeLocalizableStringAsObject(){return this.serialization.localizableStringSerializeAsObject},set serializeLocalizableStringAsObject(val){this.serialization.localizableStringSerializeAsObject=val},lazyRender:{enabled:!1,firstBatchSize:3},get lazyRowsRendering(){return this.lazyRender.enabled},set lazyRowsRendering(val){this.lazyRender.enabled=val},get lazyRowsRenderingStartRow(){return this.lazyRender.firstBatchSize},set lazyRowsRenderingStartRow(val){this.lazyRender.firstBatchSize=val},matrix:{defaultCellType:"dropdown",defaultRowName:"default",totalsSuffix:"-total",maxRowCount:1e3,maxRowCountInCondition:1,renderRemoveAsIcon:!0,columnWidthsByType:{file:{minWidth:"240px"},comment:{minWidth:"200px"}},rateSize:"small"},get matrixDefaultRowName(){return this.matrix.defaultRowName},set matrixDefaultRowName(val){this.matrix.defaultRowName=val},get matrixDefaultCellType(){return this.matrix.defaultCellType},set matrixDefaultCellType(val){this.matrix.defaultCellType=val},get matrixTotalValuePostFix(){return this.matrix.totalsSuffix},set matrixTotalValuePostFix(val){this.matrix.totalsSuffix=val},get matrixMaximumRowCount(){return this.matrix.maxRowCount},set matrixMaximumRowCount(val){this.matrix.maxRowCount=val},get matrixMaxRowCountInCondition(){return this.matrix.maxRowCountInCondition},set matrixMaxRowCountInCondition(val){this.matrix.maxRowCountInCondition=val},get matrixRenderRemoveAsIcon(){return this.matrix.renderRemoveAsIcon},set matrixRenderRemoveAsIcon(val){this.matrix.renderRemoveAsIcon=val},panel:{maxPanelCount:100,maxPanelCountInCondition:1},get panelDynamicMaxPanelCountInCondition(){return this.panel.maxPanelCountInCondition},set panelDynamicMaxPanelCountInCondition(val){this.panel.maxPanelCountInCondition=val},get panelMaximumPanelCount(){return this.panel.maxPanelCount},set panelMaximumPanelCount(val){this.panel.maxPanelCount=val},readOnly:{enableValidation:!1,commentRenderMode:"textarea",textRenderMode:"input"},get readOnlyCommentRenderMode(){return this.readOnly.commentRenderMode},set readOnlyCommentRenderMode(val){this.readOnly.commentRenderMode=val},get readOnlyTextRenderMode(){return this.readOnly.textRenderMode},set readOnlyTextRenderMode(val){this.readOnly.textRenderMode=val},numbering:{includeQuestionsWithHiddenNumber:!1,includeQuestionsWithHiddenTitle:!1},get setQuestionVisibleIndexForHiddenTitle(){return this.numbering.includeQuestionsWithHiddenTitle},set setQuestionVisibleIndexForHiddenTitle(val){this.numbering.includeQuestionsWithHiddenTitle=val},get setQuestionVisibleIndexForHiddenNumber(){return this.numbering.includeQuestionsWithHiddenNumber},set setQuestionVisibleIndexForHiddenNumber(val){this.numbering.includeQuestionsWithHiddenNumber=val},enterKeyAction:"default",comparator:{trimStrings:!0,caseSensitive:!1,normalizeTextCallback:function(e,t){return e}},expressionDisableConversionChar:"#",get commentPrefix(){return i.commentSuffix},set commentPrefix(val){i.commentSuffix=val},commentSuffix:"-Comment",itemValueSeparator:"|",ratingMaximumRateValueCount:20,tagboxCloseOnSelect:!1,confirmActionFunc:function(e){return confirm(e)},confirmActionAsync:function(e,t,o){return Object(n.showConfirmDialog)(e,t,o)},minWidth:"300px",maxWidth:"100%",maxConditionRunCountOnValueChanged:10,notifications:{lifetime:2e3},autoAdvanceDelay:300,showItemsInOrder:"default",noneItemValue:"none",supportedValidators:{question:["expression"],comment:["text","regex"],text:["numeric","text","regex","email"],checkbox:["answercount"],imagepicker:["answercount"]},minDate:"",maxDate:"",showModal:void 0,showDialog:void 0,supportCreatorV2:!1,showDefaultItemsInCreatorV2:!0,customIcons:{},rankingDragHandleArea:"entireItem",environment:r?{root:r,_rootElement:r.body,get rootElement(){var s;return null!==(s=this._rootElement)&&void 0!==s?s:r.body},set rootElement(rootElement){this._rootElement=rootElement},_popupMountContainer:r.body,get popupMountContainer(){var a;return null!==(a=this._popupMountContainer)&&void 0!==a?a:r.body},set popupMountContainer(popupMountContainer){this._popupMountContainer=popupMountContainer},svgMountContainer:r.head,stylesSheetsMountContainer:r.head}:void 0,showMaxLengthIndicator:!0,titleTags:{survey:"h3",page:"h4",panel:"h4",question:"h5"},questions:{inputTypes:["color","date","datetime-local","email","month","number","password","range","tel","text","time","url","week"],dataList:["","name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","organization-title","username","new-password","current-password","organization","street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","url","photo","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-local-prefix","tel-local-suffix","tel-extension","email","impp"]}}},"./src/stylesmanager.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"modernThemeColors",function(){return s}),o.d(t,"defaultThemeColors",function(){return a}),o.d(t,"orangeThemeColors",function(){return l}),o.d(t,"darkblueThemeColors",function(){return u}),o.d(t,"darkroseThemeColors",function(){return c}),o.d(t,"stoneThemeColors",function(){return p}),o.d(t,"winterThemeColors",function(){return d}),o.d(t,"winterstoneThemeColors",function(){return h}),o.d(t,"StylesManager",function(){return g});var n=o(/*! ./defaultCss/defaultV2Css */"./src/defaultCss/defaultV2Css.ts"),r=o(/*! ./settings */"./src/settings.ts"),i=o(/*! ./utils/utils */"./src/utils/utils.ts"),s={"$main-color":"#1ab394","$add-button-color":"#1948b3","$remove-button-color":"#ff1800","$disable-color":"#dbdbdb","$progress-text-color":"#9d9d9d","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-slider-color":"#cfcfcf","$error-color":"#d52901","$text-color":"#404040","$light-text-color":"#fff","$checkmark-color":"#fff","$progress-buttons-color":"#8dd9ca","$inputs-background-color":"transparent","$main-hover-color":"#9f9f9f","$body-container-background-color":"#f4f4f4","$text-border-color":"#d4d4d4","$disabled-text-color":"rgba(64, 64, 64, 0.5)","$border-color":"rgb(64, 64, 64, 0.5)","$header-background-color":"#e7e7e7","$answer-background-color":"rgba(26, 179, 148, 0.2)","$error-background-color":"rgba(213, 41, 1, 0.2)","$radio-checked-color":"#404040","$clean-button-color":"#1948b3","$body-background-color":"#ffffff","$foreground-light":"#909090","$font-family":"Raleway"},a={"$header-background-color":"#e7e7e7","$body-container-background-color":"#f4f4f4","$main-color":"#1ab394","$main-hover-color":"#0aa384","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#6d7072","$text-input-color":"#6d7072","$header-color":"#6d7072","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#8dd9ca","$progress-buttons-line-color":"#d4d4d4"},l={"$header-background-color":"#4a4a4a","$body-container-background-color":"#f8f8f8","$main-color":"#f78119","$main-hover-color":"#e77109","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#4a4a4a","$text-input-color":"#4a4a4a","$header-color":"#f78119","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#f7b781","$progress-buttons-line-color":"#d4d4d4"},u={"$header-background-color":"#d9d8dd","$body-container-background-color":"#f6f7f2","$main-color":"#3c4f6d","$main-hover-color":"#2c3f5d","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#4a4a4a","$text-input-color":"#4a4a4a","$header-color":"#6d7072","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#839ec9","$progress-buttons-line-color":"#d4d4d4"},c={"$header-background-color":"#ddd2ce","$body-container-background-color":"#f7efed","$main-color":"#68656e","$main-hover-color":"#58555e","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#4a4a4a","$text-input-color":"#4a4a4a","$header-color":"#6d7072","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#c6bed4","$progress-buttons-line-color":"#d4d4d4"},p={"$header-background-color":"#cdccd2","$body-container-background-color":"#efedf4","$main-color":"#0f0f33","$main-hover-color":"#191955","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#0f0f33","$text-input-color":"#0f0f33","$header-color":"#0f0f33","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#747491","$progress-buttons-line-color":"#d4d4d4"},d={"$header-background-color":"#82b8da","$body-container-background-color":"#dae1e7","$main-color":"#3c3b40","$main-hover-color":"#1e1d20","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#000","$text-input-color":"#000","$header-color":"#000","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$disable-color":"#dbdbdb","$progress-text-color":"#9d9d9d","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#d1c9f5","$progress-buttons-line-color":"#d4d4d4"},h={"$header-background-color":"#323232","$body-container-background-color":"#f8f8f8","$main-color":"#5ac8fa","$main-hover-color":"#06a1e7","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#000","$text-input-color":"#000","$header-color":"#000","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$disable-color":"#dbdbdb","$progress-text-color":"#9d9d9d","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#acdcf2","$progress-buttons-line-color":"#d4d4d4"};function setCssVariables(e,t){Object.keys(e||{}).forEach(function(o){var n=o.substring(1);t.style.setProperty("--"+n,e[o])})}var g=function(){function StylesManager(){StylesManager.autoApplyTheme()}return StylesManager.autoApplyTheme=function(){if("bootstrap"!==n.surveyCss.currentType&&"bootstrapmaterial"!==n.surveyCss.currentType){var e=StylesManager.getIncludedThemeCss();1===e.length&&StylesManager.applyTheme(e[0].name)}},StylesManager.getAvailableThemes=function(){return n.surveyCss.getAvailableThemes().filter(function(e){return -1!==["defaultV2","default","modern"].indexOf(e)}).map(function(e){return{name:e,theme:n.surveyCss[e]}})},StylesManager.getIncludedThemeCss=function(){if(void 0===r.settings.environment)return[];var e=r.settings.environment.rootElement,t=StylesManager.getAvailableThemes(),o=Object(i.isShadowDOM)(e)?e.host:e;if(o){var n=getComputedStyle(o);if(n.length)return t.filter(function(e){return e.theme.variables&&n.getPropertyValue(e.theme.variables.themeMark)})}return[]},StylesManager.findSheet=function(e){if(void 0===r.settings.environment)return null;for(var t=r.settings.environment.root.styleSheets,o=0;o<t.length;o++)if(t[o].ownerNode&&t[o].ownerNode.id===e)return t[o];return null},StylesManager.createSheet=function(e){var t=r.settings.environment.stylesSheetsMountContainer,o=document.createElement("style");return o.id=e,o.appendChild(document.createTextNode("")),Object(i.getElement)(t).appendChild(o),StylesManager.Logger&&StylesManager.Logger.log("style sheet "+e+" created"),o.sheet},StylesManager.applyTheme=function(e,t){if(void 0===e&&(e="default"),void 0!==r.settings.environment){var o=r.settings.environment.rootElement,s=Object(i.isShadowDOM)(o)?o.host:o;if(n.surveyCss.currentType=e,StylesManager.Enabled){if("bootstrap"!==e&&"bootstrapmaterial"!==e){setCssVariables(StylesManager.ThemeColors[e],s),StylesManager.Logger&&StylesManager.Logger.log("apply theme "+e+" completed");return}var a=StylesManager.ThemeCss[e];if(!a){n.surveyCss.currentType="defaultV2";return}StylesManager.insertStylesRulesIntoDocument();var l=t||StylesManager.ThemeSelector[e]||StylesManager.ThemeSelector.default,u=(e+l).trim(),c=StylesManager.findSheet(u);if(!c){c=StylesManager.createSheet(u);var p=StylesManager.ThemeColors[e]||StylesManager.ThemeColors.default;Object.keys(a).forEach(function(e){var t=a[e];Object.keys(p||{}).forEach(function(e){return t=t.replace(RegExp("\\"+e,"g"),p[e])});try{0===e.indexOf("body")?c.insertRule(e+" { "+t+" }",0):c.insertRule(l+e+" { "+t+" }",0)}catch(e){}})}}StylesManager.Logger&&StylesManager.Logger.log("apply theme "+e+" completed")}},StylesManager.insertStylesRulesIntoDocument=function(){if(StylesManager.Enabled){var e=StylesManager.findSheet(StylesManager.SurveyJSStylesSheetId);e||(e=StylesManager.createSheet(StylesManager.SurveyJSStylesSheetId)),Object.keys(StylesManager.Styles).length&&Object.keys(StylesManager.Styles).forEach(function(t){try{e.insertRule(t+" { "+StylesManager.Styles[t]+" }",0)}catch(e){}}),Object.keys(StylesManager.Media).length&&Object.keys(StylesManager.Media).forEach(function(t){try{e.insertRule(StylesManager.Media[t].media+" { "+t+" { "+StylesManager.Media[t].style+" } }",0)}catch(e){}})}},StylesManager.SurveyJSStylesSheetId="surveyjs-styles",StylesManager.Styles={},StylesManager.Media={},StylesManager.ThemeColors={modern:s,default:a,orange:l,darkblue:u,darkrose:c,stone:p,winter:d,winterstone:h},StylesManager.ThemeCss={},StylesManager.ThemeSelector={default:".sv_main ",modern:".sv-root-modern "},StylesManager.Enabled=!0,StylesManager}()},"./src/survey-element.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"SurveyElementCore",function(){return g}),o.d(t,"DragTypeOverMeEnum",function(){return i}),o.d(t,"SurveyElement",function(){return f});var n,r,i,s=o(/*! ./jsonobject */"./src/jsonobject.ts"),a=o(/*! ./base */"./src/base.ts"),l=o(/*! ./actions/adaptive-container */"./src/actions/adaptive-container.ts"),u=o(/*! ./helpers */"./src/helpers.ts"),c=o(/*! ./settings */"./src/settings.ts"),p=o(/*! ./actions/container */"./src/actions/container.ts"),d=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),h=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},g=function(e){function SurveyElementCore(){var t=e.call(this)||this;return t.createLocTitleProperty(),t}return h(SurveyElementCore,e),SurveyElementCore.prototype.createLocTitleProperty=function(){return this.createLocalizableString("title",this,!0)},Object.defineProperty(SurveyElementCore.prototype,"title",{get:function(){return this.getLocalizableStringText("title",this.getDefaultTitleValue())},set:function(e){this.setLocalizableStringText("title",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElementCore.prototype,"locTitle",{get:function(){return this.getLocalizableString("title")},enumerable:!1,configurable:!0}),SurveyElementCore.prototype.getDefaultTitleValue=function(){},SurveyElementCore.prototype.updateDescriptionVisibility=function(e){var t=!1;if(this.isDesignMode){var o=s.Serializer.findProperty(this.getType(),"description");t=!!(null==o?void 0:o.placeholder)}this.hasDescription=!!e||t&&this.isDesignMode},Object.defineProperty(SurveyElementCore.prototype,"locDescription",{get:function(){return this.getLocalizableString("description")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElementCore.prototype,"titleTagName",{get:function(){var e=this.getDefaultTitleTagName(),t=this.getSurvey();return t?t.getElementTitleTagName(this,e):e},enumerable:!1,configurable:!0}),SurveyElementCore.prototype.getDefaultTitleTagName=function(){return c.settings.titleTags[this.getType()]},Object.defineProperty(SurveyElementCore.prototype,"hasTitle",{get:function(){return this.title.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElementCore.prototype,"hasTitleActions",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElementCore.prototype,"hasTitleEvents",{get:function(){return this.hasTitleActions},enumerable:!1,configurable:!0}),SurveyElementCore.prototype.getTitleToolbar=function(){return null},SurveyElementCore.prototype.getTitleOwner=function(){},Object.defineProperty(SurveyElementCore.prototype,"isTitleOwner",{get:function(){return!!this.getTitleOwner()},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElementCore.prototype,"isTitleRenderedAsString",{get:function(){return this.getIsTitleRenderedAsString()},enumerable:!1,configurable:!0}),SurveyElementCore.prototype.toggleState=function(){},Object.defineProperty(SurveyElementCore.prototype,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElementCore.prototype,"cssTitle",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElementCore.prototype,"ariaTitleId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElementCore.prototype,"titleTabIndex",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElementCore.prototype,"titleAriaExpanded",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElementCore.prototype,"titleAriaRole",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElementCore.prototype,"ariaLabel",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElementCore.prototype,"titleAriaLabel",{get:function(){return this.ariaLabel},enumerable:!1,configurable:!0}),SurveyElementCore.prototype.getIsTitleRenderedAsString=function(){return!this.isTitleOwner},__decorate([Object(s.property)()],SurveyElementCore.prototype,"hasDescription",void 0),__decorate([Object(s.property)({localizable:!0,onSet:function(e,t){t.updateDescriptionVisibility(e)}})],SurveyElementCore.prototype,"description",void 0),SurveyElementCore}(a.Base);(r=i||(i={}))[r.InsideEmptyPanel=1]="InsideEmptyPanel",r[r.MultilineRight=2]="MultilineRight",r[r.MultilineLeft=3]="MultilineLeft",r[r.Top=4]="Top",r[r.Right=5]="Right",r[r.Bottom=6]="Bottom",r[r.Left=7]="Left";var f=function(e){function SurveyElement(t){var o=e.call(this)||this;return o.selectedElementInDesignValue=o,o.disableDesignActions=SurveyElement.CreateDisabledDesignElements,o.parentQuestionValue=null,o.isContentElement=!1,o.isEditableTemplateElement=!1,o.isInteractiveDesignElement=!0,o.isSingleInRow=!0,o.name=t,o.createNewArray("errors"),o.createNewArray("titleActions"),o.registerPropertyChangedHandlers(["isReadOnly"],function(){o.onReadOnlyChanged()}),o.registerPropertyChangedHandlers(["errors"],function(){o.updateVisibleErrors()}),o.registerPropertyChangedHandlers(["isSingleInRow"],function(){o.updateElementCss(!1)}),o}return h(SurveyElement,e),SurveyElement.getProgressInfoByElements=function(e,t){for(var o=a.Base.createProgressInfo(),n=0;n<e.length;n++)if(e[n].isVisible){var r=e[n].getProgressInfo();o.questionCount+=r.questionCount,o.answeredQuestionCount+=r.answeredQuestionCount,o.requiredQuestionCount+=r.requiredQuestionCount,o.requiredAnsweredQuestionCount+=r.requiredAnsweredQuestionCount}return t&&o.questionCount>0&&(0==o.requiredQuestionCount&&(o.requiredQuestionCount=1),o.answeredQuestionCount>0&&(o.requiredAnsweredQuestionCount=1)),o},SurveyElement.ScrollElementToTop=function(e,t){var o=c.settings.environment.root;if(!e||void 0===o)return!1;var n=o.getElementById(e);if(!n||!n.scrollIntoView)return!1;var r=t?-1:n.getBoundingClientRect().top;return r<0&&n.scrollIntoView(),r<0},SurveyElement.GetFirstNonTextElement=function(e,t){if(void 0===t&&(t=!1),!e||!e.length||0==e.length)return null;if(t){var o=e[0];"#text"===o.nodeName&&(o.data=""),"#text"===(o=e[e.length-1]).nodeName&&(o.data="")}for(var n=0;n<e.length;n++)if("#text"!=e[n].nodeName&&"#comment"!=e[n].nodeName)return e[n];return null},SurveyElement.FocusElement=function(e){if(!e||"undefined"==typeof document)return!1;var t=SurveyElement.focusElementCore(e);return t||setTimeout(function(){SurveyElement.focusElementCore(e)},10),t},SurveyElement.focusElementCore=function(e){var t=c.settings.environment.root;if(!t)return!1;var o=t.getElementById(e);return!!o&&!o.disabled&&"none"!==o.style.display&&null!==o.offsetParent&&(o.focus(),!0)},SurveyElement.prototype.onPropertyValueChanged=function(t,o,n){e.prototype.onPropertyValueChanged.call(this,t,o,n),"state"===t&&(this.updateElementCss(!1),this.stateChangedCallback&&this.stateChangedCallback())},SurveyElement.prototype.getSkeletonComponentNameCore=function(){return this.survey?this.survey.getSkeletonComponentName(this):""},Object.defineProperty(SurveyElement.prototype,"parentQuestion",{get:function(){return this.parentQuestionValue},enumerable:!1,configurable:!0}),SurveyElement.prototype.setParentQuestion=function(e){this.parentQuestionValue=e,this.onParentQuestionChanged()},SurveyElement.prototype.onParentQuestionChanged=function(){},Object.defineProperty(SurveyElement.prototype,"skeletonComponentName",{get:function(){return this.getSkeletonComponentNameCore()},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"state",{get:function(){return this.getPropertyValue("state")},set:function(e){this.setPropertyValue("state",e),this.notifyStateChanged()},enumerable:!1,configurable:!0}),SurveyElement.prototype.notifyStateChanged=function(){this.survey&&this.survey.elementContentVisibilityChanged(this)},Object.defineProperty(SurveyElement.prototype,"isCollapsed",{get:function(){if(!this.isDesignMode)return"collapsed"===this.state},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"isExpanded",{get:function(){return"expanded"===this.state},enumerable:!1,configurable:!0}),SurveyElement.prototype.collapse=function(){this.isDesignMode||(this.state="collapsed")},SurveyElement.prototype.expand=function(){this.state="expanded"},SurveyElement.prototype.toggleState=function(){return this.isCollapsed?(this.expand(),!0):!this.isExpanded||(this.collapse(),!1)},Object.defineProperty(SurveyElement.prototype,"hasStateButton",{get:function(){return this.isExpanded||this.isCollapsed},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"shortcutText",{get:function(){return this.title||this.name},enumerable:!1,configurable:!0}),SurveyElement.prototype.getTitleToolbar=function(){return this.titleToolbarValue||(this.titleToolbarValue=this.createActionContainer(!0),this.titleToolbarValue.containerCss=(this.isPanel?this.cssClasses.panel.titleBar:this.cssClasses.titleBar)||"sv-action-title-bar",this.titleToolbarValue.setItems(this.getTitleActions())),this.titleToolbarValue},SurveyElement.prototype.createActionContainer=function(e){var t=e?new l.AdaptiveActionContainer:new p.ActionContainer;return this.survey&&this.survey.getCss().actionBar&&(t.cssClasses=this.survey.getCss().actionBar),t},Object.defineProperty(SurveyElement.prototype,"titleActions",{get:function(){return this.getPropertyValue("titleActions")},enumerable:!1,configurable:!0}),SurveyElement.prototype.getTitleActions=function(){return this.isTitleActionRequested||(this.updateTitleActions(),this.isTitleActionRequested=!0),this.titleActions},SurveyElement.prototype.getDefaultTitleActions=function(){return[]},SurveyElement.prototype.updateTitleActions=function(){var e=this.getDefaultTitleActions();this.survey&&(e=this.survey.getUpdatedElementTitleActions(this,e)),this.setPropertyValue("titleActions",e)},Object.defineProperty(SurveyElement.prototype,"hasTitleActions",{get:function(){return this.getTitleActions().length>0},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"hasTitleEvents",{get:function(){return void 0!==this.state&&"default"!==this.state},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"titleTabIndex",{get:function(){return this.isPage||"default"===this.state?void 0:0},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"titleAriaExpanded",{get:function(){if(!this.isPage&&"default"!==this.state)return"expanded"===this.state?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"titleAriaRole",{get:function(){if(!this.isPage&&"default"!==this.state)return"button"},enumerable:!1,configurable:!0}),SurveyElement.prototype.setSurveyImpl=function(e,t){this.surveyImplValue=e,this.surveyImplValue?(this.surveyDataValue=this.surveyImplValue.getSurveyData(),this.setSurveyCore(this.surveyImplValue.getSurvey()),this.textProcessorValue=this.surveyImplValue.getTextProcessor(),this.onSetData()):(this.setSurveyCore(null),this.surveyDataValue=null),this.survey&&(this.updateDescriptionVisibility(this.description),this.clearCssClasses())},SurveyElement.prototype.canRunConditions=function(){return e.prototype.canRunConditions.call(this)&&!!this.data},SurveyElement.prototype.getDataFilteredValues=function(){return this.data?this.data.getFilteredValues():{}},SurveyElement.prototype.getDataFilteredProperties=function(){var e=this.data?this.data.getFilteredProperties():{};return e.question=this,e},Object.defineProperty(SurveyElement.prototype,"surveyImpl",{get:function(){return this.surveyImplValue},enumerable:!1,configurable:!0}),SurveyElement.prototype.__setData=function(e){c.settings.supportCreatorV2&&(this.surveyDataValue=e)},Object.defineProperty(SurveyElement.prototype,"data",{get:function(){return this.surveyDataValue},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"survey",{get:function(){return this.getSurvey()},enumerable:!1,configurable:!0}),SurveyElement.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.surveyValue||this.surveyImplValue&&this.setSurveyCore(this.surveyImplValue.getSurvey()),this.surveyValue},SurveyElement.prototype.setSurveyCore=function(e){this.surveyValue=e,this.surveyChangedCallback&&this.surveyChangedCallback()},Object.defineProperty(SurveyElement.prototype,"isInternal",{get:function(){return this.isContentElement},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"areInvisibleElementsShowing",{get:function(){return!!this.survey&&this.survey.areInvisibleElementsShowing&&!this.isContentElement},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"isVisible",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"isReadOnly",{get:function(){return this.readOnly},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"readOnly",{get:function(){return this.getPropertyValue("readOnly")},set:function(e){this.readOnly==e||(this.setPropertyValue("readOnly",e),this.isLoadingFromJson||this.setPropertyValue("isReadOnly",this.isReadOnly))},enumerable:!1,configurable:!0}),SurveyElement.prototype.onReadOnlyChanged=function(){this.readOnlyChangedCallback&&this.readOnlyChangedCallback()},Object.defineProperty(SurveyElement.prototype,"css",{get:function(){return this.survey?this.survey.getCss():{}},enumerable:!1,configurable:!0}),SurveyElement.prototype.ensureCssClassesValue=function(){this.cssClassesValue||(this.cssClassesValue=this.calcCssClasses(this.css),this.updateElementCssCore(this.cssClassesValue))},Object.defineProperty(SurveyElement.prototype,"cssClasses",{get:function(){return(this.cssClassesValue,this.survey)?(this.ensureCssClassesValue(),this.cssClassesValue):this.calcCssClasses(this.css)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"cssTitleNumber",{get:function(){var e=this.cssClasses;return e.number?e.number:e.panel?e.panel.number:void 0},enumerable:!1,configurable:!0}),SurveyElement.prototype.calcCssClasses=function(e){},SurveyElement.prototype.updateElementCssCore=function(e){},Object.defineProperty(SurveyElement.prototype,"cssError",{get:function(){return""},enumerable:!1,configurable:!0}),SurveyElement.prototype.updateElementCss=function(e){this.clearCssClasses()},SurveyElement.prototype.clearCssClasses=function(){this.cssClassesValue=void 0},SurveyElement.prototype.getIsLoadingFromJson=function(){return!!e.prototype.getIsLoadingFromJson.call(this)||!!this.survey&&this.survey.isLoadingFromJson},Object.defineProperty(SurveyElement.prototype,"name",{get:function(){return this.getPropertyValue("name","")},set:function(e){var t=this.name;this.setPropertyValue("name",this.getValidName(e)),!this.isLoadingFromJson&&t&&this.onNameChanged(t)},enumerable:!1,configurable:!0}),SurveyElement.prototype.getValidName=function(e){return e},SurveyElement.prototype.onNameChanged=function(e){},SurveyElement.prototype.updateBindingValue=function(e,t){this.data&&!this.isTwoValueEquals(t,this.data.getValue(e))&&this.data.setValue(e,t,!1)},Object.defineProperty(SurveyElement.prototype,"errors",{get:function(){return this.getPropertyValue("errors")},set:function(e){this.setPropertyValue("errors",e)},enumerable:!1,configurable:!0}),SurveyElement.prototype.updateVisibleErrors=function(){for(var e=0,t=0;t<this.errors.length;t++)this.errors[t].visible&&e++;this.hasVisibleErrors=e>0},Object.defineProperty(SurveyElement.prototype,"containsErrors",{get:function(){return this.getPropertyValue("containsErrors",!1)},enumerable:!1,configurable:!0}),SurveyElement.prototype.updateContainsErrors=function(){this.setPropertyValue("containsErrors",this.getContainsErrors())},SurveyElement.prototype.getContainsErrors=function(){return this.errors.length>0},Object.defineProperty(SurveyElement.prototype,"selectedElementInDesign",{get:function(){return this.selectedElementInDesignValue},set:function(e){this.selectedElementInDesignValue=e},enumerable:!1,configurable:!0}),SurveyElement.prototype.updateCustomWidgets=function(){},SurveyElement.prototype.onSurveyLoad=function(){},SurveyElement.prototype.onFirstRendering=function(){this.ensureCssClassesValue()},SurveyElement.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.survey||this.onSurveyLoad(),this.updateDescriptionVisibility(this.description)},SurveyElement.prototype.setVisibleIndex=function(e){return 0},Object.defineProperty(SurveyElement.prototype,"isPage",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"isPanel",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"isQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),SurveyElement.prototype.delete=function(e){},SurveyElement.prototype.getLocale=function(){return this.survey?this.survey.getLocale():this.locOwner?this.locOwner.getLocale():""},SurveyElement.prototype.getMarkdownHtml=function(e,t){return this.survey?this.survey.getSurveyMarkdownHtml(this,e,t):this.locOwner?this.locOwner.getMarkdownHtml(e,t):void 0},SurveyElement.prototype.getRenderer=function(e){return this.survey&&"function"==typeof this.survey.getRendererForString?this.survey.getRendererForString(this,e):this.locOwner&&"function"==typeof this.locOwner.getRenderer?this.locOwner.getRenderer(e):null},SurveyElement.prototype.getRendererContext=function(e){return this.survey&&"function"==typeof this.survey.getRendererContextForString?this.survey.getRendererContextForString(this,e):this.locOwner&&"function"==typeof this.locOwner.getRendererContext?this.locOwner.getRendererContext(e):e},SurveyElement.prototype.getProcessedText=function(e){return this.isLoadingFromJson?e:this.textProcessor?this.textProcessor.processText(e,this.getUseDisplayValuesInDynamicTexts()):this.locOwner?this.locOwner.getProcessedText(e):e},SurveyElement.prototype.getUseDisplayValuesInDynamicTexts=function(){return!0},SurveyElement.prototype.removeSelfFromList=function(e){if(e&&Array.isArray(e)){var t=e.indexOf(this);t>-1&&e.splice(t,1)}},Object.defineProperty(SurveyElement.prototype,"textProcessor",{get:function(){return this.textProcessorValue},enumerable:!1,configurable:!0}),SurveyElement.prototype.getProcessedHtml=function(e){return e&&this.textProcessor?this.textProcessor.processText(e,!0):e},SurveyElement.prototype.onSetData=function(){},Object.defineProperty(SurveyElement.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.setPropertyValue("parent",e)},enumerable:!1,configurable:!0}),SurveyElement.prototype.getPage=function(e){for(;e&&e.parent;)e=e.parent;return e&&"page"==e.getType()?e:null},SurveyElement.prototype.moveToBase=function(e,t,o){if(void 0===o&&(o=null),!t)return!1;e.removeElement(this);var n=-1;return u.Helpers.isNumber(o)&&(n=parseInt(o)),-1==n&&o&&o.getType&&(n=t.indexOf(o)),t.addElement(this,n),!0},SurveyElement.prototype.setPage=function(e,t){var o=this.getPage(e);"string"==typeof t&&this.getSurvey().pages.forEach(function(e){t===e.name&&(t=e)}),o!==t&&(e&&e.removeElement(this),t&&t.addElement(this,-1))},SurveyElement.prototype.getSearchableLocKeys=function(e){e.push("title"),e.push("description")},Object.defineProperty(SurveyElement.prototype,"isDefaultV2Theme",{get:function(){return this.survey&&"sd-root-modern"==this.survey.getCss().root},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"hasParent",{get:function(){return this.parent&&!this.parent.isPage&&(!this.parent.originalPage||this.survey.isShowingPreview)||void 0===this.parent},enumerable:!1,configurable:!0}),SurveyElement.prototype.shouldAddRunnerStyles=function(){return!this.isDesignMode&&this.isDefaultV2Theme},Object.defineProperty(SurveyElement.prototype,"isCompact",{get:function(){return this.survey&&this.survey.isCompact},enumerable:!1,configurable:!0}),SurveyElement.prototype.getHasFrameV2=function(){return this.shouldAddRunnerStyles()&&!this.hasParent},SurveyElement.prototype.getIsNested=function(){return this.shouldAddRunnerStyles()&&this.hasParent},SurveyElement.prototype.getCssRoot=function(e){return new d.CssClassBuilder().append(e.withFrame,this.getHasFrameV2()&&!this.isCompact).append(e.compact,this.isCompact&&this.getHasFrameV2()).append(e.collapsed,!!this.isCollapsed).append(e.expanded,!!this.isExpanded).append(e.nested,this.getIsNested()).toString()},Object.defineProperty(SurveyElement.prototype,"width",{get:function(){return this.getPropertyValue("width","")},set:function(e){this.setPropertyValue("width",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(e){this.setPropertyValue("minWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"maxWidth",{get:function(){return this.getPropertyValue("maxWidth")},set:function(e){this.setPropertyValue("maxWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"renderWidth",{get:function(){return this.getPropertyValue("renderWidth","")},set:function(e){this.setPropertyValue("renderWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"indent",{get:function(){return this.getPropertyValue("indent")},set:function(e){this.setPropertyValue("indent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"rightIndent",{get:function(){return this.getPropertyValue("rightIndent",0)},set:function(e){this.setPropertyValue("rightIndent",e)},enumerable:!1,configurable:!0}),SurveyElement.prototype.getRootStyle=function(){var e={};return this.paddingLeft&&(e["--sv-element-add-padding-left"]=this.paddingLeft),this.paddingRight&&(e["--sv-element-add-padding-right"]=this.paddingRight),e},Object.defineProperty(SurveyElement.prototype,"paddingLeft",{get:function(){return this.getPropertyValue("paddingLeft","")},set:function(e){this.setPropertyValue("paddingLeft",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"paddingRight",{get:function(){return this.getPropertyValue("paddingRight","")},set:function(e){this.setPropertyValue("paddingRight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyElement.prototype,"rootStyle",{get:function(){var e={},t=this.minWidth;return"auto"!=t&&(t="min(100%, "+this.minWidth+")"),this.allowRootStyle&&this.renderWidth&&(e.flexGrow=1,e.flexShrink=1,e.flexBasis=this.renderWidth,e.minWidth=t,e.maxWidth=this.maxWidth),e},enumerable:!1,configurable:!0}),SurveyElement.prototype.isContainsSelection=function(e){var t=void 0;if(document.selection)t=document.selection.createRange().parentElement();else{var o=window.getSelection();if(o.rangeCount>0){var n=o.getRangeAt(0);n.startOffset!==n.endOffset&&(t=n.startContainer.parentNode)}}return t==e},Object.defineProperty(SurveyElement.prototype,"clickTitleFunction",{get:function(){var e=this;if(this.needClickTitleFunction())return function(t){if(!(t&&e.isContainsSelection(t.target)))return e.processTitleClick()}},enumerable:!1,configurable:!0}),SurveyElement.prototype.needClickTitleFunction=function(){return"default"!==this.state},SurveyElement.prototype.processTitleClick=function(){"default"!==this.state&&this.toggleState()},Object.defineProperty(SurveyElement.prototype,"additionalTitleToolbar",{get:function(){return this.getAdditionalTitleToolbar()},enumerable:!1,configurable:!0}),SurveyElement.prototype.getAdditionalTitleToolbar=function(){return null},SurveyElement.prototype.getCssTitle=function(e){var t="default"!==this.state;return new d.CssClassBuilder().append(e.title).append(e.titleNumInline,(this.no||"").length>4||t).append(e.titleExpandable,t).append(e.titleExpanded,this.isExpanded).append(e.titleCollapsed,this.isCollapsed).append(e.titleDisabled,this.isReadOnly).append(e.titleOnError,this.containsErrors).toString()},SurveyElement.prototype.localeChanged=function(){e.prototype.localeChanged.call(this),this.updateDescriptionVisibility(this.description),this.errors.length>0&&this.errors.forEach(function(e){e.updateText()})},SurveyElement.prototype.dispose=function(){e.prototype.dispose.call(this),this.titleToolbarValue&&this.titleToolbarValue.dispose()},SurveyElement.CreateDisabledDesignElements=!1,__decorate([Object(s.property)({defaultValue:null})],SurveyElement.prototype,"dragTypeOverMe",void 0),__decorate([Object(s.property)({defaultValue:!1})],SurveyElement.prototype,"isDragMe",void 0),__decorate([Object(s.property)()],SurveyElement.prototype,"cssClassesValue",void 0),__decorate([Object(s.property)({defaultValue:!1})],SurveyElement.prototype,"hasVisibleErrors",void 0),__decorate([Object(s.property)({defaultValue:!0})],SurveyElement.prototype,"isSingleInRow",void 0),__decorate([Object(s.property)({defaultValue:!0})],SurveyElement.prototype,"allowRootStyle",void 0),SurveyElement}(g)},"./src/survey-error.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"SurveyError",function(){return i});var n=o(/*! ./localizablestring */"./src/localizablestring.ts"),r=o(/*! ./surveyStrings */"./src/surveyStrings.ts"),i=function(){function SurveyError(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.text=e,this.errorOwner=t,this.visible=!0,this.onUpdateErrorTextCallback=void 0}return SurveyError.prototype.equalsTo=function(e){return!!e&&!!e.getErrorType&&this.getErrorType()===e.getErrorType()&&this.text===e.text&&this.visible===e.visible},Object.defineProperty(SurveyError.prototype,"locText",{get:function(){return this.locTextValue||(this.locTextValue=new n.LocalizableString(this.errorOwner,!0),this.locTextValue.storeDefaultText=!0,this.locTextValue.text=this.getText()),this.locTextValue},enumerable:!1,configurable:!0}),SurveyError.prototype.getText=function(){var e=this.text;return e||(e=this.getDefaultText()),this.errorOwner&&(e=this.errorOwner.getErrorCustomText(e,this)),e},SurveyError.prototype.getErrorType=function(){return"base"},SurveyError.prototype.getDefaultText=function(){return""},SurveyError.prototype.getLocale=function(){return this.errorOwner?this.errorOwner.getLocale():""},SurveyError.prototype.getLocalizationString=function(e){return r.surveyLocalization.getString(e,this.getLocale())},SurveyError.prototype.updateText=function(){this.onUpdateErrorTextCallback&&this.onUpdateErrorTextCallback(this),this.locText.text=this.getText()},SurveyError}()},"./src/survey-events-api.ts":function(e,t,o){"use strict";o.r(t)},"./src/survey.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"SurveyModel",function(){return O});var n,r=o(/*! ./helpers */"./src/helpers.ts"),i=o(/*! ./jsonobject */"./src/jsonobject.ts"),s=o(/*! ./base */"./src/base.ts"),a=o(/*! ./survey-element */"./src/survey-element.ts"),l=o(/*! ./defaultCss/defaultV2Css */"./src/defaultCss/defaultV2Css.ts"),u=o(/*! ./textPreProcessor */"./src/textPreProcessor.ts"),c=o(/*! ./conditionProcessValue */"./src/conditionProcessValue.ts"),p=o(/*! ./dxSurveyService */"./src/dxSurveyService.ts"),d=o(/*! ./surveyStrings */"./src/surveyStrings.ts"),h=o(/*! ./error */"./src/error.ts"),g=o(/*! ./localizablestring */"./src/localizablestring.ts"),f=o(/*! ./stylesmanager */"./src/stylesmanager.ts"),y=o(/*! ./surveyTimerModel */"./src/surveyTimerModel.ts"),m=o(/*! ./conditions */"./src/conditions.ts"),v=o(/*! ./settings */"./src/settings.ts"),b=o(/*! ./utils/utils */"./src/utils/utils.ts"),C=o(/*! ./actions/action */"./src/actions/action.ts"),w=o(/*! ./actions/container */"./src/actions/container.ts"),P=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),M=o(/*! ./notifier */"./src/notifier.ts"),x=o(/*! ./header */"./src/header.ts"),V=o(/*! ./surveytimer */"./src/surveytimer.ts"),S=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},O=function(e){function SurveyModel(t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n=e.call(this)||this;n.valuesHash={},n.variablesHash={},n.onTriggerExecuted=n.addEvent(),n.onCompleting=n.addEvent(),n.onComplete=n.addEvent(),n.onShowingPreview=n.addEvent(),n.onNavigateToUrl=n.addEvent(),n.onStarted=n.addEvent(),n.onPartialSend=n.addEvent(),n.onCurrentPageChanging=n.addEvent(),n.onCurrentPageChanged=n.addEvent(),n.onValueChanging=n.addEvent(),n.onValueChanged=n.addEvent(),n.onVariableChanged=n.addEvent(),n.onQuestionVisibleChanged=n.addEvent(),n.onVisibleChanged=n.onQuestionVisibleChanged,n.onPageVisibleChanged=n.addEvent(),n.onPanelVisibleChanged=n.addEvent(),n.onQuestionCreated=n.addEvent(),n.onQuestionAdded=n.addEvent(),n.onQuestionRemoved=n.addEvent(),n.onPanelAdded=n.addEvent(),n.onPanelRemoved=n.addEvent(),n.onPageAdded=n.addEvent(),n.onValidateQuestion=n.addEvent(),n.onSettingQuestionErrors=n.addEvent(),n.onServerValidateQuestions=n.addEvent(),n.onValidatePanel=n.addEvent(),n.onErrorCustomText=n.addEvent(),n.onValidatedErrorsOnCurrentPage=n.addEvent(),n.onProcessHtml=n.addEvent(),n.onGetQuestionDisplayValue=n.addEvent(),n.onGetQuestionTitle=n.addEvent(),n.onGetTitleTagName=n.addEvent(),n.onGetQuestionNo=n.addEvent(),n.onProgressText=n.addEvent(),n.onTextMarkdown=n.addEvent(),n.onTextRenderAs=n.addEvent(),n.onSendResult=n.addEvent(),n.onGetResult=n.addEvent(),n.onUploadFiles=n.addEvent(),n.onDownloadFile=n.addEvent(),n.onClearFiles=n.addEvent(),n.onLoadChoicesFromServer=n.addEvent(),n.onLoadedSurveyFromService=n.addEvent(),n.onProcessTextValue=n.addEvent(),n.onUpdateQuestionCssClasses=n.addEvent(),n.onUpdatePanelCssClasses=n.addEvent(),n.onUpdatePageCssClasses=n.addEvent(),n.onUpdateChoiceItemCss=n.addEvent(),n.onAfterRenderSurvey=n.addEvent(),n.onAfterRenderHeader=n.addEvent(),n.onAfterRenderPage=n.addEvent(),n.onAfterRenderQuestion=n.addEvent(),n.onAfterRenderQuestionInput=n.addEvent(),n.onAfterRenderPanel=n.addEvent(),n.onFocusInQuestion=n.addEvent(),n.onFocusInPanel=n.addEvent(),n.onShowingChoiceItem=n.addEvent(),n.onChoicesLazyLoad=n.addEvent(),n.onGetChoiceDisplayValue=n.addEvent(),n.onMatrixRowAdded=n.addEvent(),n.onMatrixRowAdding=n.addEvent(),n.onMatrixBeforeRowAdded=n.onMatrixRowAdding,n.onMatrixRowRemoving=n.addEvent(),n.onMatrixRowRemoved=n.addEvent(),n.onMatrixRenderRemoveButton=n.addEvent(),n.onMatrixAllowRemoveRow=n.onMatrixRenderRemoveButton,n.onMatrixCellCreating=n.addEvent(),n.onMatrixCellCreated=n.addEvent(),n.onAfterRenderMatrixCell=n.addEvent(),n.onMatrixAfterCellRender=n.onAfterRenderMatrixCell,n.onMatrixCellValueChanged=n.addEvent(),n.onMatrixCellValueChanging=n.addEvent(),n.onMatrixCellValidate=n.addEvent(),n.onMatrixColumnAdded=n.addEvent(),n.onMultipleTextItemAdded=n.addEvent(),n.onDynamicPanelAdded=n.addEvent(),n.onDynamicPanelRemoved=n.addEvent(),n.onDynamicPanelRemoving=n.addEvent(),n.onTimer=n.addEvent(),n.onTimerPanelInfoText=n.addEvent(),n.onDynamicPanelItemValueChanged=n.addEvent(),n.onGetDynamicPanelTabTitle=n.addEvent(),n.onIsAnswerCorrect=n.addEvent(),n.onDragDropAllow=n.addEvent(),n.onScrollingElementToTop=n.addEvent(),n.onLocaleChangedEvent=n.addEvent(),n.onGetQuestionTitleActions=n.addEvent(),n.onGetPanelTitleActions=n.addEvent(),n.onGetPageTitleActions=n.addEvent(),n.onGetPanelFooterActions=n.addEvent(),n.onGetMatrixRowActions=n.addEvent(),n.onElementContentVisibilityChanged=n.addEvent(),n.onGetExpressionDisplayValue=n.addEvent(),n.onPopupVisibleChanged=n.addEvent(),n.jsonErrors=null,n.cssValue=null,n.hideRequiredErrors=!1,n.cssVariables={},n._isMobile=!1,n._isCompact=!1,n._isDesignMode=!1,n.ignoreValidation=!1,n.isNavigationButtonPressed=!1,n.mouseDownPage=null,n.isCalculatingProgressText=!1,n.isFirstPageRendering=!0,n.isCurrentPageRendering=!0,n.isTriggerIsRunning=!1,n.triggerValues=null,n.triggerKeys=null,n.conditionValues=null,n.isValueChangedOnRunningCondition=!1,n.conditionRunnerCounter=0,n.conditionUpdateVisibleIndexes=!1,n.conditionNotifyElementsOnAnyValueOrVariableChanged=!1,n.isEndLoadingFromJson=null,n.questionHashes={names:{},namesInsensitive:{},valueNames:{},valueNamesInsensitive:{}},n.needRenderIcons=!0,n.skippedPages=[],n.skeletonComponentName="sv-skeleton","undefined"!=typeof document&&(SurveyModel.stylesManager=new f.StylesManager);var htmlCallBack=function(e){return"<h3>"+e+"</h3>"};return n.createHtmlLocString("completedHtml","completingSurvey",htmlCallBack),n.createHtmlLocString("completedBeforeHtml","completingSurveyBefore",htmlCallBack,"completed-before"),n.createHtmlLocString("loadingHtml","loadingSurvey",htmlCallBack,"loading"),n.createLocalizableString("logo",n,!1),n.createLocalizableString("startSurveyText",n,!1,!0),n.createLocalizableString("pagePrevText",n,!1,!0),n.createLocalizableString("pageNextText",n,!1,!0),n.createLocalizableString("completeText",n,!1,!0),n.createLocalizableString("previewText",n,!1,!0),n.createLocalizableString("editText",n,!1,!0),n.createLocalizableString("questionTitleTemplate",n,!0),n.timerModelValue=new y.SurveyTimerModel(n),n.timerModelValue.onTimer=function(e){n.doTimer(e)},n.createNewArray("pages",function(e){n.doOnPageAdded(e)},function(e){n.doOnPageRemoved(e)}),n.createNewArray("triggers",function(e){e.setOwner(n)}),n.createNewArray("calculatedValues",function(e){e.setOwner(n)}),n.createNewArray("completedHtmlOnCondition",function(e){e.locOwner=n}),n.createNewArray("navigateToUrlOnCondition",function(e){e.locOwner=n}),n.registerPropertyChangedHandlers(["locale"],function(){n.onSurveyLocaleChanged()}),n.registerPropertyChangedHandlers(["firstPageIsStarted"],function(){n.onFirstPageIsStartedChanged()}),n.registerPropertyChangedHandlers(["mode"],function(){n.onModeChanged()}),n.registerPropertyChangedHandlers(["progressBarType"],function(){n.updateProgressText()}),n.registerPropertyChangedHandlers(["questionStartIndex","requiredText","questionTitlePattern"],function(){n.resetVisibleIndexes()}),n.registerPropertyChangedHandlers(["isLoading","isCompleted","isCompletedBefore","mode","isStartedState","currentPage"],function(){n.updateState()}),n.registerPropertyChangedHandlers(["state","currentPage","showPreviewBeforeComplete"],function(){n.onStateAndCurrentPageChanged()}),n.registerPropertyChangedHandlers(["logo","logoPosition"],function(){n.updateHasLogo()}),n.registerPropertyChangedHandlers(["backgroundImage"],function(){n.updateRenderBackgroundImage()}),n.registerPropertyChangedHandlers(["renderBackgroundImage","backgroundOpacity","backgroundImageFit","fitToContainer","backgroundImageAttachment"],function(){n.updateBackgroundImageStyle()}),n.onGetQuestionNo.onCallbacksChanged=function(){n.resetVisibleIndexes()},n.onProgressText.onCallbacksChanged=function(){n.updateProgressText()},n.onTextMarkdown.onCallbacksChanged=function(){n.locStrsChanged()},n.onProcessHtml.onCallbacksChanged=function(){n.locStrsChanged()},n.onGetQuestionTitle.onCallbacksChanged=function(){n.locStrsChanged()},n.onUpdatePageCssClasses.onCallbacksChanged=function(){n.currentPage&&n.currentPage.updateElementCss()},n.onUpdatePanelCssClasses.onCallbacksChanged=function(){n.currentPage&&n.currentPage.updateElementCss()},n.onUpdateQuestionCssClasses.onCallbacksChanged=function(){n.currentPage&&n.currentPage.updateElementCss()},n.onShowingChoiceItem.onCallbacksChanged=function(){n.rebuildQuestionChoices()},n.navigationBarValue=n.createNavigationBar(),n.navigationBar.locOwner=n,n.onBeforeCreating(),t&&(("string"==typeof t||t instanceof String)&&(t=JSON.parse(t)),t&&t.clientId&&(n.clientId=t.clientId),n.fromJSON(t),n.surveyId&&n.loadSurveyFromService(n.surveyId,n.clientId)),n.onCreating(),o&&n.render(o),n.updateCss(),n.setCalculatedWidthModeUpdater(),n.notifier=new M.Notifier(n.css.saveData),n.notifier.addAction(n.createTryAgainAction(),"error"),n.onPopupVisibleChanged.add(function(e,t){t.visible?n.onScrollCallback=function(){t.popup.toggleVisibility()}:n.onScrollCallback=void 0}),n.layoutElements.push({id:"timerpanel",template:"survey-timerpanel",component:"sv-timerpanel",data:n.timerModel}),n.layoutElements.push({id:"progress-buttons",component:"sv-progress-buttons",data:n}),n.layoutElements.push({id:"progress-questions",component:"sv-progress-questions",data:n}),n.layoutElements.push({id:"progress-pages",component:"sv-progress-pages",data:n}),n.layoutElements.push({id:"progress-correctquestions",component:"sv-progress-correctquestions",data:n}),n.layoutElements.push({id:"progress-requiredquestions",component:"sv-progress-requiredquestions",data:n}),n.addLayoutElement({id:"toc-navigation",component:"sv-progress-toc",data:n}),n.layoutElements.push({id:"navigationbuttons",component:"sv-action-bar",data:n.navigationBar}),n}return S(SurveyModel,e),Object.defineProperty(SurveyModel,"cssType",{get:function(){return l.surveyCss.currentType},set:function(e){f.StylesManager.applyTheme(e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"platformName",{get:function(){return SurveyModel.platform},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"commentSuffix",{get:function(){return v.settings.commentSuffix},set:function(e){v.settings.commentSuffix=e},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"commentPrefix",{get:function(){return this.commentSuffix},set:function(e){this.commentSuffix=e},enumerable:!1,configurable:!0}),SurveyModel.prototype.processClosedPopup=function(e,t){throw Error("Method not implemented.")},SurveyModel.prototype.createTryAgainAction=function(){var e=this;return{id:"save-again",title:this.getLocalizationString("saveAgainButton"),action:function(){e.isCompleted?e.saveDataOnComplete():e.doComplete()}}},SurveyModel.prototype.createHtmlLocString=function(e,t,o,n){var r=this,i=this.createLocalizableString(e,this,!1,t);i.onGetLocalizationTextCallback=o,n&&(i.onGetTextCallback=function(e){return r.processHtml(e,n)})},SurveyModel.prototype.getType=function(){return"survey"},SurveyModel.prototype.onPropertyValueChanged=function(e,t,o){"questionsOnPageMode"===e&&this.onQuestionsOnPageModeChanged(t)},Object.defineProperty(SurveyModel.prototype,"pages",{get:function(){return this.getPropertyValue("pages")},enumerable:!1,configurable:!0}),SurveyModel.prototype.render=function(e){void 0===e&&(e=null),this.renderCallback&&this.renderCallback()},SurveyModel.prototype.updateSurvey=function(e,t){var o=this;for(var n in e)!function(){if("model"!=n&&"children"!=n){if(0==n.indexOf("on")&&o[n]&&o[n].add){var t=e[n];o[n].add(function(e,o){t(e,o)})}else o[n]=e[n]}}();e&&e.data&&this.onValueChanged.add(function(t,o){e.data[o.name]=o.value})},SurveyModel.prototype.getCss=function(){return this.css},SurveyModel.prototype.updateCompletedPageCss=function(){this.containerCss=this.css.container,this.completedCss=new P.CssClassBuilder().append(this.css.body).append(this.css.completedPage).toString(),this.completedBeforeCss=new P.CssClassBuilder().append(this.css.body).append(this.css.completedBeforePage).toString(),this.loadingBodyCss=new P.CssClassBuilder().append(this.css.body).append(this.css.bodyLoading).toString()},SurveyModel.prototype.updateCss=function(){this.rootCss=this.getRootCss(),this.updateNavigationCss(),this.updateCompletedPageCss(),this.updateWrapperFormCss()},Object.defineProperty(SurveyModel.prototype,"css",{get:function(){return this.cssValue||(this.cssValue={},this.copyCssClasses(this.cssValue,l.surveyCss.getCss())),this.cssValue},set:function(e){this.setCss(e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.setCss=function(e,t){void 0===t&&(t=!0),t?this.mergeValues(e,this.css):this.cssValue=e,this.updateCss(),this.updateElementCss(!1)},Object.defineProperty(SurveyModel.prototype,"cssTitle",{get:function(){return this.css.title},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"cssNavigationComplete",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.complete)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"cssNavigationPreview",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.preview)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"cssNavigationEdit",{get:function(){return this.getNavigationCss(this.css.navigationButton,this.css.navigation.edit)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"cssNavigationPrev",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.prev)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"cssNavigationStart",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.start)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"cssNavigationNext",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.next)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"cssSurveyNavigationButton",{get:function(){return new P.CssClassBuilder().append(this.css.navigationButton).append(this.css.bodyNavigationButton).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"bodyCss",{get:function(){return new P.CssClassBuilder().append(this.css.body).append(this.css.bodyWithTimer,"none"!=this.showTimerPanel&&"running"===this.state).append(this.css.body+"--"+this.calculatedWidthMode).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"bodyContainerCss",{get:function(){return this.css.bodyContainer},enumerable:!1,configurable:!0}),SurveyModel.prototype.getNavigationCss=function(e,t){return new P.CssClassBuilder().append(e).append(t).toString()},Object.defineProperty(SurveyModel.prototype,"lazyRendering",{get:function(){return!0===this.lazyRenderingValue},set:function(e){if(this.lazyRendering!==e){this.lazyRenderingValue=e;var t=this.currentPage;t&&t.updateRows()}},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isLazyRendering",{get:function(){return this.lazyRendering||v.settings.lazyRender.enabled},enumerable:!1,configurable:!0}),SurveyModel.prototype.updateLazyRenderingRowsOnRemovingElements=function(){if(this.isLazyRendering){var e=this.currentPage;e&&Object(b.scrollElementByChildId)(e.id)}},Object.defineProperty(SurveyModel.prototype,"triggers",{get:function(){return this.getPropertyValue("triggers")},set:function(e){this.setPropertyValue("triggers",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"calculatedValues",{get:function(){return this.getPropertyValue("calculatedValues")},set:function(e){this.setPropertyValue("calculatedValues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"surveyId",{get:function(){return this.getPropertyValue("surveyId","")},set:function(e){this.setPropertyValue("surveyId",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"surveyPostId",{get:function(){return this.getPropertyValue("surveyPostId","")},set:function(e){this.setPropertyValue("surveyPostId",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"clientId",{get:function(){return this.getPropertyValue("clientId","")},set:function(e){this.setPropertyValue("clientId",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"cookieName",{get:function(){return this.getPropertyValue("cookieName","")},set:function(e){this.setPropertyValue("cookieName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"sendResultOnPageNext",{get:function(){return this.getPropertyValue("sendResultOnPageNext")},set:function(e){this.setPropertyValue("sendResultOnPageNext",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"surveyShowDataSaving",{get:function(){return this.getPropertyValue("surveyShowDataSaving")},set:function(e){this.setPropertyValue("surveyShowDataSaving",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"focusFirstQuestionAutomatic",{get:function(){return this.getPropertyValue("focusFirstQuestionAutomatic")},set:function(e){this.setPropertyValue("focusFirstQuestionAutomatic",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"focusOnFirstError",{get:function(){return this.getPropertyValue("focusOnFirstError")},set:function(e){this.setPropertyValue("focusOnFirstError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"showNavigationButtons",{get:function(){return this.getPropertyValue("showNavigationButtons")},set:function(e){(!0===e||void 0===e)&&(e="bottom"),!1===e&&(e="none"),this.setPropertyValue("showNavigationButtons",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"showPrevButton",{get:function(){return this.getPropertyValue("showPrevButton")},set:function(e){this.setPropertyValue("showPrevButton",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"showTOC",{get:function(){return this.getPropertyValue("showTOC")},set:function(e){this.setPropertyValue("showTOC",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"tocLocation",{get:function(){return this.getPropertyValue("tocLocation")},set:function(e){this.setPropertyValue("tocLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"showTitle",{get:function(){return this.getPropertyValue("showTitle")},set:function(e){this.setPropertyValue("showTitle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"showPageTitles",{get:function(){return this.getPropertyValue("showPageTitles")},set:function(e){this.setPropertyValue("showPageTitles",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"showCompletedPage",{get:function(){return this.getPropertyValue("showCompletedPage")},set:function(e){this.setPropertyValue("showCompletedPage",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"navigateToUrl",{get:function(){return this.getPropertyValue("navigateToUrl")},set:function(e){this.setPropertyValue("navigateToUrl",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"navigateToUrlOnCondition",{get:function(){return this.getPropertyValue("navigateToUrlOnCondition")},set:function(e){this.setPropertyValue("navigateToUrlOnCondition",e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.getNavigateToUrl=function(){var e=this.getExpressionItemOnRunCondition(this.navigateToUrlOnCondition),t=e?e.url:this.navigateToUrl;return t&&(t=this.processText(t,!1)),t},SurveyModel.prototype.navigateTo=function(){var e={url:this.getNavigateToUrl(),allow:!0};this.onNavigateToUrl.fire(this,e),e.url&&e.allow&&Object(b.navigateToUrl)(e.url)},Object.defineProperty(SurveyModel.prototype,"requiredText",{get:function(){return this.getPropertyValue("requiredText","*")},set:function(e){this.setPropertyValue("requiredText",e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.beforeSettingQuestionErrors=function(e,t){this.makeRequiredErrorsInvisible(t),this.onSettingQuestionErrors.fire(this,{question:e,errors:t})},SurveyModel.prototype.beforeSettingPanelErrors=function(e,t){this.makeRequiredErrorsInvisible(t)},SurveyModel.prototype.makeRequiredErrorsInvisible=function(e){if(this.hideRequiredErrors)for(var t=0;t<e.length;t++){var o=e[t].getErrorType();("required"==o||"requireoneanswer"==o)&&(e[t].visible=!1)}},Object.defineProperty(SurveyModel.prototype,"questionStartIndex",{get:function(){return this.getPropertyValue("questionStartIndex","")},set:function(e){this.setPropertyValue("questionStartIndex",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"storeOthersAsComment",{get:function(){return this.getPropertyValue("storeOthersAsComment")},set:function(e){this.setPropertyValue("storeOthersAsComment",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"maxTextLength",{get:function(){return this.getPropertyValue("maxTextLength")},set:function(e){this.setPropertyValue("maxTextLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"maxOthersLength",{get:function(){return this.getPropertyValue("maxOthersLength")},set:function(e){this.setPropertyValue("maxOthersLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"goNextPageAutomatic",{get:function(){return this.getPropertyValue("goNextPageAutomatic")},set:function(e){this.setPropertyValue("goNextPageAutomatic",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"allowCompleteSurveyAutomatic",{get:function(){return this.getPropertyValue("allowCompleteSurveyAutomatic",!0)},set:function(e){this.setPropertyValue("allowCompleteSurveyAutomatic",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"checkErrorsMode",{get:function(){return this.getPropertyValue("checkErrorsMode")},set:function(e){this.setPropertyValue("checkErrorsMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"autoGrowComment",{get:function(){return this.getPropertyValue("autoGrowComment")},set:function(e){this.setPropertyValue("autoGrowComment",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"allowResizeComment",{get:function(){return this.getPropertyValue("allowResizeComment")},set:function(e){this.setPropertyValue("allowResizeComment",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"textUpdateMode",{get:function(){return this.getPropertyValue("textUpdateMode")},set:function(e){this.setPropertyValue("textUpdateMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"clearInvisibleValues",{get:function(){return this.getPropertyValue("clearInvisibleValues")},set:function(e){!0===e&&(e="onComplete"),!1===e&&(e="none"),this.setPropertyValue("clearInvisibleValues",e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.clearIncorrectValues=function(e){void 0===e&&(e=!1);for(var t=0;t<this.pages.length;t++)this.pages[t].clearIncorrectValues();if(e){var o=this.data,n=!1;for(var r in o)if(!(this.getQuestionByValueName(r)||this.iscorrectValueWithPostPrefix(r,v.settings.commentSuffix)||this.iscorrectValueWithPostPrefix(r,v.settings.matrix.totalsSuffix))){var i=this.getCalculatedValueByName(r);i&&i.includeIntoResult||(n=!0,delete o[r])}n&&(this.data=o)}},SurveyModel.prototype.iscorrectValueWithPostPrefix=function(e,t){return e.indexOf(t)===e.length-t.length&&!!this.getQuestionByValueName(e.substring(0,e.indexOf(t)))},Object.defineProperty(SurveyModel.prototype,"keepIncorrectValues",{get:function(){return this.getPropertyValue("keepIncorrectValues")},set:function(e){this.setPropertyValue("keepIncorrectValues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"locale",{get:function(){return this.getPropertyValue("locale",d.surveyLocalization.currentLocale)},set:function(e){e!==d.surveyLocalization.defaultLocale||d.surveyLocalization.currentLocale||(e=""),this.setPropertyValue("locale",e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.onSurveyLocaleChanged=function(){this.notifyElementsOnAnyValueOrVariableChanged("locale"),this.localeChanged(),this.onLocaleChangedEvent.fire(this,this.locale)},SurveyModel.prototype.getUsedLocales=function(){var e=[];this.addUsedLocales(e);var t=e.indexOf("default");if(t>-1){var o=d.surveyLocalization.defaultLocale,n=e.indexOf(o);n>-1&&e.splice(n,1),t=e.indexOf("default"),e[t]=o}return e},SurveyModel.prototype.localeChanged=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].localeChanged()},SurveyModel.prototype.getLocale=function(){return this.locale},SurveyModel.prototype.locStrsChanged=function(){if(e.prototype.locStrsChanged.call(this),this.currentPage){if(this.isDesignMode)this.pages.forEach(function(e){return e.locStrsChanged()});else{var t=this.activePage;t&&t.locStrsChanged();for(var o=this.visiblePages,n=0;n<o.length;n++)o[n].navigationLocStrChanged()}this.isShowStartingPage||this.updateProgressText(),this.navigationBar.locStrsChanged()}},SurveyModel.prototype.getMarkdownHtml=function(e,t){return this.getSurveyMarkdownHtml(this,e,t)},SurveyModel.prototype.getRenderer=function(e){return this.getRendererForString(this,e)},SurveyModel.prototype.getRendererContext=function(e){return this.getRendererContextForString(this,e)},SurveyModel.prototype.getRendererForString=function(e,t){var o=this.getBuiltInRendererForString(e,t),n={element:e,name:t,renderAs:o};return this.onTextRenderAs.fire(this,n),n.renderAs},SurveyModel.prototype.getRendererContextForString=function(e,t){return t},SurveyModel.prototype.getExpressionDisplayValue=function(e,t,o){var n={question:e,value:t,displayValue:o};return this.onGetExpressionDisplayValue.fire(this,n),n.displayValue},SurveyModel.prototype.getBuiltInRendererForString=function(e,t){if(this.isDesignMode)return g.LocalizableString.editableRenderer},SurveyModel.prototype.getProcessedText=function(e){return this.processText(e,!0)},SurveyModel.prototype.getLocString=function(e){return this.getLocalizationString(e)},SurveyModel.prototype.getErrorCustomText=function(e,t){return this.getSurveyErrorCustomText(this,e,t)},SurveyModel.prototype.getSurveyErrorCustomText=function(e,t,o){var n={text:t,name:o.getErrorType(),obj:e,error:o};return this.onErrorCustomText.fire(this,n),n.text},SurveyModel.prototype.getQuestionDisplayValue=function(e,t){var o={question:e,displayValue:t};return this.onGetQuestionDisplayValue.fire(this,o),o.displayValue},Object.defineProperty(SurveyModel.prototype,"emptySurveyText",{get:function(){return this.getLocalizationString("emptySurvey")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"logo",{get:function(){return this.getLocalizableStringText("logo")},set:function(e){this.setLocalizableStringText("logo",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"locLogo",{get:function(){return this.getLocalizableString("logo")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"logoWidth",{get:function(){return this.getPropertyValue("logoWidth")},set:function(e){this.setPropertyValue("logoWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"renderedLogoWidth",{get:function(){return this.logoWidth?Object(b.getRenderedSize)(this.logoWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"renderedStyleLogoWidth",{get:function(){return this.logoWidth?Object(b.getRenderedStyleSize)(this.logoWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"logoHeight",{get:function(){return this.getPropertyValue("logoHeight")},set:function(e){this.setPropertyValue("logoHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"renderedLogoHeight",{get:function(){return this.logoHeight?Object(b.getRenderedSize)(this.logoHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"renderedStyleLogoHeight",{get:function(){return this.logoHeight?Object(b.getRenderedStyleSize)(this.logoHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"logoPosition",{get:function(){return this.getPropertyValue("logoPosition")},set:function(e){this.setPropertyValue("logoPosition",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"hasLogo",{get:function(){return this.getPropertyValue("hasLogo",!1)},enumerable:!1,configurable:!0}),SurveyModel.prototype.updateHasLogo=function(){this.setPropertyValue("hasLogo",!!this.logo&&"none"!==this.logoPosition)},Object.defineProperty(SurveyModel.prototype,"isLogoBefore",{get:function(){return!this.isDesignMode&&this.renderedHasLogo&&("left"===this.logoPosition||"top"===this.logoPosition)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isLogoAfter",{get:function(){return this.isDesignMode?this.renderedHasLogo:this.renderedHasLogo&&("right"===this.logoPosition||"bottom"===this.logoPosition)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"logoClassNames",{get:function(){return new P.CssClassBuilder().append(this.css.logo).append({left:"sv-logo--left",right:"sv-logo--right",top:"sv-logo--top",bottom:"sv-logo--bottom"}[this.logoPosition]).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"renderedHasTitle",{get:function(){return this.isDesignMode?this.isPropertyVisible("title"):!this.locTitle.isEmpty&&this.showTitle},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"renderedHasDescription",{get:function(){return this.isDesignMode?this.isPropertyVisible("description"):!!this.hasDescription},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"hasTitle",{get:function(){return this.renderedHasTitle},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"renderedHasLogo",{get:function(){return this.isDesignMode?this.isPropertyVisible("logo"):this.hasLogo},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"renderedHasHeader",{get:function(){return this.renderedHasTitle||this.renderedHasLogo},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"logoFit",{get:function(){return this.getPropertyValue("logoFit")},set:function(e){this.setPropertyValue("logoFit",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"themeVariables",{get:function(){return Object.assign({},this.cssVariables)},enumerable:!1,configurable:!0}),SurveyModel.prototype.setIsMobile=function(e){void 0===e&&(e=!0),this._isMobile!==e&&(this._isMobile=e,this.updateCss(),this.getAllQuestions().forEach(function(t){return t.setIsMobile(e)}))},Object.defineProperty(SurveyModel.prototype,"isMobile",{get:function(){return this._isMobile&&!this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isCompact",{get:function(){return this._isCompact},set:function(e){e!==this._isCompact&&(this._isCompact=e,this.updateElementCss())},enumerable:!1,configurable:!0}),SurveyModel.prototype.isLogoImageChoosen=function(){return this.locLogo.renderedHtml},Object.defineProperty(SurveyModel.prototype,"titleMaxWidth",{get:function(){if(!(Object(b.isMobile)()||this.isMobile)&&!this.isValueEmpty(this.isLogoImageChoosen())&&!v.settings.supportCreatorV2){var e=this.logoWidth;if("left"===this.logoPosition||"right"===this.logoPosition)return"calc(100% - 5px - 2em - "+e+")"}return""},enumerable:!1,configurable:!0}),SurveyModel.prototype.updateRenderBackgroundImage=function(){var e=this.backgroundImage;this.renderBackgroundImage=Object(b.wrapUrlForBackgroundImage)(e)},Object.defineProperty(SurveyModel.prototype,"backgroundOpacity",{get:function(){return this.getPropertyValue("backgroundOpacity")},set:function(e){this.setPropertyValue("backgroundOpacity",e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.updateBackgroundImageStyle=function(){this.backgroundImageStyle={opacity:this.backgroundOpacity,backgroundImage:this.renderBackgroundImage,backgroundSize:this.backgroundImageFit,backgroundAttachment:this.fitToContainer?void 0:this.backgroundImageAttachment}},SurveyModel.prototype.updateWrapperFormCss=function(){this.wrapperFormCss=new P.CssClassBuilder().append(this.css.rootWrapper).append(this.css.rootWrapperFixed,"fixed"===this.backgroundImageAttachment).toString()},Object.defineProperty(SurveyModel.prototype,"completedHtml",{get:function(){return this.getLocalizableStringText("completedHtml")},set:function(e){this.setLocalizableStringText("completedHtml",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"locCompletedHtml",{get:function(){return this.getLocalizableString("completedHtml")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"completedHtmlOnCondition",{get:function(){return this.getPropertyValue("completedHtmlOnCondition")},set:function(e){this.setPropertyValue("completedHtmlOnCondition",e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.runExpression=function(e){if(!e)return null;var t=this.getFilteredValues(),o=this.getFilteredProperties();return new m.ExpressionRunner(e).run(t,o)},SurveyModel.prototype.runCondition=function(e){if(!e)return!1;var t=this.getFilteredValues(),o=this.getFilteredProperties();return new m.ConditionRunner(e).run(t,o)},SurveyModel.prototype.runTriggers=function(){this.checkTriggers(this.getFilteredValues(),!1)},Object.defineProperty(SurveyModel.prototype,"renderedCompletedHtml",{get:function(){var e=this.getExpressionItemOnRunCondition(this.completedHtmlOnCondition);return e?e.html:this.completedHtml},enumerable:!1,configurable:!0}),SurveyModel.prototype.getExpressionItemOnRunCondition=function(e){if(0==e.length)return null;for(var t=this.getFilteredValues(),o=this.getFilteredProperties(),n=0;n<e.length;n++)if(e[n].runCondition(t,o))return e[n];return null},Object.defineProperty(SurveyModel.prototype,"completedBeforeHtml",{get:function(){return this.getLocalizableStringText("completedBeforeHtml")},set:function(e){this.setLocalizableStringText("completedBeforeHtml",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"locCompletedBeforeHtml",{get:function(){return this.getLocalizableString("completedBeforeHtml")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"loadingHtml",{get:function(){return this.getLocalizableStringText("loadingHtml")},set:function(e){this.setLocalizableStringText("loadingHtml",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"locLoadingHtml",{get:function(){return this.getLocalizableString("loadingHtml")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"defaultLoadingHtml",{get:function(){return"<h3>"+this.getLocalizationString("loadingSurvey")+"</h3>"},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"navigationBar",{get:function(){return this.navigationBarValue},enumerable:!1,configurable:!0}),SurveyModel.prototype.addNavigationItem=function(e){return e.component||(e.component="sv-nav-btn"),e.innerCss||(e.innerCss=this.cssSurveyNavigationButton),this.navigationBar.addAction(e)},Object.defineProperty(SurveyModel.prototype,"startSurveyText",{get:function(){return this.getLocalizableStringText("startSurveyText")},set:function(e){this.setLocalizableStringText("startSurveyText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"locStartSurveyText",{get:function(){return this.getLocalizableString("startSurveyText")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"pagePrevText",{get:function(){return this.getLocalizableStringText("pagePrevText")},set:function(e){this.setLocalizableStringText("pagePrevText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"locPagePrevText",{get:function(){return this.getLocalizableString("pagePrevText")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"pageNextText",{get:function(){return this.getLocalizableStringText("pageNextText")},set:function(e){this.setLocalizableStringText("pageNextText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"locPageNextText",{get:function(){return this.getLocalizableString("pageNextText")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"completeText",{get:function(){return this.getLocalizableStringText("completeText")},set:function(e){this.setLocalizableStringText("completeText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"locCompleteText",{get:function(){return this.getLocalizableString("completeText")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"previewText",{get:function(){return this.getLocalizableStringText("previewText")},set:function(e){this.setLocalizableStringText("previewText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"locPreviewText",{get:function(){return this.getLocalizableString("previewText")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"editText",{get:function(){return this.getLocalizableStringText("editText")},set:function(e){this.setLocalizableStringText("editText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"locEditText",{get:function(){return this.getLocalizableString("editText")},enumerable:!1,configurable:!0}),SurveyModel.prototype.getElementTitleTagName=function(e,t){if(this.onGetTitleTagName.isEmpty)return t;var o={element:e,tagName:t};return this.onGetTitleTagName.fire(this,o),o.tagName},Object.defineProperty(SurveyModel.prototype,"questionTitlePattern",{get:function(){return this.getPropertyValue("questionTitlePattern","numTitleRequire")},set:function(e){"numRequireTitle"!==e&&"requireNumTitle"!==e&&"numTitle"!=e&&(e="numTitleRequire"),this.setPropertyValue("questionTitlePattern",e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.getQuestionTitlePatternOptions=function(){var e=[],t=this.getLocalizationString("questionTitlePatternText"),o=this.questionStartIndex?this.questionStartIndex:"1.";return e.push({value:"numTitleRequire",text:o+" "+t+" "+this.requiredText}),e.push({value:"numRequireTitle",text:o+" "+this.requiredText+" "+t}),e.push({value:"requireNumTitle",text:this.requiredText+" "+o+" "+t}),e.push({value:"numTitle",text:o+" "+t}),e},Object.defineProperty(SurveyModel.prototype,"questionTitleTemplate",{get:function(){return this.getLocalizableStringText("questionTitleTemplate")},set:function(e){this.setLocalizableStringText("questionTitleTemplate",e),this.questionTitlePattern=this.getNewTitlePattern(e),this.questionStartIndex=this.getNewQuestionTitleElement(e,"no",this.questionStartIndex,"1"),this.requiredText=this.getNewQuestionTitleElement(e,"require",this.requiredText,"*")},enumerable:!1,configurable:!0}),SurveyModel.prototype.getNewTitlePattern=function(e){if(e){for(var t=[];e.indexOf("{")>-1;){var o=(e=e.substring(e.indexOf("{")+1)).indexOf("}");if(o<0)break;t.push(e.substring(0,o)),e=e.substring(o+1)}if(t.length>1){if("require"==t[0])return"requireNumTitle";if("require"==t[1]&&3==t.length)return"numRequireTitle";if(0>t.indexOf("require"))return"numTitle"}if(1==t.length&&"title"==t[0])return"numTitle"}return"numTitleRequire"},SurveyModel.prototype.getNewQuestionTitleElement=function(e,t,o,n){if(t="{"+t+"}",!e||0>e.indexOf(t))return o;for(var r=e.indexOf(t),i="",s="",a=r-1;a>=0&&"}"!=e[a];a--);for(a<r-1&&(i=e.substring(a+1,r)),r+=t.length,a=r;a<e.length&&"{"!=e[a];a++);for(a>r&&(s=e.substring(r,a)),a=0;a<i.length&&33>i.charCodeAt(a);)a++;for(i=i.substring(a),a=s.length-1;a>=0&&33>s.charCodeAt(a);)a--;return(s=s.substring(0,a+1),i||s)?i+(o||n)+s:o},Object.defineProperty(SurveyModel.prototype,"locQuestionTitleTemplate",{get:function(){return this.getLocalizableString("questionTitleTemplate")},enumerable:!1,configurable:!0}),SurveyModel.prototype.getUpdatedQuestionTitle=function(e,t){if(this.onGetQuestionTitle.isEmpty)return t;var o={question:e,title:t};return this.onGetQuestionTitle.fire(this,o),o.title},SurveyModel.prototype.getUpdatedQuestionNo=function(e,t){if(this.onGetQuestionNo.isEmpty)return t;var o={question:e,no:t};return this.onGetQuestionNo.fire(this,o),o.no},Object.defineProperty(SurveyModel.prototype,"showPageNumbers",{get:function(){return this.getPropertyValue("showPageNumbers")},set:function(e){e!==this.showPageNumbers&&(this.setPropertyValue("showPageNumbers",e),this.updateVisibleIndexes())},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"showQuestionNumbers",{get:function(){return this.getPropertyValue("showQuestionNumbers")},set:function(e){!0===e&&(e="on"),!1===e&&(e="off"),(e="onpage"===(e=e.toLowerCase())?"onPage":e)!==this.showQuestionNumbers&&(this.setPropertyValue("showQuestionNumbers",e),this.updateVisibleIndexes())},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"showProgressBar",{get:function(){return this.getPropertyValue("showProgressBar")},set:function(e){this.setPropertyValue("showProgressBar",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"progressBarType",{get:function(){return this.getPropertyValue("progressBarType")},set:function(e){"correctquestion"===e&&(e="correctQuestion"),"requiredquestion"===e&&(e="requiredQuestion"),this.setPropertyValue("progressBarType",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isShowProgressBarOnTop",{get:function(){return!!this.canShowProresBar()&&("top"===this.showProgressBar||"both"===this.showProgressBar)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isShowProgressBarOnBottom",{get:function(){return!!this.canShowProresBar()&&("bottom"===this.showProgressBar||"both"===this.showProgressBar)},enumerable:!1,configurable:!0}),SurveyModel.prototype.getProgressTypeComponent=function(){return"sv-progress-"+this.progressBarType.toLowerCase()},SurveyModel.prototype.getProgressCssClasses=function(e){return void 0===e&&(e=""),new P.CssClassBuilder().append(this.css.progress).append(this.css.progressTop,this.isShowProgressBarOnTop&&(!e||"header"==e)).append(this.css.progressBottom,this.isShowProgressBarOnBottom&&(!e||"footer"==e)).toString()},SurveyModel.prototype.canShowProresBar=function(){return!this.isShowingPreview||"showAllQuestions"!=this.showPreviewBeforeComplete},Object.defineProperty(SurveyModel.prototype,"processedTitle",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"questionTitleLocation",{get:function(){return this.getPropertyValue("questionTitleLocation")},set:function(e){this.setPropertyValue("questionTitleLocation",e.toLowerCase()),this.isLoadingFromJson||this.updateElementCss(!0)},enumerable:!1,configurable:!0}),SurveyModel.prototype.updateElementCss=function(e){this.startedPage&&this.startedPage.updateElementCss(e);for(var t=this.visiblePages,o=0;o<t.length;o++)t[o].updateElementCss(e);this.updateCss()},Object.defineProperty(SurveyModel.prototype,"questionErrorLocation",{get:function(){return this.getPropertyValue("questionErrorLocation")},set:function(e){this.setPropertyValue("questionErrorLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"questionDescriptionLocation",{get:function(){return this.getPropertyValue("questionDescriptionLocation")},set:function(e){this.setPropertyValue("questionDescriptionLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"mode",{get:function(){return this.getPropertyValue("mode")},set:function(e){(e=e.toLowerCase())!=this.mode&&("edit"==e||"display"==e)&&this.setPropertyValue("mode",e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.onModeChanged=function(){for(var e=0;e<this.pages.length;e++){var t=this.pages[e];t.setPropertyValue("isReadOnly",t.isReadOnly)}this.updateButtonsVisibility(),this.updateCss()},Object.defineProperty(SurveyModel.prototype,"data",{get:function(){for(var e={},t=this.getValuesKeys(),o=0;o<t.length;o++){var n=t[o],r=this.getDataValueCore(this.valuesHash,n);void 0!==r&&(e[n]=r)}return this.setCalculatedValuesIntoResult(e),e},set:function(e){this.valuesHash={},this.setDataCore(e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.mergeData=function(e){if(e){var t=this.data;this.mergeValues(e,t),this.setDataCore(t)}},SurveyModel.prototype.setDataCore=function(e){if(e)for(var t in e)this.setDataValueCore(this.valuesHash,t,e[t]);this.updateAllQuestionsValue(),this.notifyAllQuestionsOnValueChanged(),this.notifyElementsOnAnyValueOrVariableChanged(""),this.runConditions(),this.updateAllQuestionsValue()},SurveyModel.prototype.getStructuredData=function(e,t){if(void 0===e&&(e=!0),void 0===t&&(t=-1),0===t)return this.data;var o={};return this.pages.forEach(function(n){if(e){var r={};n.collectValues(r,t-1)&&(o[n.name]=r)}else n.collectValues(o,t)}),o},SurveyModel.prototype.setStructuredData=function(e,t){if(void 0===t&&(t=!1),e){var o={};for(var n in e)if(this.getQuestionByValueName(n))o[n]=e[n];else{var r=this.getPageByName(n);r||(r=this.getPanelByName(n)),r&&this.collectDataFromPanel(r,o,e[n])}t?this.mergeData(o):this.data=o}},SurveyModel.prototype.collectDataFromPanel=function(e,t,o){for(var n in o){var r=e.getElementByName(n);r&&(r.isPanel?this.collectDataFromPanel(r,t,o[n]):t[n]=o[n])}},Object.defineProperty(SurveyModel.prototype,"editingObj",{get:function(){return this.editingObjValue},set:function(e){var t=this;if(this.editingObj!=e&&(this.editingObj&&this.editingObj.onPropertyChanged.remove(this.onEditingObjPropertyChanged),this.editingObjValue=e,!this.isDisposed)){if(!e)for(var o=this.getAllQuestions(),n=0;n<o.length;n++)o[n].unbindValue();this.editingObj&&(this.setDataCore({}),this.onEditingObjPropertyChanged=function(e,o){i.Serializer.hasOriginalProperty(t.editingObj,o.name)&&t.updateOnSetValue(o.name,t.editingObj[o.name],o.oldValue)},this.editingObj.onPropertyChanged.add(this.onEditingObjPropertyChanged))}},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isEditingSurveyElement",{get:function(){return!!this.editingObj},enumerable:!1,configurable:!0}),SurveyModel.prototype.setCalculatedValuesIntoResult=function(e){for(var t=0;t<this.calculatedValues.length;t++){var o=this.calculatedValues[t];o.includeIntoResult&&o.name&&void 0!==this.getVariable(o.name)&&(e[o.name]=this.getVariable(o.name))}},SurveyModel.prototype.getAllValues=function(){return this.data},SurveyModel.prototype.getPlainData=function(e){e||(e={includeEmpty:!0,includeQuestionTypes:!1,includeValues:!1});var t=[],o=[];if(this.getAllQuestions().forEach(function(n){var r=n.getPlainData(e);r&&(t.push(r),o.push(n.valueName||n.name))}),e.includeValues)for(var n=this.getValuesKeys(),r=0;r<n.length;r++){var i=n[r];if(-1==o.indexOf(i)){var s=this.getDataValueCore(this.valuesHash,i);s&&t.push({name:i,title:i,value:s,displayValue:s,isNode:!1,getString:function(e){return"object"==typeof e?JSON.stringify(e):e}})}}return t},SurveyModel.prototype.getFilteredValues=function(){var e={};for(var t in this.variablesHash)e[t]=this.variablesHash[t];this.addCalculatedValuesIntoFilteredValues(e);for(var o=this.getValuesKeys(),n=0;n<o.length;n++){var t=o[n];e[t]=this.getDataValueCore(this.valuesHash,t)}return this.getAllQuestions().forEach(function(t){t.hasFilteredValue&&(e[t.getValueName()]=t.getFilteredValue())}),e},SurveyModel.prototype.addCalculatedValuesIntoFilteredValues=function(e){for(var t=this.calculatedValues,o=0;o<t.length;o++)e[t[o].name]=t[o].value},SurveyModel.prototype.getFilteredProperties=function(){return{survey:this}},SurveyModel.prototype.getValuesKeys=function(){if(!this.editingObj)return Object.keys(this.valuesHash);for(var e=i.Serializer.getPropertiesByObj(this.editingObj),t=[],o=0;o<e.length;o++)t.push(e[o].name);return t},SurveyModel.prototype.getDataValueCore=function(e,t){return this.editingObj?i.Serializer.getObjPropertyValue(this.editingObj,t):this.getDataFromValueHash(e,t)},SurveyModel.prototype.setDataValueCore=function(e,t,o){this.editingObj?i.Serializer.setObjPropertyValue(this.editingObj,t,o):this.setDataToValueHash(e,t,o)},SurveyModel.prototype.deleteDataValueCore=function(e,t){this.editingObj?this.editingObj[t]=null:this.deleteDataFromValueHash(e,t)},SurveyModel.prototype.getDataFromValueHash=function(e,t){return this.valueHashGetDataCallback?this.valueHashGetDataCallback(e,t):e[t]},SurveyModel.prototype.setDataToValueHash=function(e,t,o){this.valueHashSetDataCallback?this.valueHashSetDataCallback(e,t,o):e[t]=o},SurveyModel.prototype.deleteDataFromValueHash=function(e,t){this.valueHashDeleteDataCallback?this.valueHashDeleteDataCallback(e,t):delete e[t]},Object.defineProperty(SurveyModel.prototype,"comments",{get:function(){for(var e={},t=this.getValuesKeys(),o=0;o<t.length;o++){var n=t[o];n.indexOf(this.commentSuffix)>0&&(e[n]=this.getDataValueCore(this.valuesHash,n))}return e},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"visiblePages",{get:function(){if(this.isDesignMode)return this.pages;for(var e=[],t=0;t<this.pages.length;t++)this.isPageInVisibleList(this.pages[t])&&e.push(this.pages[t]);return e},enumerable:!1,configurable:!0}),SurveyModel.prototype.isPageInVisibleList=function(e){return this.isDesignMode||e.isVisible&&!e.isStartPage},Object.defineProperty(SurveyModel.prototype,"isEmpty",{get:function(){return 0==this.pages.length},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"PageCount",{get:function(){return this.pageCount},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"pageCount",{get:function(){return this.pages.length},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"visiblePageCount",{get:function(){return this.visiblePages.length},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"startedPage",{get:function(){var e=this.firstPageIsStarted&&this.pages.length>1?this.pages[0]:null;return e&&(e.onFirstRendering(),e.setWasShown(!0)),e},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"currentPage",{get:function(){return this.getPropertyValue("currentPage",null)},set:function(e){if(!this.isLoadingFromJson){var t=this.getPageByObject(e);if((!e||t)&&(t||!this.isCurrentPageAvailable)){var o=this.visiblePages;if(!(null!=t&&0>o.indexOf(t))&&t!=this.currentPage){var n=this.currentPage;(this.isShowingPreview||this.currentPageChanging(t,n))&&(this.setPropertyValue("currentPage",t),t&&(t.onFirstRendering(),t.updateCustomWidgets(),t.setWasShown(!0)),this.locStrsChanged(),this.isShowingPreview||this.currentPageChanged(t,n))}}}},enumerable:!1,configurable:!0}),SurveyModel.prototype.updateCurrentPage=function(){this.isCurrentPageAvailable||(this.currentPage=this.firstVisiblePage)},Object.defineProperty(SurveyModel.prototype,"isCurrentPageAvailable",{get:function(){var e=this.currentPage;return!!e&&this.isPageInVisibleList(e)&&this.isPageExistsInSurvey(e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.isPageExistsInSurvey=function(e){return this.pages.indexOf(e)>-1||!!this.onContainsPageCallback&&this.onContainsPageCallback(e)},Object.defineProperty(SurveyModel.prototype,"activePage",{get:function(){return this.getPropertyValue("activePage")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isShowStartingPage",{get:function(){return"starting"===this.state},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"matrixDragHandleArea",{get:function(){return this.getPropertyValue("matrixDragHandleArea","entireItem")},set:function(e){this.setPropertyValue("matrixDragHandleArea",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isShowingPage",{get:function(){return"running"==this.state||"preview"==this.state||this.isShowStartingPage},enumerable:!1,configurable:!0}),SurveyModel.prototype.updateActivePage=function(){var e=this.isShowStartingPage?this.startedPage:this.currentPage;this.setPropertyValue("activePage",e)},SurveyModel.prototype.onStateAndCurrentPageChanged=function(){this.updateActivePage(),this.updateButtonsVisibility()},SurveyModel.prototype.getPageByObject=function(e){if(!e)return null;if(e.getType&&"page"==e.getType())return e;if("string"==typeof e||e instanceof String)return this.getPageByName(String(e));if(!isNaN(e)){var t=Number(e),o=this.visiblePages;return e<0||e>=o.length?null:o[t]}return e},Object.defineProperty(SurveyModel.prototype,"currentPageNo",{get:function(){return this.visiblePages.indexOf(this.currentPage)},set:function(e){var t=this.visiblePages;e<0||e>=t.length||(this.currentPage=t[e])},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"questionsOrder",{get:function(){return this.getPropertyValue("questionsOrder")},set:function(e){this.setPropertyValue("questionsOrder",e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.focusFirstQuestion=function(){if(!this.focusingQuestionInfo){var e=this.activePage;e&&(e.scrollToTop(),e.focusFirstQuestion())}},SurveyModel.prototype.scrollToTopOnPageChange=function(e){void 0===e&&(e=!0);var t=this.activePage;t&&(e&&t.scrollToTop(),this.isCurrentPageRendering&&this.focusFirstQuestionAutomatic&&!this.focusingQuestionInfo&&(t.focusFirstQuestion(),this.isCurrentPageRendering=!1))},Object.defineProperty(SurveyModel.prototype,"state",{get:function(){return this.getPropertyValue("state","empty")},enumerable:!1,configurable:!0}),SurveyModel.prototype.updateState=function(){this.setPropertyValue("state",this.calcState())},SurveyModel.prototype.calcState=function(){return this.isLoading?"loading":this.isCompleted?"completed":this.isCompletedBefore?"completedbefore":!this.isDesignMode&&this.isEditMode&&this.isStartedState&&this.startedPage?"starting":this.isShowingPreview?this.currentPage?"preview":"empty":this.currentPage?"running":"empty"},Object.defineProperty(SurveyModel.prototype,"isCompleted",{get:function(){return this.getPropertyValue("isCompleted",!1)},set:function(e){this.setPropertyValue("isCompleted",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isShowingPreview",{get:function(){return this.getPropertyValue("isShowingPreview",!1)},set:function(e){this.isShowingPreview!=e&&(this.setPropertyValue("isShowingPreview",e),this.onShowingPreviewChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isStartedState",{get:function(){return this.getPropertyValue("isStartedState",!1)},set:function(e){this.setPropertyValue("isStartedState",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isCompletedBefore",{get:function(){return this.getPropertyValue("isCompletedBefore",!1)},set:function(e){this.setPropertyValue("isCompletedBefore",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isLoading",{get:function(){return this.getPropertyValue("isLoading",!1)},set:function(e){this.setPropertyValue("isLoading",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"completedState",{get:function(){return this.getPropertyValue("completedState","")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"completedStateText",{get:function(){return this.getPropertyValue("completedStateText","")},enumerable:!1,configurable:!0}),SurveyModel.prototype.setCompletedState=function(e,t){this.setPropertyValue("completedState",e),t||("saving"==e&&(t=this.getLocalizationString("savingData")),"error"==e&&(t=this.getLocalizationString("savingDataError")),"success"==e&&(t=this.getLocalizationString("savingDataSuccess"))),this.setPropertyValue("completedStateText",t),"completed"===this.state&&this.showCompletedPage&&this.completedState&&this.notify(this.completedStateText,this.completedState,!0)},SurveyModel.prototype.notify=function(e,t,o){void 0===o&&(o=!1),this.notifier.showActions=o,this.notifier.notify(e,t,"error"===t)},SurveyModel.prototype.clear=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.isCompleted=!1,this.isCompletedBefore=!1,this.isLoading=!1,this.completedByTriggers=void 0,e&&(this.data=null,this.variablesHash={}),this.timerModel.spent=0;for(var o=0;o<this.pages.length;o++)this.pages[o].timeSpent=0,this.pages[o].setWasShown(!1),this.pages[o].passed=!1;this.onFirstPageIsStartedChanged(),t&&(this.currentPage=this.firstVisiblePage),e&&this.updateValuesWithDefaults()},SurveyModel.prototype.mergeValues=function(e,t){Object(b.mergeValues)(e,t)},SurveyModel.prototype.updateValuesWithDefaults=function(){if(!this.isDesignMode&&!this.isLoading)for(var e=0;e<this.pages.length;e++)for(var t=this.pages[e].questions,o=0;o<t.length;o++)t[o].updateValueWithDefaults()},SurveyModel.prototype.updateCustomWidgets=function(e){e&&e.updateCustomWidgets()},SurveyModel.prototype.currentPageChanging=function(e,t){var o=this.createPageChangeEventOptions(e,t);o.allow=!0,o.allowChanging=!0,this.onCurrentPageChanging.fire(this,o);var n=o.allowChanging&&o.allow;return n&&(this.isCurrentPageRendering=!0),n},SurveyModel.prototype.currentPageChanged=function(e,t){this.notifyQuestionsOnHidingContent(t);var o=this.createPageChangeEventOptions(e,t);o.isNextPage&&(t.passed=!0),this.onCurrentPageChanged.fire(this,o)},SurveyModel.prototype.notifyQuestionsOnHidingContent=function(e){e&&e.questions.forEach(function(e){return e.onHidingContent()})},SurveyModel.prototype.createPageChangeEventOptions=function(e,t){var o=e&&t?e.visibleIndex-t.visibleIndex:0;return{oldCurrentPage:t,newCurrentPage:e,isNextPage:1===o,isPrevPage:-1===o,isGoingForward:o>0,isGoingBackward:o<0,isAfterPreview:!0===this.changeCurrentPageFromPreview}},SurveyModel.prototype.getProgress=function(){if(null==this.currentPage)return 0;if("pages"!==this.progressBarType){var e=this.getProgressInfo();return"requiredQuestions"===this.progressBarType?e.requiredQuestionCount>=1?Math.ceil(100*e.requiredAnsweredQuestionCount/e.requiredQuestionCount):100:e.questionCount>=1?Math.ceil(100*e.answeredQuestionCount/e.questionCount):100}var t=this.visiblePages;return Math.ceil(100*t.indexOf(this.currentPage)/t.length)},Object.defineProperty(SurveyModel.prototype,"progressValue",{get:function(){return this.getPropertyValue("progressValue",0)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isNavigationButtonsShowing",{get:function(){if(this.isDesignMode)return"none";var e=this.currentPage;return e?"show"===e.navigationButtonsVisibility?"none"===this.showNavigationButtons?"bottom":this.showNavigationButtons:"hide"===e.navigationButtonsVisibility?"none":this.showNavigationButtons:"none"},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isNavigationButtonsShowingOnTop",{get:function(){return this.getIsNavigationButtonsShowingOn("top")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isNavigationButtonsShowingOnBottom",{get:function(){return this.getIsNavigationButtonsShowingOn("bottom")},enumerable:!1,configurable:!0}),SurveyModel.prototype.getIsNavigationButtonsShowingOn=function(e){var t=this.isNavigationButtonsShowing;return"both"==t||t==e},Object.defineProperty(SurveyModel.prototype,"isEditMode",{get:function(){return"edit"==this.mode},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isDisplayMode",{get:function(){return"display"==this.mode||"preview"==this.state},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isUpdateValueTextOnTyping",{get:function(){return"onTyping"==this.textUpdateMode},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isDesignMode",{get:function(){return this._isDesignMode},enumerable:!1,configurable:!0}),SurveyModel.prototype.setDesignMode=function(e){!!this._isDesignMode!=!!e&&(this._isDesignMode=!!e,this.onQuestionsOnPageModeChanged("standard"))},Object.defineProperty(SurveyModel.prototype,"showInvisibleElements",{get:function(){return this.getPropertyValue("showInvisibleElements",!1)},set:function(e){var t=this.visiblePages;this.setPropertyValue("showInvisibleElements",e),this.isLoadingFromJson||(this.runConditions(),this.updateAllElementsVisibility(t))},enumerable:!1,configurable:!0}),SurveyModel.prototype.updateAllElementsVisibility=function(e){for(var t=0;t<this.pages.length;t++){var o=this.pages[t];o.updateElementVisibility(),e.indexOf(o)>-1!=o.isVisible&&this.onPageVisibleChanged.fire(this,{page:o,visible:o.isVisible})}},Object.defineProperty(SurveyModel.prototype,"areInvisibleElementsShowing",{get:function(){return this.isDesignMode||this.showInvisibleElements},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"areEmptyElementsHidden",{get:function(){return this.isShowingPreview&&"showAnsweredQuestions"==this.showPreviewBeforeComplete&&this.isAnyQuestionAnswered},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isAnyQuestionAnswered",{get:function(){for(var e=this.getAllQuestions(!0),t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"hasCookie",{get:function(){if(!this.cookieName||"undefined"==typeof document)return!1;var e=document.cookie;return e&&e.indexOf(this.cookieName+"=true")>-1},enumerable:!1,configurable:!0}),SurveyModel.prototype.setCookie=function(){this.cookieName&&"undefined"!=typeof document&&(document.cookie=this.cookieName+"=true; expires=Fri, 31 Dec 9999 0:0:0 GMT")},SurveyModel.prototype.deleteCookie=function(){this.cookieName&&(document.cookie=this.cookieName+"=;")},SurveyModel.prototype.nextPage=function(){return!this.isLastPage&&this.doCurrentPageComplete(!1)},SurveyModel.prototype.hasErrorsOnNavigate=function(e){var t=this;if(this.ignoreValidation||!this.isEditMode)return!1;var func=function(o){o||t.doCurrentPageCompleteCore(e)};return this.isValidateOnComplete?!!this.isLastPage&&!0!==this.validate(!0,!0,func):!0!==this.validateCurrentPage(func)},SurveyModel.prototype.checkForAsyncQuestionValidation=function(e,t){var o=this;this.clearAsyncValidationQuesitons();for(var n=this,r=0;r<e.length;r++)!function(){if(e[r].isRunningValidators){var i=e[r];i.onCompletedAsyncValidators=function(e){o.onCompletedAsyncQuestionValidators(i,t,e)},n.asyncValidationQuesitons.push(e[r])}}();return this.asyncValidationQuesitons.length>0},SurveyModel.prototype.clearAsyncValidationQuesitons=function(){if(this.asyncValidationQuesitons)for(var e=this.asyncValidationQuesitons,t=0;t<e.length;t++)e[t].onCompletedAsyncValidators=null;this.asyncValidationQuesitons=[]},SurveyModel.prototype.onCompletedAsyncQuestionValidators=function(e,t,o){if(o){if(this.clearAsyncValidationQuesitons(),t(!0),this.focusOnFirstError&&e&&e.page&&e.page===this.currentPage){for(var n=this.currentPage.questions,r=0;r<n.length;r++)if(n[r]!==e&&n[r].errors.length>0)return;e.focus(!0)}return}for(var i=this.asyncValidationQuesitons,s=0;s<i.length;s++)if(i[s].isRunningValidators)return;t(!1)},Object.defineProperty(SurveyModel.prototype,"isCurrentPageHasErrors",{get:function(){return this.checkIsCurrentPageHasErrors()},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isCurrentPageValid",{get:function(){return!this.checkIsCurrentPageHasErrors()},enumerable:!1,configurable:!0}),SurveyModel.prototype.hasCurrentPageErrors=function(e){return this.hasPageErrors(void 0,e)},SurveyModel.prototype.validateCurrentPage=function(e){return this.validatePage(void 0,e)},SurveyModel.prototype.hasPageErrors=function(e,t){var o=this.validatePage(e,t);return void 0===o?o:!o},SurveyModel.prototype.validatePage=function(e,t){return e||(e=this.activePage),!e||!this.checkIsPageHasErrors(e)&&(!t||!this.checkForAsyncQuestionValidation(e.questions,function(e){return t(e)})||void 0)},SurveyModel.prototype.hasErrors=function(e,t,o){void 0===e&&(e=!0),void 0===t&&(t=!1);var n=this.validate(e,t,o);return void 0===n?n:!n},SurveyModel.prototype.validate=function(e,t,o){void 0===e&&(e=!0),void 0===t&&(t=!1),o&&(e=!0);for(var n=this.visiblePages,r=null,i=!0,s=0;s<n.length;s++)n[s].validate(e,!1)||(r||(r=n[s]),i=!1);if(t&&r){for(var a=r.getQuestions(!0),l=0;l<a.length;l++)if(a[l].errors.length>0){a[l].focus(!0);break}}return i&&o?!this.checkForAsyncQuestionValidation(this.getAllQuestions(),function(e){return o(e)})||void 0:i},SurveyModel.prototype.ensureUniqueNames=function(e){if(void 0===e&&(e=null),null==e)for(var t=0;t<this.pages.length;t++)this.ensureUniqueName(this.pages[t]);else this.ensureUniqueName(e)},SurveyModel.prototype.ensureUniqueName=function(e){if(e.isPage&&this.ensureUniquePageName(e),e.isPanel&&this.ensureUniquePanelName(e),e.isPage||e.isPanel)for(var t=e.elements,o=0;o<t.length;o++)this.ensureUniqueNames(t[o]);else this.ensureUniqueQuestionName(e)},SurveyModel.prototype.ensureUniquePageName=function(e){var t=this;return this.ensureUniqueElementName(e,function(e){return t.getPageByName(e)})},SurveyModel.prototype.ensureUniquePanelName=function(e){var t=this;return this.ensureUniqueElementName(e,function(e){return t.getPanelByName(e)})},SurveyModel.prototype.ensureUniqueQuestionName=function(e){var t=this;return this.ensureUniqueElementName(e,function(e){return t.getQuestionByName(e)})},SurveyModel.prototype.ensureUniqueElementName=function(e,t){var o=t(e.name);if(o&&o!=e){for(var n=this.getNewName(e.name);t(n);)var n=this.getNewName(e.name);e.name=n}},SurveyModel.prototype.getNewName=function(e){for(var t=e.length;t>0&&e[t-1]>="0"&&e[t-1]<="9";)t--;var o=e.substring(0,t),n=0;return t<e.length&&(n=parseInt(e.substring(t))),o+ ++n},SurveyModel.prototype.checkIsCurrentPageHasErrors=function(e){return void 0===e&&(e=void 0),this.checkIsPageHasErrors(this.activePage,e)},SurveyModel.prototype.checkIsPageHasErrors=function(e,t){if(void 0===t&&(t=void 0),void 0===t&&(t=this.focusOnFirstError),!e)return!0;var o=!e.validate(!0,t);return this.fireValidatedErrorsOnPage(e),o},SurveyModel.prototype.fireValidatedErrorsOnPage=function(e){if(!this.onValidatedErrorsOnCurrentPage.isEmpty&&e){for(var t=e.questions,o=[],n=[],r=0;r<t.length;r++){var i=t[r];if(i.errors.length>0){o.push(i);for(var s=0;s<i.errors.length;s++)n.push(i.errors[s])}}this.onValidatedErrorsOnCurrentPage.fire(this,{questions:o,errors:n,page:e})}},SurveyModel.prototype.prevPage=function(){var e=this;if(this.isFirstPage||"starting"===this.state)return!1;this.resetNavigationButton();var t=this.skippedPages.find(function(t){return t.to==e.currentPage});if(t)this.currentPage=t.from,this.skippedPages.splice(this.skippedPages.indexOf(t),1);else{var o=this.visiblePages,n=o.indexOf(this.currentPage);this.currentPage=o[n-1]}return!0},SurveyModel.prototype.completeLastPage=function(){this.isValidateOnComplete&&this.cancelPreview();var e=this.doCurrentPageComplete(!0);return e&&this.cancelPreview(),e},SurveyModel.prototype.navigationMouseDown=function(){return this.isNavigationButtonPressed=!0,!0},SurveyModel.prototype.resetNavigationButton=function(){this.isNavigationButtonPressed=!1},SurveyModel.prototype.nextPageUIClick=function(){if(!this.mouseDownPage||this.mouseDownPage===this.activePage)return this.mouseDownPage=null,this.nextPage()},SurveyModel.prototype.nextPageMouseDown=function(){return this.mouseDownPage=this.activePage,this.navigationMouseDown()},SurveyModel.prototype.showPreview=function(){return this.resetNavigationButton(),!(!this.isValidateOnComplete&&(this.hasErrorsOnNavigate(!0)||this.doServerValidation(!0,!0)))&&(this.showPreviewCore(),!0)},SurveyModel.prototype.showPreviewCore=function(){var e={allowShowPreview:!0,allow:!0};this.onShowingPreview.fire(this,e),this.isShowingPreview=e.allowShowPreview&&e.allow},SurveyModel.prototype.cancelPreview=function(e){void 0===e&&(e=null),this.isShowingPreview&&(this.gotoPageFromPreview=e,this.isShowingPreview=!1)},SurveyModel.prototype.cancelPreviewByPage=function(e){this.cancelPreview(e.originalPage)},SurveyModel.prototype.doCurrentPageComplete=function(e){return!this.isValidatingOnServer&&(this.resetNavigationButton(),!this.hasErrorsOnNavigate(e)&&this.doCurrentPageCompleteCore(e))},SurveyModel.prototype.doCurrentPageCompleteCore=function(e){return!this.doServerValidation(e)&&(e?(this.currentPage.passed=!0,this.doComplete(this.canBeCompletedByTrigger,this.completedTrigger)):(this.doNextPage(),!0))},Object.defineProperty(SurveyModel.prototype,"isSinglePage",{get:function(){return"singlePage"==this.questionsOnPageMode},set:function(e){this.questionsOnPageMode=e?"singlePage":"standard"},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"questionsOnPageMode",{get:function(){return this.getPropertyValue("questionsOnPageMode")},set:function(e){this.setPropertyValue("questionsOnPageMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"firstPageIsStarted",{get:function(){return this.getPropertyValue("firstPageIsStarted")},set:function(e){this.setPropertyValue("firstPageIsStarted",e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.isPageStarted=function(e){return this.firstPageIsStarted&&this.pages.length>1&&this.pages[0]===e},Object.defineProperty(SurveyModel.prototype,"showPreviewBeforeComplete",{get:function(){return this.getPropertyValue("showPreviewBeforeComplete")},set:function(e){this.setPropertyValue("showPreviewBeforeComplete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isShowPreviewBeforeComplete",{get:function(){var e=this.showPreviewBeforeComplete;return"showAllQuestions"==e||"showAnsweredQuestions"==e},enumerable:!1,configurable:!0}),SurveyModel.prototype.onFirstPageIsStartedChanged=function(){this.isStartedState=this.firstPageIsStarted&&this.pages.length>1,this.pageVisibilityChanged(this.pages[0],!this.isStartedState)},SurveyModel.prototype.onShowingPreviewChanged=function(){if(!this.isDesignMode){if(this.isShowingPreview?(this.runningPages=this.pages.slice(0,this.pages.length),this.setupPagesForPageModes(!0)):(this.runningPages&&this.restoreOrigionalPages(this.runningPages),this.runningPages=void 0),this.runConditions(),this.updateAllElementsVisibility(this.pages),this.updateVisibleIndexes(),this.isShowingPreview)this.currentPageNo=0;else{var e=this.gotoPageFromPreview;this.gotoPageFromPreview=null,r.Helpers.isValueEmpty(e)&&this.visiblePageCount>0&&(e=this.visiblePages[this.visiblePageCount-1]),e&&(this.changeCurrentPageFromPreview=!0,this.currentPage=e,this.changeCurrentPageFromPreview=!1)}}},SurveyModel.prototype.onQuestionsOnPageModeChanged=function(e){this.isShowingPreview||("standard"==this.questionsOnPageMode||this.isDesignMode?(this.origionalPages&&this.restoreOrigionalPages(this.origionalPages),this.origionalPages=void 0):(e&&"standard"!=e||(this.origionalPages=this.pages.slice(0,this.pages.length)),this.setupPagesForPageModes(this.isSinglePage)),this.runConditions(),this.updateVisibleIndexes())},SurveyModel.prototype.restoreOrigionalPages=function(e){this.questionHashesClear(),this.pages.splice(0,this.pages.length);for(var t=0;t<e.length;t++)this.pages.push(e[t])},SurveyModel.prototype.getPageStartIndex=function(){return this.firstPageIsStarted&&this.pages.length>0?1:0},SurveyModel.prototype.setupPagesForPageModes=function(t){this.questionHashesClear();var o=this.getPageStartIndex();e.prototype.startLoadingFromJson.call(this);var n=this.createPagesForQuestionOnPageMode(t,o),r=this.pages.length-o;this.pages.splice(o,r);for(var i=0;i<n.length;i++)this.pages.push(n[i]);e.prototype.endLoadingFromJson.call(this);for(var i=0;i<n.length;i++)n[i].setSurveyImpl(this,!0);this.doElementsOnLoad(),this.updateCurrentPage()},SurveyModel.prototype.createPagesForQuestionOnPageMode=function(e,t){return e?[this.createSinglePage(t)]:this.createPagesForEveryQuestion(t)},SurveyModel.prototype.createSinglePage=function(e){var t=this.createNewPage("all");t.setSurveyImpl(this);for(var o=e;o<this.pages.length;o++){var n=this.pages[o],r=i.Serializer.createClass("panel");r.originalPage=n,t.addPanel(r);var s=new i.JsonObject().toJsonObject(n);new i.JsonObject().toObject(s,r),this.showPageTitles||(r.title="")}return t},SurveyModel.prototype.createPagesForEveryQuestion=function(e){for(var t=[],o=e;o<this.pages.length;o++){var n=this.pages[o];n.setWasShown(!0);for(var r=0;r<n.elements.length;r++){var s=n.elements[r],a=i.Serializer.createClass(s.getType());if(a){var l=new i.JsonObject;l.lightSerializing=!0;var u=l.toJsonObject(n),c=i.Serializer.createClass(n.getType());c.fromJSON(u),c.name=s.name,c.setSurveyImpl(this),t.push(c);var p=new i.JsonObject().toJsonObject(s);c.addElement(a),new i.JsonObject().toObject(p,a);for(var d=0;d<c.questions.length;d++)this.questionHashesAdded(c.questions[d])}}}return t},Object.defineProperty(SurveyModel.prototype,"isFirstPage",{get:function(){return this.getPropertyValue("isFirstPage")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isLastPage",{get:function(){return this.getPropertyValue("isLastPage")},enumerable:!1,configurable:!0}),SurveyModel.prototype.updateButtonsVisibility=function(){this.updateIsFirstLastPageState(),this.setPropertyValue("isShowPrevButton",this.calcIsShowPrevButton()),this.setPropertyValue("isShowNextButton",this.calcIsShowNextButton()),this.setPropertyValue("isCompleteButtonVisible",this.calcIsCompleteButtonVisible()),this.setPropertyValue("isPreviewButtonVisible",this.calcIsPreviewButtonVisible()),this.setPropertyValue("isCancelPreviewButtonVisible",this.calcIsCancelPreviewButtonVisible())},Object.defineProperty(SurveyModel.prototype,"isShowPrevButton",{get:function(){return this.getPropertyValue("isShowPrevButton")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isShowNextButton",{get:function(){return this.getPropertyValue("isShowNextButton")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isCompleteButtonVisible",{get:function(){return this.getPropertyValue("isCompleteButtonVisible")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isPreviewButtonVisible",{get:function(){return this.getPropertyValue("isPreviewButtonVisible")},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isCancelPreviewButtonVisible",{get:function(){return this.getPropertyValue("isCancelPreviewButtonVisible")},enumerable:!1,configurable:!0}),SurveyModel.prototype.updateIsFirstLastPageState=function(){var e=this.currentPage;this.setPropertyValue("isFirstPage",!!e&&e===this.firstVisiblePage),this.setPropertyValue("isLastPage",!!e&&e===this.lastVisiblePage)},SurveyModel.prototype.calcIsShowPrevButton=function(){if(this.isFirstPage||!this.showPrevButton||"running"!==this.state)return!1;var e=this.visiblePages[this.currentPageNo-1];return 0>=this.getPageMaxTimeToFinish(e)},SurveyModel.prototype.calcIsShowNextButton=function(){return"running"===this.state&&!this.isLastPage&&!this.canBeCompletedByTrigger},SurveyModel.prototype.calcIsCompleteButtonVisible=function(){var e=this.state;return this.isEditMode&&("running"===this.state&&(this.isLastPage&&!this.isShowPreviewBeforeComplete||this.canBeCompletedByTrigger)||"preview"===e)},SurveyModel.prototype.calcIsPreviewButtonVisible=function(){return this.isEditMode&&this.isShowPreviewBeforeComplete&&"running"==this.state&&this.isLastPage},SurveyModel.prototype.calcIsCancelPreviewButtonVisible=function(){return this.isEditMode&&this.isShowPreviewBeforeComplete&&"preview"==this.state},Object.defineProperty(SurveyModel.prototype,"firstVisiblePage",{get:function(){for(var e=this.pages,t=0;t<e.length;t++)if(this.isPageInVisibleList(e[t]))return e[t];return null},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"lastVisiblePage",{get:function(){for(var e=this.pages,t=e.length-1;t>=0;t--)if(this.isPageInVisibleList(e[t]))return e[t];return null},enumerable:!1,configurable:!0}),SurveyModel.prototype.doComplete=function(e,t){if(void 0===e&&(e=!1),!this.isCompleted)return this.checkOnCompletingEvent(e,t)?(this.checkOnPageTriggers(!0),this.stopTimer(),this.notifyQuestionsOnHidingContent(this.currentPage),this.isCompleted=!0,this.clearUnusedValues(),this.saveDataOnComplete(e,t),this.setCookie(),!0):(this.isCompleted=!1,!1)},SurveyModel.prototype.saveDataOnComplete=function(e,t){var o=this;void 0===e&&(e=!1);var n=this.hasCookie,showSaveInProgress=function(e){r=!0,o.setCompletedState("saving",e)},showSaveError=function(e){o.setCompletedState("error",e)},showSaveSuccess=function(e){o.setCompletedState("success",e),o.navigateTo()},clearSaveMessages=function(e){o.setCompletedState("","")},r=!1,i={isCompleteOnTrigger:e,completeTrigger:t,showSaveInProgress:showSaveInProgress,showSaveError:showSaveError,showSaveSuccess:showSaveSuccess,clearSaveMessages:clearSaveMessages,showDataSaving:showSaveInProgress,showDataSavingError:showSaveError,showDataSavingSuccess:showSaveSuccess,showDataSavingClear:clearSaveMessages};this.onComplete.fire(this,i),!n&&this.surveyPostId&&this.sendResult(),r||this.navigateTo()},SurveyModel.prototype.checkOnCompletingEvent=function(e,t){var o={allowComplete:!0,allow:!0,isCompleteOnTrigger:e,completeTrigger:t};return this.onCompleting.fire(this,o),o.allowComplete&&o.allow},SurveyModel.prototype.start=function(){return!!this.firstPageIsStarted&&(this.isCurrentPageRendering=!0,!this.checkIsPageHasErrors(this.startedPage,!0)&&(this.isStartedState=!1,this.notifyQuestionsOnHidingContent(this.pages[0]),this.startTimerFromUI(),this.onStarted.fire(this,{}),this.updateVisibleIndexes(),this.currentPage&&this.currentPage.locStrsChanged(),!0))},Object.defineProperty(SurveyModel.prototype,"isValidatingOnServer",{get:function(){return this.getPropertyValue("isValidatingOnServer",!1)},enumerable:!1,configurable:!0}),SurveyModel.prototype.setIsValidatingOnServer=function(e){e!=this.isValidatingOnServer&&(this.setPropertyValue("isValidatingOnServer",e),this.onIsValidatingOnServerChanged())},SurveyModel.prototype.createServerValidationOptions=function(e,t){var o=this,n={data:{},errors:{},survey:this,complete:function(){o.completeServerValidation(n,t)}};if(e&&this.isValidateOnComplete)n.data=this.data;else for(var r=this.activePage.questions,i=0;i<r.length;i++){var s=r[i];if(s.visible){var a=this.getValue(s.getValueName());this.isValueEmpty(a)||(n.data[s.getValueName()]=a)}}return n},SurveyModel.prototype.onIsValidatingOnServerChanged=function(){},SurveyModel.prototype.doServerValidation=function(e,t){var o=this;if(void 0===t&&(t=!1),!this.onServerValidateQuestions||this.onServerValidateQuestions.isEmpty||!e&&this.isValidateOnComplete)return!1;this.setIsValidatingOnServer(!0);var n="function"==typeof this.onServerValidateQuestions;return this.serverValidationEventCount=n?1:this.onServerValidateQuestions.length,n?this.onServerValidateQuestions(this,this.createServerValidationOptions(e,t)):this.onServerValidateQuestions.fireByCreatingOptions(this,function(){return o.createServerValidationOptions(e,t)}),!0},SurveyModel.prototype.completeServerValidation=function(e,t){if((!(this.serverValidationEventCount>1)||(this.serverValidationEventCount--,!e||!e.errors||0!==Object.keys(e.errors).length))&&(this.serverValidationEventCount=0,this.setIsValidatingOnServer(!1),e||e.survey)){var o=e.survey,n=!1;if(e.errors){var r=this.focusOnFirstError;for(var i in e.errors){var s=o.getQuestionByName(i);s&&s.errors&&(n=!0,s.addError(new h.CustomError(e.errors[i],this)),r&&(r=!1,s.page&&(this.currentPage=s.page),s.focus(!0)))}this.fireValidatedErrorsOnPage(this.currentPage)}n||(t?this.showPreviewCore():o.isLastPage?o.doComplete():o.doNextPage())}},SurveyModel.prototype.doNextPage=function(){var e=this.currentPage;if(this.checkOnPageTriggers(!1),this.isCompleted)this.doComplete(!0);else if(this.sendResultOnPageNext&&this.sendResult(this.surveyPostId,this.clientId,!0),e===this.currentPage){var t=this.visiblePages,o=t.indexOf(this.currentPage);this.currentPage=t[o+1]}},SurveyModel.prototype.setCompleted=function(e){this.doComplete(!0,e)},SurveyModel.prototype.canBeCompleted=function(e,t){if(v.settings.triggers.changeNavigationButtonsOnComplete){var o,n=this.canBeCompletedByTrigger;this.completedByTriggers||(this.completedByTriggers={}),t?this.completedByTriggers[e.id]={trigger:e,pageId:null===(o=this.currentPage)||void 0===o?void 0:o.id}:delete this.completedByTriggers[e.id],n!==this.canBeCompletedByTrigger&&this.updateButtonsVisibility()}},Object.defineProperty(SurveyModel.prototype,"canBeCompletedByTrigger",{get:function(){if(!this.completedByTriggers)return!1;var e,t=Object.keys(this.completedByTriggers);if(0===t.length)return!1;var o=null===(e=this.currentPage)||void 0===e?void 0:e.id;if(!o)return!0;for(var n=0;n<t.length;n++)if(o===this.completedByTriggers[t[n]].pageId)return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"completedTrigger",{get:function(){if(this.canBeCompletedByTrigger){var e=Object.keys(this.completedByTriggers)[0];return this.completedByTriggers[e].trigger}},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"processedCompletedHtml",{get:function(){var e=this.renderedCompletedHtml;return e?this.processHtml(e,"completed"):""},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"processedCompletedBeforeHtml",{get:function(){return this.locCompletedBeforeHtml.textOrHtml},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"processedLoadingHtml",{get:function(){return this.locLoadingHtml.textOrHtml},enumerable:!1,configurable:!0}),SurveyModel.prototype.getProgressInfo=function(){var e=this.isDesignMode?this.pages:this.visiblePages;return a.SurveyElement.getProgressInfoByElements(e,!1)},Object.defineProperty(SurveyModel.prototype,"progressText",{get:function(){var e=this.getPropertyValue("progressText","");return e||(this.updateProgressText(),e=this.getPropertyValue("progressText","")),e},enumerable:!1,configurable:!0}),SurveyModel.prototype.updateProgressText=function(e){void 0===e&&(e=!1),!this.isCalculatingProgressText&&(e&&"pages"==this.progressBarType&&this.onProgressText.isEmpty||(this.isCalculatingProgressText=!0,this.setPropertyValue("progressText",this.getProgressText()),this.setPropertyValue("progressValue",this.getProgress()),this.isCalculatingProgressText=!1))},SurveyModel.prototype.getProgressText=function(){if(!this.isDesignMode&&null==this.currentPage)return"";var e={questionCount:0,answeredQuestionCount:0,requiredQuestionCount:0,requiredAnsweredQuestionCount:0,text:""},t=this.progressBarType.toLowerCase();if("questions"===t||"requiredquestions"===t||"correctquestions"===t||!this.onProgressText.isEmpty){var o=this.getProgressInfo();e.questionCount=o.questionCount,e.answeredQuestionCount=o.answeredQuestionCount,e.requiredQuestionCount=o.requiredQuestionCount,e.requiredAnsweredQuestionCount=o.requiredAnsweredQuestionCount}return e.text=this.getProgressTextCore(e),this.onProgressText.fire(this,e),e.text},SurveyModel.prototype.getProgressTextCore=function(e){var t=this.progressBarType.toLowerCase();if("questions"===t)return this.getLocalizationFormatString("questionsProgressText",e.answeredQuestionCount,e.questionCount);if("requiredquestions"===t)return this.getLocalizationFormatString("questionsProgressText",e.requiredAnsweredQuestionCount,e.requiredQuestionCount);if("correctquestions"===t){var o=this.getCorrectedAnswerCount();return this.getLocalizationFormatString("questionsProgressText",o,e.questionCount)}var n=this.isDesignMode?this.pages:this.visiblePages,r=n.indexOf(this.currentPage)+1;return this.getLocalizationFormatString("progressText",r,n.length)},SurveyModel.prototype.getRootCss=function(){return new P.CssClassBuilder().append(this.css.root).append(this.css.rootMobile,this.isMobile).append(this.css.rootReadOnly,"display"===this.mode).append(this.css.rootCompact,this.isCompact).append(this.css.rootFitToContainer,this.fitToContainer).toString()},SurveyModel.prototype.afterRenderSurvey=function(e){var t=this;this.destroyResizeObserver(),Array.isArray(e)&&(e=a.SurveyElement.GetFirstNonTextElement(e));var o=e,n=this.css.variables;if(n){var r=Number.parseFloat(window.getComputedStyle(o).getPropertyValue(n.mobileWidth));if(r){var i=!1;this.resizeObserver=new ResizeObserver(function(e){window.requestAnimationFrame(function(){i=!i&&!!Object(b.isContainerVisible)(o)&&t.processResponsiveness(o.offsetWidth,r)})}),this.resizeObserver.observe(o)}}this.onAfterRenderSurvey.fire(this,{survey:this,htmlElement:e}),this.rootElement=e,this.addScrollEventListener()},SurveyModel.prototype.processResponsiveness=function(e,t){var o=e<t;return this.layoutElements.forEach(function(t){return t.processResponsiveness&&t.processResponsiveness(e)}),this.isMobile!==o&&(this.setIsMobile(o),!0)},SurveyModel.prototype.triggerResponsiveness=function(e){this.getAllQuestions().forEach(function(t){t.triggerResponsiveness(e)})},SurveyModel.prototype.destroyResizeObserver=function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)},SurveyModel.prototype.updateQuestionCssClasses=function(e,t){this.onUpdateQuestionCssClasses.fire(this,{question:e,cssClasses:t})},SurveyModel.prototype.updatePanelCssClasses=function(e,t){this.onUpdatePanelCssClasses.fire(this,{panel:e,cssClasses:t})},SurveyModel.prototype.updatePageCssClasses=function(e,t){this.onUpdatePageCssClasses.fire(this,{page:e,cssClasses:t})},SurveyModel.prototype.updateChoiceItemCss=function(e,t){t.question=e,this.onUpdateChoiceItemCss.fire(this,t)},SurveyModel.prototype.afterRenderPage=function(e){var t=this;this.isDesignMode||this.focusingQuestionInfo||setTimeout(function(){return t.scrollToTopOnPageChange(!t.isFirstPageRendering)},1),this.focusQuestionInfo(),this.isFirstPageRendering=!1,this.onAfterRenderPage.isEmpty||this.onAfterRenderPage.fire(this,{page:this.activePage,htmlElement:e})},SurveyModel.prototype.afterRenderHeader=function(e){this.onAfterRenderHeader.isEmpty||this.onAfterRenderHeader.fire(this,{htmlElement:e})},SurveyModel.prototype.afterRenderQuestion=function(e,t){this.onAfterRenderQuestion.fire(this,{question:e,htmlElement:t})},SurveyModel.prototype.afterRenderQuestionInput=function(e,t){if(!this.onAfterRenderQuestionInput.isEmpty){var o=e.inputId,n=v.settings.environment.root;if(o&&t.id!==o&&void 0!==n){var r=n.getElementById(o);r&&(t=r)}this.onAfterRenderQuestionInput.fire(this,{question:e,htmlElement:t})}},SurveyModel.prototype.afterRenderPanel=function(e,t){this.onAfterRenderPanel.fire(this,{panel:e,htmlElement:t})},SurveyModel.prototype.whenQuestionFocusIn=function(e){this.onFocusInQuestion.fire(this,{question:e})},SurveyModel.prototype.whenPanelFocusIn=function(e){this.onFocusInPanel.fire(this,{panel:e})},SurveyModel.prototype.rebuildQuestionChoices=function(){this.getAllQuestions().forEach(function(e){return e.surveyChoiceItemVisibilityChange()})},SurveyModel.prototype.canChangeChoiceItemsVisibility=function(){return!this.onShowingChoiceItem.isEmpty},SurveyModel.prototype.getChoiceItemVisibility=function(e,t,o){var n={question:e,item:t,visible:o};return this.onShowingChoiceItem.fire(this,n),n.visible},SurveyModel.prototype.loadQuestionChoices=function(e){this.onChoicesLazyLoad.fire(this,e)},SurveyModel.prototype.getChoiceDisplayValue=function(e){this.onGetChoiceDisplayValue.isEmpty?e.setItems(null):this.onGetChoiceDisplayValue.fire(this,e)},SurveyModel.prototype.matrixBeforeRowAdded=function(e){this.onMatrixRowAdding.fire(this,e)},SurveyModel.prototype.matrixRowAdded=function(e,t){this.onMatrixRowAdded.fire(this,{question:e,row:t})},SurveyModel.prototype.matrixColumnAdded=function(e,t){this.onMatrixColumnAdded.fire(this,{question:e,column:t})},SurveyModel.prototype.multipleTextItemAdded=function(e,t){this.onMultipleTextItemAdded.fire(this,{question:e,item:t})},SurveyModel.prototype.getQuestionByValueNameFromArray=function(e,t,o){var n=this.getQuestionsByValueName(e);if(n){for(var r=0;r<n.length;r++){var i=n[r].getQuestionFromArray(t,o);if(i)return i}return null}},SurveyModel.prototype.matrixRowRemoved=function(e,t,o){this.onMatrixRowRemoved.fire(this,{question:e,rowIndex:t,row:o})},SurveyModel.prototype.matrixRowRemoving=function(e,t,o){var n={question:e,rowIndex:t,row:o,allow:!0};return this.onMatrixRowRemoving.fire(this,n),n.allow},SurveyModel.prototype.matrixAllowRemoveRow=function(e,t,o){var n={question:e,rowIndex:t,row:o,allow:!0};return this.onMatrixRenderRemoveButton.fire(this,n),n.allow},SurveyModel.prototype.matrixCellCreating=function(e,t){t.question=e,this.onMatrixCellCreating.fire(this,t)},SurveyModel.prototype.matrixCellCreated=function(e,t){t.question=e,this.onMatrixCellCreated.fire(this,t)},SurveyModel.prototype.matrixAfterCellRender=function(e,t){t.question=e,this.onAfterRenderMatrixCell.fire(this,t)},SurveyModel.prototype.matrixCellValueChanged=function(e,t){t.question=e,this.onMatrixCellValueChanged.fire(this,t)},SurveyModel.prototype.matrixCellValueChanging=function(e,t){t.question=e,this.onMatrixCellValueChanging.fire(this,t)},Object.defineProperty(SurveyModel.prototype,"isValidateOnValueChanging",{get:function(){return"onValueChanging"===this.checkErrorsMode},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isValidateOnValueChanged",{get:function(){return"onValueChanged"===this.checkErrorsMode},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isValidateOnComplete",{get:function(){return"onComplete"===this.checkErrorsMode},enumerable:!1,configurable:!0}),SurveyModel.prototype.matrixCellValidate=function(e,t){return t.question=e,this.onMatrixCellValidate.fire(this,t),t.error?new h.CustomError(t.error,this):null},SurveyModel.prototype.dynamicPanelAdded=function(e,t,o){if(this.isLoadingFromJson||this.updateVisibleIndexes(),!this.onDynamicPanelAdded.isEmpty){var n=e.panels;void 0===t&&(t=n.length-1,o=n[t]),this.onDynamicPanelAdded.fire(this,{question:e,panel:o,panelIndex:t})}},SurveyModel.prototype.dynamicPanelRemoved=function(e,t,o){for(var n=o?o.questions:[],r=0;r<n.length;r++)n[r].clearOnDeletingContainer();this.updateVisibleIndexes(),this.onDynamicPanelRemoved.fire(this,{question:e,panelIndex:t,panel:o})},SurveyModel.prototype.dynamicPanelRemoving=function(e,t,o){var n={question:e,panelIndex:t,panel:o,allow:!0};return this.onDynamicPanelRemoving.fire(this,n),n.allow},SurveyModel.prototype.dynamicPanelItemValueChanged=function(e,t){t.question=e,t.panelIndex=t.itemIndex,t.panelData=t.itemValue,this.onDynamicPanelItemValueChanged.fire(this,t)},SurveyModel.prototype.dynamicPanelGetTabTitle=function(e,t){t.question=e,this.onGetDynamicPanelTabTitle.fire(this,t)},SurveyModel.prototype.dragAndDropAllow=function(e){return this.onDragDropAllow.fire(this,e),e.allow},SurveyModel.prototype.elementContentVisibilityChanged=function(e){this.currentPage&&this.currentPage.ensureRowsVisibility(),this.onElementContentVisibilityChanged.fire(this,{element:e})},SurveyModel.prototype.getUpdatedPanelFooterActions=function(e,t,o){var n={question:o,panel:e,actions:t};return this.onGetPanelFooterActions.fire(this,n),n.actions},SurveyModel.prototype.getUpdatedElementTitleActions=function(e,t){return e.isPage?this.getUpdatedPageTitleActions(e,t):e.isPanel?this.getUpdatedPanelTitleActions(e,t):this.getUpdatedQuestionTitleActions(e,t)},SurveyModel.prototype.getUpdatedQuestionTitleActions=function(e,t){var o={question:e,titleActions:t};return this.onGetQuestionTitleActions.fire(this,o),o.titleActions},SurveyModel.prototype.getUpdatedPanelTitleActions=function(e,t){var o={panel:e,titleActions:t};return this.onGetPanelTitleActions.fire(this,o),o.titleActions},SurveyModel.prototype.getUpdatedPageTitleActions=function(e,t){var o={page:e,titleActions:t};return this.onGetPageTitleActions.fire(this,o),o.titleActions},SurveyModel.prototype.getUpdatedMatrixRowActions=function(e,t,o){var n={question:e,actions:o,row:t};return this.onGetMatrixRowActions.fire(this,n),n.actions},SurveyModel.prototype.scrollElementToTop=function(e,t,o,n,r){var i={element:e,question:t,page:o,elementId:n,cancel:!1};this.onScrollingElementToTop.fire(this,i),i.cancel||a.SurveyElement.ScrollElementToTop(i.elementId,r)},SurveyModel.prototype.uploadFiles=function(e,t,o,n){this.onUploadFiles.isEmpty?n("error",o):this.onUploadFiles.fire(this,{question:e,name:t,files:o||[],callback:n}),this.surveyPostId&&this.uploadFilesCore(t,o,n)},SurveyModel.prototype.downloadFile=function(e,t,o,n){this.onDownloadFile.isEmpty&&n&&n("success",o.content||o),this.onDownloadFile.fire(this,{question:e,name:t,content:o.content||o,fileValue:o,callback:n})},SurveyModel.prototype.clearFiles=function(e,t,o,n,r){this.onClearFiles.isEmpty&&r&&r("success",o),this.onClearFiles.fire(this,{question:e,name:t,value:o,fileName:n,callback:r})},SurveyModel.prototype.updateChoicesFromServer=function(e,t,o){var n={question:e,choices:t,serverResult:o};return this.onLoadChoicesFromServer.fire(this,n),n.choices},SurveyModel.prototype.loadedChoicesFromServer=function(e){this.locStrsChanged()},SurveyModel.prototype.createSurveyService=function(){return new p.dxSurveyService},SurveyModel.prototype.uploadFilesCore=function(e,t,o){var n=this,r=[];t.forEach(function(e){o&&o("uploading",e),n.createSurveyService().sendFile(n.surveyPostId,e,function(n,i){n?(r.push({content:i,file:e}),r.length===t.length&&o&&o("success",r)):o&&o("error",{response:i,file:e})})})},SurveyModel.prototype.getPage=function(e){return this.pages[e]},SurveyModel.prototype.addPage=function(e,t){void 0===t&&(t=-1),null!=e&&(t<0||t>=this.pages.length?this.pages.push(e):this.pages.splice(t,0,e))},SurveyModel.prototype.addNewPage=function(e,t){void 0===e&&(e=null),void 0===t&&(t=-1);var o=this.createNewPage(e);return this.addPage(o,t),o},SurveyModel.prototype.removePage=function(e){var t=this.pages.indexOf(e);t<0||(this.pages.splice(t,1),this.currentPage!=e||(this.currentPage=this.pages.length>0?this.pages[0]:null))},SurveyModel.prototype.getQuestionByName=function(e,t){if(void 0===t&&(t=!1),!e)return null;t&&(e=e.toLowerCase());var o=(t?this.questionHashes.namesInsensitive:this.questionHashes.names)[e];return o?o[0]:null},SurveyModel.prototype.findQuestionByName=function(e){return this.getQuestionByName(e)},SurveyModel.prototype.getQuestionByValueName=function(e,t){void 0===t&&(t=!1);var o=this.getQuestionsByValueName(e,t);return o?o[0]:null},SurveyModel.prototype.getQuestionsByValueName=function(e,t){return void 0===t&&(t=!1),(t?this.questionHashes.valueNamesInsensitive:this.questionHashes.valueNames)[e]||null},SurveyModel.prototype.getCalculatedValueByName=function(e){for(var t=0;t<this.calculatedValues.length;t++)if(e==this.calculatedValues[t].name)return this.calculatedValues[t];return null},SurveyModel.prototype.getQuestionsByNames=function(e,t){void 0===t&&(t=!1);var o=[];if(!e)return o;for(var n=0;n<e.length;n++)if(e[n]){var r=this.getQuestionByName(e[n],t);r&&o.push(r)}return o},SurveyModel.prototype.getPageByElement=function(e){for(var t=0;t<this.pages.length;t++){var o=this.pages[t];if(o.containsElement(e))return o}return null},SurveyModel.prototype.getPageByQuestion=function(e){return this.getPageByElement(e)},SurveyModel.prototype.getPageByName=function(e){for(var t=0;t<this.pages.length;t++)if(this.pages[t].name==e)return this.pages[t];return null},SurveyModel.prototype.getPagesByNames=function(e){var t=[];if(!e)return t;for(var o=0;o<e.length;o++)if(e[o]){var n=this.getPageByName(e[o]);n&&t.push(n)}return t},SurveyModel.prototype.getAllQuestions=function(e,t,o){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===o&&(o=!1),o&&(t=!1);for(var n=[],r=0;r<this.pages.length;r++)this.pages[r].addQuestionsToList(n,e,t);if(!o)return n;var i=[];return n.forEach(function(t){i.push(t),t.getNestedQuestions(e).forEach(function(e){return i.push(e)})}),i},SurveyModel.prototype.getQuizQuestions=function(){for(var e=[],t=this.getPageStartIndex(),o=t;o<this.pages.length;o++)if(this.pages[o].isVisible)for(var n=this.pages[o].questions,r=0;r<n.length;r++){var i=n[r];i.quizQuestionCount>0&&e.push(i)}return e},SurveyModel.prototype.getPanelByName=function(e,t){void 0===t&&(t=!1);var o=this.getAllPanels();t&&(e=e.toLowerCase());for(var n=0;n<o.length;n++){var r=o[n].name;if(t&&(r=r.toLowerCase()),r==e)return o[n]}return null},SurveyModel.prototype.getAllPanels=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);for(var o=[],n=0;n<this.pages.length;n++)this.pages[n].addPanelsIntoList(o,e,t);return o},SurveyModel.prototype.createNewPage=function(e){var t=i.Serializer.createClass("page");return t.name=e,t},SurveyModel.prototype.questionOnValueChanging=function(e,t){if(this.editingObj){var o=i.Serializer.findProperty(this.editingObj.getType(),e);o&&(t=o.settingValue(this.editingObj,t))}if(this.onValueChanging.isEmpty)return t;var n={name:e,question:this.getQuestionByValueName(e),value:this.getUnbindValue(t),oldValue:this.getValue(e)};return this.onValueChanging.fire(this,n),n.value},SurveyModel.prototype.updateQuestionValue=function(e,t){if(!this.isLoadingFromJson){var o=this.getQuestionsByValueName(e);if(o)for(var n=0;n<o.length;n++){var r=o[n].value;(r===t&&Array.isArray(r)&&this.editingObj||!this.isTwoValueEquals(r,t))&&o[n].updateValueFromSurvey(t)}}},SurveyModel.prototype.checkQuestionErrorOnValueChanged=function(e){!this.isNavigationButtonPressed&&(this.isValidateOnValueChanged||e.getAllErrors().length>0)&&this.checkQuestionErrorOnValueChangedCore(e)},SurveyModel.prototype.checkQuestionErrorOnValueChangedCore=function(e){var t=e.getAllErrors().length,o=!e.validate(!0,{isOnValueChanged:!this.isValidateOnValueChanging}),n=this.checkErrorsMode.indexOf("Value")>-1;return e.page&&n&&(t>0||e.getAllErrors().length>0)&&this.fireValidatedErrorsOnPage(e.page),o},SurveyModel.prototype.checkErrorsOnValueChanging=function(e,t){if(this.isLoadingFromJson)return!1;var o=this.getQuestionsByValueName(e);if(!o)return!1;for(var n=!1,r=0;r<o.length;r++){var i=o[r];this.isTwoValueEquals(i.valueForSurvey,t)||(i.value=t),this.checkQuestionErrorOnValueChangedCore(i)&&(n=!0),n=n||i.errors.length>0}return n},SurveyModel.prototype.notifyQuestionOnValueChanged=function(e,t,o){if(!this.isLoadingFromJson){var n=this.getQuestionsByValueName(e);if(n)for(var r=0;r<n.length;r++){var i=n[r];this.checkQuestionErrorOnValueChanged(i),i.onSurveyValueChanged(t),this.onValueChanged.fire(this,{name:e,question:i,value:t})}else this.onValueChanged.fire(this,{name:e,question:null,value:t});this.isDisposed||(this.checkElementsBindings(e,t),this.notifyElementsOnAnyValueOrVariableChanged(e,o))}},SurveyModel.prototype.checkElementsBindings=function(e,t){this.isRunningElementsBindings=!0;for(var o=0;o<this.pages.length;o++)this.pages[o].checkBindings(e,t);this.isRunningElementsBindings=!1,this.updateVisibleIndexAfterBindings&&(this.updateVisibleIndexes(),this.updateVisibleIndexAfterBindings=!1)},SurveyModel.prototype.notifyElementsOnAnyValueOrVariableChanged=function(e,t){if("processing"!==this.isEndLoadingFromJson){if(this.isRunningConditions){this.conditionNotifyElementsOnAnyValueOrVariableChanged=!0;return}for(var o=0;o<this.pages.length;o++)this.pages[o].onAnyValueChanged(e,t);this.isEndLoadingFromJson||this.locStrsChanged()}},SurveyModel.prototype.updateAllQuestionsValue=function(){for(var e=this.getAllQuestions(),t=0;t<e.length;t++){var o=e[t],n=o.getValueName();o.updateValueFromSurvey(this.getValue(n)),o.requireUpdateCommentValue&&o.updateCommentFromSurvey(this.getComment(n))}},SurveyModel.prototype.notifyAllQuestionsOnValueChanged=function(){for(var e=this.getAllQuestions(),t=0;t<e.length;t++)e[t].onSurveyValueChanged(this.getValue(e[t].getValueName()))},SurveyModel.prototype.checkOnPageTriggers=function(e){for(var t=this.getCurrentPageQuestions(!0),o={},n=0;n<t.length;n++){var r=t[n].getValueName();o[r]=this.getValue(r)}this.addCalculatedValuesIntoFilteredValues(o),this.checkTriggers(o,!0,e)},SurveyModel.prototype.getCurrentPageQuestions=function(e){void 0===e&&(e=!1);var t=[],o=this.currentPage;if(!o)return t;for(var n=0;n<o.questions.length;n++){var r=o.questions[n];(e||r.visible)&&r.name&&t.push(r)}return t},SurveyModel.prototype.checkTriggers=function(e,t,o,n){if(void 0===o&&(o=!1),!this.isCompleted&&0!=this.triggers.length&&!this.isDisplayMode){if(this.isTriggerIsRunning){for(var r in this.triggerValues=this.getFilteredValues(),e)this.triggerKeys[r]=e[r];return}var i=!1;if(!o&&n&&this.hasRequiredValidQuestionTrigger){var s=this.getQuestionByValueName(n);i=s&&!s.validate(!1)}this.isTriggerIsRunning=!0,this.triggerKeys=e,this.triggerValues=this.getFilteredValues();for(var a=this.getFilteredProperties(),l=this.canBeCompletedByTrigger,u=0;u<this.triggers.length;u++){var c=this.triggers[u];i&&c.requireValidQuestion||c.checkExpression(t,o,this.triggerKeys,this.triggerValues,a)}l!==this.canBeCompletedByTrigger&&this.updateButtonsVisibility(),this.isTriggerIsRunning=!1}},Object.defineProperty(SurveyModel.prototype,"hasRequiredValidQuestionTrigger",{get:function(){for(var e=0;e<this.triggers.length;e++)if(this.triggers[e].requireValidQuestion)return!0;return!1},enumerable:!1,configurable:!0}),SurveyModel.prototype.doElementsOnLoad=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].onSurveyLoad()},Object.defineProperty(SurveyModel.prototype,"isRunningConditions",{get:function(){return!!this.conditionValues},enumerable:!1,configurable:!0}),SurveyModel.prototype.runConditions=function(){if(!this.isCompleted&&"processing"!==this.isEndLoadingFromJson&&!this.isRunningConditions){this.conditionValues=this.getFilteredValues();var e=this.getFilteredProperties(),t=this.pages.indexOf(this.currentPage);this.runConditionsCore(e),this.checkIfNewPagesBecomeVisible(t),this.conditionValues=null,this.isValueChangedOnRunningCondition&&this.conditionRunnerCounter<v.settings.maxConditionRunCountOnValueChanged?(this.isValueChangedOnRunningCondition=!1,this.conditionRunnerCounter++,this.runConditions()):(this.isValueChangedOnRunningCondition=!1,this.conditionRunnerCounter=0,this.conditionUpdateVisibleIndexes&&(this.conditionUpdateVisibleIndexes=!1,this.updateVisibleIndexes()),this.conditionNotifyElementsOnAnyValueOrVariableChanged&&(this.conditionNotifyElementsOnAnyValueOrVariableChanged=!1,this.notifyElementsOnAnyValueOrVariableChanged("")))}},SurveyModel.prototype.runConditionOnValueChanged=function(e,t){this.isRunningConditions?(this.conditionValues[e]=t,this.isValueChangedOnRunningCondition=!0):(this.runConditions(),this.runQuestionsTriggers(e,t))},SurveyModel.prototype.runConditionsCore=function(t){for(var o=this.pages,n=0;n<this.calculatedValues.length;n++)this.calculatedValues[n].resetCalculation();for(var n=0;n<this.calculatedValues.length;n++)this.calculatedValues[n].doCalculation(this.calculatedValues,this.conditionValues,t);e.prototype.runConditionCore.call(this,this.conditionValues,t);for(var r=0;r<o.length;r++)o[r].runCondition(this.conditionValues,t)},SurveyModel.prototype.runQuestionsTriggers=function(e,t){this.isDisplayMode||this.isDesignMode||this.getAllQuestions().forEach(function(o){return o.runTriggers(e,t)})},SurveyModel.prototype.checkIfNewPagesBecomeVisible=function(e){var t=this.pages.indexOf(this.currentPage);if(!(t<=e+1)){for(var o=e+1;o<t;o++)if(this.pages[o].isVisible){this.currentPage=this.pages[o];break}}},SurveyModel.prototype.sendResult=function(e,t,o){if(void 0===e&&(e=null),void 0===t&&(t=null),void 0===o&&(o=!1),this.isEditMode&&(o&&this.onPartialSend&&this.onPartialSend.fire(this,null),!e&&this.surveyPostId&&(e=this.surveyPostId),e&&(t&&(this.clientId=t),!o||this.clientId))){var n=this;this.surveyShowDataSaving&&this.setCompletedState("saving",""),this.createSurveyService().sendResult(e,this.data,function(e,t,o){n.surveyShowDataSaving&&(e?n.setCompletedState("success",""):n.setCompletedState("error",t)),n.onSendResult.fire(n,{success:e,response:t,request:o})},this.clientId,o)}},SurveyModel.prototype.getResult=function(e,t){var o=this;this.createSurveyService().getResult(e,t,function(e,t,n,r){o.onGetResult.fire(o,{success:e,data:t,dataList:n,response:r})})},SurveyModel.prototype.loadSurveyFromService=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),e&&(this.surveyId=e),t&&(this.clientId=t);var o=this;this.isLoading=!0,this.onLoadingSurveyFromService(),t?this.createSurveyService().getSurveyJsonAndIsCompleted(this.surveyId,this.clientId,function(e,t,n,r){o.isLoading=!1,e&&(o.isCompletedBefore="completed"==n,o.loadSurveyFromServiceJson(t))}):this.createSurveyService().loadSurvey(this.surveyId,function(e,t,n){o.isLoading=!1,e&&o.loadSurveyFromServiceJson(t)})},SurveyModel.prototype.loadSurveyFromServiceJson=function(e){e&&(this.fromJSON(e),this.notifyAllQuestionsOnValueChanged(),this.onLoadSurveyFromService(),this.onLoadedSurveyFromService.fire(this,{}))},SurveyModel.prototype.onLoadingSurveyFromService=function(){},SurveyModel.prototype.onLoadSurveyFromService=function(){},SurveyModel.prototype.resetVisibleIndexes=function(){for(var e=this.getAllQuestions(!0),t=0;t<e.length;t++)e[t].setVisibleIndex(-1);this.updateVisibleIndexes()},SurveyModel.prototype.updateVisibleIndexes=function(){if(!this.isLoadingFromJson&&!this.isEndLoadingFromJson){if(this.isRunningConditions&&this.onQuestionVisibleChanged.isEmpty&&this.onPageVisibleChanged.isEmpty){this.conditionUpdateVisibleIndexes=!0;return}if(this.isRunningElementsBindings){this.updateVisibleIndexAfterBindings=!0;return}if(this.updatePageVisibleIndexes(this.showPageNumbers),"onPage"==this.showQuestionNumbers)for(var e=this.visiblePages,t=0;t<e.length;t++)e[t].setVisibleIndex(0);else for(var o="on"==this.showQuestionNumbers?0:-1,t=0;t<this.pages.length;t++)o+=this.pages[t].setVisibleIndex(o);this.updateProgressText(!0)}},SurveyModel.prototype.updatePageVisibleIndexes=function(e){this.updateButtonsVisibility();for(var t=0,o=0;o<this.pages.length;o++){var n=this.pages[o],r=n.isVisible&&(o>0||!n.isStartPage);n.visibleIndex=r?t++:-1,n.num=r?n.visibleIndex+1:-1}},SurveyModel.prototype.fromJSON=function(e){if(e){this.questionHashesClear(),this.jsonErrors=null;var t=new i.JsonObject;t.toObject(e,this),t.errors.length>0&&(this.jsonErrors=t.errors),this.onStateAndCurrentPageChanged(),this.updateState()}},SurveyModel.prototype.setJsonObject=function(e){this.fromJSON(e)},SurveyModel.prototype.endLoadingFromJson=function(){this.isEndLoadingFromJson="processing",this.onFirstPageIsStartedChanged(),this.onQuestionsOnPageModeChanged("standard"),e.prototype.endLoadingFromJson.call(this),this.hasCookie&&(this.isCompletedBefore=!0),this.doElementsOnLoad(),this.isEndLoadingFromJson="conditions",this.runConditions(),this.notifyElementsOnAnyValueOrVariableChanged(""),this.isEndLoadingFromJson=null,this.updateVisibleIndexes(),this.updateHasLogo(),this.updateRenderBackgroundImage(),this.updateCurrentPage(),this.hasDescription=!!this.description,this.setCalculatedWidthModeUpdater()},SurveyModel.prototype.updateNavigationCss=function(){this.navigationBar&&(this.updateNavigationBarCss(),this.updateNavigationItemCssCallback&&this.updateNavigationItemCssCallback())},SurveyModel.prototype.updateNavigationBarCss=function(){var e=this.navigationBar;e.cssClasses=this.css.actionBar,e.containerCss=this.css.footer},SurveyModel.prototype.createNavigationBar=function(){var e=new w.ActionContainer;return e.setItems(this.createNavigationActions()),e},SurveyModel.prototype.createNavigationActions=function(){var e=this,t="sv-nav-btn",o=new C.Action({id:"sv-nav-start",visible:new s.ComputedUpdater(function(){return e.isShowStartingPage}),visibleIndex:10,locTitle:this.locStartSurveyText,action:function(){return e.start()},component:t}),n=new C.Action({id:"sv-nav-prev",visible:new s.ComputedUpdater(function(){return e.isShowPrevButton}),visibleIndex:20,data:{mouseDown:function(){return e.navigationMouseDown()}},locTitle:this.locPagePrevText,action:function(){return e.prevPage()},component:t}),r=new C.Action({id:"sv-nav-next",visible:new s.ComputedUpdater(function(){return e.isShowNextButton}),visibleIndex:30,data:{mouseDown:function(){return e.nextPageMouseDown()}},locTitle:this.locPageNextText,action:function(){return e.nextPageUIClick()},component:t}),i=new C.Action({id:"sv-nav-preview",visible:new s.ComputedUpdater(function(){return e.isPreviewButtonVisible}),visibleIndex:40,data:{mouseDown:function(){return e.navigationMouseDown()}},locTitle:this.locPreviewText,action:function(){return e.showPreview()},component:t}),a=new C.Action({id:"sv-nav-complete",visible:new s.ComputedUpdater(function(){return e.isCompleteButtonVisible}),visibleIndex:50,data:{mouseDown:function(){return e.navigationMouseDown()}},locTitle:this.locCompleteText,action:function(){return e.completeLastPage()},component:t});return this.updateNavigationItemCssCallback=function(){o.innerCss=e.cssNavigationStart,n.innerCss=e.cssNavigationPrev,r.innerCss=e.cssNavigationNext,i.innerCss=e.cssNavigationPreview,a.innerCss=e.cssNavigationComplete},[o,n,r,i,a]},SurveyModel.prototype.onBeforeCreating=function(){},SurveyModel.prototype.onCreating=function(){},SurveyModel.prototype.getProcessedTextValue=function(e){if(this.getProcessedTextValueCore(e),!this.onProcessTextValue.isEmpty){var t=this.isValueEmpty(e.value);this.onProcessTextValue.fire(this,e),e.isExists=e.isExists||t&&!this.isValueEmpty(e.value)}},SurveyModel.prototype.getBuiltInVariableValue=function(e){if("pageno"===e){var t=this.currentPage;return null!=t?this.visiblePages.indexOf(t)+1:0}return"pagecount"===e?this.visiblePageCount:"correctedanswers"===e||"correctanswers"===e||"correctedanswercount"===e?this.getCorrectedAnswerCount():"incorrectedanswers"===e||"incorrectanswers"===e||"incorrectedanswercount"===e?this.getInCorrectedAnswerCount():"questioncount"===e?this.getQuizQuestionCount():void 0},SurveyModel.prototype.getProcessedTextValueCore=function(e){var t=e.name.toLocaleLowerCase();if(-1===["no","require","title"].indexOf(t)){var o=this.getBuiltInVariableValue(t);if(void 0!==o){e.isExists=!0,e.value=o;return}if("locale"===t){e.isExists=!0,e.value=this.locale?this.locale:d.surveyLocalization.defaultLocale;return}var n=this.getVariable(t);if(void 0!==n){e.isExists=!0,e.value=n;return}var r=this.getFirstName(t);if(r){var i=r.useDisplayValuesInDynamicTexts;e.isExists=!0;var s=r.getValueName().toLowerCase();t=(t=s+t.substring(s.length)).toLocaleLowerCase();var a={};a[s]=e.returnDisplayValue&&i?r.getDisplayValue(!1,void 0):r.value,e.value=new c.ProcessValue().getValue(t,a);return}this.getProcessedValuesWithoutQuestion(e)}},SurveyModel.prototype.getProcessedValuesWithoutQuestion=function(e){var t=this.getValue(e.name);if(void 0!==t){e.isExists=!0,e.value=t;return}var o=new c.ProcessValue,n=o.getFirstName(e.name);if(n!==e.name){var i={},s=this.getValue(n);r.Helpers.isValueEmpty(s)&&(s=this.getVariable(n)),r.Helpers.isValueEmpty(s)||(i[n]=s,e.value=o.getValue(e.name,i),e.isExists=o.hasValue(e.name,i))}},SurveyModel.prototype.getFirstName=function(e){var t;e=e.toLowerCase();do t=this.getQuestionByValueName(e,!0),e=this.reduceFirstName(e);while(!t&&!!e);return t},SurveyModel.prototype.reduceFirstName=function(e){var t=e.lastIndexOf("."),o=e.lastIndexOf("[");if(t<0&&o<0)return"";var n=Math.max(t,o);return e.substring(0,n)},SurveyModel.prototype.clearUnusedValues=function(){for(var e=this.getAllQuestions(),t=0;t<e.length;t++)e[t].clearUnusedValues();this.clearInvisibleQuestionValues()},SurveyModel.prototype.hasVisibleQuestionByValueName=function(e){var t=this.getQuestionsByValueName(e);if(!t)return!1;for(var o=0;o<t.length;o++){var n=t[o];if(n.isVisible&&n.isParentVisible&&!n.parentQuestion)return!0}return!1},SurveyModel.prototype.questionsByValueName=function(e){return this.getQuestionsByValueName(e)||[]},SurveyModel.prototype.clearInvisibleQuestionValues=function(){for(var e="none"===this.clearInvisibleValues?"none":"onComplete",t=this.getAllQuestions(),o=0;o<t.length;o++)t[o].clearValueIfInvisible(e)},SurveyModel.prototype.getVariable=function(e){if(!e)return null;e=e.toLowerCase();var t=this.variablesHash[e];return this.isValueEmpty(t)&&(e.indexOf(".")>-1||e.indexOf("[")>-1)&&new c.ProcessValue().hasValue(e,this.variablesHash)?new c.ProcessValue().getValue(e,this.variablesHash):t},SurveyModel.prototype.setVariable=function(e,t){e&&(this.valuesHash&&delete this.valuesHash[e],e=e.toLowerCase(),this.variablesHash[e]=t,this.notifyElementsOnAnyValueOrVariableChanged(e),this.runConditionOnValueChanged(e,t),this.onVariableChanged.fire(this,{name:e,value:t}))},SurveyModel.prototype.getVariableNames=function(){var e=[];for(var t in this.variablesHash)e.push(t);return e},SurveyModel.prototype.getUnbindValue=function(e){return this.editingObj?e:r.Helpers.getUnbindValue(e)},SurveyModel.prototype.getValue=function(e){if(!e||0==e.length)return null;var t=this.getDataValueCore(this.valuesHash,e);return this.getUnbindValue(t)},SurveyModel.prototype.setValue=function(e,t,o,n,r){void 0===o&&(o=!1),void 0===n&&(n=!0);var i=t;if(n&&(i=this.questionOnValueChanging(e,t)),!(this.isValidateOnValueChanging&&this.checkErrorsOnValueChanging(e,i))&&!(!this.editingObj&&this.isValueEqual(e,i)&&this.isTwoValueEquals(i,t))){var s=this.getValue(e);this.isValueEmpyOnSetValue(e,i)?this.deleteDataValueCore(this.valuesHash,e):(i=this.getUnbindValue(i),this.setDataValueCore(this.valuesHash,e,i)),this.updateOnSetValue(e,i,s,o,n,r)}},SurveyModel.prototype.isValueEmpyOnSetValue=function(e,t){return!!this.isValueEmpty(t,!1)&&(!this.editingObj||null==t||this.editingObj.getDefaultPropertyValue(e)===t)},SurveyModel.prototype.updateOnSetValue=function(e,t,o,n,r,i){if(void 0===n&&(n=!1),void 0===r&&(r=!0),this.updateQuestionValue(e,t),!0!==n&&!this.isDisposed&&!this.isRunningElementsBindings){i=i||e;var s={};s[e]={newValue:t,oldValue:o},this.runConditionOnValueChanged(e,t),this.checkTriggers(s,!1,!1,e),r&&this.notifyQuestionOnValueChanged(e,t,i),"text"!==n&&this.tryGoNextPageAutomatic(e)}},SurveyModel.prototype.isValueEqual=function(e,t){(""===t||void 0===t)&&(t=null);var o=this.getValue(e);return((""===o||void 0===o)&&(o=null),null===t||null===o)?t===o:this.isTwoValueEquals(t,o)},SurveyModel.prototype.doOnPageAdded=function(e){e.setSurveyImpl(this),e.name||(e.name=this.generateNewName(this.pages,"page")),this.questionHashesPanelAdded(e),this.updateVisibleIndexes(),this.runningPages||(this.isLoadingFromJson||(this.updateProgressText(),this.updateCurrentPage()),this.onPageAdded.fire(this,{page:e}))},SurveyModel.prototype.doOnPageRemoved=function(e){e.setSurveyImpl(null),this.runningPages||(e===this.currentPage&&this.updateCurrentPage(),this.updateVisibleIndexes(),this.updateProgressText(),this.updateLazyRenderingRowsOnRemovingElements())},SurveyModel.prototype.generateNewName=function(e,t){for(var o={},n=0;n<e.length;n++)o[e[n].name]=!0;for(var r=1;o[t+r];)r++;return t+r},SurveyModel.prototype.tryGoNextPageAutomatic=function(e){var t=this;if(!this.isEndLoadingFromJson&&this.goNextPageAutomatic&&this.currentPage){var o=this.getQuestionByValueName(e);if(o&&(!o||o.visible&&o.supportGoNextPageAutomatic())&&(o.validate(!1)||o.supportGoNextPageError())){var n=this.getCurrentPageQuestions();if(!(0>n.indexOf(o))){for(var r=0;r<n.length;r++)if(n[r].hasInput&&n[r].isEmpty())return;(!this.isLastPage||!0===this.goNextPageAutomatic&&this.allowCompleteSurveyAutomatic)&&(this.checkIsCurrentPageHasErrors(!1)||V.surveyTimerFunctions.safeTimeOut(function(){t.isLastPage?t.isShowPreviewBeforeComplete?t.showPreview():t.completeLastPage():t.nextPage()},v.settings.autoAdvanceDelay))}}}},SurveyModel.prototype.getComment=function(e){return this.getValue(e+this.commentSuffix)||""},SurveyModel.prototype.setComment=function(e,t,o){if(void 0===o&&(o=!1),t||(t=""),!this.isTwoValueEquals(t,this.getComment(e))){var n=e+this.commentSuffix;this.isValueEmpty(t)?this.deleteDataValueCore(this.valuesHash,n):this.setDataValueCore(this.valuesHash,n,t);var r=this.getQuestionsByValueName(e);if(r)for(var i=0;i<r.length;i++)r[i].updateCommentFromSurvey(t),this.checkQuestionErrorOnValueChanged(r[i]);o||this.runConditionOnValueChanged(e,this.getValue(e)),"text"!==o&&this.tryGoNextPageAutomatic(e);var s=this.getQuestionByName(e);s&&this.onValueChanged.fire(this,{name:n,question:s,value:t})}},SurveyModel.prototype.clearValue=function(e){this.setValue(e,null),this.setComment(e,null)},Object.defineProperty(SurveyModel.prototype,"clearValueOnDisableItems",{get:function(){return this.getPropertyValue("clearValueOnDisableItems",!1)},set:function(e){this.setPropertyValue("clearValueOnDisableItems",e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.getQuestionClearIfInvisible=function(e){return this.isShowingPreview||this.runningPages?"none":"default"!==e?e:this.clearInvisibleValues},SurveyModel.prototype.questionVisibilityChanged=function(e,t){this.updateVisibleIndexes(),this.onQuestionVisibleChanged.fire(this,{question:e,name:e.name,visible:t})},SurveyModel.prototype.pageVisibilityChanged=function(e,t){this.isLoadingFromJson||((t&&!this.currentPage||e===this.currentPage)&&this.updateCurrentPage(),this.updateVisibleIndexes(),this.onPageVisibleChanged.fire(this,{page:e,visible:t}))},SurveyModel.prototype.panelVisibilityChanged=function(e,t){this.updateVisibleIndexes(),this.onPanelVisibleChanged.fire(this,{panel:e,visible:t})},SurveyModel.prototype.questionCreated=function(e){this.onQuestionCreated.fire(this,{question:e})},SurveyModel.prototype.questionAdded=function(e,t,o,n){e.name||(e.name=this.generateNewName(this.getAllQuestions(!1,!0),"question")),e.page&&this.questionHashesAdded(e),this.currentPage||this.updateCurrentPage(),this.updateVisibleIndexes(),this.setCalculatedWidthModeUpdater(),this.isMovingQuestion&&(!this.isDesignMode||v.settings.supportCreatorV2)||this.onQuestionAdded.fire(this,{question:e,name:e.name,index:t,parent:o,page:n,parentPanel:o,rootPanel:n})},SurveyModel.prototype.questionRemoved=function(e){this.questionHashesRemoved(e,e.name,e.getValueName()),this.updateVisibleIndexes(),this.onQuestionRemoved.fire(this,{question:e,name:e.name}),this.updateLazyRenderingRowsOnRemovingElements()},SurveyModel.prototype.questionRenamed=function(e,t,o){this.questionHashesRemoved(e,t,o),this.questionHashesAdded(e)},SurveyModel.prototype.questionHashesClear=function(){this.questionHashes.names={},this.questionHashes.namesInsensitive={},this.questionHashes.valueNames={},this.questionHashes.valueNamesInsensitive={}},SurveyModel.prototype.questionHashesPanelAdded=function(e){if(!this.isLoadingFromJson)for(var t=e.questions,o=0;o<t.length;o++)this.questionHashesAdded(t[o])},SurveyModel.prototype.questionHashesAdded=function(e){this.questionHashAddedCore(this.questionHashes.names,e,e.name),this.questionHashAddedCore(this.questionHashes.namesInsensitive,e,e.name.toLowerCase()),this.questionHashAddedCore(this.questionHashes.valueNames,e,e.getValueName()),this.questionHashAddedCore(this.questionHashes.valueNamesInsensitive,e,e.getValueName().toLowerCase())},SurveyModel.prototype.questionHashesRemoved=function(e,t,o){t&&(this.questionHashRemovedCore(this.questionHashes.names,e,t),this.questionHashRemovedCore(this.questionHashes.namesInsensitive,e,t.toLowerCase())),o&&(this.questionHashRemovedCore(this.questionHashes.valueNames,e,o),this.questionHashRemovedCore(this.questionHashes.valueNamesInsensitive,e,o.toLowerCase()))},SurveyModel.prototype.questionHashAddedCore=function(e,t,o){var n=e[o];if(n){var n=e[o];0>n.indexOf(t)&&n.push(t)}else e[o]=[t]},SurveyModel.prototype.questionHashRemovedCore=function(e,t,o){var n=e[o];if(n){var r=n.indexOf(t);r>-1&&n.splice(r,1),0==n.length&&delete e[o]}},SurveyModel.prototype.panelAdded=function(e,t,o,n){e.name||(e.name=this.generateNewName(this.getAllPanels(!1,!0),"panel")),this.questionHashesPanelAdded(e),this.updateVisibleIndexes(),this.onPanelAdded.fire(this,{panel:e,name:e.name,index:t,parent:o,page:n,parentPanel:o,rootPanel:n})},SurveyModel.prototype.panelRemoved=function(e){this.updateVisibleIndexes(),this.onPanelRemoved.fire(this,{panel:e,name:e.name}),this.updateLazyRenderingRowsOnRemovingElements()},SurveyModel.prototype.validateQuestion=function(e){if(this.onValidateQuestion.isEmpty)return null;var t={name:e.name,question:e,value:e.value,error:null};return this.onValidateQuestion.fire(this,t),t.error?new h.CustomError(t.error,this):null},SurveyModel.prototype.validatePanel=function(e){if(this.onValidatePanel.isEmpty)return null;var t={name:e.name,panel:e,error:null};return this.onValidatePanel.fire(this,t),t.error?new h.CustomError(t.error,this):null},SurveyModel.prototype.processHtml=function(e,t){t||(t="");var o={html:e,reason:t};return this.onProcessHtml.fire(this,o),this.processText(o.html,!0)},SurveyModel.prototype.processText=function(e,t){return this.processTextEx(e,t,!1).text},SurveyModel.prototype.processTextEx=function(e,t,o){var n={text:this.processTextCore(e,t,o),hasAllValuesOnLastRun:!0};return n.hasAllValuesOnLastRun=this.textPreProcessor.hasAllValuesOnLastRun,n},Object.defineProperty(SurveyModel.prototype,"textPreProcessor",{get:function(){var e=this;return this.textPreProcessorValue||(this.textPreProcessorValue=new u.TextPreProcessor,this.textPreProcessorValue.onProcess=function(t){e.getProcessedTextValue(t)}),this.textPreProcessorValue},enumerable:!1,configurable:!0}),SurveyModel.prototype.processTextCore=function(e,t,o){return(void 0===o&&(o=!1),this.isDesignMode)?e:this.textPreProcessor.process(e,t,o)},SurveyModel.prototype.getSurveyMarkdownHtml=function(e,t,o){var n={element:e,text:t,name:o,html:null};return this.onTextMarkdown.fire(this,n),n.html},SurveyModel.prototype.getCorrectedAnswerCount=function(){return this.getCorrectAnswerCount()},SurveyModel.prototype.getCorrectAnswerCount=function(){return this.getCorrectedAnswerCountCore(!0)},SurveyModel.prototype.getQuizQuestionCount=function(){for(var e=this.getQuizQuestions(),t=0,o=0;o<e.length;o++)t+=e[o].quizQuestionCount;return t},SurveyModel.prototype.getInCorrectedAnswerCount=function(){return this.getInCorrectAnswerCount()},SurveyModel.prototype.getInCorrectAnswerCount=function(){return this.getCorrectedAnswerCountCore(!1)},SurveyModel.prototype.onCorrectQuestionAnswer=function(e,t){this.onIsAnswerCorrect.isEmpty||(t.question=e,this.onIsAnswerCorrect.fire(this,t))},SurveyModel.prototype.getCorrectedAnswerCountCore=function(e){for(var t=this.getQuizQuestions(),o=0,n=0;n<t.length;n++){var r=t[n],i=r.correctAnswerCount;e?o+=i:o+=r.quizQuestionCount-i}return o},SurveyModel.prototype.getCorrectedAnswers=function(){return this.getCorrectedAnswerCount()},SurveyModel.prototype.getInCorrectedAnswers=function(){return this.getInCorrectedAnswerCount()},Object.defineProperty(SurveyModel.prototype,"showTimerPanel",{get:function(){return this.getPropertyValue("showTimerPanel")},set:function(e){this.setPropertyValue("showTimerPanel",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isTimerPanelShowingOnTop",{get:function(){return"top"==this.showTimerPanel},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"isTimerPanelShowingOnBottom",{get:function(){return"bottom"==this.showTimerPanel},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"showTimerPanelMode",{get:function(){return this.getPropertyValue("showTimerPanelMode")},set:function(e){this.setPropertyValue("showTimerPanelMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"widthMode",{get:function(){return this.getPropertyValue("widthMode")},set:function(e){this.setPropertyValue("widthMode",e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.setCalculatedWidthModeUpdater=function(){var e=this;this.calculatedWidthModeUpdater&&this.calculatedWidthModeUpdater.dispose(),this.calculatedWidthModeUpdater=new s.ComputedUpdater(function(){return e.calculateWidthMode()}),this.calculatedWidthMode=this.calculatedWidthModeUpdater},SurveyModel.prototype.calculateWidthMode=function(){if("auto"==this.widthMode){var e=!1;return this.pages.forEach(function(t){t.needResponsiveWidth()&&(e=!0)}),e?"responsive":"static"}return this.widthMode},Object.defineProperty(SurveyModel.prototype,"width",{get:function(){return this.getPropertyValue("width")},set:function(e){this.setPropertyValue("width",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"renderedWidth",{get:function(){var e=this.getPropertyValue("width");return e&&!isNaN(e)&&(e+="px"),"static"==this.getPropertyValue("calculatedWidthMode")&&e||void 0},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"timerInfo",{get:function(){return this.getTimerInfo()},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"timerClock",{get:function(){if(this.currentPage){var e,t,o=this.getTimerInfo(),n=o.spent,r=o.limit,i=o.minorSpent,s=o.minorLimit;e=r>0?this.getDisplayClockTime(r-n):this.getDisplayClockTime(n),void 0!==i&&(t=s>0?this.getDisplayClockTime(s-i):this.getDisplayClockTime(i))}return{majorText:e,minorText:t}},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"timerInfoText",{get:function(){var e={text:this.getTimerInfoText()};this.onTimerPanelInfoText.fire(this,e);var t=new g.LocalizableString(this,!0);return t.text=e.text,t.textOrHtml},enumerable:!1,configurable:!0}),SurveyModel.prototype.getTimerInfo=function(){var e=this.currentPage;if(!e)return{spent:0,limit:0};var t=e.timeSpent,o=this.timeSpent,n=this.getPageMaxTimeToFinish(e),r=this.maxTimeToFinish;return"page"==this.showTimerPanelMode?{spent:t,limit:n}:"survey"==this.showTimerPanelMode?{spent:o,limit:r}:n>0&&r>0?{spent:t,limit:n,minorSpent:o,minorLimit:r}:n>0?{spent:t,limit:n,minorSpent:o}:r>0?{spent:o,limit:r,minorSpent:t}:{spent:t,minorSpent:o}},SurveyModel.prototype.getTimerInfoText=function(){var e=this.currentPage;if(!e)return"";var t=this.getDisplayTime(e.timeSpent),o=this.getDisplayTime(this.timeSpent),n=this.getPageMaxTimeToFinish(e),r=this.getDisplayTime(n),i=this.getDisplayTime(this.maxTimeToFinish);return"page"==this.showTimerPanelMode?this.getTimerInfoPageText(e,t,r):"survey"==this.showTimerPanelMode?this.getTimerInfoSurveyText(o,i):"all"==this.showTimerPanelMode?n<=0&&this.maxTimeToFinish<=0?this.getLocalizationFormatString("timerSpentAll",t,o):n>0&&this.maxTimeToFinish>0?this.getLocalizationFormatString("timerLimitAll",t,r,o,i):this.getTimerInfoPageText(e,t,r)+" "+this.getTimerInfoSurveyText(o,i):""},SurveyModel.prototype.getTimerInfoPageText=function(e,t,o){return this.getPageMaxTimeToFinish(e)>0?this.getLocalizationFormatString("timerLimitPage",t,o):this.getLocalizationFormatString("timerSpentPage",t,o)},SurveyModel.prototype.getTimerInfoSurveyText=function(e,t){var o=this.maxTimeToFinish>0?"timerLimitSurvey":"timerSpentSurvey";return this.getLocalizationFormatString(o,e,t)},SurveyModel.prototype.getDisplayClockTime=function(e){var t=Math.floor(e/60),o=e%60,n=o.toString();return o<10&&(n="0"+n),t+":"+n},SurveyModel.prototype.getDisplayTime=function(e){var t=Math.floor(e/60),o=e%60,n="";return(t>0&&(n+=t+" "+this.getLocalizationString("timerMin")),n&&0==o)?n:(n&&(n+=" "),n+o+" "+this.getLocalizationString("timerSec"))},Object.defineProperty(SurveyModel.prototype,"timerModel",{get:function(){return this.timerModelValue},enumerable:!1,configurable:!0}),SurveyModel.prototype.startTimer=function(){this.timerModel.start()},SurveyModel.prototype.startTimerFromUI=function(){"none"!=this.showTimerPanel&&"running"===this.state&&this.startTimer()},SurveyModel.prototype.stopTimer=function(){this.timerModel.stop()},Object.defineProperty(SurveyModel.prototype,"timeSpent",{get:function(){return this.timerModel.spent},set:function(e){this.timerModel.spent=e},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"maxTimeToFinish",{get:function(){return this.getPropertyValue("maxTimeToFinish",0)},set:function(e){this.setPropertyValue("maxTimeToFinish",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyModel.prototype,"maxTimeToFinishPage",{get:function(){return this.getPropertyValue("maxTimeToFinishPage",0)},set:function(e){this.setPropertyValue("maxTimeToFinishPage",e)},enumerable:!1,configurable:!0}),SurveyModel.prototype.getPageMaxTimeToFinish=function(e){return!e||e.maxTimeToFinish<0?0:e.maxTimeToFinish>0?e.maxTimeToFinish:this.maxTimeToFinishPage},SurveyModel.prototype.doTimer=function(e){if(this.onTimer.fire(this,{}),this.maxTimeToFinish>0&&this.maxTimeToFinish==this.timeSpent&&this.completeLastPage(),e){var t=this.getPageMaxTimeToFinish(e);t>0&&t==e.timeSpent&&(this.isLastPage?this.completeLastPage():this.nextPage())}},Object.defineProperty(SurveyModel.prototype,"inSurvey",{get:function(){return!0},enumerable:!1,configurable:!0}),SurveyModel.prototype.getSurveyData=function(){return this},SurveyModel.prototype.getSurvey=function(){return this},SurveyModel.prototype.getTextProcessor=function(){return this},SurveyModel.prototype.getObjects=function(e,t){var o=[];return Array.prototype.push.apply(o,this.getPagesByNames(e)),Array.prototype.push.apply(o,this.getQuestionsByNames(t)),o},SurveyModel.prototype.setTriggerValue=function(e,t,o){if(e){if(o)this.setVariable(e,t);else{var n=this.getQuestionByName(e);if(n)n.value=t;else{var r=new c.ProcessValue,i=r.getFirstName(e);if(i==e)this.setValue(e,t);else{if(!this.getQuestionByName(i))return;var s=this.getUnbindValue(this.getFilteredValues());r.setValue(s,e,t),this.setValue(i,s[i])}}}}},SurveyModel.prototype.copyTriggerValue=function(e,t,o){if(e&&t){if(o)n=this.processText("{"+t+"}",!0);else{var n;n=new c.ProcessValue().getValue(t,this.getFilteredValues())}this.setTriggerValue(e,n,!1)}},SurveyModel.prototype.triggerExecuted=function(e){this.onTriggerExecuted.fire(this,{trigger:e})},SurveyModel.prototype.startMovingQuestion=function(){this.isMovingQuestion=!0},SurveyModel.prototype.stopMovingQuestion=function(){this.isMovingQuestion=!1},SurveyModel.prototype.focusQuestion=function(e){return this.focusQuestionByInstance(this.getQuestionByName(e,!0))},SurveyModel.prototype.focusQuestionByInstance=function(e,t){if(void 0===t&&(t=!1),!e||!e.isVisible||!e.page||(null===(o=this.focusingQuestionInfo)||void 0===o?void 0:o.question)===e)return!1;this.focusingQuestionInfo={question:e,onError:t},this.skippedPages.push({from:this.currentPage,to:e.page});var o,n=this.activePage!==e.page&&!e.page.isStartPage;return n&&(this.currentPage=e.page),n||this.focusQuestionInfo(),!0},SurveyModel.prototype.focusQuestionInfo=function(){var e,t=null===(e=this.focusingQuestionInfo)||void 0===e?void 0:e.question;t&&!t.isDisposed&&t.focus(this.focusingQuestionInfo.onError),this.focusingQuestionInfo=void 0},SurveyModel.prototype.questionEditFinishCallback=function(e,t){var o=this.enterKeyAction||v.settings.enterKeyAction;if("loseFocus"==o&&t.target.blur(),"moveToNextEditor"==o){var n=this.currentPage.questions,r=n.indexOf(e);r>-1&&r<n.length-1?n[r+1].focus():t.target.blur()}},SurveyModel.prototype.getElementWrapperComponentName=function(e,t){return"logo-image"===t?"sv-logo-image":SurveyModel.TemplateRendererComponentName},SurveyModel.prototype.getQuestionContentWrapperComponentName=function(e){return SurveyModel.TemplateRendererComponentName},SurveyModel.prototype.getRowWrapperComponentName=function(e){return SurveyModel.TemplateRendererComponentName},SurveyModel.prototype.getElementWrapperComponentData=function(e,t){return e},SurveyModel.prototype.getRowWrapperComponentData=function(e){return e},SurveyModel.prototype.getItemValueWrapperComponentName=function(e,t){return SurveyModel.TemplateRendererComponentName},SurveyModel.prototype.getItemValueWrapperComponentData=function(e,t){return e},SurveyModel.prototype.getMatrixCellTemplateData=function(e){return e.question},SurveyModel.prototype.searchText=function(e){e&&(e=e.toLowerCase());for(var t=[],o=0;o<this.pages.length;o++)this.pages[o].searchText(e,t);return t},SurveyModel.prototype.getSkeletonComponentName=function(e){return this.skeletonComponentName},SurveyModel.prototype.addLayoutElement=function(e){var t=this.removeLayoutElement(e.id);return this.layoutElements.push(e),t},SurveyModel.prototype.removeLayoutElement=function(e){var t=this.layoutElements.filter(function(t){return t.id===e})[0];if(t){var o=this.layoutElements.indexOf(t);this.layoutElements.splice(o,1)}return t},SurveyModel.prototype.getContainerContent=function(e){for(var t=[],o=0,n=this.layoutElements;o<n.length;o++){var r=n[o];isStrCiEqual(r.id,"timerpanel")?("header"===e&&this.isTimerPanelShowingOnTop&&!this.isShowStartingPage&&t.push(r),"footer"===e&&this.isTimerPanelShowingOnBottom&&!this.isShowStartingPage&&t.push(r)):"running"===this.state&&isStrCiEqual(r.id,"progress-"+this.progressBarType)?("header"===e&&this.isShowProgressBarOnTop&&!this.isShowStartingPage&&t.push(r),"footer"===e&&this.isShowProgressBarOnBottom&&!this.isShowStartingPage&&t.push(r)):isStrCiEqual(r.id,"navigationbuttons")?("contentTop"===e&&-1!==["top","both"].indexOf(this.isNavigationButtonsShowing)&&t.push(r),"contentBottom"===e&&-1!==["bottom","both"].indexOf(this.isNavigationButtonsShowing)&&t.push(r)):"running"===this.state&&isStrCiEqual(r.id,"toc-navigation")&&this.showTOC?("left"===e&&-1!==["left","both"].indexOf(this.tocLocation)&&t.push(r),"right"===e&&-1!==["right","both"].indexOf(this.tocLocation)&&t.push(r)):(Array.isArray(r.container)&&-1!==r.container.indexOf(e)||r.container===e)&&t.push(r)}return t},SurveyModel.prototype.processPopupVisiblityChanged=function(e,t,o){this.onPopupVisibleChanged.fire(this,{question:e,popup:t,visible:o})},SurveyModel.prototype.applyTheme=function(e){var t=this;e&&(Object.keys(e).forEach(function(o){if("header"===o){t.removeLayoutElement("cover");var n=new x.Cover;n.fromTheme(e),t.layoutElements.push({id:"cover",container:"header",component:"sv-header",data:n,processResponsiveness:function(e){return n.processResponsiveness(e)}})}"isPanelless"===o?t.isCompact=e[o]:t[o]=e[o]}),this.themeChanged(e))},SurveyModel.prototype.themeChanged=function(e){this.getAllQuestions().forEach(function(t){return t.themeChanged(e)})},SurveyModel.prototype.dispose=function(){if(this.removeScrollEventListener(),this.destroyResizeObserver(),this.rootElement=void 0,e.prototype.dispose.call(this),this.editingObj=null,this.pages){this.currentPage=null;for(var t=0;t<this.pages.length;t++)this.pages[t].setSurveyImpl(void 0),this.pages[t].dispose();this.pages.splice(0,this.pages.length),this.disposeCallback&&this.disposeCallback()}},SurveyModel.prototype.onScroll=function(){this.onScrollCallback&&this.onScrollCallback()},SurveyModel.prototype.addScrollEventListener=function(){var e,t=this;this.scrollHandler=function(){t.onScroll()},this.rootElement.addEventListener("scroll",this.scrollHandler),this.rootElement.getElementsByTagName("form")[0]&&this.rootElement.getElementsByTagName("form")[0].addEventListener("scroll",this.scrollHandler),this.css.rootWrapper&&(null===(e=this.rootElement.getElementsByClassName(this.css.rootWrapper)[0])||void 0===e||e.addEventListener("scroll",this.scrollHandler))},SurveyModel.prototype.removeScrollEventListener=function(){var e;this.rootElement&&this.scrollHandler&&(this.rootElement.removeEventListener("scroll",this.scrollHandler),this.rootElement.getElementsByTagName("form")[0]&&this.rootElement.getElementsByTagName("form")[0].removeEventListener("scroll",this.scrollHandler),this.css.rootWrapper&&(null===(e=this.rootElement.getElementsByClassName(this.css.rootWrapper)[0])||void 0===e||e.removeEventListener("scroll",this.scrollHandler)))},SurveyModel.TemplateRendererComponentName="sv-template-renderer",SurveyModel.stylesManager=null,SurveyModel.platform="unknown",__decorate([Object(i.property)()],SurveyModel.prototype,"completedCss",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"completedBeforeCss",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"loadingBodyCss",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"containerCss",void 0),__decorate([Object(i.property)({onSet:function(e,t){t.updateCss()}})],SurveyModel.prototype,"fitToContainer",void 0),__decorate([Object(i.property)({onSet:function(e,t){if("advanced"===e){if(!t.layoutElements.filter(function(e){return"cover"===e.id})[0]){var o=new x.Cover;o.logoPositionX="right"===t.logoPosition?"right":"left",o.logoPositionY="middle",o.titlePositionX="right"===t.logoPosition?"left":"right",o.titlePositionY="middle",o.descriptionPositionX="right"===t.logoPosition?"left":"right",o.descriptionPositionY="middle",o.survey=t,t.layoutElements.unshift({id:"cover",container:"header",component:"sv-header",data:o,processResponsiveness:function(e){return o.processResponsiveness(e)}})}}else t.removeLayoutElement("cover")}})],SurveyModel.prototype,"headerView",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"showBrandInfo",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"enterKeyAction",void 0),__decorate([Object(i.property)({defaultValue:{}})],SurveyModel.prototype,"cssVariables",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"_isMobile",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"_isCompact",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"backgroundImage",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"renderBackgroundImage",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"backgroundImageFit",void 0),__decorate([Object(i.property)({onSet:function(e,t){t.updateCss()}})],SurveyModel.prototype,"backgroundImageAttachment",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"backgroundImageStyle",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"wrapperFormCss",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"rootCss",void 0),__decorate([Object(i.property)()],SurveyModel.prototype,"calculatedWidthMode",void 0),__decorate([Object(i.propertyArray)()],SurveyModel.prototype,"layoutElements",void 0),SurveyModel}(a.SurveyElementCore);function isStrCiEqual(e,t){return!!e&&!!t&&e.toUpperCase()===t.toUpperCase()}i.Serializer.addClass("survey",[{name:"locale",choices:function(){return d.surveyLocalization.getLocales(!0)},onGetValue:function(e){return e.locale==d.surveyLocalization.defaultLocale?null:e.locale}},{name:"title",serializationProperty:"locTitle",dependsOn:"locale"},{name:"description:text",serializationProperty:"locDescription",dependsOn:"locale"},{name:"logo:file",serializationProperty:"locLogo"},{name:"logoWidth",default:"300px",minValue:0},{name:"logoHeight",default:"200px",minValue:0},{name:"logoFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"logoPosition",default:"left",choices:["none","left","right","top","bottom"]},{name:"focusFirstQuestionAutomatic:boolean"},{name:"focusOnFirstError:boolean",default:!0},{name:"completedHtml:html",serializationProperty:"locCompletedHtml"},{name:"completedBeforeHtml:html",serializationProperty:"locCompletedBeforeHtml"},{name:"completedHtmlOnCondition:htmlconditions",className:"htmlconditionitem"},{name:"loadingHtml:html",serializationProperty:"locLoadingHtml"},{name:"pages:surveypages",className:"page"},{name:"questions",alternativeName:"elements",baseClassName:"question",visible:!1,isLightSerializable:!1,onGetValue:function(e){return null},onSetValue:function(e,t,o){e.pages.splice(0,e.pages.length);var n=e.addNewPage("");o.toObject({questions:t},n)}},{name:"triggers:triggers",baseClassName:"surveytrigger",classNamePart:"trigger"},{name:"calculatedValues:calculatedvalues",className:"calculatedvalue"},{name:"surveyId",visible:!1},{name:"surveyPostId",visible:!1},{name:"surveyShowDataSaving:boolean",visible:!1},"cookieName","sendResultOnPageNext:boolean",{name:"showNavigationButtons",default:"bottom",choices:["none","top","bottom","both"]},{name:"showPrevButton:boolean",default:!0},{name:"showTitle:boolean",default:!0},{name:"showPageTitles:boolean",default:!0},{name:"showCompletedPage:boolean",default:!0},"navigateToUrl",{name:"navigateToUrlOnCondition:urlconditions",className:"urlconditionitem"},{name:"questionsOrder",default:"initial",choices:["initial","random"]},{name:"matrixDragHandleArea",visible:!1,default:"entireItem",choices:["entireItem","icon"]},"showPageNumbers:boolean",{name:"showQuestionNumbers",default:"on",choices:["on","onPage","off"]},{name:"questionTitleLocation",default:"top",choices:["top","bottom","left"]},{name:"questionDescriptionLocation",default:"underTitle",choices:["underInput","underTitle"]},{name:"questionErrorLocation",default:"top",choices:["top","bottom"]},{name:"showProgressBar",default:"off",choices:["off","top","bottom","both"]},{name:"progressBarType",default:"pages",choices:["pages","questions","requiredQuestions","correctQuestions","buttons"]},{name:"showTOC:switch",default:!1},{name:"tocLocation",default:"left",choices:["left","right"],dependsOn:["showTOC"],visibleIf:function(e){return!!e&&e.showTOC}},{name:"mode",default:"edit",choices:["edit","display"]},{name:"storeOthersAsComment:boolean",default:!0},{name:"maxTextLength:number",default:0,minValue:0},{name:"maxOthersLength:number",default:0,minValue:0},{name:"goNextPageAutomatic:boolean",onSetValue:function(e,t){"autogonext"!==t&&(t=r.Helpers.isTwoValueEquals(t,!0)),e.setPropertyValue("goNextPageAutomatic",t)}},{name:"clearInvisibleValues",default:"onComplete",choices:["none","onComplete","onHidden","onHiddenContainer"]},{name:"checkErrorsMode",default:"onNextPage",choices:["onNextPage","onValueChanged","onValueChanging","onComplete"]},{name:"textUpdateMode",default:"onBlur",choices:["onBlur","onTyping"]},{name:"autoGrowComment:boolean",default:!1},{name:"allowResizeComment:boolean",default:!0},{name:"startSurveyText",serializationProperty:"locStartSurveyText"},{name:"pagePrevText",serializationProperty:"locPagePrevText"},{name:"pageNextText",serializationProperty:"locPageNextText"},{name:"completeText",serializationProperty:"locCompleteText"},{name:"previewText",serializationProperty:"locPreviewText"},{name:"editText",serializationProperty:"locEditText"},{name:"requiredText",default:"*"},{name:"questionStartIndex",dependsOn:["showQuestionNumbers"],visibleIf:function(e){return!e||"off"!==e.showQuestionNumbers}},{name:"questionTitlePattern",default:"numTitleRequire",dependsOn:["questionStartIndex","requiredText"],choices:function(e){return e?e.getQuestionTitlePatternOptions():[]}},{name:"questionTitleTemplate",visible:!1,isSerializable:!1,serializationProperty:"locQuestionTitleTemplate"},{name:"firstPageIsStarted:boolean",default:!1},{name:"isSinglePage:boolean",default:!1,visible:!1,isSerializable:!1},{name:"questionsOnPageMode",default:"standard",choices:["singlePage","standard","questionPerPage"]},{name:"showPreviewBeforeComplete",default:"noPreview",choices:["noPreview","showAllQuestions","showAnsweredQuestions"]},{name:"maxTimeToFinish:number",default:0,minValue:0},{name:"maxTimeToFinishPage:number",default:0,minValue:0},{name:"showTimerPanel",default:"none",choices:["none","top","bottom"]},{name:"showTimerPanelMode",default:"all",choices:["all","page","survey"]},{name:"widthMode",default:"auto",choices:["auto","static","responsive"]},{name:"width",visibleIf:function(e){return"static"===e.widthMode}},{name:"fitToContainer:boolean",default:!1},{name:"headerView",default:"basic",choices:["basic","advanced"],visible:!1},{name:"backgroundImage:file",visible:!1},{name:"backgroundImageFit",default:"cover",choices:["auto","contain","cover"],visible:!1},{name:"backgroundImageAttachment",default:"scroll",choices:["scroll","fixed"],visible:!1},{name:"backgroundOpacity:number",minValue:0,maxValue:1,default:1,visible:!1},{name:"showBrandInfo:boolean",default:!1,visible:!1}])},"./src/surveyProgress.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"SurveyProgressModel",function(){return r});var n=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),r=function(){function SurveyProgressModel(){}return SurveyProgressModel.getProgressTextInBarCss=function(e){return new n.CssClassBuilder().append(e.progressText).append(e.progressTextInBar).toString()},SurveyProgressModel.getProgressTextUnderBarCss=function(e){return new n.CssClassBuilder().append(e.progressText).append(e.progressTextUnderBar).toString()},SurveyProgressModel}()},"./src/surveyProgressButtons.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"SurveyProgressButtonsModel",function(){return r});var n=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),r=function(){function SurveyProgressButtonsModel(e){this.survey=e}return SurveyProgressButtonsModel.prototype.isListElementClickable=function(e){return!this.survey.onServerValidateQuestions||!!this.survey.onServerValidateQuestions.isEmpty||"onComplete"===this.survey.checkErrorsMode||e<=this.survey.currentPageNo+1},SurveyProgressButtonsModel.prototype.getListElementCss=function(e){if(!(e>=this.survey.visiblePages.length))return new n.CssClassBuilder().append(this.survey.css.progressButtonsListElementPassed,this.survey.visiblePages[e].passed).append(this.survey.css.progressButtonsListElementCurrent,this.survey.currentPageNo===e).append(this.survey.css.progressButtonsListElementNonClickable,!this.isListElementClickable(e)).toString()},SurveyProgressButtonsModel.prototype.getScrollButtonCss=function(e,t){return new n.CssClassBuilder().append(this.survey.css.progressButtonsImageButtonLeft,t).append(this.survey.css.progressButtonsImageButtonRight,!t).append(this.survey.css.progressButtonsImageButtonHidden,!e).toString()},SurveyProgressButtonsModel.prototype.clickListElement=function(e){if(!this.survey.isDesignMode){if(e<this.survey.currentPageNo)this.survey.currentPageNo=e;else if(e>this.survey.currentPageNo)for(var t=this.survey.currentPageNo;t<e&&this.survey.nextPage();t++);}},SurveyProgressButtonsModel}()},"./src/surveyStrings.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"surveyLocalization",function(){return r}),o.d(t,"surveyStrings",function(){return i});var n=o(/*! ./localization/english */"./src/localization/english.ts"),r={currentLocaleValue:"",defaultLocaleValue:"en",locales:{},localeNames:{},supportedLocales:[],get currentLocale(){return this.currentLocaleValue===this.defaultLocaleValue?"":this.currentLocaleValue},set currentLocale(val){"cz"===val&&(val="cs"),this.currentLocaleValue=val},get defaultLocale(){return this.defaultLocaleValue},set defaultLocale(val){"cz"===val&&(val="cs"),this.defaultLocaleValue=val},getLocaleStrings:function(e){return this.locales[e]},getString:function(e,t){var o=this;void 0===t&&(t=null);var n=[],addLocaleCore=function(e){var t=o.locales[e];t&&n.push(t)},addLocale=function(e){if(e){addLocaleCore(e);var t=e.indexOf("-");t<1||addLocaleCore(e=e.substring(0,t))}};addLocale(t),addLocale(this.currentLocale),addLocale(this.defaultLocale),"en"!==this.defaultLocale&&addLocaleCore("en");for(var r=0;r<n.length;r++){var i=n[r][e];if(void 0!==i)return i}return this.onGetExternalString(e,t)},getLocales:function(e){void 0===e&&(e=!1);var t=[];t.push("");var o=this.locales;if(this.supportedLocales&&this.supportedLocales.length>0){o={};for(var n=0;n<this.supportedLocales.length;n++)o[this.supportedLocales[n]]=!0}for(var i in o)e&&i==this.defaultLocale||t.push(i);var locName=function(e){if(!e)return"";var t=r.localeNames[e];return t||(t=e),t.toLowerCase()};return t.sort(function(e,t){var o=locName(e),n=locName(t);return o===n?0:o<n?-1:1}),t},onGetExternalString:function(e,t){}},i=n.englishStrings;r.locales.en=n.englishStrings,r.localeNames.en="english"},"./src/surveyTimerModel.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"SurveyTimerModel",function(){return u});var n,r=o(/*! ./base */"./src/base.ts"),i=o(/*! ./surveytimer */"./src/surveytimer.ts"),s=o(/*! ./jsonobject */"./src/jsonobject.ts"),a=o(/*! ./utils/cssClassBuilder */"./src/utils/cssClassBuilder.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},u=function(e){function SurveyTimerModel(t){var o=e.call(this)||this;return o.timerFunc=null,o.surveyValue=t,o.onCreating(),o}return l(SurveyTimerModel,e),Object.defineProperty(SurveyTimerModel.prototype,"survey",{get:function(){return this.surveyValue},enumerable:!1,configurable:!0}),SurveyTimerModel.prototype.onCreating=function(){},SurveyTimerModel.prototype.start=function(){var e=this;this.survey&&(this.isRunning||this.isDesignMode||(this.survey.onCurrentPageChanged.add(function(){e.update()}),this.timerFunc=function(){e.doTimer()},this.setIsRunning(!0),this.update(),i.SurveyTimer.instance.start(this.timerFunc)))},SurveyTimerModel.prototype.stop=function(){this.isRunning&&(this.setIsRunning(!1),i.SurveyTimer.instance.stop(this.timerFunc))},Object.defineProperty(SurveyTimerModel.prototype,"isRunning",{get:function(){return this.getPropertyValue("isRunning",!1)},enumerable:!1,configurable:!0}),SurveyTimerModel.prototype.setIsRunning=function(e){this.setPropertyValue("isRunning",e)},SurveyTimerModel.prototype.update=function(){this.updateText(),this.updateProgress()},SurveyTimerModel.prototype.doTimer=function(){var e=this.survey.currentPage;e&&(e.timeSpent=e.timeSpent+1),this.spent=this.spent+1,this.update(),this.onTimer&&this.onTimer(e)},SurveyTimerModel.prototype.updateProgress=function(){var e=this,t=this.survey.timerInfo,o=t.spent,n=t.limit;n?0==o?(this.progress=0,setTimeout(function(){e.progress=Math.floor((o+1)/n*100)/100},0)):o!==n&&(this.progress=Math.floor((o+1)/n*100)/100):this.progress=void 0},SurveyTimerModel.prototype.updateText=function(){var e=this.survey.timerClock;this.clockMajorText=e.majorText,this.clockMinorText=e.minorText,this.text=this.survey.timerInfoText},Object.defineProperty(SurveyTimerModel.prototype,"showProgress",{get:function(){return void 0!==this.progress},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyTimerModel.prototype,"showTimerAsClock",{get:function(){return!!this.survey.getCss().clockTimerRoot},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyTimerModel.prototype,"rootCss",{get:function(){return new a.CssClassBuilder().append(this.survey.getCss().clockTimerRoot).append(this.survey.getCss().clockTimerRootTop,this.survey.isTimerPanelShowingOnTop).append(this.survey.getCss().clockTimerRootBottom,this.survey.isTimerPanelShowingOnBottom).toString()},enumerable:!1,configurable:!0}),SurveyTimerModel.prototype.getProgressCss=function(){return new a.CssClassBuilder().append(this.survey.getCss().clockTimerProgress).append(this.survey.getCss().clockTimerProgressAnimation,this.progress>0).toString()},Object.defineProperty(SurveyTimerModel.prototype,"textContainerCss",{get:function(){return this.survey.getCss().clockTimerTextContainer},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyTimerModel.prototype,"minorTextCss",{get:function(){return this.survey.getCss().clockTimerMinorText},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyTimerModel.prototype,"majorTextCss",{get:function(){return this.survey.getCss().clockTimerMajorText},enumerable:!1,configurable:!0}),__decorate([Object(s.property)()],SurveyTimerModel.prototype,"text",void 0),__decorate([Object(s.property)()],SurveyTimerModel.prototype,"progress",void 0),__decorate([Object(s.property)()],SurveyTimerModel.prototype,"clockMajorText",void 0),__decorate([Object(s.property)()],SurveyTimerModel.prototype,"clockMinorText",void 0),__decorate([Object(s.property)({defaultValue:0})],SurveyTimerModel.prototype,"spent",void 0),SurveyTimerModel}(r.Base)},"./src/surveyToc.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"tryNavigateToPage",function(){return tryNavigateToPage}),o.d(t,"tryFocusPage",function(){return tryFocusPage}),o.d(t,"createTOCListModel",function(){return createTOCListModel}),o.d(t,"getTocRootCss",function(){return getTocRootCss}),o.d(t,"TOCModel",function(){return l});var n=o(/*! ./actions/action */"./src/actions/action.ts"),r=o(/*! ./base */"./src/base.ts"),i=o(/*! ./list */"./src/list.ts"),s=o(/*! ./page */"./src/page.ts"),a=o(/*! ./popup */"./src/popup.ts");function tryNavigateToPage(e,t){if(!e.isDesignMode){var o=e.visiblePages.indexOf(t);if(o<e.currentPageNo)e.currentPageNo=o;else if(o>e.currentPageNo){for(var n=e.currentPageNo;n<o;n++)if(!e.nextPageUIClick())return!1}return!0}}function tryFocusPage(e,t){return!!e.isDesignMode||(t.focusFirstQuestion(),!0)}function createTOCListModel(e,t){var o,a="singlePage"===e.questionsOnPageMode?null===(o=e.pages[0])||void 0===o?void 0:o.elements:e.pages,l=(a||[]).map(function(o){var i,a;return new n.Action({id:o.name,locTitle:(null===(i=o.locNavigationTitle)||void 0===i?void 0:i.text)?o.locNavigationTitle:(null===(a=o.locTitle)||void 0===a?void 0:a.text)?o.locTitle:void 0,title:o.renderedNavigationTitle,action:function(){return(document.activeElement&&document.activeElement.blur&&document.activeElement.blur(),t&&t(),o instanceof s.PageModel)?tryNavigateToPage(e,o):tryFocusPage(e,o)},visible:new r.ComputedUpdater(function(){return o.isVisible&&!o.isStartPage})})}),u=new i.ListModel(l,function(e){e.action()&&(u.selectedItem=e)},!0,l.filter(function(t){return t.id===e.currentPage.name})[0]||l.filter(function(e){return e.id===a[0].name})[0]);return u.allowSelection=!1,u.locOwner=e,e.onCurrentPageChanged.add(function(t,o){u.selectedItem=l.filter(function(t){return t.id===e.currentPage.name})[0]}),u}function getTocRootCss(e,t){return(void 0===t&&(t=!1),t)?"sv_progress-toc sv_progress-toc--mobile":"sv_progress-toc sv_progress-toc--"+(e.tocLocation||"").toLowerCase()}var l=function(){function TOCModel(e){var t=this;this.survey=e,this.icon="icon-navmenu_24x24",this.togglePopup=function(){t.popupModel.toggleVisibility()},this.listModel=createTOCListModel(e,function(){t.popupModel.isVisible=!1}),this.popupModel=new a.PopupModel("sv-list",{model:this.listModel}),this.popupModel.overlayDisplayMode="overlay",this.popupModel.displayMode=new r.ComputedUpdater(function(){return t.isMobile?"overlay":"popup"})}return Object.defineProperty(TOCModel.prototype,"isMobile",{get:function(){return this.survey.isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(TOCModel.prototype,"containerCss",{get:function(){return getTocRootCss(this.survey,this.isMobile)},enumerable:!1,configurable:!0}),TOCModel.prototype.dispose=function(){this.popupModel.dispose(),this.listModel.dispose()},TOCModel}()},"./src/surveytimer.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"surveyTimerFunctions",function(){return r}),o.d(t,"SurveyTimer",function(){return i});var n=o(/*! ./base */"./src/base.ts"),r={setTimeout:function(e){return r.safeTimeOut(e,1e3)},clearTimeout:function(e){"undefined"!=typeof window&&window.clearTimeout(e)},safeTimeOut:function(e,t){return"undefined"==typeof window||t<=0?(e(),0):window.setTimeout(e,t)}},i=function(){function SurveyTimer(){this.listenerCounter=0,this.timerId=-1,this.onTimer=new n.Event}return Object.defineProperty(SurveyTimer,"instance",{get:function(){return SurveyTimer.instanceValue||(SurveyTimer.instanceValue=new SurveyTimer),SurveyTimer.instanceValue},enumerable:!1,configurable:!0}),SurveyTimer.prototype.start=function(e){var t=this;void 0===e&&(e=null),e&&this.onTimer.add(e),this.timerId<0&&(this.timerId=r.setTimeout(function(){t.doTimer()})),this.listenerCounter++},SurveyTimer.prototype.stop=function(e){void 0===e&&(e=null),e&&this.onTimer.remove(e),this.listenerCounter--,0==this.listenerCounter&&this.timerId>-1&&(r.clearTimeout(this.timerId),this.timerId=-1)},SurveyTimer.prototype.doTimer=function(){var e=this;if((this.onTimer.isEmpty||0==this.listenerCounter)&&(this.timerId=-1),!(this.timerId<0)){var t=this.timerId;this.onTimer.fire(this,{}),t===this.timerId&&(this.timerId=r.setTimeout(function(){e.doTimer()}))}},SurveyTimer.instanceValue=null,SurveyTimer}()},"./src/svgbundle.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"SvgIconRegistry",function(){return s}),o.d(t,"SvgRegistry",function(){return a}),o.d(t,"SvgBundleViewModel",function(){return n});var n,r=o(/*! ./settings */"./src/settings.ts"),i=o(/*! ./utils/utils */"./src/utils/utils.ts"),s=function(){function SvgIconRegistry(){this.icons={},this.iconPrefix="icon-"}return SvgIconRegistry.prototype.processId=function(e,t){return 0==e.indexOf(t)&&(e=e.substring(t.length)),e},SvgIconRegistry.prototype.registerIconFromSymbol=function(e,t){this.icons[e]=t},SvgIconRegistry.prototype.registerIconFromSvgViaElement=function(e,t,o){void 0===o&&(o=this.iconPrefix),e=this.processId(e,o);var n=document.createElement("div");n.innerHTML=t;var r=document.createElement("symbol"),i=n.querySelector("svg");r.innerHTML=i.innerHTML;for(var s=0;s<i.attributes.length;s++)r.setAttributeNS("http://www.w3.org/2000/svg",i.attributes[s].name,i.attributes[s].value);r.id=o+e,this.registerIconFromSymbol(e,r.outerHTML)},SvgIconRegistry.prototype.registerIconFromSvg=function(e,t,o){void 0===o&&(o=this.iconPrefix),e=this.processId(e,o);var n="<svg ",r="</svg>",i=(t=t.trim()).toLowerCase();return i.substring(0,n.length)===n&&i.substring(i.length-r.length,i.length)===r&&(this.registerIconFromSymbol(e,'<symbol id="'+o+e+'" '+t.substring(n.length,i.length-r.length)+"</symbol>"),!0)},SvgIconRegistry.prototype.registerIconsFromFolder=function(e){var t=this;e.keys().forEach(function(o){t.registerIconFromSvg(o.substring(2,o.length-4).toLowerCase(),e(o))})},SvgIconRegistry.prototype.iconsRenderedHtml=function(){var e=this;return Object.keys(this.icons).map(function(t){return e.icons[t]}).join("")},SvgIconRegistry.prototype.renderIcons=function(){var e="sv-icon-holder-global-container";if(r.settings.environment&&!r.settings.environment.root.getElementById(e)){var t=document.createElement("div");t.id=e,t.innerHTML="<svg>"+this.iconsRenderedHtml()+"</svg>",t.style.display="none",Object(i.getElement)(r.settings.environment.svgMountContainer).appendChild(t)}},SvgIconRegistry}(),a=new s,l=o("./src/images sync \\.svg$"),u=o("./src/images/smiley sync \\.svg$");a.registerIconsFromFolder(l),a.registerIconsFromFolder(u)},"./src/template-renderer.ts":function(e,t,o){"use strict";o.r(t)},"./src/textPreProcessor.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"TextPreProcessorItem",function(){return TextPreProcessorItem}),o.d(t,"TextPreProcessorValue",function(){return TextPreProcessorValue}),o.d(t,"TextPreProcessor",function(){return i}),o.d(t,"QuestionTextProcessor",function(){return s});var n=o(/*! ./helpers */"./src/helpers.ts"),r=o(/*! ./conditionProcessValue */"./src/conditionProcessValue.ts"),TextPreProcessorItem=function(){},TextPreProcessorValue=function(e,t){this.name=e,this.returnDisplayValue=t,this.isExists=!1,this.canProcess=!0},i=function(){function TextPreProcessor(){this._unObservableValues=[void 0]}return Object.defineProperty(TextPreProcessor.prototype,"hasAllValuesOnLastRunValue",{get:function(){return this._unObservableValues[0]},set:function(e){this._unObservableValues[0]=e},enumerable:!1,configurable:!0}),TextPreProcessor.prototype.process=function(e,t,o){if(void 0===t&&(t=!1),void 0===o&&(o=!1),this.hasAllValuesOnLastRunValue=!0,!e||!this.onProcess)return e;for(var r=this.getItems(e),i=r.length-1;i>=0;i--){var s=r[i],a=this.getName(e.substring(s.start+1,s.end));if(a){var l=new TextPreProcessorValue(a,t);if(this.onProcess(l),!l.isExists){l.canProcess&&(this.hasAllValuesOnLastRunValue=!1);continue}n.Helpers.isValueEmpty(l.value)&&(this.hasAllValuesOnLastRunValue=!1);var u=n.Helpers.isValueEmpty(l.value)?"":l.value;o&&(u=encodeURIComponent(u)),e=e.substring(0,s.start)+u+e.substring(s.end+1)}}return e},TextPreProcessor.prototype.processValue=function(e,t){var o=new TextPreProcessorValue(e,t);return this.onProcess&&this.onProcess(o),o},Object.defineProperty(TextPreProcessor.prototype,"hasAllValuesOnLastRun",{get:function(){return!!this.hasAllValuesOnLastRunValue},enumerable:!1,configurable:!0}),TextPreProcessor.prototype.getItems=function(e){for(var t=[],o=e.length,n=-1,r="",i=0;i<o;i++)if("{"==(r=e[i])&&(n=i),"}"==r){if(n>-1){var s=new TextPreProcessorItem;s.start=n,s.end=i,t.push(s)}n=-1}return t},TextPreProcessor.prototype.getName=function(e){if(e)return e.trim()},TextPreProcessor}(),s=function(){function QuestionTextProcessor(e){var t=this;this.variableName=e,this.textPreProcessor=new i,this.textPreProcessor.onProcess=function(e){t.getProcessedTextValue(e)}}return QuestionTextProcessor.prototype.processValue=function(e,t){return this.textPreProcessor.processValue(e,t)},Object.defineProperty(QuestionTextProcessor.prototype,"survey",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(QuestionTextProcessor.prototype,"panel",{get:function(){return null},enumerable:!1,configurable:!0}),QuestionTextProcessor.prototype.getValues=function(){return this.panel?this.panel.getValue():null},QuestionTextProcessor.prototype.getQuestionByName=function(e){return this.panel?this.panel.getQuestionByValueName(e):null},QuestionTextProcessor.prototype.getParentTextProcessor=function(){return null},QuestionTextProcessor.prototype.onCustomProcessText=function(e){return!1},QuestionTextProcessor.prototype.getQuestionDisplayText=function(e){return e.displayValue},QuestionTextProcessor.prototype.getProcessedTextValue=function(e){if(!(!e||this.onCustomProcessText(e))){var t=new r.ProcessValue().getFirstName(e.name);if(e.isExists=t==this.variableName,e.canProcess=e.isExists,e.canProcess){e.name=e.name.replace(this.variableName+".","");var t=new r.ProcessValue().getFirstName(e.name),o=this.getQuestionByName(t),n={};if(o)n[t]=e.returnDisplayValue?this.getQuestionDisplayText(o):o.value;else{var i=this.panel?this.getValues():null;i&&(n[t]=i[t])}e.value=new r.ProcessValue().getValue(e.name,n)}}},QuestionTextProcessor.prototype.processText=function(e,t){return this.survey&&this.survey.isDesignMode?e:(e=this.textPreProcessor.process(e,t),e=this.processTextCore(this.getParentTextProcessor(),e,t),this.processTextCore(this.survey,e,t))},QuestionTextProcessor.prototype.processTextEx=function(e,t){e=this.processText(e,t);var o=this.textPreProcessor.hasAllValuesOnLastRun,n={hasAllValuesOnLastRun:!0,text:e};return this.survey&&(n=this.survey.processTextEx(e,t,!1)),n.hasAllValuesOnLastRun=n.hasAllValuesOnLastRun&&o,n},QuestionTextProcessor.prototype.processTextCore=function(e,t,o){return e?e.processText(t,o):t},QuestionTextProcessor}()},"./src/themes.ts":function(e,t,o){"use strict";o.r(t)},"./src/trigger.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"Trigger",function(){return d}),o.d(t,"SurveyTrigger",function(){return h}),o.d(t,"SurveyTriggerVisible",function(){return g}),o.d(t,"SurveyTriggerComplete",function(){return f}),o.d(t,"SurveyTriggerSetValue",function(){return y}),o.d(t,"SurveyTriggerSkip",function(){return m}),o.d(t,"SurveyTriggerRunExpression",function(){return v}),o.d(t,"SurveyTriggerCopyValue",function(){return b});var n,r=o(/*! ./helpers */"./src/helpers.ts"),i=o(/*! ./base */"./src/base.ts"),s=o(/*! ./jsonobject */"./src/jsonobject.ts"),a=o(/*! ./conditions */"./src/conditions.ts"),l=o(/*! ./expressions/expressions */"./src/expressions/expressions.ts"),u=o(/*! ./conditionProcessValue */"./src/conditionProcessValue.ts"),c=o(/*! ./settings */"./src/settings.ts"),p=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),d=function(e){function Trigger(){var t=e.call(this)||this;return t.idValue=Trigger.idCounter++,t.registerPropertyChangedHandlers(["operator","value","name"],function(){t.oldPropertiesChanged()}),t.registerPropertyChangedHandlers(["expression"],function(){t.onExpressionChanged()}),t}return p(Trigger,e),Object.defineProperty(Trigger,"operators",{get:function(){return null!=Trigger.operatorsValue||(Trigger.operatorsValue={empty:function(e,t){return!e},notempty:function(e,t){return!!e},equal:function(e,t){return e==t},notequal:function(e,t){return e!=t},contains:function(e,t){return e&&e.indexOf&&e.indexOf(t)>-1},notcontains:function(e,t){return!e||!e.indexOf||-1==e.indexOf(t)},greater:function(e,t){return e>t},less:function(e,t){return e<t},greaterorequal:function(e,t){return e>=t},lessorequal:function(e,t){return e<=t}}),Trigger.operatorsValue},enumerable:!1,configurable:!0}),Object.defineProperty(Trigger.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Trigger.prototype.getType=function(){return"triggerbase"},Trigger.prototype.toString=function(){var e=this.getType().replace("trigger",""),t=this.expression?this.expression:this.buildExpression();return t&&(e+=", "+t),e},Object.defineProperty(Trigger.prototype,"operator",{get:function(){return this.getPropertyValue("operator","equal")},set:function(e){e&&(e=e.toLowerCase(),Trigger.operators[e]&&this.setPropertyValue("operator",e))},enumerable:!1,configurable:!0}),Object.defineProperty(Trigger.prototype,"value",{get:function(){return this.getPropertyValue("value",null)},set:function(e){this.setPropertyValue("value",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Trigger.prototype,"name",{get:function(){return this.getPropertyValue("name","")},set:function(e){this.setPropertyValue("name",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Trigger.prototype,"expression",{get:function(){return this.getPropertyValue("expression","")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),Trigger.prototype.canBeExecuted=function(e){return!0},Trigger.prototype.canBeExecutedOnComplete=function(){return!1},Trigger.prototype.checkExpression=function(e,t,o,n,r){void 0===r&&(r=null),this.isExecutingOnNextPage=e,this.canBeExecuted(e)&&(!t||this.canBeExecutedOnComplete())&&this.isCheckRequired(o)&&(this.conditionRunner?this.perform(n,r):this.canSuccessOnEmptyExpression()&&this.triggerResult(!0,n,r))},Trigger.prototype.canSuccessOnEmptyExpression=function(){return!1},Trigger.prototype.check=function(e){Trigger.operators[this.operator](e,this.value)?this.onSuccess({},null):this.onFailure()},Object.defineProperty(Trigger.prototype,"requireValidQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),Trigger.prototype.perform=function(e,t){var o=this;this.conditionRunner.onRunComplete=function(n){o.triggerResult(n,e,t)},this.conditionRunner.run(e,t)},Trigger.prototype.triggerResult=function(e,t,o){e?(this.onSuccess(t,o),this.onSuccessExecuted()):this.onFailure()},Trigger.prototype.onSuccess=function(e,t){},Trigger.prototype.onFailure=function(){},Trigger.prototype.onSuccessExecuted=function(){},Trigger.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.oldPropertiesChanged()},Trigger.prototype.oldPropertiesChanged=function(){this.onExpressionChanged()},Trigger.prototype.onExpressionChanged=function(){this.conditionRunner=null},Trigger.prototype.buildExpression=function(){return!this.name||this.isValueEmpty(this.value)&&this.isRequireValue?"":"{"+this.name+"} "+this.operator+" "+l.OperandMaker.toOperandString(this.value)},Trigger.prototype.isCheckRequired=function(e){return!!e&&(this.createConditionRunner(),!!this.conditionRunner&&!0===this.conditionRunner.hasFunction()||new u.ProcessValue().isAnyKeyChanged(e,this.getUsedVariables()))},Trigger.prototype.getUsedVariables=function(){return this.conditionRunner?this.conditionRunner.getVariables():[]},Trigger.prototype.createConditionRunner=function(){if(!this.conditionRunner){var e=this.expression;e||(e=this.buildExpression()),e&&(this.conditionRunner=new a.ConditionRunner(e))}},Object.defineProperty(Trigger.prototype,"isRequireValue",{get:function(){return"empty"!==this.operator&&"notempty"!=this.operator},enumerable:!1,configurable:!0}),Trigger.idCounter=1,Trigger.operatorsValue=null,Trigger}(i.Base),h=function(e){function SurveyTrigger(){var t=e.call(this)||this;return t.ownerValue=null,t}return p(SurveyTrigger,e),Object.defineProperty(SurveyTrigger.prototype,"owner",{get:function(){return this.ownerValue},enumerable:!1,configurable:!0}),SurveyTrigger.prototype.setOwner=function(e){this.ownerValue=e},SurveyTrigger.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.owner&&this.owner.getSurvey?this.owner.getSurvey():null},SurveyTrigger.prototype.isRealExecution=function(){return!0},SurveyTrigger.prototype.onSuccessExecuted=function(){this.owner&&this.isRealExecution()&&this.owner.triggerExecuted(this)},SurveyTrigger}(d),g=function(e){function SurveyTriggerVisible(){var t=e.call(this)||this;return t.pages=[],t.questions=[],t}return p(SurveyTriggerVisible,e),SurveyTriggerVisible.prototype.getType=function(){return"visibletrigger"},SurveyTriggerVisible.prototype.onSuccess=function(e,t){this.onTrigger(this.onItemSuccess)},SurveyTriggerVisible.prototype.onFailure=function(){this.onTrigger(this.onItemFailure)},SurveyTriggerVisible.prototype.onTrigger=function(e){if(this.owner)for(var t=this.owner.getObjects(this.pages,this.questions),o=0;o<t.length;o++)e(t[o])},SurveyTriggerVisible.prototype.onItemSuccess=function(e){e.visible=!0},SurveyTriggerVisible.prototype.onItemFailure=function(e){e.visible=!1},SurveyTriggerVisible}(h),f=function(e){function SurveyTriggerComplete(){return e.call(this)||this}return p(SurveyTriggerComplete,e),SurveyTriggerComplete.prototype.getType=function(){return"completetrigger"},Object.defineProperty(SurveyTriggerComplete.prototype,"requireValidQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),SurveyTriggerComplete.prototype.isRealExecution=function(){return!c.settings.triggers.executeCompleteOnValueChanged===this.isExecutingOnNextPage},SurveyTriggerComplete.prototype.onSuccess=function(e,t){this.owner&&(this.isRealExecution()?this.owner.setCompleted(this):this.owner.canBeCompleted(this,!0))},SurveyTriggerComplete.prototype.onFailure=function(){this.owner.canBeCompleted(this,!1)},SurveyTriggerComplete}(h),y=function(e){function SurveyTriggerSetValue(){return e.call(this)||this}return p(SurveyTriggerSetValue,e),SurveyTriggerSetValue.prototype.getType=function(){return"setvaluetrigger"},SurveyTriggerSetValue.prototype.canBeExecuted=function(e){return!e&&!!this.setToName},SurveyTriggerSetValue.prototype.onPropertyValueChanged=function(t,o,n){if(e.prototype.onPropertyValueChanged.call(this,t,o,n),"setToName"===t){var r=this.getSurvey();r&&!r.isLoadingFromJson&&r.isDesignMode&&(this.setValue=void 0)}},Object.defineProperty(SurveyTriggerSetValue.prototype,"setToName",{get:function(){return this.getPropertyValue("setToName","")},set:function(e){this.setPropertyValue("setToName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyTriggerSetValue.prototype,"setValue",{get:function(){return this.getPropertyValue("setValue")},set:function(e){this.setPropertyValue("setValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyTriggerSetValue.prototype,"isVariable",{get:function(){return this.getPropertyValue("isVariable")},set:function(e){this.setPropertyValue("isVariable",e)},enumerable:!1,configurable:!0}),SurveyTriggerSetValue.prototype.onSuccess=function(e,t){this.setToName&&this.owner&&this.owner.setTriggerValue(this.setToName,this.setValue,this.isVariable)},SurveyTriggerSetValue}(h),m=function(e){function SurveyTriggerSkip(){return e.call(this)||this}return p(SurveyTriggerSkip,e),SurveyTriggerSkip.prototype.getType=function(){return"skiptrigger"},Object.defineProperty(SurveyTriggerSkip.prototype,"requireValidQuestion",{get:function(){return this.canBeExecuted(!1)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyTriggerSkip.prototype,"gotoName",{get:function(){return this.getPropertyValue("gotoName","")},set:function(e){this.setPropertyValue("gotoName",e)},enumerable:!1,configurable:!0}),SurveyTriggerSkip.prototype.canBeExecuted=function(e){return!c.settings.triggers.executeSkipOnValueChanged===e},SurveyTriggerSkip.prototype.onSuccess=function(e,t){this.gotoName&&this.owner&&this.owner.focusQuestion(this.gotoName)},SurveyTriggerSkip}(h),v=function(e){function SurveyTriggerRunExpression(){return e.call(this)||this}return p(SurveyTriggerRunExpression,e),SurveyTriggerRunExpression.prototype.getType=function(){return"runexpressiontrigger"},Object.defineProperty(SurveyTriggerRunExpression.prototype,"setToName",{get:function(){return this.getPropertyValue("setToName","")},set:function(e){this.setPropertyValue("setToName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyTriggerRunExpression.prototype,"runExpression",{get:function(){return this.getPropertyValue("runExpression","")},set:function(e){this.setPropertyValue("runExpression",e)},enumerable:!1,configurable:!0}),SurveyTriggerRunExpression.prototype.onSuccess=function(e,t){var o=this;if(this.owner&&this.runExpression){var n=new a.ExpressionRunner(this.runExpression);n.canRun&&(n.onRunComplete=function(e){o.onCompleteRunExpression(e)},n.run(e,t))}},SurveyTriggerRunExpression.prototype.onCompleteRunExpression=function(e){this.setToName&&void 0!==e&&this.owner.setTriggerValue(this.setToName,r.Helpers.convertValToQuestionVal(e),!1)},SurveyTriggerRunExpression}(h),b=function(e){function SurveyTriggerCopyValue(){return e.call(this)||this}return p(SurveyTriggerCopyValue,e),SurveyTriggerCopyValue.prototype.canBeExecuted=function(e){return!e&&!!this.setToName&&!!this.fromName},Object.defineProperty(SurveyTriggerCopyValue.prototype,"setToName",{get:function(){return this.getPropertyValue("setToName","")},set:function(e){this.setPropertyValue("setToName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyTriggerCopyValue.prototype,"fromName",{get:function(){return this.getPropertyValue("fromName","")},set:function(e){this.setPropertyValue("fromName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyTriggerCopyValue.prototype,"copyDisplayValue",{get:function(){return this.getPropertyValue("copyDisplayValue")},set:function(e){this.setPropertyValue("copyDisplayValue",e)},enumerable:!1,configurable:!0}),SurveyTriggerCopyValue.prototype.getType=function(){return"copyvaluetrigger"},SurveyTriggerCopyValue.prototype.onSuccess=function(e,t){this.setToName&&this.owner&&this.owner.copyTriggerValue(this.setToName,this.fromName,this.copyDisplayValue)},SurveyTriggerCopyValue.prototype.canSuccessOnEmptyExpression=function(){return!0},SurveyTriggerCopyValue.prototype.getUsedVariables=function(){var t=e.prototype.getUsedVariables.call(this);return 0===t.length&&this.fromName&&t.push(this.fromName),t},SurveyTriggerCopyValue}(h);s.Serializer.addClass("trigger",[{name:"operator",default:"equal",visible:!1},{name:"value",visible:!1},"expression:condition"]),s.Serializer.addClass("surveytrigger",[{name:"name",visible:!1}],null,"trigger"),s.Serializer.addClass("visibletrigger",["pages:pages","questions:questions"],function(){return new g},"surveytrigger"),s.Serializer.addClass("completetrigger",[],function(){return new f},"surveytrigger"),s.Serializer.addClass("setvaluetrigger",[{name:"!setToName:questionvalue"},{name:"setValue:triggervalue",dependsOn:"setToName",visibleIf:function(e){return!!e&&!!e.setToName}},{name:"isVariable:boolean",visible:!1}],function(){return new y},"surveytrigger"),s.Serializer.addClass("copyvaluetrigger",[{name:"!fromName:questionvalue"},{name:"!setToName:questionvalue"},{name:"copyDisplayValue:boolean",visible:!1}],function(){return new b},"surveytrigger"),s.Serializer.addClass("skiptrigger",[{name:"!gotoName:question"}],function(){return new m},"surveytrigger"),s.Serializer.addClass("runexpressiontrigger",[{name:"setToName:questionvalue"},"runExpression:expression"],function(){return new v},"surveytrigger")},"./src/utils/camera.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"Camera",function(){return r});var n=o(/*! survey-core */"./src/entries/core.ts"),r=function(){function Camera(){this.canFlipValue=void 0}return Camera.clear=function(){Camera.cameraList=void 0,Camera.cameraIndex=-1},Camera.setCameraList=function(e){var getDeviceType=function(e){var t=e.label.toLocaleLowerCase();return t.indexOf("user")>-1?"user":t.indexOf("enviroment")>-1?"enviroment":""};Camera.clear(),Array.isArray(e)&&e.length>0&&(Camera.cameraIndex=-1,e.sort(function(t,o){if(t===o)return 0;if(t.label!==o.label){var n=getDeviceType(t),r=getDeviceType(o);if(n!==r){if("user"===n)return -1;if("user"===r)return 1;if("enviroment"===n)return -1;if("enviroment"===r)return 1}}return e.indexOf(t)<e.indexOf(o)?-1:1})),Camera.cameraList=e},Camera.prototype.hasCamera=function(e){var t=this;if(void 0!==Camera.cameraList){this.hasCameraCallback(e);return}if(Camera.mediaDevicesCallback){Camera.mediaDevicesCallback(function(o){t.setVideoInputs(o),t.hasCameraCallback(e)});return}"undefined"!=typeof navigator&&navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(function(o){t.setVideoInputs(o),t.hasCameraCallback(e),t.updateCanFlipValue()}).catch(function(o){Camera.cameraList=null,t.hasCameraCallback(e)}):(Camera.cameraList=null,this.hasCameraCallback(e))},Camera.prototype.getMediaConstraints=function(e){var t=Camera.cameraList;if(Array.isArray(t)&&!(t.length<1)){Camera.cameraIndex<0&&(Camera.cameraIndex=0);var o=t[Camera.cameraIndex],n={};return o&&o.deviceId?n.deviceId={exact:o.deviceId}:n.facingMode=Camera.cameraFacingMode,e&&(n.width={exact:e.width?e.width:e.scrollWidth},n.height={exact:e.height?e.height:e.scrollHeight}),{video:n,audio:!1}}},Camera.prototype.startVideo=function(e,t,o,r){var i,s=this,a=null===(i=n.settings.environment.root)||void 0===i?void 0:i.getElementById(e);if(!a){t(void 0);return}o?a.width=o:a.style.width="100%",r?a.height=r:a.style.height="100%";var l=this.getMediaConstraints(a);navigator.mediaDevices.getUserMedia(l).then(function(e){var o;a.srcObject=e,(null===(o=Camera.cameraList[Camera.cameraIndex])||void 0===o?void 0:o.deviceId)||!e.getTracks()[0].getCapabilities().facingMode||(Camera.canSwitchFacingMode=!0,s.updateCanFlipValue()),a.play(),t(e)}).catch(function(e){t(void 0)})},Camera.prototype.snap=function(e,t){if("undefined"==typeof document)return!1;var o=document,n=o.getElementById(e);if(!n)return!1;var r=o.createElement("canvas");r.height=n.scrollHeight,r.width=n.scrollWidth;var i=r.getContext("2d");return i.clearRect(0,0,r.width,r.height),i.drawImage(n,0,0,r.width,r.height),r.toBlob(t,"image/png"),!0},Camera.prototype.updateCanFlipValue=function(){var e=Camera.cameraList;this.canFlipValue=Array.isArray(e)&&e.length>1||Camera.canSwitchFacingMode,this.onCanFlipChangedCallback&&this.onCanFlipChangedCallback(this.canFlipValue)},Camera.prototype.canFlip=function(e){return void 0===this.canFlipValue&&this.updateCanFlipValue(),e&&(this.onCanFlipChangedCallback=e),this.canFlipValue},Camera.prototype.flip=function(){this.canFlip()&&(Camera.canSwitchFacingMode?Camera.cameraFacingMode="user"===Camera.cameraFacingMode?"environment":"user":Camera.cameraIndex>=Camera.cameraList.length-1?Camera.cameraIndex=0:Camera.cameraIndex++)},Camera.prototype.hasCameraCallback=function(e){e(Array.isArray(Camera.cameraList))},Camera.prototype.setVideoInputs=function(e){var t=[];e.forEach(function(e){"videoinput"===e.kind&&t.push(e)}),Camera.setCameraList(t.length>0?t:null)},Camera.cameraIndex=-1,Camera.cameraFacingMode="user",Camera.canSwitchFacingMode=!1,Camera}()},"./src/utils/cssClassBuilder.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"CssClassBuilder",function(){return n});var n=function(){function CssClassBuilder(){this.classes=[]}return CssClassBuilder.prototype.isEmpty=function(){return""===this.toString()},CssClassBuilder.prototype.append=function(e,t){return void 0===t&&(t=!0),e&&t&&("string"==typeof e&&(e=e.trim()),this.classes.push(e)),this},CssClassBuilder.prototype.toString=function(){return this.classes.join(" ")},CssClassBuilder}()},"./src/utils/devices.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"IsMobile",function(){return s}),o.d(t,"IsTouch",function(){return l}),o.d(t,"_setIsTouch",function(){return _setIsTouch});var n,r=!1,i=null;"undefined"!=typeof navigator&&"undefined"!=typeof window&&navigator&&window&&(i=navigator.userAgent||navigator.vendor||window.opera),(n=i)&&("MacIntel"===navigator.platform&&navigator.maxTouchPoints>0||"iPad"===navigator.platform?r=!0:(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substring(0,4)))&&(r=!0));var s=r||!1,a=!1;"undefined"!=typeof window&&(a="ontouchstart"in window||navigator.maxTouchPoints>0);var l=s&&a;function _setIsTouch(e){l=e}},"./src/utils/dragOrClickHelper.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"DragOrClickHelper",function(){return r});var n=o(/*! survey-core */"./src/entries/core.ts"),r=function(){function DragOrClickHelper(e){var t=this;this.dragHandler=e,this.onPointerUp=function(e){t.clearListeners()},this.tryToStartDrag=function(e){if(t.currentX=e.pageX,t.currentY=e.pageY,!t.isMicroMovement)return t.clearListeners(),t.dragHandler(t.pointerDownEvent,t.currentTarget,t.itemModel),!0}}return DragOrClickHelper.prototype.onPointerDown=function(e,t){if(n.IsTouch){this.dragHandler(e,e.currentTarget,t);return}this.pointerDownEvent=e,this.currentTarget=e.currentTarget,this.startX=e.pageX,this.startY=e.pageY,document.addEventListener("pointermove",this.tryToStartDrag),this.currentTarget.addEventListener("pointerup",this.onPointerUp),this.itemModel=t},Object.defineProperty(DragOrClickHelper.prototype,"isMicroMovement",{get:function(){var e=Math.abs(this.currentX-this.startX),t=Math.abs(this.currentY-this.startY);return e<10&&t<10},enumerable:!1,configurable:!0}),DragOrClickHelper.prototype.clearListeners=function(){this.pointerDownEvent&&(document.removeEventListener("pointermove",this.tryToStartDrag),this.currentTarget.removeEventListener("pointerup",this.onPointerUp))},DragOrClickHelper}()},"./src/utils/popup.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"PopupUtils",function(){return n});var n=function(){function PopupUtils(){}return PopupUtils.calculatePosition=function(e,t,o,n,r,i,s){void 0===s&&(s="flex");var a=e.left,l=e.top;return"flex"===s&&(a="center"==r?(e.left+e.right-o)/2:"left"==r?e.left-o:e.right),l="middle"==n?(e.top+e.bottom-t)/2:"top"==n?e.top-t:e.bottom,i&&"center"!=r&&"middle"!=n&&("top"==n?l+=e.height:l-=e.height),{left:Math.round(a),top:Math.round(l)}},PopupUtils.getCorrectedVerticalDimensions=function(e,t,o){var n={height:t,top:e};return e<0?n={height:t+e,top:0}:t+e>o&&(n={height:Math.min(t,o-e-PopupUtils.bottomIndent),top:e}),n},PopupUtils.updateHorizontalDimensions=function(e,t,o,n,r,i){void 0===r&&(r="flex"),void 0===i&&(i={left:0,right:0}),t+=i.left+i.right;var s=void 0,a=e;return"center"===n&&("fixed"===r?(e+t>o&&(s=o-e),a-=i.left):e<0?(a=i.left,s=Math.min(t,o)):t+e>o&&(a=Math.max(a=o-t,i.left),s=Math.min(t,o))),"left"===n&&e<0&&(a=i.left,s=Math.min(t,o)),"right"===n&&t+e>o&&(s=o-e),{width:s-i.left-i.right,left:a}},PopupUtils.updateVerticalPosition=function(e,t,o,n,r){var i=t-(e.top+(n?e.height:0)),s=t+e.bottom-(n?e.height:0)-r;return i>0&&s<=0&&"top"==o?o="bottom":s>0&&i<=0&&"bottom"==o?o="top":s>0&&i>0&&(o=i<s?"top":"bottom"),o},PopupUtils.calculatePopupDirection=function(e,t){var o;return"center"==t&&"middle"!=e?o=e:"center"!=t&&(o=t),o},PopupUtils.calculatePointerTarget=function(e,t,o,n,r,i,s){void 0===i&&(i=0),void 0===s&&(s=0);var a={};return"center"!=r?(a.top=e.top+e.height/2,a.left=e[r]):"middle"!=n&&(a.top=e[n],a.left=e.left+e.width/2),a.left=Math.round(a.left-o),a.top=Math.round(a.top-t),"left"==r&&(a.left-=i+s),"center"===r&&(a.left-=i),a},PopupUtils.bottomIndent=16,PopupUtils}()},"./src/utils/responsivity-manager.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"ResponsivityManager",function(){return s}),o.d(t,"VerticalResponsivityManager",function(){return a});var n,r=o(/*! ./utils */"./src/utils/utils.ts"),i=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),s=function(){function ResponsivityManager(e,t,o,n){var r=this;void 0===n&&(n=null),this.container=e,this.model=t,this.itemsSelector=o,this.dotsItemSize=n,this.resizeObserver=void 0,this.isInitialized=!1,this.minDimensionConst=56,this.separatorSize=17,this.separatorAddConst=1,this.paddingSizeConst=8,this.dotsSizeConst=48,this.recalcMinDimensionConst=!0,this.getComputedStyle=window.getComputedStyle.bind(window),this.model.updateCallback=function(e){e&&(r.isInitialized=!1),setTimeout(function(){r.process()},1)},"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(function(e){window.requestAnimationFrame(function(){r.process()})}),this.resizeObserver.observe(this.container.parentElement))}return ResponsivityManager.prototype.getDimensions=function(e){return{scroll:e.scrollWidth,offset:e.offsetWidth}},ResponsivityManager.prototype.getAvailableSpace=function(){var e=this.getComputedStyle(this.container),t=this.container.offsetWidth;return"border-box"===e.boxSizing&&(t-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)),t},ResponsivityManager.prototype.calcItemSize=function(e){return e.offsetWidth},ResponsivityManager.prototype.calcMinDimension=function(e){var t=this.minDimensionConst;return e.iconSize&&this.recalcMinDimensionConst&&(t=2*e.iconSize+this.paddingSizeConst),e.canShrink?t+(e.needSeparator?this.separatorSize:0):e.maxDimension},ResponsivityManager.prototype.calcItemsSizes=function(){var e=this,t=this.model.actions;(this.container.querySelectorAll(this.itemsSelector)||[]).forEach(function(o,n){var r=t[n];e.calcActionDimensions(r,o)})},ResponsivityManager.prototype.calcActionDimensions=function(e,t){e.maxDimension=this.calcItemSize(t),e.minDimension=this.calcMinDimension(e)},Object.defineProperty(ResponsivityManager.prototype,"isContainerVisible",{get:function(){return Object(r.isContainerVisible)(this.container)},enumerable:!1,configurable:!0}),ResponsivityManager.prototype.process=function(){var e;if(this.isContainerVisible&&!this.model.isResponsivenessDisabled){this.isInitialized||(this.model.setActionsMode("large"),this.calcItemsSizes(),this.isInitialized=!0);var t=this.dotsItemSize;if(!this.dotsItemSize){var o=null===(e=this.container)||void 0===e?void 0:e.querySelector(".sv-dots");t=o&&this.calcItemSize(o)||this.dotsSizeConst}this.model.fit(this.getAvailableSpace(),t)}},ResponsivityManager.prototype.dispose=function(){this.model.updateCallback=void 0,this.resizeObserver&&this.resizeObserver.disconnect()},ResponsivityManager}(),a=function(e){function VerticalResponsivityManager(t,o,n,r,i){void 0===i&&(i=40);var s=e.call(this,t,o,n,r)||this;return s.minDimensionConst=i,s.recalcMinDimensionConst=!1,s}return i(VerticalResponsivityManager,e),VerticalResponsivityManager.prototype.getDimensions=function(){return{scroll:this.container.scrollHeight,offset:this.container.offsetHeight}},VerticalResponsivityManager.prototype.getAvailableSpace=function(){var e=this.getComputedStyle(this.container),t=this.container.offsetHeight;return"border-box"===e.boxSizing&&(t-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)),t},VerticalResponsivityManager.prototype.calcItemSize=function(e){return e.offsetHeight},VerticalResponsivityManager.prototype.calcActionDimensions=function(e,t){e.maxDimension=this.calcItemSize(t),e.minDimension=this.calcItemSize(t)},VerticalResponsivityManager}(s)},"./src/utils/utils.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"unwrap",function(){return unwrap}),o.d(t,"getRenderedSize",function(){return getRenderedSize}),o.d(t,"getRenderedStyleSize",function(){return getRenderedStyleSize}),o.d(t,"doKey2ClickBlur",function(){return doKey2ClickBlur}),o.d(t,"doKey2ClickUp",function(){return doKey2ClickUp}),o.d(t,"doKey2ClickDown",function(){return doKey2ClickDown}),o.d(t,"sanitizeEditableContent",function(){return sanitizeEditableContent}),o.d(t,"Logger",function(){return a}),o.d(t,"showConfirmDialog",function(){return showConfirmDialog}),o.d(t,"mergeValues",function(){return mergeValues}),o.d(t,"getElementWidth",function(){return getElementWidth}),o.d(t,"isContainerVisible",function(){return isContainerVisible}),o.d(t,"classesToSelector",function(){return classesToSelector}),o.d(t,"compareVersions",function(){return compareVersions}),o.d(t,"confirmAction",function(){return confirmAction}),o.d(t,"confirmActionAsync",function(){return confirmActionAsync}),o.d(t,"detectIEOrEdge",function(){return detectIEOrEdge}),o.d(t,"detectIEBrowser",function(){return detectIEBrowser}),o.d(t,"loadFileFromBase64",function(){return loadFileFromBase64}),o.d(t,"isMobile",function(){return isMobile}),o.d(t,"isShadowDOM",function(){return isShadowDOM}),o.d(t,"getElement",function(){return getElement}),o.d(t,"isElementVisible",function(){return isElementVisible}),o.d(t,"findScrollableParent",function(){return findScrollableParent}),o.d(t,"scrollElementByChildId",function(){return scrollElementByChildId}),o.d(t,"navigateToUrl",function(){return navigateToUrl}),o.d(t,"wrapUrlForBackgroundImage",function(){return wrapUrlForBackgroundImage}),o.d(t,"createSvg",function(){return createSvg}),o.d(t,"getIconNameFromProxy",function(){return getIconNameFromProxy}),o.d(t,"increaseHeightByContent",function(){return increaseHeightByContent}),o.d(t,"getOriginalEvent",function(){return getOriginalEvent}),o.d(t,"preventDefaults",function(){return preventDefaults}),o.d(t,"findParentByClassNames",function(){return findParentByClassNames}),o.d(t,"getFirstVisibleChild",function(){return getFirstVisibleChild});var n=o(/*! ../localizablestring */"./src/localizablestring.ts"),r=o(/*! ./../settings */"./src/settings.ts"),i=o(/*! ../surveyStrings */"./src/surveyStrings.ts");function compareVersions(e,t){for(var o=/(\.0+)+$/,n=e.replace(o,"").split("."),r=t.replace(o,"").split("."),i=Math.min(n.length,r.length),s=0;s<i;s++){var a=parseInt(n[s],10)-parseInt(r[s],10);if(a)return a}return n.length-r.length}function confirmAction(e){return r.settings&&r.settings.confirmActionFunc?r.settings.confirmActionFunc(e):confirm(e)}function confirmActionAsync(e,t,o){var callbackFunc=function(e){e?t():o&&o()};r.settings&&r.settings.confirmActionAsync&&r.settings.confirmActionAsync(e,callbackFunc)||callbackFunc(confirmAction(e))}function detectIEBrowser(){if("undefined"==typeof window)return!1;var e=window.navigator.userAgent,t=e.indexOf("MSIE "),o=e.indexOf("Trident/");return t>-1||o>-1}function detectIEOrEdge(){if("undefined"==typeof window)return!1;if(void 0===detectIEOrEdge.isIEOrEdge){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),o=e.indexOf("Trident/"),n=e.indexOf("Edge/");detectIEOrEdge.isIEOrEdge=n>0||o>0||t>0}return detectIEOrEdge.isIEOrEdge}function loadFileFromBase64(e,t){try{for(var o=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(o.length),i=new Uint8Array(r),s=0;s<o.length;s++)i[s]=o.charCodeAt(s);var a=new Blob([r],{type:n});"undefined"!=typeof window&&window.navigator&&window.navigator.msSaveBlob&&window.navigator.msSaveOrOpenBlob(a,t)}catch(e){}}function isMobile(){return"undefined"!=typeof window&&void 0!==window.orientation}var isShadowDOM=function(e){return!!e&&!!("host"in e&&e.host)},getElement=function(e){var t=r.settings.environment.root;return"string"==typeof e?t.getElementById(e):e};function isElementVisible(e,t){if(void 0===t&&(t=0),void 0===r.settings.environment)return!1;var o=r.settings.environment.root,n=isShadowDOM(o)?o.host.clientHeight:o.documentElement.clientHeight,i=e.getBoundingClientRect(),s=Math.max(n,window.innerHeight),a=-t,l=s+t;return Math.max(a,i.top)<=Math.min(l,i.bottom)}function findScrollableParent(e){var t=r.settings.environment.root;return e?e.scrollHeight>e.clientHeight&&("scroll"===getComputedStyle(e).overflowY||"auto"===getComputedStyle(e).overflowY)||e.scrollWidth>e.clientWidth&&("scroll"===getComputedStyle(e).overflowX||"auto"===getComputedStyle(e).overflowX)?e:findScrollableParent(e.parentElement):isShadowDOM(t)?t.host:t.documentElement}function scrollElementByChildId(e){var t=r.settings.environment;if(t){var o=t.root.getElementById(e);if(o){var n=findScrollableParent(o);n&&n.dispatchEvent(new CustomEvent("scroll"))}}}function navigateToUrl(e){e&&"undefined"!=typeof window&&window.location&&(window.location.href=e)}function wrapUrlForBackgroundImage(e){return e?["url(",e,")"].join(""):""}function getIconNameFromProxy(e){return e&&r.settings.customIcons[e]||e}function createSvg(e,t,o,n,r,i){if(r){"auto"!==e&&(r.style.width=(e||t||16)+"px",r.style.height=(e||o||16)+"px");var s=r.childNodes[0],a=getIconNameFromProxy(n);s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+a);var l=r.getElementsByTagName("title")[0];if(i)l||(l=document.createElementNS("http://www.w3.org/2000/svg","title"),r.appendChild(l));else{l&&r.removeChild(l);return}l.textContent=i}}function unwrap(e){return"function"!=typeof e?e:e()}function getRenderedSize(e){if("string"==typeof e){if(!isNaN(Number(e)))return Number(e);if(e.includes("px"))return parseFloat(e)}if("number"==typeof e)return e}function getRenderedStyleSize(e){if(void 0===getRenderedSize(e))return e}var s="sv-focused--by-key";function doKey2ClickBlur(e){var t=e.target;t&&t.classList&&t.classList.remove(s)}function doKey2ClickUp(e,t){if(!e.target||"true"!==e.target.contentEditable){var o=e.target;if(o){var n=e.which||e.keyCode;if(9===n){o.classList&&!o.classList.contains(s)&&o.classList.add(s);return}if(t){if(!t.__keyDownReceived)return;t.__keyDownReceived=!1}13===n||32===n?o.click&&o.click():(!t||t.processEsc)&&27===n&&o.blur&&o.blur()}}}function doKey2ClickDown(e,t){if(void 0===t&&(t={processEsc:!0}),t&&(t.__keyDownReceived=!0),!e.target||"true"!==e.target.contentEditable){var o=e.which||e.keyCode,n=[13,32];t.processEsc&&n.push(27),-1!==n.indexOf(o)&&e.preventDefault()}}function increaseHeightByContent(e,t){if(e){t||(t=function(e){return window.getComputedStyle(e)});var o=t(e);e.style.height="auto",e.style.height=e.scrollHeight+parseFloat(o.borderTopWidth)+parseFloat(o.borderBottomWidth)+"px"}}function getOriginalEvent(e){return e.originalEvent||e}function preventDefaults(e){e.preventDefault(),e.stopPropagation()}function classesToSelector(e){return e.replace(/\s*?([\w-]+)\s*?/g,".$1")}function getElementWidth(e){return getComputedStyle?Number.parseFloat(getComputedStyle(e).width):e.offsetWidth}function isContainerVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function getFirstVisibleChild(e){for(var t,o=0;o<e.children.length;o++)t||"none"===getComputedStyle(e.children[o]).display||(t=e.children[o]);return t}function findParentByClassNames(e,t){if(e)return t.every(function(t){return!t||e.classList.contains(t)})?e:findParentByClassNames(e.parentElement,t)}function sanitizeEditableContent(e){if(window.getSelection&&document.createRange&&e.childNodes.length>0){var t=document.getSelection(),o=t.getRangeAt(0);o.setStart(o.endContainer,o.endOffset),o.setEndAfter(e.lastChild),t.removeAllRanges(),t.addRange(o);var n=t.toString().replace(/\n/g,"").length;e.innerText=e.innerText.replace(/\n/g,""),(o=document.createRange()).setStart(e.childNodes[0],e.innerText.length-n),o.collapse(!0),t.removeAllRanges(),t.addRange(o)}}function mergeValues(e,t){if(t&&e&&"object"==typeof t)for(var o in e){var n=e[o];!Array.isArray(n)&&n&&"object"==typeof n?(t[o]&&"object"==typeof t[o]||(t[o]={}),mergeValues(n,t[o])):t[o]=n}}var a=function(){function Logger(){this._result=""}return Logger.prototype.log=function(e){this._result+="->"+e},Object.defineProperty(Logger.prototype,"result",{get:function(){return this._result},enumerable:!1,configurable:!0}),Logger}();function showConfirmDialog(e,t,o){var s=new n.LocalizableString(void 0),a=r.settings.showDialog({componentName:"sv-string-viewer",data:{locStr:s,locString:s,model:s},onApply:function(){return t(!0),!0},onCancel:function(){return t(!1),!1},title:e,displayMode:"popup",isFocusedContent:!1,cssClass:"sv-popup--confirm-delete"},document.body),l=a.footerToolbar,u=l.getActionById("apply"),c=l.getActionById("cancel");return c.title=i.surveyLocalization.getString("cancel"),c.innerCss="sv-popup__body-footer-item sv-popup__button sd-btn sd-btn--small",u.title=o||i.surveyLocalization.getString("ok"),u.innerCss="sv-popup__body-footer-item sv-popup__button sv-popup__button--danger sd-btn sd-btn--small sd-btn--danger",a.width="452px",!0}},"./src/validator.ts":function(e,t,o){"use strict";o.r(t),o.d(t,"ValidatorResult",function(){return ValidatorResult}),o.d(t,"SurveyValidator",function(){return c}),o.d(t,"ValidatorRunner",function(){return p}),o.d(t,"NumericValidator",function(){return d}),o.d(t,"TextValidator",function(){return h}),o.d(t,"AnswerCountValidator",function(){return g}),o.d(t,"RegexValidator",function(){return f}),o.d(t,"EmailValidator",function(){return y}),o.d(t,"ExpressionValidator",function(){return m});var n,r=o(/*! ./base */"./src/base.ts"),i=o(/*! ./error */"./src/error.ts"),s=o(/*! ./jsonobject */"./src/jsonobject.ts"),a=o(/*! ./conditions */"./src/conditions.ts"),l=o(/*! ./helpers */"./src/helpers.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),ValidatorResult=function(e,t){void 0===t&&(t=null),this.value=e,this.error=t},c=function(e){function SurveyValidator(){var t=e.call(this)||this;return t.createLocalizableString("text",t,!0),t}return u(SurveyValidator,e),SurveyValidator.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.errorOwner&&this.errorOwner.getSurvey?this.errorOwner.getSurvey():null},Object.defineProperty(SurveyValidator.prototype,"text",{get:function(){return this.getLocalizableStringText("text")},set:function(e){this.setLocalizableStringText("text",e)},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyValidator.prototype,"isValidateAllValues",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyValidator.prototype,"locText",{get:function(){return this.getLocalizableString("text")},enumerable:!1,configurable:!0}),SurveyValidator.prototype.getErrorText=function(e){return this.text?this.text:this.getDefaultErrorText(e)},SurveyValidator.prototype.getDefaultErrorText=function(e){return""},SurveyValidator.prototype.validate=function(e,t,o,n){return void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),null},Object.defineProperty(SurveyValidator.prototype,"isRunning",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(SurveyValidator.prototype,"isAsync",{get:function(){return!1},enumerable:!1,configurable:!0}),SurveyValidator.prototype.getLocale=function(){return this.errorOwner?this.errorOwner.getLocale():""},SurveyValidator.prototype.getMarkdownHtml=function(e,t){return this.errorOwner?this.errorOwner.getMarkdownHtml(e,t):void 0},SurveyValidator.prototype.getRenderer=function(e){return this.errorOwner?this.errorOwner.getRenderer(e):null},SurveyValidator.prototype.getRendererContext=function(e){return this.errorOwner?this.errorOwner.getRendererContext(e):e},SurveyValidator.prototype.getProcessedText=function(e){return this.errorOwner?this.errorOwner.getProcessedText(e):e},SurveyValidator.prototype.createCustomError=function(e){var t=this,o=new i.CustomError(this.getErrorText(e),this.errorOwner);return o.onUpdateErrorTextCallback=function(o){return o.text=t.getErrorText(e)},o},SurveyValidator.prototype.toString=function(){var e=this.getType().replace("validator","");return this.text&&(e+=", "+this.text),e},SurveyValidator}(r.Base),p=function(){function ValidatorRunner(){}return ValidatorRunner.prototype.run=function(e){var t=this,o=[],n=null,r=null;this.prepareAsyncValidators();for(var i=[],s=e.getValidators(),a=0;a<s.length;a++){var l=s[a];!n&&l.isValidateAllValues&&(n=e.getDataFilteredValues(),r=e.getDataFilteredProperties()),l.isAsync&&(this.asyncValidators.push(l),l.onAsyncCompleted=function(e){if(e&&e.error&&i.push(e.error),t.onAsyncCompleted){for(var o=0;o<t.asyncValidators.length;o++)if(t.asyncValidators[o].isRunning)return;t.onAsyncCompleted(i)}})}s=e.getValidators();for(var a=0;a<s.length;a++){var l=s[a],u=l.validate(e.validatedValue,e.getValidatorTitle(),n,r);u&&u.error&&o.push(u.error)}return 0==this.asyncValidators.length&&this.onAsyncCompleted&&this.onAsyncCompleted([]),o},ValidatorRunner.prototype.prepareAsyncValidators=function(){if(this.asyncValidators)for(var e=0;e<this.asyncValidators.length;e++)this.asyncValidators[e].onAsyncCompleted=null;this.asyncValidators=[]},ValidatorRunner}(),d=function(e){function NumericValidator(t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n=e.call(this)||this;return n.minValue=t,n.maxValue=o,n}return u(NumericValidator,e),NumericValidator.prototype.getType=function(){return"numericvalidator"},NumericValidator.prototype.validate=function(e,t,o,n){if(void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),this.isValueEmpty(e))return null;if(!l.Helpers.isNumber(e))return new ValidatorResult(null,new i.RequreNumericError(this.text,this.errorOwner));var r=new ValidatorResult(l.Helpers.getNumber(e));return null!==this.minValue&&this.minValue>r.value||null!==this.maxValue&&this.maxValue<r.value?(r.error=this.createCustomError(t),r):"number"==typeof e?null:r},NumericValidator.prototype.getDefaultErrorText=function(e){var t=e||this.getLocalizationString("value");return null!==this.minValue&&null!==this.maxValue?this.getLocalizationFormatString("numericMinMax",t,this.minValue,this.maxValue):null!==this.minValue?this.getLocalizationFormatString("numericMin",t,this.minValue):this.getLocalizationFormatString("numericMax",t,this.maxValue)},Object.defineProperty(NumericValidator.prototype,"minValue",{get:function(){return this.getPropertyValue("minValue")},set:function(e){this.setPropertyValue("minValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(NumericValidator.prototype,"maxValue",{get:function(){return this.getPropertyValue("maxValue")},set:function(e){this.setPropertyValue("maxValue",e)},enumerable:!1,configurable:!0}),NumericValidator}(c),h=function(e){function TextValidator(){return e.call(this)||this}return u(TextValidator,e),TextValidator.prototype.getType=function(){return"textvalidator"},TextValidator.prototype.validate=function(e,t,o,n){return(void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),this.isValueEmpty(e))?null:!this.allowDigits&&!/^[A-Za-z\s\.]*$/.test(e)||this.minLength>0&&e.length<this.minLength||this.maxLength>0&&e.length>this.maxLength?new ValidatorResult(null,this.createCustomError(t)):null},TextValidator.prototype.getDefaultErrorText=function(e){return this.minLength>0&&this.maxLength>0?this.getLocalizationFormatString("textMinMaxLength",this.minLength,this.maxLength):this.minLength>0?this.getLocalizationFormatString("textMinLength",this.minLength):this.getLocalizationFormatString("textMaxLength",this.maxLength)},Object.defineProperty(TextValidator.prototype,"minLength",{get:function(){return this.getPropertyValue("minLength")},set:function(e){this.setPropertyValue("minLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(TextValidator.prototype,"maxLength",{get:function(){return this.getPropertyValue("maxLength")},set:function(e){this.setPropertyValue("maxLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(TextValidator.prototype,"allowDigits",{get:function(){return this.getPropertyValue("allowDigits")},set:function(e){this.setPropertyValue("allowDigits",e)},enumerable:!1,configurable:!0}),TextValidator}(c),g=function(e){function AnswerCountValidator(t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n=e.call(this)||this;return n.minCount=t,n.maxCount=o,n}return u(AnswerCountValidator,e),AnswerCountValidator.prototype.getType=function(){return"answercountvalidator"},AnswerCountValidator.prototype.validate=function(e,t,o,n){if(void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),null==e||e.constructor!=Array)return null;var r=e.length;return 0==r?null:this.minCount&&r<this.minCount?new ValidatorResult(null,this.createCustomError(this.getLocalizationFormatString("minSelectError",this.minCount))):this.maxCount&&r>this.maxCount?new ValidatorResult(null,this.createCustomError(this.getLocalizationFormatString("maxSelectError",this.maxCount))):null},AnswerCountValidator.prototype.getDefaultErrorText=function(e){return e},Object.defineProperty(AnswerCountValidator.prototype,"minCount",{get:function(){return this.getPropertyValue("minCount")},set:function(e){this.setPropertyValue("minCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(AnswerCountValidator.prototype,"maxCount",{get:function(){return this.getPropertyValue("maxCount")},set:function(e){this.setPropertyValue("maxCount",e)},enumerable:!1,configurable:!0}),AnswerCountValidator}(c),f=function(e){function RegexValidator(t){void 0===t&&(t=null);var o=e.call(this)||this;return o.regex=t,o}return u(RegexValidator,e),RegexValidator.prototype.getType=function(){return"regexvalidator"},RegexValidator.prototype.validate=function(e,t,o,n){if(void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),!this.regex||this.isValueEmpty(e))return null;var r=new RegExp(this.regex);if(Array.isArray(e))for(var i=0;i<e.length;i++){var s=this.hasError(r,e[i],t);if(s)return s}return this.hasError(r,e,t)},RegexValidator.prototype.hasError=function(e,t,o){return e.test(t)?null:new ValidatorResult(t,this.createCustomError(o))},Object.defineProperty(RegexValidator.prototype,"regex",{get:function(){return this.getPropertyValue("regex")},set:function(e){this.setPropertyValue("regex",e)},enumerable:!1,configurable:!0}),RegexValidator}(c),y=function(e){function EmailValidator(){var t=e.call(this)||this;return t.re=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()=[\]\.,;:\s@\"]+\.)+[^<>()=[\]\.,;:\s@\"]{2,})$/i,t}return u(EmailValidator,e),EmailValidator.prototype.getType=function(){return"emailvalidator"},EmailValidator.prototype.validate=function(e,t,o,n){return(void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),!e||this.re.test(e))?null:new ValidatorResult(e,this.createCustomError(t))},EmailValidator.prototype.getDefaultErrorText=function(e){return this.getLocalizationString("invalidEmail")},EmailValidator}(c),m=function(e){function ExpressionValidator(t){void 0===t&&(t=null);var o=e.call(this)||this;return o.conditionRunner=null,o.isRunningValue=!1,o.expression=t,o}return u(ExpressionValidator,e),ExpressionValidator.prototype.getType=function(){return"expressionvalidator"},Object.defineProperty(ExpressionValidator.prototype,"isValidateAllValues",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(ExpressionValidator.prototype,"isAsync",{get:function(){return!!this.ensureConditionRunner()&&this.conditionRunner.isAsync},enumerable:!1,configurable:!0}),Object.defineProperty(ExpressionValidator.prototype,"isRunning",{get:function(){return this.isRunningValue},enumerable:!1,configurable:!0}),ExpressionValidator.prototype.validate=function(e,t,o,n){var r=this;if(void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),!this.ensureConditionRunner())return null;this.conditionRunner.onRunComplete=function(o){r.isRunningValue=!1,r.onAsyncCompleted&&r.onAsyncCompleted(r.generateError(o,e,t))},this.isRunningValue=!0;var i=this.conditionRunner.run(o,n);return this.conditionRunner.isAsync?null:(this.isRunningValue=!1,this.generateError(i,e,t))},ExpressionValidator.prototype.generateError=function(e,t,o){return e?null:new ValidatorResult(t,this.createCustomError(o))},ExpressionValidator.prototype.getDefaultErrorText=function(e){return this.getLocalizationFormatString("invalidExpression",this.expression)},ExpressionValidator.prototype.ensureConditionRunner=function(){return this.conditionRunner?(this.conditionRunner.expression=this.expression,!0):!!this.expression&&(this.conditionRunner=new a.ConditionRunner(this.expression),!0)},Object.defineProperty(ExpressionValidator.prototype,"expression",{get:function(){return this.getPropertyValue("expression")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),ExpressionValidator}(c);s.Serializer.addClass("surveyvalidator",[{name:"text",serializationProperty:"locText"}]),s.Serializer.addClass("numericvalidator",["minValue:number","maxValue:number"],function(){return new d},"surveyvalidator"),s.Serializer.addClass("textvalidator",[{name:"minLength:number",default:0},{name:"maxLength:number",default:0},{name:"allowDigits:boolean",default:!0}],function(){return new h},"surveyvalidator"),s.Serializer.addClass("answercountvalidator",["minCount:number","maxCount:number"],function(){return new g},"surveyvalidator"),s.Serializer.addClass("regexvalidator",["regex"],function(){return new f},"surveyvalidator"),s.Serializer.addClass("emailvalidator",[],function(){return new y},"surveyvalidator"),s.Serializer.addClass("expressionvalidator",["expression:condition"],function(){return new m},"surveyvalidator")}})}}]);